/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={679:(e,t,r)=>{"use strict";r.d(t,{H:()=>c,_:()=>s});const n=new WeakMap,o=new WeakMap;class i{constructor(){this.onabort=null,n.set(this,[]),o.set(this,!1)}get aborted(){if(!o.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return o.get(this)}static get none(){return new i}addEventListener(e,t){if(!n.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");n.get(this).push(t)}removeEventListener(e,t){if(!n.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");const r=n.get(this),o=r.indexOf(t);o>-1&&r.splice(o,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}function a(e){if(e.aborted)return;e.onabort&&e.onabort.call(e);const t=n.get(e);t&&t.slice().forEach((t=>{t.call(e,{type:"abort"})})),o.set(e,!0)}class s extends Error{constructor(e){super(e),this.name="AbortError"}}class c{constructor(e){if(this._signal=new i,e){Array.isArray(e)||(e=arguments);for(const t of e)t.aborted?this.abort():t.addEventListener("abort",(()=>{this.abort()}))}}get signal(){return this._signal}abort(){a(this._signal)}static timeout(e){const t=new i,r=setTimeout(a,e,t);return"function"==typeof r.unref&&r.unref(),t}}},951:(e,t,r)=>{"use strict";r.d(t,{q:()=>i});var n=r(771),o=r(909);function i(e){return function(t,r){const i=(0,n.Yz)(),a=(null==r?void 0:r.tracingOptions)||{},s=Object.assign({kind:n.MU.INTERNAL},a.spanOptions),c=e.packagePrefix?`${e.packagePrefix}.${t}`:t;let l;l=function(){var e;if("undefined"==typeof process)return!1;const t=null===(e=process.env.AZURE_TRACING_DISABLED)||void 0===e?void 0:e.toLowerCase();return"false"!==t&&"0"!==t&&Boolean(t)}()?o.g4.wrapSpanContext(o.Rr):i.startSpan(c,s,a.tracingContext),e.namespace&&l.setAttribute("az.namespace",e.namespace);let d=a.spanOptions||{};l.isRecording()&&e.namespace&&(d=Object.assign(Object.assign({},a.spanOptions),{attributes:Object.assign(Object.assign({},s.attributes),{"az.namespace":e.namespace})}));const u=Object.assign(Object.assign({},a),{spanOptions:d,tracingContext:(0,n.WZ)(a.tracingContext||n.Do.active(),l)});return{span:l,updatedOptions:Object.assign(Object.assign({},r),{tracingOptions:u})}}}},771:(e,t,r)=>{"use strict";r.d(t,{BM:()=>a,Do:()=>c,MU:()=>n,Qn:()=>l,WZ:()=>i,Yz:()=>s});var n,o=r(909);function i(e,t){return o.g4.setSpan(e,t)}function a(e){return o.g4.isSpanContextValid(e)}function s(e,t){return o.g4.getTracer(e||"azure/core-tracing",t)}!function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(n||(n={}));const c=o.Do;var l;!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(l||(l={}))},572:(e,t,r)=>{"use strict";function n(e){throw new Error("Identity plugins are not supported in browser environments.")}r.r(t),r.d(t,{AggregateAuthenticationError:()=>g,AggregateAuthenticationErrorName:()=>h,AuthenticationError:()=>p,AuthenticationErrorName:()=>m,AuthenticationRequiredError:()=>y,AuthorizationCodeCredential:()=>Zd,AzureAuthorityHosts:()=>At,AzureCliCredential:()=>tn,AzurePowerShellCredential:()=>ru,ChainedTokenCredential:()=>x,ClientCertificateCredential:()=>Xr,ClientSecretCredential:()=>Wr,CredentialUnavailableError:()=>u,CredentialUnavailableErrorName:()=>d,DefaultAzureCredential:()=>R,DeviceCodeCredential:()=>Qd,EnvironmentCredential:()=>jt,InteractiveBrowserCredential:()=>jd,ManagedIdentityCredential:()=>Gd,OnBehalfOfCredential:()=>lu,UsernamePasswordCredential:()=>Yd,VisualStudioCodeCredential:()=>iu,deserializeAuthenticationRecord:()=>Dt,getDefaultAzureCredential:()=>du,logger:()=>i,serializeAuthenticationRecord:()=>Ht,useIdentityPlugin:()=>n});var o=r(901);const i=(0,o.YR)("identity");function a(e){return`SUCCESS. Scopes: ${Array.isArray(e)?e.join(", "):e}.`}function s(e,t){let r="ERROR.";return(null==e?void 0:e.length)&&(r+=` Scopes: ${Array.isArray(e)?e.join(", "):e}.`),`${r} Error message: ${"string"==typeof t?t:t.message}.`}function c(e,t,r=i){const n=t?`${t.fullTitle} ${e}`:e;return{title:e,fullTitle:n,info:function(e){r.info(`${n} =>`,e)},warning:function(e){r.warning(`${n} =>`,e)}}}function l(e,t=i){const r=c(e,void 0,t);return Object.assign(Object.assign({},r),{parent:t,getToken:c("=> getToken()",r,t)})}const d="CredentialUnavailableError";class u extends Error{constructor(e){super(e),this.name=d}}const m="AuthenticationError";class p extends Error{constructor(e,t){let r={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(function(e){return e&&"string"==typeof e.error&&"string"==typeof e.error_description}(t))r=f(t);else if("string"==typeof t)try{r=f(JSON.parse(t))}catch(n){r=400===e?{error:"authority_not_found",errorDescription:"The specified authority URL was not found."}:{error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:\n\n${t}`}}else r={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${r.error} Status code: ${e}\nMore details:\n${r.errorDescription}`),this.statusCode=e,this.errorResponse=r,this.name=m}}const h="AggregateAuthenticationError";class g extends Error{constructor(e,t){super(`${t}\n${e.join("\n")}`),this.errors=e,this.name=h}}function f(e){return{error:e.error,errorDescription:e.error_description,correlationId:e.correlation_id,errorCodes:e.error_codes,timestamp:e.timestamp,traceId:e.trace_id}}class y extends Error{constructor(e){super(e.message),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}}var b=r(951),v=r(771);const S=(0,b.q)({packagePrefix:"",namespace:"Microsoft.AAD"});async function N(e,t,r,n=S){const{updatedOptions:o,span:i}=n(e,t);try{const e=await r(o,i);return i.setStatus({code:v.Qn.OK}),e}catch(e){throw i.setStatus({code:v.Qn.ERROR,message:e.message}),e}finally{i.end()}}const C=l("ChainedTokenCredential");class x{constructor(...e){this.UnavailableMessage="ChainedTokenCredential => failed to retrieve a token from the included credentials",this._sources=[],this._sources=e}async getToken(e,t){let r=null,n="";const o=[],{span:i,updatedOptions:c}=S("ChainedTokenCredential.getToken",t);for(let t=0;t<this._sources.length&&null===r;t++)try{r=await this._sources[t].getToken(e,c),n=this._sources[t].constructor.name}catch(t){if("CredentialUnavailableError"!==t.name&&"AuthenticationRequiredError"!==t.name)throw C.getToken.info(s(e,t)),t;o.push(t)}if(!r&&o.length>0){const t=new g(o,"ChainedTokenCredential authentication failed.");throw i.setStatus({code:v.Qn.ERROR,message:t.message}),C.getToken.info(s(e,t)),t}if(i.end(),C.getToken.info(`Result for ${n}: ${a(e)}`),null===r)throw new u("Failed to retrieve a valid token");return r}}const w=new Error("DefaultAzureCredential is not supported in the browser. Use InteractiveBrowserCredential instead."),E=l("DefaultAzureCredential");class R extends x{constructor(e){throw super(),E.info(s("",w)),w}getToken(){throw E.getToken.info(s("",w)),w}}var T=function(e,t){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},T(e,t)};function P(e,t){function r(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var I,_,A,O,k,M,q,z,B,H,D,L,U,j,F,K,G,V,$,Q;!function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a]}(["openid","profile","offline_access"],["email"]),function(e){e.CONTENT_TYPE="Content-Type",e.RETRY_AFTER="Retry-After",e.CCS_HEADER="X-AnchorMailbox"}(I||(I={})),function(e){e.ID_TOKEN="idtoken",e.CLIENT_INFO="client.info",e.ADAL_ID_TOKEN="adal.idtoken",e.ERROR="error",e.ERROR_DESC="error.description",e.ACTIVE_ACCOUNT="active-account"}(_||(_={})),function(e){e.COMMON="common",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers"}(A||(A={})),function(e){e.CLIENT_ID="client_id",e.REDIRECT_URI="redirect_uri",e.RESPONSE_TYPE="response_type",e.RESPONSE_MODE="response_mode",e.GRANT_TYPE="grant_type",e.CLAIMS="claims",e.SCOPE="scope",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.REFRESH_TOKEN="refresh_token",e.EXPIRES_IN="expires_in",e.STATE="state",e.NONCE="nonce",e.PROMPT="prompt",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info",e.CODE="code",e.CODE_CHALLENGE="code_challenge",e.CODE_CHALLENGE_METHOD="code_challenge_method",e.CODE_VERIFIER="code_verifier",e.CLIENT_REQUEST_ID="client-request-id",e.X_CLIENT_SKU="x-client-SKU",e.X_CLIENT_VER="x-client-VER",e.X_CLIENT_OS="x-client-OS",e.X_CLIENT_CPU="x-client-CPU",e.X_CLIENT_CURR_TELEM="x-client-current-telemetry",e.X_CLIENT_LAST_TELEM="x-client-last-telemetry",e.X_MS_LIB_CAPABILITY="x-ms-lib-capability",e.POST_LOGOUT_URI="post_logout_redirect_uri",e.ID_TOKEN_HINT="id_token_hint",e.DEVICE_CODE="device_code",e.CLIENT_SECRET="client_secret",e.CLIENT_ASSERTION="client_assertion",e.CLIENT_ASSERTION_TYPE="client_assertion_type",e.TOKEN_TYPE="token_type",e.REQ_CNF="req_cnf",e.OBO_ASSERTION="assertion",e.REQUESTED_TOKEN_USE="requested_token_use",e.ON_BEHALF_OF="on_behalf_of",e.FOCI="foci",e.CCS_HEADER="X-AnchorMailbox"}(O||(O={})),function(e){e.ACCESS_TOKEN="access_token",e.XMS_CC="xms_cc"}(k||(k={})),function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ID_TOKEN="id_token",e.DOMAIN_HINT="domain_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier"}(M||(M={})),function(e){e.QUERY="query",e.FRAGMENT="fragment",e.FORM_POST="form_post"}(q||(q={})),function(e){e.IMPLICIT_GRANT="implicit",e.AUTHORIZATION_CODE_GRANT="authorization_code",e.CLIENT_CREDENTIALS_GRANT="client_credentials",e.RESOURCE_OWNER_PASSWORD_GRANT="password",e.REFRESH_TOKEN_GRANT="refresh_token",e.DEVICE_CODE_GRANT="device_code",e.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"}(z||(z={})),function(e){e.MSSTS_ACCOUNT_TYPE="MSSTS",e.ADFS_ACCOUNT_TYPE="ADFS",e.MSAV1_ACCOUNT_TYPE="MSA",e.GENERIC_ACCOUNT_TYPE="Generic"}(B||(B={})),function(e){e.CACHE_KEY_SEPARATOR="-",e.CLIENT_INFO_SEPARATOR="."}(H||(H={})),function(e){e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",e.REFRESH_TOKEN="RefreshToken"}(D||(D={})),function(e){e.ACCOUNT="Account",e.CREDENTIAL="Credential",e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.REFRESH_TOKEN="RefreshToken",e.APP_METADATA="AppMetadata",e.TEMPORARY="TempCache",e.TELEMETRY="Telemetry",e.UNDEFINED="Undefined",e.THROTTLING="Throttling"}(L||(L={})),function(e){e[e.ADFS=1001]="ADFS",e[e.MSA=1002]="MSA",e[e.MSSTS=1003]="MSSTS",e[e.GENERIC=1004]="GENERIC",e[e.ACCESS_TOKEN=2001]="ACCESS_TOKEN",e[e.REFRESH_TOKEN=2002]="REFRESH_TOKEN",e[e.ID_TOKEN=2003]="ID_TOKEN",e[e.APP_METADATA=3001]="APP_METADATA",e[e.UNDEFINED=9999]="UNDEFINED"}(U||(U={})),function(e){e.CONFIG="config",e.CACHE="cache",e.NETWORK="network"}(j||(j={})),function(e){e.POP="pop",e.BEARER="Bearer"}(F||(F={})),function(e){e.username="username",e.password="password"}(K||(K={})),function(e){e[e.httpSuccess=200]="httpSuccess",e[e.httpBadRequest=400]="httpBadRequest"}(G||(G={})),function(e){e.FAILED_AUTO_DETECTION="1",e.INTERNAL_CACHE="2",e.ENVIRONMENT_VARIABLE="3",e.IMDS="4"}(V||(V={})),function(e){e.CONFIGURED_MATCHES_DETECTED="1",e.CONFIGURED_NO_AUTO_DETECTION="2",e.CONFIGURED_NOT_DETECTED="3",e.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",e.AUTO_DETECTION_REQUESTED_FAILED="5"}($||($={})),function(e){e.NO_CACHE_HIT="0",e.FORCE_REFRESH="1",e.NO_CACHED_ACCESS_TOKEN="2",e.CACHED_ACCESS_TOKEN_EXPIRED="3",e.REFRESH_CACHED_ACCESS_TOKEN="4"}(Q||(Q={}));var W,Y="unexpected_error",J="Unexpected error in authentication.",X=function(e){function t(r,n,o){var i=this,a=n?r+": "+n:r;return i=e.call(this,a)||this,Object.setPrototypeOf(i,t.prototype),i.errorCode=r||"",i.errorMessage=n||"",i.subError=o||"",i.name="AuthError",i}return P(t,e),t.createUnexpectedError=function(e){return new t(Y,J+": "+e)},t}(Error),Z="client_info_decoding_error",ee="The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause.",te="client_info_empty_error",re="The client info was empty. Please review the trace to determine the root cause.",ne="token_parsing_error",oe="Token cannot be parsed. Please review stack trace to determine root cause.",ie="null_or_empty_token",ae="The token is null or empty. Please review the trace to determine the root cause.",se="endpoints_resolution_error",ce="Error: could not resolve endpoints. Please check network and try again.",le="network_error",de="Network request failed. Please check network trace to determine root cause.",ue="openid_config_error",me="Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",pe="hash_not_deserialized",he="The hash parameters could not be deserialized. Please review the trace to determine the root cause.",ge="invalid_state",fe="State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState().",ye="state_mismatch",be="State mismatch error. Please check your network. Continued requests may cause cache overflow.",ve="state_not_found",Se="State not found",Ne="nonce_mismatch",Ce="Nonce mismatch error. This may be caused by a race condition in concurrent requests.",xe="nonce_not_found",we="nonce not found",Ee="no_tokens_found",Re="No tokens were found for the given scopes, and no authorization code was passed to acquireToken. You must retrieve an authorization code before making a call to acquireToken().",Te="multiple_matching_tokens",Pe="The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",Ie="multiple_matching_accounts",_e="The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",Ae="multiple_matching_appMetadata",Oe="The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",ke="request_cannot_be_made",Me="Token request cannot be made without authorization code or refresh token.",qe="cannot_append_empty_scope",ze="Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info.",Be="cannot_remove_empty_scope",He="Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info.",De="cannot_append_scopeset",Le="Cannot append ScopeSet due to error.",Ue="empty_input_scopeset",je="Empty input ScopeSet cannot be processed.",Fe="device_code_polling_cancelled",Ke="Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",Ge="device_code_expired",Ve="Device code is expired.",$e="device_code_unknown_error",Qe="Device code stopped polling for unknown reasons.",We="no_account_in_silent_request",Ye="Please pass an account object, silent flow is not supported without account information",Je="invalid_cache_record",Xe="Cache record object was null or undefined.",Ze="invalid_cache_environment",et="Invalid environment when attempting to create cache entry",tt="no_account_found",rt="No account found in cache for given key.",nt="no cache plugin set on CacheManager",ot="ICachePlugin needs to be set before using readFromStorage or writeFromStorage",it="no_crypto_object",at="No crypto object detected. This is required for the following operation: ",st="invalid_cache_type",ct="Invalid cache type",lt="unexpected_account_type",dt="Unexpected account type.",ut="unexpected_credential_type",mt="Unexpected credential type.",pt="invalid_assertion",ht="Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",gt="invalid_client_credential",ft="Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",yt="token_refresh_required",bt="Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",vt="user_timeout_reached",St="User defined timeout for device code polling reached",Nt="token_claims_cnf_required_for_signedjwt",Ct="Cannot generate a POP jwt if the token_claims are not populated",xt="authorization_code_missing_from_server_response",wt="Server response does not contain an authorization code to proceed",Et=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="ClientAuthError",Object.setPrototypeOf(o,t.prototype),o}return P(t,e),t.createClientInfoDecodingError=function(e){return new t(Z,ee+" Failed with error: "+e)},t.createClientInfoEmptyError=function(){return new t(te,""+re)},t.createTokenParsingError=function(e){return new t(ne,oe+" Failed with error: "+e)},t.createTokenNullOrEmptyError=function(e){return new t(ie,ae+" Raw Token Value: "+e)},t.createEndpointDiscoveryIncompleteError=function(e){return new t(se,ce+" Detail: "+e)},t.createNetworkError=function(e,r){return new t(le,de+" | Fetch client threw: "+r+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToGetOpenidConfigError=function(e){return new t(ue,me+" Attempted to retrieve endpoints from: "+e)},t.createHashNotDeserializedError=function(e){return new t(pe,he+" Given Object: "+e)},t.createInvalidStateError=function(e,r){return new t(ge,fe+" Invalid State: "+e+", Root Err: "+r)},t.createStateMismatchError=function(){return new t(ye,be)},t.createStateNotFoundError=function(e){return new t(ve,Se+":  "+e)},t.createNonceMismatchError=function(){return new t(Ne,Ce)},t.createNonceNotFoundError=function(e){return new t(xe,we+":  "+e)},t.createNoTokensFoundError=function(){return new t(Ee,Re)},t.createMultipleMatchingTokensInCacheError=function(){return new t(Te,Pe+".")},t.createMultipleMatchingAccountsInCacheError=function(){return new t(Ie,_e)},t.createMultipleMatchingAppMetadataInCacheError=function(){return new t(Ae,Oe)},t.createTokenRequestCannotBeMadeError=function(){return new t(ke,Me)},t.createAppendEmptyScopeToSetError=function(e){return new t(qe,ze+" Given Scope: "+e)},t.createRemoveEmptyScopeFromSetError=function(e){return new t(Be,He+" Given Scope: "+e)},t.createAppendScopeSetError=function(e){return new t(De,Le+" Detail Error: "+e)},t.createEmptyInputScopeSetError=function(){return new t(Ue,""+je)},t.createDeviceCodeCancelledError=function(){return new t(Fe,""+Ke)},t.createDeviceCodeExpiredError=function(){return new t(Ge,""+Ve)},t.createDeviceCodeUnknownError=function(){return new t($e,""+Qe)},t.createNoAccountInSilentRequestError=function(){return new t(We,""+Ye)},t.createNullOrUndefinedCacheRecord=function(){return new t(Je,Xe)},t.createInvalidCacheEnvironmentError=function(){return new t(Ze,et)},t.createNoAccountFoundError=function(){return new t(tt,rt)},t.createCachePluginError=function(){return new t(nt,""+ot)},t.createNoCryptoObjectError=function(e){return new t(it,""+at+e)},t.createInvalidCacheTypeError=function(){return new t(st,""+ct)},t.createUnexpectedAccountTypeError=function(){return new t(lt,""+dt)},t.createUnexpectedCredentialTypeError=function(){return new t(ut,""+mt)},t.createInvalidAssertionError=function(){return new t(pt,""+ht)},t.createInvalidCredentialError=function(){return new t(gt,""+ft)},t.createRefreshRequiredError=function(){return new t(yt,bt)},t.createUserTimeoutReachedError=function(){return new t(vt,St)},t.createTokenClaimsRequiredError=function(){return new t(Nt,Ct)},t.createNoAuthCodeInServerResponseError=function(){return new t(xt,wt)},t}(X),Rt=function(){function e(){}return e.decodeAuthToken=function(t){if(e.isEmpty(t))throw Et.createTokenNullOrEmptyError(t);var r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw Et.createTokenParsingError("Given token is malformed: "+JSON.stringify(t));return{header:r[1],JWSPayload:r[2],JWSSig:r[3]}},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.isEmptyObj=function(t){if(t&&!e.isEmpty(t))try{var r=JSON.parse(t);return 0===Object.keys(r).length}catch(e){}return!0},e.startsWith=function(e,t){return 0===e.indexOf(t)},e.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},e.queryStringToObject=function(e){var t,r=/\+/g,n=/([^&=]+)=([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(r," "))},i={};for(t=n.exec(e);t;)i[o(t[1])]=o(t[2]),t=n.exec(e);return i},e.trimArrayEntries=function(e){return e.map((function(e){return e.trim()}))},e.removeEmptyStringsFromArray=function(t){return t.filter((function(t){return!e.isEmpty(t)}))},e.jsonParseHelper=function(e){try{return JSON.parse(e)}catch(e){return null}},e.matchPattern=function(e,t){return new RegExp(e.replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)},e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(W||(W={})),function(){function e(e,t,r){this.level=W.Info,this.localCallback=e.loggerCallback||function(){},this.piiLoggingEnabled=e.piiLoggingEnabled||!1,this.level=e.logLevel||W.Info,this.correlationId=e.correlationId||"",this.packageName=t||"",this.packageVersion=r||""}e.prototype.clone=function(t,r,n){return new e({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},t,r)},e.prototype.logMessage=function(e,t){if(!(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)){var r=(new Date).toUTCString(),n=(Rt.isEmpty(t.correlationId)?Rt.isEmpty(this.correlationId)?"["+r+"]":"["+r+"] : ["+this.correlationId+"]":"["+r+"] : ["+t.correlationId+"]")+" : "+this.packageName+"@"+this.packageVersion+" : "+W[t.logLevel]+" - "+e;this.executeCallback(t.logLevel,n,t.containsPii||!1)}},e.prototype.executeCallback=function(e,t,r){this.localCallback&&this.localCallback(e,t,r)},e.prototype.error=function(e,t){this.logMessage(e,{logLevel:W.Error,containsPii:!1,correlationId:t||""})},e.prototype.errorPii=function(e,t){this.logMessage(e,{logLevel:W.Error,containsPii:!0,correlationId:t||""})},e.prototype.warning=function(e,t){this.logMessage(e,{logLevel:W.Warning,containsPii:!1,correlationId:t||""})},e.prototype.warningPii=function(e,t){this.logMessage(e,{logLevel:W.Warning,containsPii:!0,correlationId:t||""})},e.prototype.info=function(e,t){this.logMessage(e,{logLevel:W.Info,containsPii:!1,correlationId:t||""})},e.prototype.infoPii=function(e,t){this.logMessage(e,{logLevel:W.Info,containsPii:!0,correlationId:t||""})},e.prototype.verbose=function(e,t){this.logMessage(e,{logLevel:W.Verbose,containsPii:!1,correlationId:t||""})},e.prototype.verbosePii=function(e,t){this.logMessage(e,{logLevel:W.Verbose,containsPii:!0,correlationId:t||""})},e.prototype.trace=function(e,t){this.logMessage(e,{logLevel:W.Trace,containsPii:!1,correlationId:t||""})},e.prototype.tracePii=function(e,t){this.logMessage(e,{logLevel:W.Trace,containsPii:!0,correlationId:t||""})},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1}}();var Tt=r(679),Pt=r(586);const It="04b07795-8ddb-461a-bbee-02f9e1bf7b46",_t="common";var At;!function(e){e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureGovernment="https://login.microsoftonline.us",e.AzurePublicCloud="https://login.microsoftonline.com"}(At||(At={}));const Ot=At.AzurePublicCloud;function kt(e,t){return t||(t=Ot),new RegExp(`${e}/?$`).test(t)?t:t.endsWith("/")?t+e:`${t}/${e}`}function Mt(e,t){return"adfs"===e&&t?[t]:[]}const qt=(e,t="Browser")=>(r,n,o)=>{if(!o)switch(r){case W.Error:return void e.info(`MSAL ${t} V2 error: ${n}`);case W.Info:return void e.info(`MSAL ${t} V2 info message: ${n}`);case W.Verbose:return void e.info(`MSAL ${t} V2 verbose message: ${n}`);case W.Warning:return void e.info(`MSAL ${t} V2 warning: ${n}`)}};function zt(e){const[t]=e.authority.match(/([a-z]*\.[a-z]*\.[a-z]*)/)||[];return Object.assign(Object.assign({},e),{localAccountId:e.homeAccountId,environment:t})}function Bt(e,t){return{authority:kt(t.tenantId,t.environment),homeAccountId:t.homeAccountId,tenantId:t.tenantId||_t,username:t.username,clientId:e,version:"1.0"}}function Ht(e){return JSON.stringify(e)}function Dt(e){const t=JSON.parse(e);if(t.version&&"1.0"!==t.version)throw Error("Unsupported AuthenticationRecord version");return t}const Lt=new Error("EnvironmentCredential is not supported in the browser."),Ut=l("EnvironmentCredential");class jt{constructor(){throw Ut.info(s("",Lt)),Lt}getToken(){throw Ut.getToken.info(s("",Lt)),Lt}}function Ft(e){return e.toLowerCase()}class Kt{constructor(e){if(this._headersMap=new Map,e)for(const t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(Ft(e),{name:e,value:String(t)})}get(e){var t;return null===(t=this._headersMap.get(Ft(e)))||void 0===t?void 0:t.value}has(e){return this._headersMap.has(Ft(e))}delete(e){this._headersMap.delete(Ft(e))}toJSON(e={}){const t={};if(e.preserveCase)for(const e of this._headersMap.values())t[e.name]=e.value;else for(const[e,r]of this._headersMap)t[e]=r.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(e){for(const t of e.values())yield[t.name,t.value]}(this._headersMap)}}function Gt(e){return new Kt(e)}class Vt{constructor(e){var t,r,n,o,i,a,s;this.url=e.url,this.body=e.body,this.headers=null!==(t=e.headers)&&void 0!==t?t:Gt(),this.method=null!==(r=e.method)&&void 0!==r?r:"GET",this.timeout=null!==(n=e.timeout)&&void 0!==n?n:0,this.formData=e.formData,this.disableKeepAlive=null!==(o=e.disableKeepAlive)&&void 0!==o&&o,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=null!==(i=e.withCredentials)&&void 0!==i&&i,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0,Pt.Z)(),this.allowInsecureConnection=null!==(a=e.allowInsecureConnection)&&void 0!==a&&a,this.enableBrowserStreams=null!==(s=e.enableBrowserStreams)&&void 0!==s&&s}}function $t(e){return new Vt(e)}function Qt(e){return"adfs"===e?"oauth2/token":"oauth2/v2.0/token"}function Wt(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function Yt(e){if(Wt(e)){const t="string"==typeof e.name,r="string"==typeof e.message;return t&&r}return!1}function Jt(e){if(Yt(e))return e.message;{let t;try{t="object"==typeof e&&e?JSON.stringify(e):String(e)}catch(e){t="[unable to stringify input]"}return`Unknown error ${t}`}}const Xt={},Zt="REDACTED",er=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],tr=["api-version"];class rr{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=er.concat(e),t=tr.concat(t),this.allowedHeaderNames=new Set(e.map((e=>e.toLowerCase()))),this.allowedQueryParameters=new Set(t.map((e=>e.toLowerCase())))}sanitize(e){const t=new Set;return JSON.stringify(e,((e,r)=>{if(r instanceof Error)return Object.assign(Object.assign({},r),{name:r.name,message:r.message});if("headers"===e)return this.sanitizeHeaders(r);if("url"===e)return this.sanitizeUrl(r);if("query"===e)return this.sanitizeQuery(r);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(r)||Wt(r)){if(t.has(r))return"[Circular]";t.add(r)}return r}}),2)}sanitizeHeaders(e){const t={};for(const r of Object.keys(e))this.allowedHeaderNames.has(r.toLowerCase())?t[r]=e[r]:t[r]=Zt;return t}sanitizeQuery(e){if("object"!=typeof e||null===e)return e;const t={};for(const r of Object.keys(e))this.allowedQueryParameters.has(r.toLowerCase())?t[r]=e[r]:t[r]=Zt;return t}sanitizeUrl(e){if("string"!=typeof e||null===e)return e;const t=new URL(e);if(!t.search)return e;for(const[e]of t.searchParams)this.allowedQueryParameters.has(e.toLowerCase())||t.searchParams.set(e,Zt);return t.toString()}}const nr=new rr;class or extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,this.request=t.request,this.response=t.response,Object.setPrototypeOf(this,or.prototype)}[Xt](){return`RestError: ${this.message} \n ${nr.sanitize(this)}`}}or.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",or.PARSE_ERROR="PARSE_ERROR";const ir="Sequence",ar="Stream";function sr(e,t,r){let n=t.parameterPath;const o=t.mapper;let i;if("string"==typeof n&&(n=[n]),Array.isArray(n)){if(n.length>0)if(o.isConstant)i=o.defaultValue;else{let t=cr(e,n);!t.propertyFound&&r&&(t=cr(r,n));let a=!1;t.propertyFound||(a=o.required||"options"===n[0]&&2===n.length),i=a?o.defaultValue:t.propertyValue}}else{o.required&&(i={});for(const t in n){const a=o.type.modelProperties[t],s=sr(e,{parameterPath:n[t],mapper:a},r);void 0!==s&&(i||(i={}),i[t]=s)}}return i}function cr(e,t){const r={propertyFound:!1};let n=0;for(;n<t.length;++n){const r=t[n];if(!e||!(r in e))break;e=e[r]}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}const lr=new WeakMap;function dr(e){let t=lr.get(e);return t||(t={},lr.set(e,t)),t}const ur=["application/json","text/json"],mr=["application/xml","application/atom+xml"];const pr=(0,o.YR)("core-rest-pipeline"),hr=new Set(["Deserialize","Serialize","Retry","Sign"]);class gr{constructor(e=[]){this._policies=[],this._policies=e,this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!hr.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!hr.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){const t=[];return this._policies=this._policies.filter((r=>!(e.name&&r.policy.name===e.name||e.phase&&r.options.phase===e.phase)||(t.push(r.policy),!1))),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight(((e,t)=>r=>t.sendRequest(r,e)),(t=>e.sendRequest(t)))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new gr(this._policies)}static create(){return new gr}orderPolicies(){const e=[],t=new Map;function r(e){return{name:e,policies:new Set,hasRun:!1}}const n=r("Serialize"),o=r("None"),i=r("Deserialize"),a=r("Retry"),s=r("Sign"),c=[n,o,i,a,s];function l(e){return"Retry"===e?a:"Serialize"===e?n:"Deserialize"===e?i:"Sign"===e?s:o}for(const e of this._policies){const r=e.policy,n=e.options,o=r.name;if(t.has(o))throw new Error("Duplicate policy names not allowed in pipeline");const i={policy:r,dependsOn:new Set,dependants:new Set};n.afterPhase&&(i.afterPhase=l(n.afterPhase)),t.set(o,i),l(n.phase).policies.add(i)}for(const e of this._policies){const{policy:r,options:n}=e,o=r.name,i=t.get(o);if(!i)throw new Error(`Missing node for policy ${o}`);if(n.afterPolicies)for(const e of n.afterPolicies){const r=t.get(e);r&&(i.dependsOn.add(r),r.dependants.add(i))}if(n.beforePolicies)for(const e of n.beforePolicies){const r=t.get(e);r&&(r.dependsOn.add(i),i.dependants.add(r))}}function d(r){r.hasRun=!0;for(const n of r.policies)if((!n.afterPhase||n.afterPhase.hasRun&&!n.afterPhase.policies.size)&&0===n.dependsOn.size){e.push(n.policy);for(const e of n.dependants)e.dependsOn.delete(n);t.delete(n.policy.name),r.policies.delete(n)}}function u(){for(const e of c)if(d(e),e.policies.size>0&&e!==o)return void(o.hasRun||d(o))}let m=0;for(;t.size>0;){m++;const t=e.length;if(u(),e.length<=t&&m>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}const fr="1.9.0";function yr(e){const t=new Map;t.set("core-rest-pipeline",fr),function(e){const t=self.navigator;e.set("OS",(t.oscpu||t.platform).replace(" ",""))}(t);const r=function(e){const t=[];for(const[r,n]of e){const e=n?`${r}/${n}`:r;t.push(e)}return t.join(" ")}(t);return e?`${e} ${r}`:r}const br="x-ms-useragent";function vr(e,t,r){return new Promise(((n,o)=>{let i,a;const s=()=>o(new Tt._((null==r?void 0:r.abortErrorMsg)?null==r?void 0:r.abortErrorMsg:"The operation was aborted.")),c=()=>{(null==r?void 0:r.abortSignal)&&a&&r.abortSignal.removeEventListener("abort",a)};if(a=()=>(i&&clearTimeout(i),c(),s()),(null==r?void 0:r.abortSignal)&&r.abortSignal.aborted)return s();i=setTimeout((()=>{c(),n(t)}),e),(null==r?void 0:r.abortSignal)&&r.abortSignal.addEventListener("abort",a)}))}function Sr(e,t){const r=e.headers.get(t);if(!r)return;const n=Number(r);return Number.isNaN(n)?void 0:n}new Error("decompressResponsePolicy is not supported in browser environment");const Nr="Retry-After",Cr=["retry-after-ms","x-ms-retry-after-ms",Nr];function xr(e){if(e&&[429,503].includes(e.status))try{for(const t of Cr){const r=Sr(e,t);if(0===r||r)return r*(t===Nr?1e3:1)}const t=e.headers.get(Nr);if(!t)return;const r=Date.parse(t)-Date.now();return Number.isFinite(r)?Math.max(0,r):void 0}catch(e){return}}function wr(e={}){var t,r;const n=null!==(t=e.retryDelayInMs)&&void 0!==t?t:1e3,o=null!==(r=e.maxRetryDelayInMs)&&void 0!==r?r:64e3;let i=n;return{name:"exponentialRetryStrategy",retry({retryCount:t,response:r,responseError:n}){const a=!!(u=n)&&("ETIMEDOUT"===u.code||"ESOCKETTIMEDOUT"===u.code||"ECONNREFUSED"===u.code||"ECONNRESET"===u.code||"ENOENT"===u.code),s=a&&e.ignoreSystemErrors,c=function(e){return Boolean(e&&void 0!==e.status&&(e.status>=500||408===e.status)&&501!==e.status&&505!==e.status)}(r),l=c&&e.ignoreHttpStatusCodes,d=r&&(function(e){return Number.isFinite(xr(e))}(r)||!c);var u;if(d||l||s)return{skipStrategy:!0};if(n&&!a&&!c)return{errorToThrow:n};const m=i*Math.pow(2,t),p=Math.min(o,m);var h,g;return i=p/2+(h=0,g=p/2,h=Math.ceil(h),g=Math.floor(g),Math.floor(Math.random()*(g-h+1))+h),{retryAfterInMs:i}}}}const Er=(0,o.YR)("core-rest-pipeline retryPolicy");function Rr(e,t={maxRetries:3}){const r=t.logger||Er;return{name:"retryPolicy",async sendRequest(n,o){var i,a;let s,c,l=-1;e:for(;;){l+=1,s=void 0,c=void 0;try{r.info(`Retry ${l}: Attempting to send request`,n.requestId),s=await o(n),r.info(`Retry ${l}: Received a response from request`,n.requestId)}catch(e){if(r.error(`Retry ${l}: Received an error from request`,n.requestId),c=e,!e||"RestError"!==c.name)throw e;s=c.response}if(null===(i=n.abortSignal)||void 0===i?void 0:i.aborted)throw r.error(`Retry ${l}: Request aborted.`),new Tt._;if(l>=(null!==(a=t.maxRetries)&&void 0!==a?a:3)){if(r.info(`Retry ${l}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(s)return s;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${l}: Processing ${e.length} retry strategies.`);t:for(const t of e){const e=t.logger||Er;e.info(`Retry ${l}: Processing retry strategy ${t.name}.`);const r=t.retry({retryCount:l,response:s,responseError:c});if(r.skipStrategy){e.info(`Retry ${l}: Skipped.`);continue t}const{errorToThrow:o,retryAfterInMs:i,redirectTo:a}=r;if(o)throw e.error(`Retry ${l}: Retry strategy ${t.name} throws error:`,o),o;if(i||0===i){e.info(`Retry ${l}: Retry strategy ${t.name} retries after ${i}`),await vr(i,void 0,{abortSignal:n.abortSignal});continue e}if(a){e.info(`Retry ${l}: Retry strategy ${t.name} redirects to ${a}`),n.url=a;continue e}}if(c)throw r.info("None of the retry strategies could work with the received error. Throwing it."),c;if(s)return r.info("None of the retry strategies could work with the received response. Returning it."),s}}}}new Error("proxyPolicy is not supported in browser environment");const Tr={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function Pr(e={}){let t=new Ir(e.parentContext);return e.span&&(t=t.setValue(Tr.span,e.span)),e.namespace&&(t=t.setValue(Tr.namespace,e.namespace)),t}class Ir{constructor(e){this._contextMap=e instanceof Ir?new Map(e._contextMap):new Map}setValue(e,t){const r=new Ir(this);return r._contextMap.set(e,t),r}getValue(e){return this._contextMap.get(e)}deleteValue(e){const t=new Ir(this);return t._contextMap.delete(e),t}}let _r;function Ar(){return _r||(_r={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}},tracingContext:Pr({parentContext:t.tracingContext})}),withContext:(e,t,...r)=>t(...r)}),_r}function Or(e){const t=gr.create();return t.addPolicy({name:"formDataPolicy",async sendRequest(e,t){if(e.formData){const t=e.formData,r=new FormData;for(const e of Object.keys(t)){const n=t[e];if(Array.isArray(n))for(const t of n)r.append(e,t);else r.append(e,n)}e.body=r,e.formData=void 0;const n=e.headers.get("Content-Type");n&&-1!==n.indexOf("application/x-www-form-urlencoded")?e.body=new URLSearchParams(r).toString():n&&-1!==n.indexOf("multipart/form-data")&&e.headers.delete("Content-Type")}return t(e)}}),t.addPolicy(function(e={}){const t=yr(e.userAgentPrefix);return{name:"userAgentPolicy",sendRequest:async(e,r)=>(e.headers.has(br)||e.headers.set(br,t),r(e))}}(e.userAgentOptions)),t.addPolicy(function(e="x-ms-client-request-id"){return{name:"setClientRequestIdPolicy",sendRequest:async(t,r)=>(t.headers.has(e)||t.headers.set(e,t.requestId),r(t))}}()),t.addPolicy(function(e={}){var t;return{name:"defaultRetryPolicy",sendRequest:Rr([{name:"throttlingRetryStrategy",retry({response:e}){const t=xr(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}},wr(e)],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:3}).sendRequest}}(e.retryOptions),{phase:"Retry"}),t.addPolicy(function(e={}){const t=yr(e.userAgentPrefix),r=function(){try{return function(e){const{namespace:t,packageName:r,packageVersion:n}=e;function o(e,o,i){var a;const s=Ar().startSpan(e,Object.assign(Object.assign({},i),{packageName:r,packageVersion:n,tracingContext:null===(a=null==o?void 0:o.tracingOptions)||void 0===a?void 0:a.tracingContext}));let c=s.tracingContext;const l=s.span;return c.getValue(Tr.namespace)||(c=c.setValue(Tr.namespace,t)),l.setAttribute("az.namespace",c.getValue(Tr.namespace)),{span:l,updatedOptions:Object.assign({},o,{tracingOptions:Object.assign(Object.assign({},null==o?void 0:o.tracingOptions),{tracingContext:c})})}}function i(e,t,...r){return Ar().withContext(e,t,...r)}return{startSpan:o,withSpan:async function(e,t,r,n){const{span:a,updatedOptions:s}=o(e,t,n);try{const e=await i(s.tracingOptions.tracingContext,(()=>Promise.resolve(r(s,a))));return a.setStatus({status:"success"}),e}catch(e){throw a.setStatus({status:"error",error:e}),e}finally{a.end()}},withContext:i,parseTraceparentHeader:function(e){return Ar().parseTraceparentHeader(e)},createRequestHeaders:function(e){return Ar().createRequestHeaders(e)}}}({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:fr})}catch(e){return void pr.warning(`Error when creating the TracingClient: ${Jt(e)}`)}}();return{name:"tracingPolicy",async sendRequest(e,n){var o,i;if(!r||!(null===(o=e.tracingOptions)||void 0===o?void 0:o.tracingContext))return n(e);const{span:a,tracingContext:s}=null!==(i=function(e,t,r){try{const{span:n,updatedOptions:o}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":t.method,"http.url":t.url,requestId:t.requestId}});if(!n.isRecording())return void n.end();r&&n.setAttribute("http.user_agent",r);const i=e.createRequestHeaders(o.tracingOptions.tracingContext);for(const[e,r]of Object.entries(i))t.headers.set(e,r);return{span:n,tracingContext:o.tracingOptions.tracingContext}}catch(e){return void pr.warning(`Skipping creating a tracing span due to an error: ${Jt(e)}`)}}(r,e,t))&&void 0!==i?i:{};if(!a||!s)return n(e);try{const t=await r.withContext(s,n,e);return function(e,t){try{e.setAttribute("http.status_code",t.status);const r=t.headers.get("x-ms-request-id");r&&e.setAttribute("serviceRequestId",r),e.setStatus({status:"success"}),e.end()}catch(e){pr.warning(`Skipping tracing span processing due to an error: ${Jt(e)}`)}}(a,t),t}catch(e){throw function(e,t){try{e.setStatus({status:"error",error:Yt(t)?t:void 0}),((r=t)instanceof or||Yt(r)&&"RestError"===r.name)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(r){pr.warning(`Skipping tracing span processing due to an error: ${Jt(r)}`)}var r}(a,e),e}}}}(e.userAgentOptions),{afterPhase:"Retry"}),t.addPolicy(function(e={}){var t;const r=null!==(t=e.logger)&&void 0!==t?t:pr.info,n=new rr({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:"logPolicy",async sendRequest(e,t){if(!r.enabled)return t(e);r(`Request: ${n.sanitize(e)}`);const o=await t(e);return r(`Response status code: ${o.status}`),r(`Headers: ${n.sanitize(o.headers)}`),o}}}(e.loggingOptions),{afterPhase:"Retry"}),t}const kr={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};async function Mr(e){const{scopes:t,getAccessToken:r,request:n}=e,o={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},i=await r(t,o);i&&e.request.headers.set("Authorization",`Bearer ${i.token}`)}function qr(e){const{parameterPath:t,mapper:r}=e;let n;return n="string"==typeof t?t:Array.isArray(t)?t.join("."):r.serializedName,n}function zr(e={}){const t=Or(null!=e?e:{});return e.credentialOptions&&t.addPolicy(function(e){var t;const{credential:r,scopes:n,challengeCallbacks:o,logger:i}=e,a=Object.assign({authorizeRequest:null!==(t=null==o?void 0:o.authorizeRequest)&&void 0!==t?t:Mr,authorizeRequestOnChallenge:null==o?void 0:o.authorizeRequestOnChallenge},o),s=r?function(e,t){let r,n=null,o=null;const i=Object.assign(Object.assign({},kr),t),a={get isRefreshing(){return null!==n},get shouldRefresh(){var e;return!a.isRefreshing&&(null!==(e=null==o?void 0:o.expiresOnTimestamp)&&void 0!==e?e:0)-i.refreshWindowInMs<Date.now()},get mustRefresh(){return null===o||o.expiresOnTimestamp-i.forcedRefreshWindowInMs<Date.now()}};function s(t,s){var c;return a.isRefreshing||(n=async function(e,t,r){async function n(){if(!(Date.now()<r)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(e){return null}}let o=await n();for(;null===o;)await vr(t),o=await n();return o}((()=>e.getToken(t,s)),i.retryIntervalInMs,null!==(c=null==o?void 0:o.expiresOnTimestamp)&&void 0!==c?c:Date.now()).then((e=>(n=null,o=e,r=s.tenantId,o))).catch((e=>{throw n=null,o=null,r=void 0,e}))),n}return async(e,t)=>r!==t.tenantId||a.mustRefresh?s(e,t):(a.shouldRefresh&&s(e,t),o)}(r):()=>Promise.resolve(null);return{name:"bearerTokenAuthenticationPolicy",async sendRequest(e,t){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let r,o;await a.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:e,getAccessToken:s,logger:i});try{r=await t(e)}catch(e){o=e,r=e.response}if(a.authorizeRequestOnChallenge&&401===(null==r?void 0:r.status)&&function(e){const t=e.headers.get("WWW-Authenticate");if(401===e.status&&t)return t}(r)&&await a.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:e,response:r,getAccessToken:s,logger:i}))return t(e);if(o)throw o;return r}}}({credential:e.credentialOptions.credential,scopes:e.credentialOptions.credentialScopes})),t.addPolicy(function(e={}){const t=e.stringifyXML;return{name:"serializationPolicy",async sendRequest(e,r){const n=dr(e),o=null==n?void 0:n.operationSpec,i=null==n?void 0:n.operationArguments;return o&&i&&(function(e,t,r){var n,o;if(r.headerParameters)for(const n of r.headerParameters){let o=sr(t,n);if(null!=o||n.mapper.required){o=r.serializer.serialize(n.mapper,o,qr(n));const t=n.mapper.headerCollectionPrefix;if(t)for(const r of Object.keys(o))e.headers.set(t+r,o[r]);else e.headers.set(n.mapper.serializedName||qr(n),o)}}const i=null===(o=null===(n=t.options)||void 0===n?void 0:n.requestOptions)||void 0===o?void 0:o.customHeaders;if(i)for(const t of Object.keys(i))e.headers.set(t,i[t])}(e,i,o),function(e,t,r,n=function(){throw new Error("XML serialization unsupported!")}){var o,i,a,s,c;const l=null===(o=t.options)||void 0===o?void 0:o.serializerOptions,d={xml:{rootName:null!==(i=null==l?void 0:l.xml.rootName)&&void 0!==i?i:"",includeRoot:null!==(a=null==l?void 0:l.xml.includeRoot)&&void 0!==a&&a,xmlCharKey:null!==(s=null==l?void 0:l.xml.xmlCharKey)&&void 0!==s?s:"_"}},u=d.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){e.body=sr(t,r.requestBody);const o=r.requestBody.mapper,{required:i,serializedName:a,xmlName:s,xmlElementName:l,xmlNamespace:m,xmlNamespacePrefix:p,nullable:h}=o,g=o.type.name;try{if(void 0!==e.body&&null!==e.body||h&&null===e.body||i){const t=qr(r.requestBody);e.body=r.serializer.serialize(o,e.body,t,d);const i=g===ar;if(r.isXML){const t=p?`xmlns:${p}`:"xmlns",r=function(e,t,r,n,o){if(e&&!["Composite","Sequence","Dictionary"].includes(r)){const r={};return r[o.xml.xmlCharKey]=n,r.$={[t]:e},r}return n}(m,t,g,e.body,d);g===ir?e.body=n(function(e,t,r,n){if(Array.isArray(e)||(e=[e]),!r||!n)return{[t]:e};const o={[t]:e};return o.$={[r]:n},o}(r,l||s||a,t,m),{rootName:s||a,xmlCharKey:u}):i||(e.body=n(r,{rootName:s||a,xmlCharKey:u}))}else{if("String"===g&&((null===(c=r.contentType)||void 0===c?void 0:c.match("text/plain"))||"text"===r.mediaType))return;i||(e.body=JSON.stringify(e.body))}}}catch(e){throw new Error(`Error "${e.message}" occurred in serializing the payload - ${JSON.stringify(a,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){e.formData={};for(const n of r.formDataParameters){const o=sr(t,n);if(null!=o){const t=n.mapper.serializedName||qr(n);e.formData[t]=r.serializer.serialize(n.mapper,o,qr(n),d)}}}}(e,i,o,t)),r(e)}}}(e.serializationOptions),{phase:"Serialize"}),t.addPolicy(function(e={}){var t,r,n,o,i,a,s;const c=null!==(r=null===(t=e.expectedContentTypes)||void 0===t?void 0:t.json)&&void 0!==r?r:ur,l=null!==(o=null===(n=e.expectedContentTypes)||void 0===n?void 0:n.xml)&&void 0!==o?o:mr,d=e.parseXML,u=e.serializerOptions,m={xml:{rootName:null!==(i=null==u?void 0:u.xml.rootName)&&void 0!==i?i:"",includeRoot:null!==(a=null==u?void 0:u.xml.includeRoot)&&void 0!==a&&a,xmlCharKey:null!==(s=null==u?void 0:u.xml.xmlCharKey)&&void 0!==s?s:"_"}};return{name:"deserializationPolicy",async sendRequest(e,t){const r=await t(e);return async function(e,t,r,n,o){const i=await async function(e,t,r,n,o){var i;if(!(null===(i=r.request.streamResponseStatusCodes)||void 0===i?void 0:i.has(r.status))&&r.bodyAsText){const i=r.bodyAsText,a=r.headers.get("Content-Type")||"",s=a?a.split(";").map((e=>e.toLowerCase())):[];try{if(0===s.length||s.some((t=>-1!==e.indexOf(t))))return r.parsedBody=JSON.parse(i),r;if(s.some((e=>-1!==t.indexOf(e)))){if(!o)throw new Error("Parsing XML not supported.");const e=await o(i,n.xml);return r.parsedBody=e,r}}catch(e){const t=`Error "${e}" occurred while parsing the response body - ${r.bodyAsText}.`,n=e.code||or.PARSE_ERROR;throw new or(t,{code:n,statusCode:r.status,request:r.request,response:r})}}return r}(e,t,r,n,o);if(!function(e){const t=dr(e.request),r=null==t?void 0:t.shouldDeserialize;let n;return n=void 0===r||("boolean"==typeof r?r:r(e)),n}(i))return i;const a=dr(i.request),s=null==a?void 0:a.operationSpec;if(!s||!s.responses)return i;const c=function(e){let t;const r=dr(e.request),n=null==r?void 0:r.operationSpec;return n&&(t=(null==r?void 0:r.operationResponseGetter)?null==r?void 0:r.operationResponseGetter(n,e):n.responses[e.status]),t}(i),{error:l,shouldReturnResponse:d}=function(e,t,r){var n;const o=200<=e.status&&e.status<300;if(function(e){const t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?o:r){if(!r)return{error:null,shouldReturnResponse:!1};if(!r.isError)return{error:null,shouldReturnResponse:!1}}const i=null!=r?r:t.responses.default,a=(null===(n=e.request.streamResponseStatusCodes)||void 0===n?void 0:n.has(e.status))?`Unexpected status code: ${e.status}`:e.bodyAsText,s=new or(a,{statusCode:e.status,request:e.request,response:e});if(!i)throw s;const c=i.bodyMapper,l=i.headersMapper;try{if(e.parsedBody){const r=e.parsedBody;let n;if(c){let e=r;if(t.isXML&&c.type.name===ir){e=[];const t=c.xmlElementName;"object"==typeof r&&t&&(e=r[t])}n=t.serializer.deserialize(c,e,"error.response.parsedBody")}const o=r.error||n||r;s.code=o.code,o.message&&(s.message=o.message),c&&(s.response.parsedBody=n)}e.headers&&l&&(s.response.parsedHeaders=t.serializer.deserialize(l,e.headers.toJSON(),"operationRes.parsedHeaders"))}catch(t){s.message=`Error "${t.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:s,shouldReturnResponse:!1}}(i,s,c);if(l)throw l;if(d)return i;if(c){if(c.bodyMapper){let e=i.parsedBody;s.isXML&&c.bodyMapper.type.name===ir&&(e="object"==typeof e?e[c.bodyMapper.xmlElementName]:[]);try{i.parsedBody=s.serializer.deserialize(c.bodyMapper,e,"operationRes.parsedBody")}catch(e){throw new or(`Error ${e} occurred in deserializing the responseBody - ${i.bodyAsText}`,{statusCode:i.status,request:i.request,response:i})}}else"HEAD"===s.httpMethod&&(i.parsedBody=r.status>=200&&r.status<300);c.headersMapper&&(i.parsedHeaders=s.serializer.deserialize(c.headersMapper,i.headers.toJSON(),"operationRes.parsedHeaders"))}return i}(c,l,r,m,d)}}}(e.deserializationOptions),{phase:"Deserialize"}),t}function Br(e,t){var r,n;const o=e.parsedHeaders;if("HEAD"===e.request.method)return Object.assign(Object.assign({},o),{body:e.parsedBody});const i=t&&t.bodyMapper,a=Boolean(null==i?void 0:i.nullable),s=null==i?void 0:i.type.name;if("Stream"===s)return Object.assign(Object.assign({},o),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody});const c="Composite"===s&&i.type.modelProperties||{},l=Object.keys(c).some((e=>""===c[e].serializedName));if("Sequence"===s||l){const t=null!==(r=e.parsedBody)&&void 0!==r?r:[];for(const r of Object.keys(c))c[r].serializedName&&(t[r]=null===(n=e.parsedBody)||void 0===n?void 0:n[r]);if(o)for(const e of Object.keys(o))t[e]=o[e];return!a||e.parsedBody||o||0!==Object.getOwnPropertyNames(c).length?t:null}return function(e){const t=Object.assign(Object.assign({},e.headers),e.body);return e.hasNullableType&&0===Object.getOwnPropertyNames(t).length?e.shouldWrapBody?{body:null}:null:e.shouldWrapBody?Object.assign(Object.assign({},e.headers),{body:e.body}):t}({body:e.parsedBody,headers:o,hasNullableType:a,shouldWrapBody:(d=e.parsedBody,u=s,"Composite"!==u&&"Dictionary"!==u&&("string"==typeof d||"number"==typeof d||"boolean"==typeof d||null!==(null==u?void 0:u.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==d))});var d,u}function Hr(e){return Boolean(e&&"function"==typeof e.getReader&&"function"==typeof e.tee)}class Dr{async sendRequest(e){if("https:"!==new URL(e.url).protocol&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await async function(e){const{abortController:t,abortControllerCleanup:r}=function(e){const t=new AbortController;let r,n;if(e.abortSignal){if(e.abortSignal.aborted)throw new Tt._("The operation was aborted.");n=e=>{"abort"===e.type&&t.abort()},e.abortSignal.addEventListener("abort",n),r=()=>{var t;n&&(null===(t=e.abortSignal)||void 0===t||t.removeEventListener("abort",n))}}return e.timeout>0&&setTimeout((()=>{t.abort()}),e.timeout),{abortController:t,abortControllerCleanup:r}}(e);try{const n=function(e){const t=new Headers;for(const[r,n]of e)t.append(r,n);return t}(e.headers),o=function(e){const t="function"==typeof e.body?e.body():e.body;if(function(e){return e&&"function"==typeof e.pipe}(t))throw new Error("Node streams are not supported in browser environment.");return Hr(t)?Lr(t,e.onUploadProgress):t}(e);return async function(e,t){var r,n;const o=function(e){const t=Gt();for(const[r,n]of e.headers)t.set(r,n);return t}(e),i={request:t,headers:o,status:e.status},a=Hr(e.body)?Lr(e.body,t.onDownloadProgress):e.body;if((null===(r=t.streamResponseStatusCodes)||void 0===r?void 0:r.has(Number.POSITIVE_INFINITY))||(null===(n=t.streamResponseStatusCodes)||void 0===n?void 0:n.has(i.status)))if(t.enableBrowserStreams)i.browserStreamBody=null!=a?a:void 0;else{const e=new Response(a);i.blobBody=e.blob()}else{const e=new Response(a);i.bodyAsText=await e.text()}return i}(await fetch(e.url,{body:o,method:e.method,headers:n,signal:t.signal,credentials:e.withCredentials?"include":"same-origin",cache:"no-store"}),e)}finally{r&&r()}}(e)}catch(t){throw function(e,t){var r;return e&&"AbortError"===(null==e?void 0:e.name)?e:new or(`Error sending request: ${e.message}`,{code:null!==(r=null==e?void 0:e.code)&&void 0!==r?r:or.REQUEST_SEND_ERROR,request:t})}(t,e)}}}function Lr(e,t){let r=0;if(function(e){return void 0!==e.pipeThrough&&void 0!==self.TransformStream}(e))return e.pipeThrough(new TransformStream({transform(e,n){null!==e?(n.enqueue(e),r+=e.length,t&&t({loadedBytes:r})):n.terminate()}}));{const n=e.getReader();return new ReadableStream({async pull(e){var o;const{done:i,value:a}=await n.read();if(i||!a)return e.close(),void n.releaseLock();r+=null!==(o=null==a?void 0:a.length)&&void 0!==o?o:0,e.enqueue(a),t&&t({loadedBytes:r})}})}}let Ur;const jr={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function Fr(e,t,r,n){const o=function(e,t,r){var n;const o=new Map;if(null===(n=e.urlParameters)||void 0===n?void 0:n.length)for(const n of e.urlParameters){let i=sr(t,n,r);const a=qr(n);i=e.serializer.serialize(n.mapper,i,a),n.skipEncoding||(i=encodeURIComponent(i)),o.set(`{${n.mapper.serializedName||a}}`,i)}return o}(t,r,n);let i=!1,a=Kr(e,o);if(t.path){let e=Kr(t.path,o);"/{nextLink}"===t.path&&e.startsWith("/")&&(e=e.substring(1)),e.includes("://")?(a=e,i=!0):a=function(e,t){if(!t)return e;const r=new URL(e);let n=r.pathname;n.endsWith("/")||(n=`${n}/`),t.startsWith("/")&&(t=t.substring(1));const o=t.indexOf("?");if(-1!==o){const e=t.substring(0,o),i=t.substring(o+1);n+=e,i&&(r.search=r.search?`${r.search}&${i}`:i)}else n+=t;return r.pathname=n,r.toString()}(a,e)}const{queryParams:s,sequenceParams:c}=function(e,t,r){var n;const o=new Map,i=new Set;if(null===(n=e.queryParameters)||void 0===n?void 0:n.length)for(const n of e.queryParameters){"Sequence"===n.mapper.type.name&&n.mapper.serializedName&&i.add(n.mapper.serializedName);let a=sr(t,n,r);if(null!=a||n.mapper.required){a=e.serializer.serialize(n.mapper,a,qr(n));const t=n.collectionFormat?jr[n.collectionFormat]:"";if(Array.isArray(a)&&(a=a.map((e=>null==e?"":e))),"Multi"===n.collectionFormat&&0===a.length)continue;!Array.isArray(a)||"SSV"!==n.collectionFormat&&"TSV"!==n.collectionFormat||(a=a.join(t)),n.skipEncoding||(a=Array.isArray(a)?a.map((e=>encodeURIComponent(e))):encodeURIComponent(a)),!Array.isArray(a)||"CSV"!==n.collectionFormat&&"Pipes"!==n.collectionFormat||(a=a.join(t)),o.set(n.mapper.serializedName||qr(n),a)}}return{queryParams:o,sequenceParams:i}}(t,r,n);return a=function(e,t,r,n=!1){if(0===t.size)return e;const o=new URL(e),i=function(e){const t=new Map;if(!e||"?"!==e[0])return t;const r=(e=e.slice(1)).split("&");for(const e of r){const[r,n]=e.split("=",2),o=t.get(r);o?Array.isArray(o)?o.push(n):t.set(r,[o,n]):t.set(r,n)}return t}(o.search);for(const[e,o]of t){const t=i.get(e);if(Array.isArray(t))if(Array.isArray(o)){t.push(...o);const r=new Set(t);i.set(e,Array.from(r))}else t.push(o);else t?(Array.isArray(o)?o.unshift(t):r.has(e)&&i.set(e,[t,o]),n||i.set(e,o)):i.set(e,o)}const a=[];for(const[e,t]of i)if("string"==typeof t)a.push(`${e}=${t}`);else if(Array.isArray(t))for(const r of t)a.push(`${e}=${r}`);else a.push(`${e}=${t}`);return o.search=a.length?`?${a.join("&")}`:"",o.toString()}(a,s,c,i),a}function Kr(e,t){let r=e;for(const[e,n]of t)r=r.split(e).join(n);return r}const Gr=(0,o.YR)("core-client"),Vr="noCorrelationId";class $r extends class{constructor(e={}){var t,r;if(this._requestContentType=e.requestContentType,this._endpoint=null!==(t=e.endpoint)&&void 0!==t?t:e.baseUri,e.baseUri&&Gr.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||(Ur||(Ur=new Dr),Ur),this.pipeline=e.pipeline||function(e){const t=function(e){if(e.credentialScopes){const t=e.credentialScopes;return Array.isArray(t)?t.map((e=>new URL(e).toString())):new URL(t).toString()}if(e.endpoint)return`${e.endpoint}/.default`;if(e.baseUri)return`${e.baseUri}/.default`;if(e.credential&&!e.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(e),r=e.credential&&t?{credentialScopes:t,credential:e.credential}:void 0;return zr(Object.assign(Object.assign({},e),{credentialOptions:r}))}(e),null===(r=e.additionalPolicies)||void 0===r?void 0:r.length)for(const{policy:t,position:r}of e.additionalPolicies){const e="perRetry"===r?"Sign":void 0;this.pipeline.addPolicy(t,{afterPhase:e})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){const r=t.baseUrl||this._endpoint;if(!r)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const n=$t({url:Fr(r,t,e,this)});n.method=t.httpMethod;const o=dr(n);o.operationSpec=t,o.operationArguments=e;const i=t.contentType||this._requestContentType;i&&t.requestBody&&n.headers.set("Content-Type",i);const a=e.options;if(a){const e=a.requestOptions;e&&(e.timeout&&(n.timeout=e.timeout),e.onUploadProgress&&(n.onUploadProgress=e.onUploadProgress),e.onDownloadProgress&&(n.onDownloadProgress=e.onDownloadProgress),void 0!==e.shouldDeserialize&&(o.shouldDeserialize=e.shouldDeserialize),e.allowInsecureConnection&&(n.allowInsecureConnection=!0)),a.abortSignal&&(n.abortSignal=a.abortSignal),a.tracingOptions&&(n.tracingOptions=a.tracingOptions)}this._allowInsecureConnection&&(n.allowInsecureConnection=!0),void 0===n.streamResponseStatusCodes&&(n.streamResponseStatusCodes=function(e){const t=new Set;for(const r in e.responses){const n=e.responses[r];n.bodyMapper&&n.bodyMapper.type.name===ar&&t.add(Number(r))}return t}(t));try{const e=await this.sendRequest(n),r=Br(e,t.responses[e.status]);return(null==a?void 0:a.onResponse)&&a.onResponse(e,r),r}catch(e){if("object"==typeof e&&(null==e?void 0:e.response)){const r=e.response,n=Br(r,t.responses[e.statusCode]||t.responses.default);e.details=n,(null==a?void 0:a.onResponse)&&a.onResponse(r,n,e)}throw e}}}{constructor(e){var t;const r="azsdk-js-identity/2.0.5",n=(null===(t=null==e?void 0:e.userAgentOptions)||void 0===t?void 0:t.userAgentPrefix)?`${e.userAgentOptions.userAgentPrefix} ${r}`:`${r}`,o=function(e){let t=null==e?void 0:e.authorityHost;return null!=t?t:Ot}(e);if(!o.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},e),{userAgentOptions:{userAgentPrefix:n},baseUri:o})),this.authorityHost=o,this.abortControllers=new Map}async sendTokenRequest(e,t){i.info(`IdentityClient: sending token request to [${e.url}]`);const r=await this.sendRequest(e);if(t=t||(e=>Date.now()+1e3*e.expires_in),!r.bodyAsText||200!==r.status&&201!==r.status){const e=new p(r.status,r.bodyAsText);throw i.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${e.errorResponse.errorDescription}`),e}{const n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;const o={accessToken:{token:n.access_token,expiresOnTimestamp:t(n)},refreshToken:n.refresh_token};return i.info(`IdentityClient: [${e.url}] token acquired, expires on ${o.accessToken.expiresOnTimestamp}`),o}}async refreshAccessToken(e,t,r,n,o,a,s){if(void 0===n)return null;i.info(`IdentityClient: refreshing access token with client ID: ${t}, scopes: ${r} started`);const{span:c,updatedOptions:l}=S("IdentityClient-refreshAccessToken",s),d={grant_type:"refresh_token",client_id:t,refresh_token:n,scope:r};void 0!==o&&(d.client_secret=o);const u=new URLSearchParams(d);try{const r=Qt(e),n=$t({url:`${this.authorityHost}/${e}/${r}`,method:"POST",body:u.toString(),abortSignal:s&&s.abortSignal,headers:Gt({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:null==l?void 0:l.tracingOptions}),o=await this.sendTokenRequest(n,a);return i.info(`IdentityClient: refreshed token for client ID: ${t}`),o}catch(e){if(e.name===m&&"interaction_required"===e.errorResponse.error)return i.info(`IdentityClient: interaction required for client ID: ${t}`),c.setStatus({code:v.Qn.ERROR,message:e.message}),null;throw i.warning(`IdentityClient: failed refreshing token for client ID: ${t}: ${e}`),c.setStatus({code:v.Qn.ERROR,message:e.message}),e}finally{c.end()}}generateAbortSignal(e){const t=new Tt.H,r=this.abortControllers.get(e)||[];r.push(t),this.abortControllers.set(e,r);const n=t.signal.onabort;return t.signal.onabort=(...t)=>{this.abortControllers.set(e,void 0),n&&n(...t)},t.signal}abortRequests(e){const t=e||Vr,r=[...this.abortControllers.get(t)||[],...this.abortControllers.get(Vr)||[]];if(r.length){for(const e of r)e.abort();this.abortControllers.set(t,void 0)}}getCorrelationId(e){var t;const r=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.split("&").map((e=>e.split("="))).find((([e])=>"client-request-id"===e));return r&&r.length&&r[1]||Vr}async sendGetRequestAsync(e,t){const r=$t({url:e,method:"GET",body:null==t?void 0:t.body,headers:Gt(null==t?void 0:t.headers),abortSignal:this.generateAbortSignal(Vr)}),n=await this.sendRequest(r);return{body:n.bodyAsText?JSON.parse(n.bodyAsText):void 0,headers:n.headers.toJSON(),status:n.status}}async sendPostRequestAsync(e,t){const r=$t({url:e,method:"POST",body:null==t?void 0:t.body,headers:Gt(null==t?void 0:t.headers),abortSignal:this.generateAbortSignal(this.getCorrelationId(t))}),n=await this.sendRequest(r);return{body:n.bodyAsText?JSON.parse(n.bodyAsText):void 0,headers:n.headers.toJSON(),status:n.status}}}const Qr=l("ClientSecretCredential");class Wr{constructor(e,t,r,n){this.identityClient=new $r(n),this.tenantId=e,this.clientId=t,this.clientSecret=r}async getToken(e,t){const{span:r,updatedOptions:n}=S(`${this.constructor.name}.getToken`,t),o=new URLSearchParams({response_type:"token",grant_type:"client_credentials",client_id:this.clientId,client_secret:this.clientSecret,scope:"string"==typeof e?e:e.join(" ")});try{const i=Qt(this.tenantId),s=$t({url:`${this.identityClient.authorityHost}/${this.tenantId}/${i}`,method:"POST",body:o.toString(),headers:Gt({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),abortSignal:t&&t.abortSignal,tracingOptions:null==n?void 0:n.tracingOptions}),c=await this.identityClient.sendTokenRequest(s);return Qr.getToken.info(a(e)),c&&c.accessToken||null}catch(t){throw r.setStatus({code:v.Qn.ERROR,message:t.message}),Qr.getToken.info(s(e,t)),t}finally{r.end()}}}const Yr=new Error("ClientCertificateCredential is not supported in the browser."),Jr=l("ClientCertificateCredential");class Xr{constructor(){throw Jr.info(s("",Yr)),Yr}getToken(){throw Jr.getToken.info(s("",Yr)),Yr}}const Zr=new Error("AzureCliCredential is not supported in the browser."),en=l("AzureCliCredential");class tn{constructor(){throw en.info(s("",Zr)),Zr}getToken(){throw en.getToken.info(s("",Zr)),Zr}}var rn=function(e,t){return rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},rn(e,t)};function nn(e,t){function r(){this.constructor=e}rn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var on,an,sn=function(){return sn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sn.apply(this,arguments)};function cn(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function ln(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function dn(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function un(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(dn(arguments[t]));return e}!function(e){e.AcquireTokenByCode="acquireTokenByCode",e.AcquireTokenByRefreshToken="acquireTokenByRefreshToken",e.AcquireTokenSilent="acquireTokenSilent",e.AcquireTokenSilentAsync="acquireTokenSilentAsync",e.AcquireTokenPopup="acquireTokenPopup",e.CryptoOptsGetPublicKeyThumbprint="cryptoOptsGetPublicKeyThumbprint",e.CryptoOptsSignJwt="cryptoOptsSignJwt",e.SilentCacheClientAcquireToken="silentCacheClientAcquireToken",e.SilentIframeClientAcquireToken="silentIframeClientAcquireToken",e.SilentRefreshClientAcquireToken="silentRefreshClientAcquireToken",e.SsoSilent="ssoSilent",e.StandardInteractionClientGetDiscoveredAuthority="standardInteractionClientGetDiscoveredAuthority",e.FetchAccountIdWithNativeBroker="fetchAccountIdWithNativeBroker",e.NativeInteractionClientAcquireToken="nativeInteractionClientAcquireToken"}(on||(on={})),function(e){e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed"}(an||(an={}));var mn=function(e,t){return mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},mn(e,t)};function pn(e,t){function r(){this.constructor=e}mn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var hn=function(){return hn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hn.apply(this,arguments)};function gn(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function fn(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function yn(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}var bn,vn,Sn,Nn,Cn,xn={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token"},wn=[xn.OPENID_SCOPE,xn.PROFILE_SCOPE,xn.OFFLINE_ACCESS_SCOPE],En=yn(wn,[xn.EMAIL_SCOPE]);!function(e){e.CONTENT_TYPE="Content-Type",e.RETRY_AFTER="Retry-After",e.CCS_HEADER="X-AnchorMailbox",e.WWWAuthenticate="WWW-Authenticate",e.AuthenticationInfo="Authentication-Info"}(bn||(bn={})),function(e){e.ID_TOKEN="idtoken",e.CLIENT_INFO="client.info",e.ADAL_ID_TOKEN="adal.idtoken",e.ERROR="error",e.ERROR_DESC="error.description",e.ACTIVE_ACCOUNT="active-account"}(vn||(vn={})),function(e){e.COMMON="common",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers"}(Sn||(Sn={})),function(e){e.CLIENT_ID="client_id",e.REDIRECT_URI="redirect_uri",e.RESPONSE_TYPE="response_type",e.RESPONSE_MODE="response_mode",e.GRANT_TYPE="grant_type",e.CLAIMS="claims",e.SCOPE="scope",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.REFRESH_TOKEN="refresh_token",e.EXPIRES_IN="expires_in",e.STATE="state",e.NONCE="nonce",e.PROMPT="prompt",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info",e.CODE="code",e.CODE_CHALLENGE="code_challenge",e.CODE_CHALLENGE_METHOD="code_challenge_method",e.CODE_VERIFIER="code_verifier",e.CLIENT_REQUEST_ID="client-request-id",e.X_CLIENT_SKU="x-client-SKU",e.X_CLIENT_VER="x-client-VER",e.X_CLIENT_OS="x-client-OS",e.X_CLIENT_CPU="x-client-CPU",e.X_CLIENT_CURR_TELEM="x-client-current-telemetry",e.X_CLIENT_LAST_TELEM="x-client-last-telemetry",e.X_MS_LIB_CAPABILITY="x-ms-lib-capability",e.X_APP_NAME="x-app-name",e.X_APP_VER="x-app-ver",e.POST_LOGOUT_URI="post_logout_redirect_uri",e.ID_TOKEN_HINT="id_token_hint",e.DEVICE_CODE="device_code",e.CLIENT_SECRET="client_secret",e.CLIENT_ASSERTION="client_assertion",e.CLIENT_ASSERTION_TYPE="client_assertion_type",e.TOKEN_TYPE="token_type",e.REQ_CNF="req_cnf",e.OBO_ASSERTION="assertion",e.REQUESTED_TOKEN_USE="requested_token_use",e.ON_BEHALF_OF="on_behalf_of",e.FOCI="foci",e.CCS_HEADER="X-AnchorMailbox",e.RETURN_SPA_CODE="return_spa_code",e.NATIVE_BROKER="nativebroker",e.LOGOUT_HINT="logout_hint"}(Nn||(Nn={})),function(e){e.ACCESS_TOKEN="access_token",e.XMS_CC="xms_cc"}(Cn||(Cn={}));var Rn,Tn={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create"};!function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ID_TOKEN="id_token",e.DOMAIN_HINT="domain_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier"}(Rn||(Rn={}));var Pn,In,_n,An,On,kn,Mn,qn={PLAIN:"plain",S256:"S256"};!function(e){e.QUERY="query",e.FRAGMENT="fragment",e.FORM_POST="form_post"}(Pn||(Pn={})),function(e){e.IMPLICIT_GRANT="implicit",e.AUTHORIZATION_CODE_GRANT="authorization_code",e.CLIENT_CREDENTIALS_GRANT="client_credentials",e.RESOURCE_OWNER_PASSWORD_GRANT="password",e.REFRESH_TOKEN_GRANT="refresh_token",e.DEVICE_CODE_GRANT="device_code",e.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"}(In||(In={})),function(e){e.MSSTS_ACCOUNT_TYPE="MSSTS",e.ADFS_ACCOUNT_TYPE="ADFS",e.MSAV1_ACCOUNT_TYPE="MSA",e.GENERIC_ACCOUNT_TYPE="Generic"}(_n||(_n={})),function(e){e.CACHE_KEY_SEPARATOR="-",e.CLIENT_INFO_SEPARATOR="."}(An||(An={})),function(e){e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",e.REFRESH_TOKEN="RefreshToken"}(On||(On={})),function(e){e.ACCOUNT="Account",e.CREDENTIAL="Credential",e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.REFRESH_TOKEN="RefreshToken",e.APP_METADATA="AppMetadata",e.TEMPORARY="TempCache",e.TELEMETRY="Telemetry",e.UNDEFINED="Undefined",e.THROTTLING="Throttling"}(kn||(kn={})),function(e){e[e.ADFS=1001]="ADFS",e[e.MSA=1002]="MSA",e[e.MSSTS=1003]="MSSTS",e[e.GENERIC=1004]="GENERIC",e[e.ACCESS_TOKEN=2001]="ACCESS_TOKEN",e[e.REFRESH_TOKEN=2002]="REFRESH_TOKEN",e[e.ID_TOKEN=2003]="ID_TOKEN",e[e.APP_METADATA=3001]="APP_METADATA",e[e.UNDEFINED=9999]="UNDEFINED"}(Mn||(Mn={}));var zn,Bn="appmetadata",Hn="1",Dn="authority-metadata";!function(e){e.CONFIG="config",e.CACHE="cache",e.NETWORK="network"}(zn||(zn={}));var Ln,Un={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};!function(e){e.BEARER="Bearer",e.POP="pop",e.SSH="ssh-cert"}(Ln||(Ln={}));var jn,Fn,Kn,Gn,Vn,$n,Qn="throttling";!function(e){e.username="username",e.password="password"}(jn||(jn={})),function(e){e[e.httpSuccess=200]="httpSuccess",e[e.httpBadRequest=400]="httpBadRequest"}(Fn||(Fn={})),function(e){e.FAILED_AUTO_DETECTION="1",e.INTERNAL_CACHE="2",e.ENVIRONMENT_VARIABLE="3",e.IMDS="4"}(Kn||(Kn={})),function(e){e.CONFIGURED_MATCHES_DETECTED="1",e.CONFIGURED_NO_AUTO_DETECTION="2",e.CONFIGURED_NOT_DETECTED="3",e.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",e.AUTO_DETECTION_REQUESTED_FAILED="5"}(Gn||(Gn={})),function(e){e.NO_CACHE_HIT="0",e.FORCE_REFRESH="1",e.NO_CACHED_ACCESS_TOKEN="2",e.CACHED_ACCESS_TOKEN_EXPIRED="3",e.REFRESH_CACHED_ACCESS_TOKEN="4"}(Vn||(Vn={})),function(e){e.Jwt="JWT",e.Jwk="JWK"}($n||($n={}));var Wn,Yn,Jn,Xn,Zn,eo,to,ro,no="msal.js.browser",oo="53ee284d-920a-4b59-9d30-a60315b26836";!function(e){e.HandshakeRequest="Handshake",e.HandshakeResponse="HandshakeResponse",e.GetToken="GetToken",e.Response="Response"}(Wn||(Wn={})),function(e){e.LocalStorage="localStorage",e.SessionStorage="sessionStorage",e.MemoryStorage="memoryStorage"}(Yn||(Yn={})),function(e){e.GET="GET",e.POST="POST"}(Jn||(Jn={})),function(e){e.AUTHORITY="authority",e.ACQUIRE_TOKEN_ACCOUNT="acquireToken.account",e.SESSION_STATE="session.state",e.REQUEST_STATE="request.state",e.NONCE_IDTOKEN="nonce.id_token",e.ORIGIN_URI="request.origin",e.RENEW_STATUS="token.renew.status",e.URL_HASH="urlHash",e.REQUEST_PARAMS="request.params",e.SCOPES="scopes",e.INTERACTION_STATUS_KEY="interaction.status",e.CCS_CREDENTIAL="ccs.credential",e.CORRELATION_ID="request.correlationId",e.NATIVE_REQUEST="request.native"}(Xn||(Xn={})),function(e){e.WRAPPER_SKU="wrapper.sku",e.WRAPPER_VER="wrapper.version"}(Zn||(Zn={})),function(e){e[e.acquireTokenRedirect=861]="acquireTokenRedirect",e[e.acquireTokenPopup=862]="acquireTokenPopup",e[e.ssoSilent=863]="ssoSilent",e[e.acquireTokenSilent_authCode=864]="acquireTokenSilent_authCode",e[e.handleRedirectPromise=865]="handleRedirectPromise",e[e.acquireTokenByCode=866]="acquireTokenByCode",e[e.acquireTokenSilent_silentFlow=61]="acquireTokenSilent_silentFlow",e[e.logout=961]="logout",e[e.logoutPopup=962]="logoutPopup"}(eo||(eo={})),function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(to||(to={})),function(e){e.Startup="startup",e.Login="login",e.Logout="logout",e.AcquireToken="acquireToken",e.SsoSilent="ssoSilent",e.HandleRedirect="handleRedirect",e.None="none"}(ro||(ro={}));var io,ao={scopes:wn},so="jwk";!function(e){e.React="@azure/msal-react",e.Angular="@azure/msal-angular"}(io||(io={}));var co,lo="msal.db",uo="unexpected_error",mo="Unexpected error in authentication.",po=function(e){function t(r,n,o){var i=this,a=n?r+": "+n:r;return i=e.call(this,a)||this,Object.setPrototypeOf(i,t.prototype),i.errorCode=r||xn.EMPTY_STRING,i.errorMessage=n||xn.EMPTY_STRING,i.subError=o||xn.EMPTY_STRING,i.name="AuthError",i}return pn(t,e),t.prototype.setCorrelationId=function(e){this.correlationId=e},t.createUnexpectedError=function(e){return new t(uo,mo+": "+e)},t}(Error),ho="missing_kid_error",go="The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",fo="missing_alg_error",yo="The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided.",bo=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="JoseHeaderError",Object.setPrototypeOf(o,t.prototype),o}return pn(t,e),t.createMissingKidError=function(){return new t(ho,go)},t.createMissingAlgError=function(){return new t(fo,yo)},t}(po),vo=function(){function e(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}return e.getShrHeaderString=function(t){if(!t.kid)throw bo.createMissingKidError();if(!t.alg)throw bo.createMissingAlgError();var r=new e({typ:t.typ||$n.Jwt,kid:t.kid,alg:t.alg});return JSON.stringify(r)},e}(),So=function(){function e(){}return e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e}(),No=function(){function e(e){this.cryptoObj=e}return e.prototype.generateGuid=function(){try{var e=new Uint8Array(16);return this.cryptoObj.getRandomValues(e),e[6]|=64,e[6]&=79,e[8]|=128,e[8]&=191,So.decimalToHex(e[0])+So.decimalToHex(e[1])+So.decimalToHex(e[2])+So.decimalToHex(e[3])+"-"+So.decimalToHex(e[4])+So.decimalToHex(e[5])+"-"+So.decimalToHex(e[6])+So.decimalToHex(e[7])+"-"+So.decimalToHex(e[8])+So.decimalToHex(e[9])+"-"+So.decimalToHex(e[10])+So.decimalToHex(e[11])+So.decimalToHex(e[12])+So.decimalToHex(e[13])+So.decimalToHex(e[14])+So.decimalToHex(e[15])}catch(e){for(var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r="0123456789abcdef",n=0,o=xn.EMPTY_STRING,i=0;i<36;i++)"-"!==t[i]&&"4"!==t[i]&&(n=16*Math.random()|0),"x"===t[i]?o+=r[n]:"y"===t[i]?(n&=3,o+=r[n|=8]):o+=t[i];return o}},e.prototype.isGuid=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},e}(),Co=function(){function e(){}return e.stringToUtf8Arr=function(e){for(var t,r=0,n=e.length,o=0;o<n;o++)r+=(t=e.charCodeAt(o))<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;for(var i=new Uint8Array(r),a=0,s=0;a<r;s++)(t=e.charCodeAt(s))<128?i[a++]=t:t<2048?(i[a++]=192+(t>>>6),i[a++]=128+(63&t)):t<65536?(i[a++]=224+(t>>>12),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t)):t<2097152?(i[a++]=240+(t>>>18),i[a++]=128+(t>>>12&63),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t)):t<67108864?(i[a++]=248+(t>>>24),i[a++]=128+(t>>>18&63),i[a++]=128+(t>>>12&63),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t)):(i[a++]=252+(t>>>30),i[a++]=128+(t>>>24&63),i[a++]=128+(t>>>18&63),i[a++]=128+(t>>>12&63),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t));return i},e.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t},e.utf8ArrToString=function(e){for(var t=xn.EMPTY_STRING,r=void 0,n=e.length,o=0;o<n;o++)r=e[o],t+=String.fromCharCode(r>251&&r<254&&o+5<n?1073741824*(r-252)+(e[++o]-128<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:r>247&&r<252&&o+4<n?(r-248<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:r>239&&r<248&&o+3<n?(r-240<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:r>223&&r<240&&o+2<n?(r-224<<12)+(e[++o]-128<<6)+e[++o]-128:r>191&&r<224&&o+1<n?(r-192<<6)+e[++o]-128:r);return t},e}(),xo=function(){function e(){}return e.prototype.urlEncode=function(e){return encodeURIComponent(this.encode(e).replace(/=/g,xn.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_"))},e.prototype.urlEncodeArr=function(e){return this.base64EncArr(e).replace(/=/g,xn.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")},e.prototype.encode=function(e){var t=Co.stringToUtf8Arr(e);return this.base64EncArr(t)},e.prototype.base64EncArr=function(e){for(var t=(3-e.length%3)%3,r=xn.EMPTY_STRING,n=void 0,o=e.length,i=0,a=0;a<o;a++)n=a%3,i|=e[a]<<(16>>>n&24),2!==n&&e.length-a!=1||(r+=String.fromCharCode(this.uint6ToB64(i>>>18&63),this.uint6ToB64(i>>>12&63),this.uint6ToB64(i>>>6&63),this.uint6ToB64(63&i)),i=0);return 0===t?r:r.substring(0,r.length-t)+(1===t?"=":"==")},e.prototype.uint6ToB64=function(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65},e}(),wo=function(){function e(){}return e.prototype.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Invalid base64 string")}var r=this.base64DecToArr(t);return Co.utf8ArrToString(r)},e.prototype.base64DecToArr=function(e,t){for(var r=e.replace(/[^A-Za-z0-9\+\/]/g,xn.EMPTY_STRING),n=r.length,o=t?Math.ceil((3*n+1>>>2)/t)*t:3*n+1>>>2,i=new Uint8Array(o),a=void 0,s=void 0,c=0,l=0,d=0;d<n;d++)if(s=3&d,c|=this.b64ToUint6(r.charCodeAt(d))<<18-6*s,3===s||n-d==1){for(a=0;a<3&&l<o;a++,l++)i[l]=c>>>(16>>>a&24)&255;c=0}return i},e.prototype.b64ToUint6=function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0},e}(),Eo="client_info_decoding_error",Ro="The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause.",To="client_info_empty_error",Po="The client info was empty. Please review the trace to determine the root cause.",Io="token_parsing_error",_o="Token cannot be parsed. Please review stack trace to determine root cause.",Ao="null_or_empty_token",Oo="The token is null or empty. Please review the trace to determine the root cause.",ko="endpoints_resolution_error",Mo="Error: could not resolve endpoints. Please check network and try again.",qo="network_error",zo="Network request failed. Please check network trace to determine root cause.",Bo="openid_config_error",Ho="Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",Do="hash_not_deserialized",Lo="The hash parameters could not be deserialized. Please review the trace to determine the root cause.",Uo="invalid_state",jo="State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState().",Fo="state_mismatch",Ko="State mismatch error. Please check your network. Continued requests may cause cache overflow.",Go="state_not_found",Vo="State not found",$o="nonce_mismatch",Qo="Nonce mismatch error. This may be caused by a race condition in concurrent requests.",Wo="nonce_not_found",Yo="nonce not found",Jo="multiple_matching_tokens",Xo="The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",Zo="multiple_matching_accounts",ei="The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",ti="multiple_matching_appMetadata",ri="The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",ni="request_cannot_be_made",oi="Token request cannot be made without authorization code or refresh token.",ii="cannot_append_empty_scope",ai="Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info.",si="cannot_remove_empty_scope",ci="Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info.",li="cannot_append_scopeset",di="Cannot append ScopeSet due to error.",ui="empty_input_scopeset",mi="Empty input ScopeSet cannot be processed.",pi="device_code_polling_cancelled",hi="Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",gi="device_code_expired",fi="Device code is expired.",yi="device_code_unknown_error",bi="Device code stopped polling for unknown reasons.",vi="no_account_in_silent_request",Si="Please pass an account object, silent flow is not supported without account information",Ni="invalid_cache_record",Ci="Cache record object was null or undefined.",xi="invalid_cache_environment",wi="Invalid environment when attempting to create cache entry",Ei="no_account_found",Ri="No account found in cache for given key.",Ti="no cache plugin set on CacheManager",Pi="ICachePlugin needs to be set before using readFromStorage or writeFromStorage",Ii="no_crypto_object",_i="No crypto object detected. This is required for the following operation: ",Ai="invalid_cache_type",Oi="Invalid cache type",ki="unexpected_account_type",Mi="Unexpected account type.",qi="unexpected_credential_type",zi="Unexpected credential type.",Bi="invalid_assertion",Hi="Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",Di="invalid_client_credential",Li="Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",Ui="token_refresh_required",ji="Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",Fi="user_timeout_reached",Ki="User defined timeout for device code polling reached",Gi="token_claims_cnf_required_for_signedjwt",Vi="Cannot generate a POP jwt if the token_claims are not populated",$i="authorization_code_missing_from_server_response",Qi="Server response does not contain an authorization code to proceed",Wi="binding_key_not_removed",Yi="Could not remove the credential's binding key from storage.",Ji="end_session_endpoint_not_supported",Xi="Provided authority does not support logout.",Zi="key_id_missing",ea="A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",ta=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="ClientAuthError",Object.setPrototypeOf(o,t.prototype),o}return pn(t,e),t.createClientInfoDecodingError=function(e){return new t(Eo,Ro+" Failed with error: "+e)},t.createClientInfoEmptyError=function(){return new t(To,""+Po)},t.createTokenParsingError=function(e){return new t(Io,_o+" Failed with error: "+e)},t.createTokenNullOrEmptyError=function(e){return new t(Ao,Oo+" Raw Token Value: "+e)},t.createEndpointDiscoveryIncompleteError=function(e){return new t(ko,Mo+" Detail: "+e)},t.createNetworkError=function(e,r){return new t(qo,zo+" | Fetch client threw: "+r+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToGetOpenidConfigError=function(e){return new t(Bo,Ho+" Attempted to retrieve endpoints from: "+e)},t.createHashNotDeserializedError=function(e){return new t(Do,Lo+" Given Object: "+e)},t.createInvalidStateError=function(e,r){return new t(Uo,jo+" Invalid State: "+e+", Root Err: "+r)},t.createStateMismatchError=function(){return new t(Fo,Ko)},t.createStateNotFoundError=function(e){return new t(Go,Vo+":  "+e)},t.createNonceMismatchError=function(){return new t($o,Qo)},t.createNonceNotFoundError=function(e){return new t(Wo,Yo+":  "+e)},t.createMultipleMatchingTokensInCacheError=function(){return new t(Jo,Xo+".")},t.createMultipleMatchingAccountsInCacheError=function(){return new t(Zo,ei)},t.createMultipleMatchingAppMetadataInCacheError=function(){return new t(ti,ri)},t.createTokenRequestCannotBeMadeError=function(){return new t(ni,oi)},t.createAppendEmptyScopeToSetError=function(e){return new t(ii,ai+" Given Scope: "+e)},t.createRemoveEmptyScopeFromSetError=function(e){return new t(si,ci+" Given Scope: "+e)},t.createAppendScopeSetError=function(e){return new t(li,di+" Detail Error: "+e)},t.createEmptyInputScopeSetError=function(){return new t(ui,""+mi)},t.createDeviceCodeCancelledError=function(){return new t(pi,""+hi)},t.createDeviceCodeExpiredError=function(){return new t(gi,""+fi)},t.createDeviceCodeUnknownError=function(){return new t(yi,""+bi)},t.createNoAccountInSilentRequestError=function(){return new t(vi,""+Si)},t.createNullOrUndefinedCacheRecord=function(){return new t(Ni,Ci)},t.createInvalidCacheEnvironmentError=function(){return new t(xi,wi)},t.createNoAccountFoundError=function(){return new t(Ei,Ri)},t.createCachePluginError=function(){return new t(Ti,""+Pi)},t.createNoCryptoObjectError=function(e){return new t(Ii,""+_i+e)},t.createInvalidCacheTypeError=function(){return new t(Ai,""+Oi)},t.createUnexpectedAccountTypeError=function(){return new t(ki,""+Mi)},t.createUnexpectedCredentialTypeError=function(){return new t(qi,""+zi)},t.createInvalidAssertionError=function(){return new t(Bi,""+Hi)},t.createInvalidCredentialError=function(){return new t(Di,""+Li)},t.createRefreshRequiredError=function(){return new t(Ui,ji)},t.createUserTimeoutReachedError=function(){return new t(Fi,Ki)},t.createTokenClaimsRequiredError=function(){return new t(Gi,Vi)},t.createNoAuthCodeInServerResponseError=function(){return new t($i,Qi)},t.createBindingKeyNotRemovedError=function(){return new t(Wi,Yi)},t.createLogoutNotSupportedError=function(){return new t(Ji,Xi)},t.createKeyIdMissingError=function(){return new t(Zi,ea)},t}(po),ra=function(){function e(){}return e.decodeAuthToken=function(t){if(e.isEmpty(t))throw ta.createTokenNullOrEmptyError(t);var r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw ta.createTokenParsingError("Given token is malformed: "+JSON.stringify(t));return{header:r[1],JWSPayload:r[2],JWSSig:r[3]}},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.isEmptyObj=function(t){if(t&&!e.isEmpty(t))try{var r=JSON.parse(t);return 0===Object.keys(r).length}catch(e){}return!0},e.startsWith=function(e,t){return 0===e.indexOf(t)},e.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},e.queryStringToObject=function(e){var t={},r=e.split("&"),n=function(e){return decodeURIComponent(e.replace(/\+/g," "))};return r.forEach((function(e){if(e.trim()){var r=e.split(/=(.+)/g,2),o=r[0],i=r[1];o&&i&&(t[n(o)]=n(i))}})),t},e.trimArrayEntries=function(e){return e.map((function(e){return e.trim()}))},e.removeEmptyStringsFromArray=function(t){return t.filter((function(t){return!e.isEmpty(t)}))},e.jsonParseHelper=function(e){try{return JSON.parse(e)}catch(e){return null}},e.matchPattern=function(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)},e}(),na="pkce_not_created",oa="The PKCE code challenge and verifier could not be generated.",ia="crypto_nonexistent",aa="The crypto object or function is not available.",sa="http_method_not_implemented",ca="The HTTP method given has not been implemented in this library.",la="empty_navigate_uri",da="Navigation URI is empty. Please check stack trace for more info.",ua="hash_empty_error",ma="Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. For more visit: aka.ms/msaljs/browser-errors.",pa="no_state_in_hash",ha="Hash does not contain state. Please verify that the request originated from msal.",ga="hash_does_not_contain_known_properties",fa="Hash does not contain known properites. Please verify that your redirectUri is not changing the hash. For more visit: aka.ms/msaljs/browser-errors.",ya="unable_to_parse_state",ba="Unable to parse state. Please verify that the request originated from msal.",va="state_interaction_type_mismatch",Sa="Hash contains state but the interaction type does not match the caller.",Na="interaction_in_progress",Ca="Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.  For more visit: aka.ms/msaljs/browser-errors.",xa="popup_window_error",wa="Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",Ea="empty_window_error",Ra="window.open returned null or undefined window object.",Ta="user_cancelled",Pa="User cancelled the flow.",Ia="monitor_window_timeout",_a="Token acquisition in popup failed due to timeout. For more visit: aka.ms/msaljs/browser-errors.",Aa="monitor_window_timeout",Oa="Token acquisition in iframe failed due to timeout. For more visit: aka.ms/msaljs/browser-errors.",ka="redirect_in_iframe",Ma="Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",qa="block_iframe_reload",za="Request was blocked inside an iframe because MSAL detected an authentication response. For more visit: aka.ms/msaljs/browser-errors",Ba="block_nested_popups",Ha="Request was blocked inside a popup because MSAL detected it was running in a popup.",Da="iframe_closed_prematurely",La="The iframe being monitored was closed prematurely.",Ua="silent_logout_unsupported",ja="Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",Fa="no_account_error",Ka="No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",Ga="silent_prompt_value_error",Va="The value given for the prompt value is not valid for silent requests - must be set to 'none'.",$a="no_token_request_cache_error",Qa="No token request found in cache.",Wa="unable_to_parse_token_request_cache_error",Ya="The cached token request could not be parsed.",Ja="no_cached_authority_error",Xa="No cached authority found.",Za="auth_request_not_set_error",es="Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",ts="invalid_cache_type",rs="Invalid cache type",ns="non_browser_environment",os="Login and token requests are not supported in non-browser environments.",is="database_not_open",as="Database is not open!",ss="no_network_connectivity",cs="No network connectivity. Check your internet connection.",ls="post_request_failed",ds="Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",us="get_request_failed",ms="Network request failed. Please check the network trace to determine root cause.",ps="failed_to_parse_response",hs="Failed to parse network response. Check network trace.",gs="unable_to_load_token",fs="Error loading token to cache.",ys="crypto_key_not_found",bs="Cryptographic Key or Keypair not found in browser storage.",vs="auth_code_required",Ss="An authorization code must be provided (as the `code` property on the request) to this flow.",Ns="auth_code_or_nativeAccountId_required",Cs="An authorization code or nativeAccountId must be provided to this flow.",xs="database_unavailable",ws="IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",Es="unable_to_acquire_token_from_native_platform",Rs="Unable to acquire token from native platform. For a list of possible reasons visit aka.ms/msaljs/browser-errors.",Ts="native_handshake_timeout",Ps="Timed out while attempting to establish connection to browser extension",Is="native_extension_not_installed",_s="Native extension is not installed. If you think this is a mistake call the initialize function.",As="native_connection_not_established",Os="Connection to native platform has not been established. Please install a compatible browser extension and run initialize(). For more please visit aka.ms/msaljs/browser-errors.",ks="native_broker_called_before_initialize",Ms="You must call and await the initialize function before attempting to call any other MSAL API when native brokering is enabled. For more please visit aka.ms/msaljs/browser-errors.",qs="native_prompt_not_supported",zs="The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",Bs=function(e){function t(r,n){var o=e.call(this,r,n)||this;return Object.setPrototypeOf(o,t.prototype),o.name="BrowserAuthError",o}return nn(t,e),t.createPkceNotGeneratedError=function(e){return new t(na,oa+" Detail:"+e)},t.createCryptoNotAvailableError=function(e){return new t(ia,aa+" Detail:"+e)},t.createHttpMethodNotImplementedError=function(e){return new t(sa,ca+" Given Method: "+e)},t.createEmptyNavigationUriError=function(){return new t(la,da)},t.createEmptyHashError=function(e){return new t(ua,ma+" Given Url: "+e)},t.createHashDoesNotContainStateError=function(){return new t(pa,ha)},t.createHashDoesNotContainKnownPropertiesError=function(){return new t(ga,fa)},t.createUnableToParseStateError=function(){return new t(ya,ba)},t.createStateInteractionTypeMismatchError=function(){return new t(va,Sa)},t.createInteractionInProgressError=function(){return new t(Na,Ca)},t.createPopupWindowError=function(e){var r=wa;return r=ra.isEmpty(e)?r:r+" Details: "+e,new t(xa,r)},t.createEmptyWindowCreatedError=function(){return new t(Ea,Ra)},t.createUserCancelledError=function(){return new t(Ta,Pa)},t.createMonitorPopupTimeoutError=function(){return new t(Ia,_a)},t.createMonitorIframeTimeoutError=function(){return new t(Aa,Oa)},t.createRedirectInIframeError=function(e){return new t(ka,Ma+" (window.parent !== window) => "+e)},t.createBlockReloadInHiddenIframeError=function(){return new t(qa,za)},t.createBlockAcquireTokenInPopupsError=function(){return new t(Ba,Ha)},t.createIframeClosedPrematurelyError=function(){return new t(Da,La)},t.createSilentLogoutUnsupportedError=function(){return new t(Ua,ja)},t.createNoAccountError=function(){return new t(Fa,Ka)},t.createSilentPromptValueError=function(e){return new t(Ga,Va+" Given value: "+e)},t.createUnableToParseTokenRequestCacheError=function(){return new t(Wa,Ya)},t.createNoTokenRequestCacheError=function(){return new t($a,Qa)},t.createAuthRequestNotSetError=function(){return new t(Za,es)},t.createNoCachedAuthorityError=function(){return new t(Ja,Xa)},t.createInvalidCacheTypeError=function(){return new t(ts,""+rs)},t.createNonBrowserEnvironmentError=function(){return new t(ns,os)},t.createDatabaseNotOpenError=function(){return new t(is,as)},t.createNoNetworkConnectivityError=function(){return new t(ss,cs)},t.createPostRequestFailedError=function(e,r){return new t(ls,ds+" | Network client threw: "+e+" | Attempted to reach: "+r.split("?")[0])},t.createGetRequestFailedError=function(e,r){return new t(us,ms+" | Network client threw: "+e+" | Attempted to reach: "+r.split("?")[0])},t.createFailedToParseNetworkResponseError=function(e){return new t(ps,hs+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToLoadTokenError=function(e){return new t(gs,fs+" | "+e)},t.createSigningKeyNotFoundInStorageError=function(e){return new t(ys,bs+" | No match found for KeyId: "+e)},t.createAuthCodeRequiredError=function(){return new t(vs,Ss)},t.createAuthCodeOrNativeAccountIdRequiredError=function(){return new t(Ns,Cs)},t.createDatabaseUnavailableError=function(){return new t(xs,ws)},t.createUnableToAcquireTokenFromNativePlatformError=function(){return new t(Es,Rs)},t.createNativeHandshakeTimeoutError=function(){return new t(Ts,Ps)},t.createNativeExtensionNotInstalledError=function(){return new t(Is,_s)},t.createNativeConnectionNotEstablishedError=function(){return new t(As,Os)},t.createNativeBrokerCalledBeforeInitialize=function(){return new t(ks,Ms)},t.createNativePromptParameterNotSupportedError=function(){return new t(qs,zs)},t}(po),Hs=function(){function e(e){this.base64Encode=new xo,this.cryptoObj=e}return e.prototype.generateCodes=function(){return cn(this,void 0,void 0,(function(){var e,t;return ln(this,(function(r){switch(r.label){case 0:return e=this.generateCodeVerifier(),[4,this.generateCodeChallengeFromVerifier(e)];case 1:return t=r.sent(),[2,{verifier:e,challenge:t}]}}))}))},e.prototype.generateCodeVerifier=function(){try{var e=new Uint8Array(32);return this.cryptoObj.getRandomValues(e),this.base64Encode.urlEncodeArr(e)}catch(e){throw Bs.createPkceNotGeneratedError(e)}},e.prototype.generateCodeChallengeFromVerifier=function(e){return cn(this,void 0,void 0,(function(){var t,r;return ln(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cryptoObj.sha256Digest(e)];case 1:return t=n.sent(),[2,this.base64Encode.urlEncodeArr(new Uint8Array(t))];case 2:throw r=n.sent(),Bs.createPkceNotGeneratedError(r);case 3:return[2]}}))}))},e}(),Ds="SHA-256",Ls=new Uint8Array([1,0,1]),Us=function(){function e(e){if(this.logger=e,!this.hasCryptoAPI())throw Bs.createCryptoNotAvailableError("Browser crypto or msCrypto object not available.");this._keygenAlgorithmOptions={name:"RSASSA-PKCS1-v1_5",hash:Ds,modulusLength:2048,publicExponent:Ls}}return e.prototype.sha256Digest=function(e){return cn(this,void 0,void 0,(function(){var t;return ln(this,(function(r){return t=Co.stringToUtf8Arr(e),[2,this.hasIECrypto()?this.getMSCryptoDigest(Ds,t):this.getSubtleCryptoDigest(Ds,t)]}))}))},e.prototype.getRandomValues=function(e){var t=window.msCrypto||window.crypto;if(!t.getRandomValues)throw Bs.createCryptoNotAvailableError("getRandomValues does not exist.");t.getRandomValues(e)},e.prototype.generateKeyPair=function(e,t){return cn(this,void 0,void 0,(function(){return ln(this,(function(r){return[2,this.hasIECrypto()?this.msCryptoGenerateKey(e,t):window.crypto.subtle.generateKey(this._keygenAlgorithmOptions,e,t)]}))}))},e.prototype.exportJwk=function(e){return cn(this,void 0,void 0,(function(){return ln(this,(function(t){return[2,this.hasIECrypto()?this.msCryptoExportJwk(e):window.crypto.subtle.exportKey(so,e)]}))}))},e.prototype.importJwk=function(t,r,n){return cn(this,void 0,void 0,(function(){var o,i;return ln(this,(function(a){return o=e.getJwkString(t),i=Co.stringToArrayBuffer(o),[2,this.hasIECrypto()?this.msCryptoImportKey(i,r,n):window.crypto.subtle.importKey(so,t,this._keygenAlgorithmOptions,r,n)]}))}))},e.prototype.sign=function(e,t){return cn(this,void 0,void 0,(function(){return ln(this,(function(r){return[2,this.hasIECrypto()?this.msCryptoSign(e,t):window.crypto.subtle.sign(this._keygenAlgorithmOptions,e,t)]}))}))},e.prototype.hasCryptoAPI=function(){return this.hasIECrypto()||this.hasBrowserCrypto()},e.prototype.hasIECrypto=function(){return"msCrypto"in window},e.prototype.hasBrowserCrypto=function(){return"crypto"in window},e.prototype.getSubtleCryptoDigest=function(e,t){return cn(this,void 0,void 0,(function(){return ln(this,(function(r){return[2,window.crypto.subtle.digest(e,t)]}))}))},e.prototype.getMSCryptoDigest=function(e,t){return cn(this,void 0,void 0,(function(){return ln(this,(function(r){return[2,new Promise((function(r,n){var o=window.msCrypto.subtle.digest(e,t.buffer);o.addEventListener("complete",(function(e){r(e.target.result)})),o.addEventListener("error",(function(e){n(e)}))}))]}))}))},e.prototype.msCryptoGenerateKey=function(e,t){return cn(this,void 0,void 0,(function(){var r=this;return ln(this,(function(n){return[2,new Promise((function(n,o){var i=window.msCrypto.subtle.generateKey(r._keygenAlgorithmOptions,e,t);i.addEventListener("complete",(function(e){n(e.target.result)})),i.addEventListener("error",(function(e){o(e)}))}))]}))}))},e.prototype.msCryptoExportJwk=function(e){return cn(this,void 0,void 0,(function(){return ln(this,(function(t){return[2,new Promise((function(t,r){var n=window.msCrypto.subtle.exportKey(so,e);n.addEventListener("complete",(function(e){var n=e.target.result,o=Co.utf8ArrToString(new Uint8Array(n)).replace(/\r/g,xn.EMPTY_STRING).replace(/\n/g,xn.EMPTY_STRING).replace(/\t/g,xn.EMPTY_STRING).split(" ").join(xn.EMPTY_STRING).replace("\0",xn.EMPTY_STRING);try{t(JSON.parse(o))}catch(e){r(e)}})),n.addEventListener("error",(function(e){r(e)}))}))]}))}))},e.prototype.msCryptoImportKey=function(e,t,r){return cn(this,void 0,void 0,(function(){var n=this;return ln(this,(function(o){return[2,new Promise((function(o,i){var a=window.msCrypto.subtle.importKey(so,e,n._keygenAlgorithmOptions,t,r);a.addEventListener("complete",(function(e){o(e.target.result)})),a.addEventListener("error",(function(e){i(e)}))}))]}))}))},e.prototype.msCryptoSign=function(e,t){return cn(this,void 0,void 0,(function(){var r=this;return ln(this,(function(n){return[2,new Promise((function(n,o){var i=window.msCrypto.subtle.sign(r._keygenAlgorithmOptions,e,t);i.addEventListener("complete",(function(e){n(e.target.result)})),i.addEventListener("error",(function(e){o(e)}))}))]}))}))},e.getJwkString=function(e){return JSON.stringify(e,Object.keys(e).sort())},e}(),js=function(){function e(){this.dbName=lo,this.version=1,this.tableName="msal.db.keys",this.dbOpen=!1}return e.prototype.open=function(){return cn(this,void 0,void 0,(function(){var e=this;return ln(this,(function(t){return[2,new Promise((function(t,r){var n=window.indexedDB.open(e.dbName,e.version);n.addEventListener("upgradeneeded",(function(t){t.target.result.createObjectStore(e.tableName)})),n.addEventListener("success",(function(r){var n=r;e.db=n.target.result,e.dbOpen=!0,t()})),n.addEventListener("error",(function(){return r(Bs.createDatabaseUnavailableError())}))}))]}))}))},e.prototype.closeConnection=function(){var e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)},e.prototype.validateDbIsOpen=function(){return cn(this,void 0,void 0,(function(){return ln(this,(function(e){switch(e.label){case 0:return this.dbOpen?[3,2]:[4,this.open()];case 1:return[2,e.sent()];case 2:return[2]}}))}))},e.prototype.getItem=function(e){return cn(this,void 0,void 0,(function(){var t=this;return ln(this,(function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise((function(r,n){if(!t.db)return n(Bs.createDatabaseNotOpenError());var o=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).get(e);o.addEventListener("success",(function(e){var n=e;t.closeConnection(),r(n.target.result)})),o.addEventListener("error",(function(e){t.closeConnection(),n(e)}))}))]}}))}))},e.prototype.setItem=function(e,t){return cn(this,void 0,void 0,(function(){var r=this;return ln(this,(function(n){switch(n.label){case 0:return[4,this.validateDbIsOpen()];case 1:return n.sent(),[2,new Promise((function(n,o){if(!r.db)return o(Bs.createDatabaseNotOpenError());var i=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(t,e);i.addEventListener("success",(function(){r.closeConnection(),n()})),i.addEventListener("error",(function(e){r.closeConnection(),o(e)}))}))]}}))}))},e.prototype.removeItem=function(e){return cn(this,void 0,void 0,(function(){var t=this;return ln(this,(function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise((function(r,n){if(!t.db)return n(Bs.createDatabaseNotOpenError());var o=t.db.transaction([t.tableName],"readwrite").objectStore(t.tableName).delete(e);o.addEventListener("success",(function(){t.closeConnection(),r()})),o.addEventListener("error",(function(e){t.closeConnection(),n(e)}))}))]}}))}))},e.prototype.getKeys=function(){return cn(this,void 0,void 0,(function(){var e=this;return ln(this,(function(t){switch(t.label){case 0:return[4,this.validateDbIsOpen()];case 1:return t.sent(),[2,new Promise((function(t,r){if(!e.db)return r(Bs.createDatabaseNotOpenError());var n=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();n.addEventListener("success",(function(r){var n=r;e.closeConnection(),t(n.target.result)})),n.addEventListener("error",(function(t){e.closeConnection(),r(t)}))}))]}}))}))},e.prototype.containsKey=function(e){return cn(this,void 0,void 0,(function(){var t=this;return ln(this,(function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise((function(r,n){if(!t.db)return n(Bs.createDatabaseNotOpenError());var o=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).count(e);o.addEventListener("success",(function(e){var n=e;t.closeConnection(),r(1===n.target.result)})),o.addEventListener("error",(function(e){t.closeConnection(),n(e)}))}))]}}))}))},e.prototype.deleteDatabase=function(){return cn(this,void 0,void 0,(function(){return ln(this,(function(e){switch(e.label){case 0:return this.db&&this.dbOpen&&this.closeConnection(),[4,window.indexedDB.databases()];case 1:return e.sent().find((function(e){return e.name===lo}))?[2,new Promise((function(e,t){var r=window.indexedDB.deleteDatabase(lo);r.addEventListener("success",(function(){return e(!0)})),r.addEventListener("error",(function(){return t(!1)}))}))]:[2,!0]}}))}))},e}(),Fs=function(){function e(){this.cache=new Map}return e.prototype.getItem=function(e){return this.cache.get(e)||null},e.prototype.setItem=function(e,t){this.cache.set(e,t)},e.prototype.removeItem=function(e){this.cache.delete(e)},e.prototype.getKeys=function(){var e=[];return this.cache.forEach((function(t,r){e.push(r)})),e},e.prototype.containsKey=function(e){return this.cache.has(e)},e.prototype.clear=function(){this.cache.clear()},e}(),Ks=function(){function e(e,t){this.inMemoryCache=new Fs,this.indexedDBCache=new js,this.logger=e,this.storeName=t}return e.prototype.handleDatabaseAccessError=function(e){if(!(e instanceof Bs&&e.errorCode===xs))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")},e.prototype.getItem=function(e){return cn(this,void 0,void 0,(function(){var t,r;return ln(this,(function(n){switch(n.label){case 0:if(t=this.inMemoryCache.getItem(e))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.getItem(e)];case 2:return[2,n.sent()];case 3:return r=n.sent(),this.handleDatabaseAccessError(r),[3,4];case 4:return[2,t]}}))}))},e.prototype.setItem=function(e,t){return cn(this,void 0,void 0,(function(){var r;return ln(this,(function(n){switch(n.label){case 0:this.inMemoryCache.setItem(e,t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.indexedDBCache.setItem(e,t)];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),this.handleDatabaseAccessError(r),[3,4];case 4:return[2]}}))}))},e.prototype.removeItem=function(e){return cn(this,void 0,void 0,(function(){var t;return ln(this,(function(r){switch(r.label){case 0:this.inMemoryCache.removeItem(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.indexedDBCache.removeItem(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this.handleDatabaseAccessError(t),[3,4];case 4:return[2]}}))}))},e.prototype.getKeys=function(){return cn(this,void 0,void 0,(function(){var e,t;return ln(this,(function(r){switch(r.label){case 0:if(0!==(e=this.inMemoryCache.getKeys()).length)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),this.logger.verbose("In-memory cache is empty, now querying persistent storage."),[4,this.indexedDBCache.getKeys()];case 2:return[2,r.sent()];case 3:return t=r.sent(),this.handleDatabaseAccessError(t),[3,4];case 4:return[2,e]}}))}))},e.prototype.containsKey=function(e){return cn(this,void 0,void 0,(function(){var t,r;return ln(this,(function(n){switch(n.label){case 0:if(t=this.inMemoryCache.containsKey(e))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.containsKey(e)];case 2:return[2,n.sent()];case 3:return r=n.sent(),this.handleDatabaseAccessError(r),[3,4];case 4:return[2,t]}}))}))},e.prototype.clear=function(){return cn(this,void 0,void 0,(function(){var e,t;return ln(this,(function(r){switch(r.label){case 0:this.logger.verbose("Deleting in-memory keystore "+this.storeName),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore "+this.storeName+" deleted"),this.logger.verbose("Deleting persistent keystore "+this.storeName),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.indexedDBCache.deleteDatabase()];case 2:return(e=r.sent())&&this.logger.verbose("Persistent keystore "+this.storeName+" deleted"),[2,e];case 3:return t=r.sent(),this.handleDatabaseAccessError(t),[2,!1];case 4:return[2]}}))}))},e}();!function(e){e.asymmetricKeys="asymmetricKeys",e.symmetricKeys="symmetricKeys"}(co||(co={}));var Gs,Vs=function(){function e(e,t){this.logger=e,this.browserCrypto=new Us(this.logger),this.b64Encode=new xo,this.b64Decode=new wo,this.guidGenerator=new No(this.browserCrypto),this.pkceGenerator=new Hs(this.browserCrypto),this.cache={asymmetricKeys:new Ks(this.logger,co.asymmetricKeys),symmetricKeys:new Ks(this.logger,co.symmetricKeys)},this.performanceClient=t}return e.prototype.createNewGuid=function(){return this.guidGenerator.generateGuid()},e.prototype.base64Encode=function(e){return this.b64Encode.encode(e)},e.prototype.base64Decode=function(e){return this.b64Decode.decode(e)},e.prototype.generatePkceCodes=function(){return cn(this,void 0,void 0,(function(){return ln(this,(function(e){return[2,this.pkceGenerator.generateCodes()]}))}))},e.prototype.getPublicKeyThumbprint=function(t){var r;return cn(this,void 0,void 0,(function(){var n,o,i,a,s,c,l,d;return ln(this,(function(u){switch(u.label){case 0:return n=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(on.CryptoOptsGetPublicKeyThumbprint,t.correlationId),[4,this.browserCrypto.generateKeyPair(e.EXTRACTABLE,e.POP_KEY_USAGES)];case 1:return o=u.sent(),[4,this.browserCrypto.exportJwk(o.publicKey)];case 2:return i=u.sent(),a={e:i.e,kty:i.kty,n:i.n},s=Us.getJwkString(a),[4,this.hashString(s)];case 3:return c=u.sent(),[4,this.browserCrypto.exportJwk(o.privateKey)];case 4:return l=u.sent(),[4,this.browserCrypto.importJwk(l,!1,["sign"])];case 5:return d=u.sent(),[4,this.cache.asymmetricKeys.setItem(c,{privateKey:d,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri})];case 6:return u.sent(),n&&n.endMeasurement({success:!0}),[2,c]}}))}))},e.prototype.removeTokenBindingKey=function(e){return cn(this,void 0,void 0,(function(){return ln(this,(function(t){switch(t.label){case 0:return[4,this.cache.asymmetricKeys.removeItem(e)];case 1:return t.sent(),[4,this.cache.asymmetricKeys.containsKey(e)];case 2:return[2,!t.sent()]}}))}))},e.prototype.clearKeystore=function(){return cn(this,void 0,void 0,(function(){var e;return ln(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),this.logger.verbose("Deleting in-memory and persistent asymmetric key stores"),[4,this.cache.asymmetricKeys.clear()];case 1:return t.sent(),this.logger.verbose("Successfully deleted asymmetric key stores"),this.logger.verbose("Deleting in-memory and persistent symmetric key stores"),[4,this.cache.symmetricKeys.clear()];case 2:return t.sent(),this.logger.verbose("Successfully deleted symmetric key stores"),[2,!0];case 3:return(e=t.sent())instanceof Error?this.logger.error("Clearing keystore failed with error: "+e.message):this.logger.error("Clearing keystore failed with unknown error"),[2,!1];case 4:return[2]}}))}))},e.prototype.signJwt=function(e,t,r){var n;return cn(this,void 0,void 0,(function(){var o,i,a,s,c,l,d,u,m,p,h,g,f;return ln(this,(function(y){switch(y.label){case 0:return o=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(on.CryptoOptsSignJwt,r),[4,this.cache.asymmetricKeys.getItem(t)];case 1:if(!(i=y.sent()))throw Bs.createSigningKeyNotFoundInStorageError(t);return[4,this.browserCrypto.exportJwk(i.publicKey)];case 2:return a=y.sent(),s=Us.getJwkString(a),c=this.b64Encode.urlEncode(JSON.stringify({kid:t})),l=vo.getShrHeaderString({kid:c,alg:a.alg}),d=this.b64Encode.urlEncode(l),e.cnf={jwk:JSON.parse(s)},u=this.b64Encode.urlEncode(JSON.stringify(e)),m=d+"."+u,p=Co.stringToArrayBuffer(m),[4,this.browserCrypto.sign(i.privateKey,p)];case 3:return h=y.sent(),g=this.b64Encode.urlEncodeArr(new Uint8Array(h)),f=m+"."+g,o&&o.endMeasurement({success:!0}),[2,f]}}))}))},e.prototype.hashString=function(e){return cn(this,void 0,void 0,(function(){var t,r;return ln(this,(function(n){switch(n.label){case 0:return[4,this.browserCrypto.sha256Digest(e)];case 1:return t=n.sent(),r=new Uint8Array(t),[2,this.b64Encode.urlEncodeArr(r)]}}))}))},e.POP_KEY_USAGES=["sign","verify"],e.EXTRACTABLE=!0,e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(Gs||(Gs={}));var $s,Qs=function(){function e(e,t,r){this.level=Gs.Info,this.localCallback=e.loggerCallback||function(){},this.piiLoggingEnabled=e.piiLoggingEnabled||!1,this.level="number"==typeof e.logLevel?e.logLevel:Gs.Info,this.correlationId=e.correlationId||xn.EMPTY_STRING,this.packageName=t||xn.EMPTY_STRING,this.packageVersion=r||xn.EMPTY_STRING}return e.prototype.clone=function(t,r,n){return new e({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},t,r)},e.prototype.logMessage=function(e,t){if(!(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)){var r=(new Date).toUTCString(),n=(ra.isEmpty(t.correlationId)?ra.isEmpty(this.correlationId)?"["+r+"]":"["+r+"] : ["+this.correlationId+"]":"["+r+"] : ["+t.correlationId+"]")+" : "+this.packageName+"@"+this.packageVersion+" : "+Gs[t.logLevel]+" - "+e;this.executeCallback(t.logLevel,n,t.containsPii||!1)}},e.prototype.executeCallback=function(e,t,r){this.localCallback&&this.localCallback(e,t,r)},e.prototype.error=function(e,t){this.logMessage(e,{logLevel:Gs.Error,containsPii:!1,correlationId:t||xn.EMPTY_STRING})},e.prototype.errorPii=function(e,t){this.logMessage(e,{logLevel:Gs.Error,containsPii:!0,correlationId:t||xn.EMPTY_STRING})},e.prototype.warning=function(e,t){this.logMessage(e,{logLevel:Gs.Warning,containsPii:!1,correlationId:t||xn.EMPTY_STRING})},e.prototype.warningPii=function(e,t){this.logMessage(e,{logLevel:Gs.Warning,containsPii:!0,correlationId:t||xn.EMPTY_STRING})},e.prototype.info=function(e,t){this.logMessage(e,{logLevel:Gs.Info,containsPii:!1,correlationId:t||xn.EMPTY_STRING})},e.prototype.infoPii=function(e,t){this.logMessage(e,{logLevel:Gs.Info,containsPii:!0,correlationId:t||xn.EMPTY_STRING})},e.prototype.verbose=function(e,t){this.logMessage(e,{logLevel:Gs.Verbose,containsPii:!1,correlationId:t||xn.EMPTY_STRING})},e.prototype.verbosePii=function(e,t){this.logMessage(e,{logLevel:Gs.Verbose,containsPii:!0,correlationId:t||xn.EMPTY_STRING})},e.prototype.trace=function(e,t){this.logMessage(e,{logLevel:Gs.Trace,containsPii:!1,correlationId:t||xn.EMPTY_STRING})},e.prototype.tracePii=function(e,t){this.logMessage(e,{logLevel:Gs.Trace,containsPii:!0,correlationId:t||xn.EMPTY_STRING})},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1},e}(),Ws=function(){function e(e,t,r,n,o,i){this.authority=t,this.libraryName=n,this.libraryVersion=o,this.applicationTelemetry=i,this.clientId=e,this.logger=r,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.measurementsById=new Map}return e.prototype.startMeasurement=function(e,t){var r,n,o=this,i=t||this.generateId();t||this.logger.info("PerformanceClient: No correlation id provided for "+e+", generating",i),this.logger.trace("PerformanceClient: Performance measurement started for "+e,i);var a=this.startPerformanceMeasuremeant(e,i);a.startMeasurement();var s={eventId:this.generateId(),status:an.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,appName:null===(r=this.applicationTelemetry)||void 0===r?void 0:r.appName,appVersion:null===(n=this.applicationTelemetry)||void 0===n?void 0:n.appVersion,clientId:this.clientId,name:e,startTimeMs:Date.now(),correlationId:i};return this.cacheEventByCorrelationId(s),this.cacheMeasurement(s,a),{endMeasurement:function(e){var t=o.endMeasurement(hn(hn({},s),e));return t&&o.cacheEventByCorrelationId(t),t},flushMeasurement:function(){return o.flushMeasurements(s.name,s.correlationId)},discardMeasurement:function(){return o.discardMeasurements(s.correlationId)},measurement:a,event:s}},e.prototype.endMeasurement=function(e){var t=this.measurementsById.get(e.eventId);if(t){this.measurementsById.delete(e.eventId),t.endMeasurement();var r=t.flushMeasurement();if(null!==r)return this.logger.trace("PerformanceClient: Performance measurement ended for "+e.name+": "+r+" ms",e.correlationId),hn(hn({durationMs:Math.round(r)},e),{status:an.Completed});this.logger.trace("PerformanceClient: Performance measurement not taken",e.correlationId)}else this.logger.trace("PerformanceClient: Measurement not found for "+e.eventId,e.correlationId);return null},e.prototype.cacheEventByCorrelationId=function(e){var t=this.eventsByCorrelationId.get(e.correlationId);t?(this.logger.trace("PerformanceClient: Performance measurement for "+e.name+" added/updated",e.correlationId),t.set(e.eventId,e)):(this.logger.trace("PerformanceClient: Performance measurement for "+e.name+" started",e.correlationId),this.eventsByCorrelationId.set(e.correlationId,(new Map).set(e.eventId,e)))},e.prototype.cacheMeasurement=function(e,t){this.measurementsById.set(e.eventId,t)},e.prototype.flushMeasurements=function(e,t){var r=this;this.logger.trace("PerformanceClient: Performance measurements flushed for "+e,t);var n=this.eventsByCorrelationId.get(t);if(n){this.discardMeasurements(t);var o=[];n.forEach((function(n){if(n.name!==e&&n.status!==an.Completed){r.logger.trace("PerformanceClient: Incomplete submeasurement "+n.name+" found for "+e,t);var i=r.endMeasurement(n);i&&o.push(i)}o.push(n)}));var i=o.sort((function(e,t){return e.startTimeMs-t.startTimeMs})),a=i.filter((function(t){return t.name===e&&t.status===an.Completed}));if(a.length>0){a.length>1&&this.logger.verbose("PerformanceClient: Multiple distinct top-level performance events found, using the first",t);var s=a[0];this.logger.verbose("PerformanceClient: Measurement found for "+e,t);var c=i.reduce((function(n,o){if(o.name!==e){r.logger.trace("PerformanceClient: Complete submeasurement found for "+o.name,t);var i=o.name+"DurationMs";n[i]?r.logger.verbose("PerformanceClient: Submeasurement for "+e+" already exists for "+o.name+", ignoring",t):n[i]=o.durationMs}return n}),s);this.emitEvents([c],c.correlationId)}else this.logger.verbose("PerformanceClient: No completed top-level measurements found for "+e,t)}else this.logger.verbose("PerformanceClient: No measurements found",t)},e.prototype.discardMeasurements=function(e){this.logger.trace("PerformanceClient: Performance measurements discarded",e),this.eventsByCorrelationId.delete(e)},e.prototype.addPerformanceCallback=function(e){var t=this.generateId();return this.callbacks.set(t,e),this.logger.verbose("PerformanceClient: Performance callback registered with id: "+t),t},e.prototype.removePerformanceCallback=function(e){var t=this.callbacks.delete(e);return t?this.logger.verbose("PerformanceClient: Performance callback "+e+" removed."):this.logger.verbose("PerformanceClient: Performance callback "+e+" not removed."),t},e.prototype.emitEvents=function(e,t){var r=this;this.logger.verbose("PerformanceClient: Emitting performance events",t),this.callbacks.forEach((function(n,o){r.logger.trace("PerformanceClient: Emitting event to callback "+o,t),n.apply(null,[e])}))},e}(),Ys=function(){function e(){}return e.prototype.startMeasurement=function(){},e.prototype.endMeasurement=function(){},e.prototype.flushMeasurement=function(){return null},e}(),Js=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.generateId=function(){return"callback-id"},t.prototype.startPerformanceMeasuremeant=function(){return new Ys},t}(Ws),Xs={createNewGuid:function(){throw po.createUnexpectedError("Crypto interface - createNewGuid() has not been implemented")},base64Decode:function(){throw po.createUnexpectedError("Crypto interface - base64Decode() has not been implemented")},base64Encode:function(){throw po.createUnexpectedError("Crypto interface - base64Encode() has not been implemented")},generatePkceCodes:function(){return gn(this,void 0,void 0,(function(){return fn(this,(function(e){throw po.createUnexpectedError("Crypto interface - generatePkceCodes() has not been implemented")}))}))},getPublicKeyThumbprint:function(){return gn(this,void 0,void 0,(function(){return fn(this,(function(e){throw po.createUnexpectedError("Crypto interface - getPublicKeyThumbprint() has not been implemented")}))}))},removeTokenBindingKey:function(){return gn(this,void 0,void 0,(function(){return fn(this,(function(e){throw po.createUnexpectedError("Crypto interface - removeTokenBindingKey() has not been implemented")}))}))},clearKeystore:function(){return gn(this,void 0,void 0,(function(){return fn(this,(function(e){throw po.createUnexpectedError("Crypto interface - clearKeystore() has not been implemented")}))}))},signJwt:function(){return gn(this,void 0,void 0,(function(){return fn(this,(function(e){throw po.createUnexpectedError("Crypto interface - signJwt() has not been implemented")}))}))},hashString:function(){return gn(this,void 0,void 0,(function(){return fn(this,(function(e){throw po.createUnexpectedError("Crypto interface - hashString() has not been implemented")}))}))}},Zs=function(e){function t(r,n,o){var i=e.call(this,r,n,o)||this;return i.name="ServerError",Object.setPrototypeOf(i,t.prototype),i}return pn(t,e),t}(po),ec=["interaction_required","consent_required","login_required"],tc=["message_only","additional_action","basic_action","user_password_expired","consent_required"],rc="no_tokens_found",nc="No refresh token found in the cache. Please sign-in.",oc=function(e){function t(r,n,o){var i=e.call(this,r,n,o)||this;return i.name="InteractionRequiredAuthError",Object.setPrototypeOf(i,t.prototype),i}return pn(t,e),t.isInteractionRequiredError=function(e,t,r){var n=!!e&&ec.indexOf(e)>-1,o=!!r&&tc.indexOf(r)>-1,i=!!t&&ec.some((function(e){return t.indexOf(e)>-1}));return n||i||o},t.createNoTokensFoundError=function(){return new t(rc,nc)},t}(po);function ic(e,t){if(ra.isEmpty(e))throw ta.createClientInfoEmptyError();try{var r=t.base64Decode(e);return JSON.parse(r)}catch(e){throw ta.createClientInfoDecodingError(e)}}function ac(e){if(ra.isEmpty(e))throw ta.createClientInfoDecodingError("Home account ID was empty.");var t=e.split(An.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?xn.EMPTY_STRING:t[1]}}!function(e){e[e.Default=0]="Default",e[e.Adfs=1]="Adfs"}($s||($s={}));var sc,cc=function(){function e(){}return e.prototype.generateAccountId=function(){return[this.homeAccountId,this.environment].join(An.CACHE_KEY_SEPARATOR).toLowerCase()},e.prototype.generateAccountKey=function(){return e.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})},e.prototype.generateType=function(){switch(this.authorityType){case _n.ADFS_ACCOUNT_TYPE:return Mn.ADFS;case _n.MSAV1_ACCOUNT_TYPE:return Mn.MSA;case _n.MSSTS_ACCOUNT_TYPE:return Mn.MSSTS;case _n.GENERIC_ACCOUNT_TYPE:return Mn.GENERIC;default:throw ta.createUnexpectedAccountTypeError()}},e.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId}},e.generateAccountCacheKey=function(e){return[e.homeAccountId,e.environment||xn.EMPTY_STRING,e.tenantId||xn.EMPTY_STRING].join(An.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAccount=function(t,r,n,o,i,a,s,c){var l,d,u,m,p,h,g=new e;g.authorityType=_n.MSSTS_ACCOUNT_TYPE,g.clientInfo=t,g.homeAccountId=r,g.nativeAccountId=c;var f=s||o&&o.getPreferredCache();if(!f)throw ta.createInvalidCacheEnvironmentError();return g.environment=f,g.realm=(null===(l=null==n?void 0:n.claims)||void 0===l?void 0:l.tid)||xn.EMPTY_STRING,n&&(g.idTokenClaims=n.claims,g.localAccountId=(null===(d=null==n?void 0:n.claims)||void 0===d?void 0:d.oid)||(null===(u=null==n?void 0:n.claims)||void 0===u?void 0:u.sub)||xn.EMPTY_STRING,g.username=(null===(m=null==n?void 0:n.claims)||void 0===m?void 0:m.preferred_username)||((null===(p=null==n?void 0:n.claims)||void 0===p?void 0:p.emails)?n.claims.emails[0]:xn.EMPTY_STRING),g.name=null===(h=null==n?void 0:n.claims)||void 0===h?void 0:h.name),g.cloudGraphHostName=i,g.msGraphHost=a,g},e.createGenericAccount=function(t,r,n,o,i,a){var s,c,l,d,u=new e;u.authorityType=n&&n.authorityType===$s.Adfs?_n.ADFS_ACCOUNT_TYPE:_n.GENERIC_ACCOUNT_TYPE,u.homeAccountId=t,u.realm=xn.EMPTY_STRING;var m=a||n&&n.getPreferredCache();if(!m)throw ta.createInvalidCacheEnvironmentError();return r&&(u.localAccountId=(null===(s=null==r?void 0:r.claims)||void 0===s?void 0:s.oid)||(null===(c=null==r?void 0:r.claims)||void 0===c?void 0:c.sub)||xn.EMPTY_STRING,u.username=(null===(l=null==r?void 0:r.claims)||void 0===l?void 0:l.upn)||xn.EMPTY_STRING,u.name=(null===(d=null==r?void 0:r.claims)||void 0===d?void 0:d.name)||xn.EMPTY_STRING,u.idTokenClaims=null==r?void 0:r.claims),u.environment=m,u.cloudGraphHostName=o,u.msGraphHost=i,u},e.generateHomeAccountId=function(e,t,r,n,o){var i,a=(null===(i=null==o?void 0:o.claims)||void 0===i?void 0:i.sub)?o.claims.sub:xn.EMPTY_STRING;if(t===$s.Adfs)return a;if(e)try{var s=ic(e,n);if(!ra.isEmpty(s.uid)&&!ra.isEmpty(s.utid))return""+s.uid+An.CLIENT_INFO_SEPARATOR+s.utid}catch(e){}return r.verbose("No client info in response"),a},e.isAccountEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")},e.accountInfoIsEqual=function(e,t,r){if(!e||!t)return!1;var n=!0;if(r){var o=e.idTokenClaims||{},i=t.idTokenClaims||{};n=o.iat===i.iat&&o.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&n},e}(),lc=function(){function e(){}return e.prototype.generateAccountId=function(){return e.generateAccountIdForCacheKey(this.homeAccountId,this.environment)},e.prototype.generateCredentialId=function(){return e.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)},e.prototype.generateTarget=function(){return e.generateTargetForCacheKey(this.target)},e.prototype.generateCredentialKey=function(){return e.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)},e.prototype.generateType=function(){switch(this.credentialType){case On.ID_TOKEN:return Mn.ID_TOKEN;case On.ACCESS_TOKEN:case On.ACCESS_TOKEN_WITH_AUTH_SCHEME:return Mn.ACCESS_TOKEN;case On.REFRESH_TOKEN:return Mn.REFRESH_TOKEN;default:throw ta.createUnexpectedCredentialTypeError()}},e.getCredentialType=function(e){return-1!==e.indexOf(On.ACCESS_TOKEN.toLowerCase())?-1!==e.indexOf(On.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())?On.ACCESS_TOKEN_WITH_AUTH_SCHEME:On.ACCESS_TOKEN:-1!==e.indexOf(On.ID_TOKEN.toLowerCase())?On.ID_TOKEN:-1!==e.indexOf(On.REFRESH_TOKEN.toLowerCase())?On.REFRESH_TOKEN:xn.NOT_DEFINED},e.generateCredentialCacheKey=function(e,t,r,n,o,i,a,s,c){return[this.generateAccountIdForCacheKey(e,t),this.generateCredentialIdForCacheKey(r,n,o,a),this.generateTargetForCacheKey(i),this.generateClaimsHashForCacheKey(c),this.generateSchemeForCacheKey(s)].join(An.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateAccountIdForCacheKey=function(e,t){return[e,t].join(An.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateCredentialIdForCacheKey=function(e,t,r,n){return[e,e===On.REFRESH_TOKEN&&n||t,r||xn.EMPTY_STRING].join(An.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateTargetForCacheKey=function(e){return(e||xn.EMPTY_STRING).toLowerCase()},e.generateClaimsHashForCacheKey=function(e){return(e||xn.EMPTY_STRING).toLowerCase()},e.generateSchemeForCacheKey=function(e){return e&&e.toLowerCase()!==Ln.BEARER.toLowerCase()?e.toLowerCase():xn.EMPTY_STRING},e}(),dc="redirect_uri_empty",uc="A redirect URI is required for all calls, and none has been set.",mc="post_logout_uri_empty",pc="A post logout redirect has not been set.",hc="claims_request_parsing_error",gc="Could not parse the given claims request object.",fc="authority_uri_insecure",yc="Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",bc="url_parse_error",vc="URL could not be parsed into appropriate segments.",Sc="empty_url_error",Nc="URL was empty or null.",Cc="empty_input_scopes_error",xc="Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",wc="clientid_input_scopes_error",Ec="Client ID can only be provided as a single scope.",Rc="invalid_prompt_value",Tc="Supported prompt values are 'login', 'select_account', 'consent', 'create' and 'none'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",Pc="invalid_claims",Ic="Given claims parameter must be a stringified JSON object.",_c="token_request_empty",Ac="Token request was empty and not found in cache.",Oc="logout_request_empty",kc="The logout request was null or undefined.",Mc="invalid_code_challenge_method",qc='code_challenge_method passed is invalid. Valid values are "plain" and "S256".',zc="pkce_params_missing",Bc="Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",Hc="invalid_cloud_discovery_metadata",Dc="Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",Lc="invalid_authority_metadata",Uc="Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",jc="untrusted_authority",Fc="The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",Kc="invalid_azure_cloud_instance",Gc="Invalid AzureCloudInstance provided. Please refer MSAL JS docs: aks.ms/msaljs/azure_cloud_instance for valid values",Vc="missing_ssh_jwk",$c="Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",Qc="missing_ssh_kid",Wc="Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",Yc="missing_nonce_authentication_header",Jc="Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",Xc="invalid_authentication_header",Zc="Invalid authentication header provided",el=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="ClientConfigurationError",Object.setPrototypeOf(o,t.prototype),o}return pn(t,e),t.createRedirectUriEmptyError=function(){return new t(dc,uc)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(mc,pc)},t.createClaimsRequestParsingError=function(e){return new t(hc,gc+" Given value: "+e)},t.createInsecureAuthorityUriError=function(e){return new t(fc,yc+" Given URI: "+e)},t.createUrlParseError=function(e){return new t(bc,vc+" Given Error: "+e)},t.createUrlEmptyError=function(){return new t(Sc,Nc)},t.createEmptyScopesArrayError=function(){return new t(Cc,""+xc)},t.createClientIdSingleScopeError=function(e){return new t(wc,Ec+" Given Scopes: "+e)},t.createInvalidPromptError=function(e){return new t(Rc,Tc+" Given value: "+e)},t.createInvalidClaimsRequestError=function(){return new t(Pc,Ic)},t.createEmptyLogoutRequestError=function(){return new t(Oc,kc)},t.createEmptyTokenRequestError=function(){return new t(_c,Ac)},t.createInvalidCodeChallengeMethodError=function(){return new t(Mc,qc)},t.createInvalidCodeChallengeParamsError=function(){return new t(zc,Bc)},t.createInvalidCloudDiscoveryMetadataError=function(){return new t(Hc,Dc)},t.createInvalidAuthorityMetadataError=function(){return new t(Lc,Uc)},t.createUntrustedAuthorityError=function(){return new t(jc,Fc)},t.createInvalidAzureCloudInstanceError=function(){return new t(Kc,Gc)},t.createMissingSshJwkError=function(){return new t(Vc,$c)},t.createMissingSshKidError=function(){return new t(Qc,Wc)},t.createMissingNonceAuthenticationHeadersError=function(){return new t(Yc,Jc)},t.createInvalidAuthenticationHeaderError=function(e,r){return new t(Xc,Zc+". Invalid header: "+e+". Details: "+r)},t}(ta),tl=function(){function e(e){var t=this,r=e?ra.trimArrayEntries(yn(e)):[],n=r?ra.removeEmptyStringsFromArray(r):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach((function(e){return t.scopes.add(e)}))}return e.fromString=function(t){return new e((t||xn.EMPTY_STRING).split(" "))},e.prototype.validateInputScopes=function(e){if(!e||e.length<1)throw el.createEmptyScopesArrayError()},e.prototype.containsScope=function(t){var r=new e(this.printScopesLowerCase().split(" "));return!ra.isEmpty(t)&&r.scopes.has(t.toLowerCase())},e.prototype.containsScopeSet=function(e){var t=this;return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every((function(e){return t.containsScope(e)}))},e.prototype.containsOnlyOIDCScopes=function(){var e=this,t=0;return En.forEach((function(r){e.containsScope(r)&&(t+=1)})),this.scopes.size===t},e.prototype.appendScope=function(e){ra.isEmpty(e)||this.scopes.add(e.trim())},e.prototype.appendScopes=function(e){var t=this;try{e.forEach((function(e){return t.appendScope(e)}))}catch(e){throw ta.createAppendScopeSetError(e)}},e.prototype.removeScope=function(e){if(ra.isEmpty(e))throw ta.createRemoveEmptyScopeFromSetError(e);this.scopes.delete(e.trim())},e.prototype.removeOIDCScopes=function(){var e=this;En.forEach((function(t){e.scopes.delete(t)}))},e.prototype.unionScopeSets=function(e){if(!e)throw ta.createEmptyInputScopeSetError();var t=new Set;return e.scopes.forEach((function(e){return t.add(e.toLowerCase())})),this.scopes.forEach((function(e){return t.add(e.toLowerCase())})),t},e.prototype.intersectingScopeSets=function(e){if(!e)throw ta.createEmptyInputScopeSetError();e.containsOnlyOIDCScopes()||e.removeOIDCScopes();var t=this.unionScopeSets(e),r=e.getScopeCount(),n=this.getScopeCount();return t.size<n+r},e.prototype.getScopeCount=function(){return this.scopes.size},e.prototype.asArray=function(){var e=[];return this.scopes.forEach((function(t){return e.push(t)})),e},e.prototype.printScopes=function(){return this.scopes?this.asArray().join(" "):xn.EMPTY_STRING},e.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()},e}(),rl=function(){function e(t,r){if(ra.isEmpty(t))throw ta.createTokenNullOrEmptyError(t);this.rawToken=t,this.claims=e.extractTokenClaims(t,r)}return e.extractTokenClaims=function(e,t){var r=ra.decodeAuthToken(e);try{var n=r.JWSPayload,o=t.base64Decode(n);return JSON.parse(o)}catch(e){throw ta.createTokenParsingError(e)}},e}(),nl=function(){function e(e,t){this.clientId=e,this.cryptoImpl=t}return e.prototype.getAllAccounts=function(){var t=this,r=this.getAccountsFilteredBy(),n=Object.keys(r).map((function(e){return r[e]}));return n.length<1?[]:n.map((function(r){var n=e.toObject(new cc,r).getAccountInfo(),o=t.readIdTokenFromCache(t.clientId,n);return o&&!n.idTokenClaims&&(n.idTokenClaims=new rl(o.secret,t.cryptoImpl).claims),n}))},e.prototype.saveCacheRecord=function(e){return gn(this,void 0,void 0,(function(){return fn(this,(function(t){switch(t.label){case 0:if(!e)throw ta.createNullOrUndefinedCacheRecord();return e.account&&this.setAccount(e.account),e.idToken&&this.setIdTokenCredential(e.idToken),e.accessToken?[4,this.saveAccessToken(e.accessToken)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.refreshToken&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata),[2]}}))}))},e.prototype.saveAccessToken=function(e){return gn(this,void 0,void 0,(function(){var t,r,n,o,i=this;return fn(this,(function(a){switch(a.label){case 0:return t=this.getCredentialsFilteredBy({clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash}),r=tl.fromString(e.target),(n=Object.keys(t.accessTokens).map((function(e){return t.accessTokens[e]})))?(o=[],n.forEach((function(e){tl.fromString(e.target).intersectingScopeSets(r)&&o.push(i.removeCredential(e))})),[4,Promise.all(o)]):[3,2];case 1:a.sent(),a.label=2;case 2:return this.setAccessTokenCredential(e),[2]}}))}))},e.prototype.getAccountsFilteredBy=function(e){return this.getAccountsFilteredByInternal(e?e.homeAccountId:xn.EMPTY_STRING,e?e.environment:xn.EMPTY_STRING,e?e.realm:xn.EMPTY_STRING)},e.prototype.getAccountsFilteredByInternal=function(e,t,r){var n=this,o=this.getKeys(),i={};return o.forEach((function(o){var a=n.getAccount(o);a&&(e&&!n.matchHomeAccountId(a,e)||t&&!n.matchEnvironment(a,t)||r&&!n.matchRealm(a,r)||(i[o]=a))})),i},e.prototype.getCredentialsFilteredBy=function(e){return this.getCredentialsFilteredByInternal(e.homeAccountId,e.environment,e.credentialType,e.clientId,e.familyId,e.realm,e.target,e.userAssertionHash,e.tokenType,e.keyId,e.requestedClaimsHash)},e.prototype.getCredentialsFilteredByInternal=function(e,t,r,n,o,i,a,s,c,l,d){var u=this,m=this.getKeys(),p={idTokens:{},accessTokens:{},refreshTokens:{}};return m.forEach((function(m){var h=lc.getCredentialType(m);if(h!==xn.NOT_DEFINED){var g=u.getSpecificCredential(m,h);if(g&&(!s||u.matchUserAssertionHash(g,s))&&(!e||u.matchHomeAccountId(g,e))&&(!t||u.matchEnvironment(g,t))&&(!i||u.matchRealm(g,i))&&(!r||u.matchCredentialType(g,r))&&(!n||u.matchClientId(g,n))&&(!o||u.matchFamilyId(g,o))&&(!a||u.matchTarget(g,a))&&(!d&&!g.requestedClaimsHash||g.requestedClaimsHash===d)){if(r===On.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(c&&!u.matchTokenType(g,c))return;if(c===Ln.SSH&&l&&!u.matchKeyId(g,l))return}var f=u.updateCredentialCacheKey(m,g);switch(h){case On.ID_TOKEN:p.idTokens[f]=g;break;case On.ACCESS_TOKEN:case On.ACCESS_TOKEN_WITH_AUTH_SCHEME:p.accessTokens[f]=g;break;case On.REFRESH_TOKEN:p.refreshTokens[f]=g}}}})),p},e.prototype.getAppMetadataFilteredBy=function(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)},e.prototype.getAppMetadataFilteredByInternal=function(e,t){var r=this,n=this.getKeys(),o={};return n.forEach((function(n){if(r.isAppMetadata(n)){var i=r.getAppMetadata(n);i&&(e&&!r.matchEnvironment(i,e)||t&&!r.matchClientId(i,t)||(o[n]=i))}})),o},e.prototype.getAuthorityMetadataByAlias=function(e){var t=this,r=this.getAuthorityMetadataKeys(),n=null;return r.forEach((function(r){if(t.isAuthorityMetadata(r)&&-1!==r.indexOf(t.clientId)){var o=t.getAuthorityMetadata(r);o&&-1!==o.aliases.indexOf(e)&&(n=o)}})),n},e.prototype.removeAllAccounts=function(){return gn(this,void 0,void 0,(function(){var e,t,r=this;return fn(this,(function(n){switch(n.label){case 0:return e=this.getKeys(),t=[],e.forEach((function(e){r.getAccount(e)&&t.push(r.removeAccount(e))})),[4,Promise.all(t)];case 1:return n.sent(),[2,!0]}}))}))},e.prototype.removeAccount=function(e){return gn(this,void 0,void 0,(function(){var t;return fn(this,(function(r){switch(r.label){case 0:if(!(t=this.getAccount(e)))throw ta.createNoAccountFoundError();return[4,this.removeAccountContext(t)];case 1:return[2,r.sent()&&this.removeItem(e,kn.ACCOUNT)]}}))}))},e.prototype.removeAccountContext=function(e){return gn(this,void 0,void 0,(function(){var t,r,n,o=this;return fn(this,(function(i){switch(i.label){case 0:return t=this.getKeys(),r=e.generateAccountId(),n=[],t.forEach((function(e){var t=lc.getCredentialType(e);if(t!==xn.NOT_DEFINED){var i=o.getSpecificCredential(e,t);i&&r===i.generateAccountId()&&n.push(o.removeCredential(i))}})),[4,Promise.all(n)];case 1:return i.sent(),[2,!0]}}))}))},e.prototype.removeCredential=function(e){return gn(this,void 0,void 0,(function(){var t,r;return fn(this,(function(n){switch(n.label){case 0:if(t=e.generateCredentialKey(),e.credentialType.toLowerCase()!==On.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())return[3,4];if(e.tokenType!==Ln.POP)return[3,4];if(!(r=e.keyId))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.cryptoImpl.removeTokenBindingKey(r)];case 2:return n.sent(),[3,4];case 3:throw n.sent(),ta.createBindingKeyNotRemovedError();case 4:return[2,this.removeItem(t,kn.CREDENTIAL)]}}))}))},e.prototype.removeAppMetadata=function(){var e=this;return this.getKeys().forEach((function(t){e.isAppMetadata(t)&&e.removeItem(t,kn.APP_METADATA)})),!0},e.prototype.readCacheRecord=function(e,t,r,n){var o=this.readAccountFromCache(e),i=this.readIdTokenFromCache(t,e),a=this.readAccessTokenFromCache(t,e,r),s=this.readRefreshTokenFromCache(t,e,!1),c=this.readAppMetadataFromCache(n,t);return o&&i&&(o.idTokenClaims=new rl(i.secret,this.cryptoImpl).claims),{account:o,idToken:i,accessToken:a,refreshToken:s,appMetadata:c}},e.prototype.readAccountFromCache=function(e){var t=cc.generateAccountCacheKey(e);return this.getAccount(t)},e.prototype.readIdTokenFromCache=function(e,t){var r={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:On.ID_TOKEN,clientId:e,realm:t.tenantId},n=this.getCredentialsFilteredBy(r),o=Object.keys(n.idTokens).map((function(e){return n.idTokens[e]})),i=o.length;if(i<1)return null;if(i>1)throw ta.createMultipleMatchingTokensInCacheError();return o[0]},e.prototype.readAccessTokenFromCache=function(e,t,r){var n=new tl(r.scopes||[]),o=r.authenticationScheme||Ln.BEARER,i=o&&o.toLowerCase()!==Ln.BEARER.toLowerCase()?On.ACCESS_TOKEN_WITH_AUTH_SCHEME:On.ACCESS_TOKEN,a={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:i,clientId:e,realm:t.tenantId,target:n.printScopesLowerCase(),tokenType:o,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},s=this.getCredentialsFilteredBy(a),c=Object.keys(s.accessTokens).map((function(e){return s.accessTokens[e]})),l=c.length;if(l<1)return null;if(l>1)throw ta.createMultipleMatchingTokensInCacheError();return c[0]},e.prototype.readRefreshTokenFromCache=function(e,t,r){var n=r?Hn:void 0,o={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:On.REFRESH_TOKEN,clientId:e,familyId:n},i=this.getCredentialsFilteredBy(o),a=Object.keys(i.refreshTokens).map((function(e){return i.refreshTokens[e]}));return a.length<1?null:a[0]},e.prototype.readAppMetadataFromCache=function(e,t){var r={environment:e,clientId:t},n=this.getAppMetadataFilteredBy(r),o=Object.keys(n).map((function(e){return n[e]})),i=o.length;if(i<1)return null;if(i>1)throw ta.createMultipleMatchingAppMetadataInCacheError();return o[0]},e.prototype.isAppMetadataFOCI=function(e,t){var r=this.readAppMetadataFromCache(e,t);return!(!r||r.familyId!==Hn)},e.prototype.matchHomeAccountId=function(e,t){return!(!e.homeAccountId||t!==e.homeAccountId)},e.prototype.matchUserAssertionHash=function(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)},e.prototype.matchEnvironment=function(e,t){var r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)},e.prototype.matchCredentialType=function(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()},e.prototype.matchClientId=function(e,t){return!(!e.clientId||t!==e.clientId)},e.prototype.matchFamilyId=function(e,t){return!(!e.familyId||t!==e.familyId)},e.prototype.matchRealm=function(e,t){return!(!e.realm||t!==e.realm)},e.prototype.matchTarget=function(e,t){if(e.credentialType!==On.ACCESS_TOKEN&&e.credentialType!==On.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;var r=tl.fromString(e.target),n=tl.fromString(t);return n.containsOnlyOIDCScopes()?n.removeScope(xn.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),r.containsScopeSet(n)},e.prototype.matchTokenType=function(e,t){return!(!e.tokenType||e.tokenType!==t)},e.prototype.matchKeyId=function(e,t){return!(!e.keyId||e.keyId!==t)},e.prototype.isAppMetadata=function(e){return-1!==e.indexOf(Bn)},e.prototype.isAuthorityMetadata=function(e){return-1!==e.indexOf(Dn)},e.prototype.generateAuthorityMetadataCacheKey=function(e){return"authority-metadata-"+this.clientId+"-"+e},e.prototype.getSpecificCredential=function(e,t){switch(t){case On.ID_TOKEN:return this.getIdTokenCredential(e);case On.ACCESS_TOKEN:case On.ACCESS_TOKEN_WITH_AUTH_SCHEME:return this.getAccessTokenCredential(e);case On.REFRESH_TOKEN:return this.getRefreshTokenCredential(e);default:return null}},e.toObject=function(e,t){for(var r in t)e[r]=t[r];return e},e}(),ol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.setAccount=function(){throw po.createUnexpectedError("Storage interface - setAccount() has not been implemented for the cacheStorage interface.")},t.prototype.getAccount=function(){throw po.createUnexpectedError("Storage interface - getAccount() has not been implemented for the cacheStorage interface.")},t.prototype.setIdTokenCredential=function(){throw po.createUnexpectedError("Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getIdTokenCredential=function(){throw po.createUnexpectedError("Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAccessTokenCredential=function(){throw po.createUnexpectedError("Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getAccessTokenCredential=function(){throw po.createUnexpectedError("Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setRefreshTokenCredential=function(){throw po.createUnexpectedError("Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getRefreshTokenCredential=function(){throw po.createUnexpectedError("Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAppMetadata=function(){throw po.createUnexpectedError("Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAppMetadata=function(){throw po.createUnexpectedError("Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.setServerTelemetry=function(){throw po.createUnexpectedError("Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.getServerTelemetry=function(){throw po.createUnexpectedError("Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.setAuthorityMetadata=function(){throw po.createUnexpectedError("Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadata=function(){throw po.createUnexpectedError("Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadataKeys=function(){throw po.createUnexpectedError("Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.")},t.prototype.setThrottlingCache=function(){throw po.createUnexpectedError("Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.getThrottlingCache=function(){throw po.createUnexpectedError("Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.removeItem=function(){throw po.createUnexpectedError("Storage interface - removeItem() has not been implemented for the cacheStorage interface.")},t.prototype.containsKey=function(){throw po.createUnexpectedError("Storage interface - containsKey() has not been implemented for the cacheStorage interface.")},t.prototype.getKeys=function(){throw po.createUnexpectedError("Storage interface - getKeys() has not been implemented for the cacheStorage interface.")},t.prototype.clear=function(){return gn(this,void 0,void 0,(function(){return fn(this,(function(e){throw po.createUnexpectedError("Storage interface - clear() has not been implemented for the cacheStorage interface.")}))}))},t.prototype.updateCredentialCacheKey=function(){throw po.createUnexpectedError("Storage interface - updateCredentialCacheKey() has not been implemented for the cacheStorage interface.")},t}(nl),il=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.createIdTokenEntity=function(e,r,n,o,i){var a=new t;return a.credentialType=On.ID_TOKEN,a.homeAccountId=e,a.environment=r,a.clientId=o,a.secret=n,a.realm=i,a},t.isIdTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===On.ID_TOKEN},t}(lc),al=function(){function e(){}return e.nowSeconds=function(){return Math.round((new Date).getTime()/1e3)},e.isTokenExpired=function(t,r){var n=Number(t)||0;return e.nowSeconds()+r>n},e.wasClockTurnedBack=function(t){return Number(t)>e.nowSeconds()},e.delay=function(e,t){return new Promise((function(r){return setTimeout((function(){return r(t)}),e)}))},e}(),sl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.createAccessTokenEntity=function(e,r,n,o,i,a,s,c,l,d,u,m,p,h,g){var f,y,b=new t;b.homeAccountId=e,b.credentialType=On.ACCESS_TOKEN,b.secret=n;var v=al.nowSeconds();if(b.cachedAt=v.toString(),b.expiresOn=s.toString(),b.extendedExpiresOn=c.toString(),d&&(b.refreshOn=d.toString()),b.environment=r,b.clientId=o,b.realm=i,b.target=a,b.userAssertionHash=m,b.tokenType=ra.isEmpty(u)?Ln.BEARER:u,h&&(b.requestedClaims=h,b.requestedClaimsHash=g),(null===(f=b.tokenType)||void 0===f?void 0:f.toLowerCase())!==Ln.BEARER.toLowerCase())switch(b.credentialType=On.ACCESS_TOKEN_WITH_AUTH_SCHEME,b.tokenType){case Ln.POP:var S=rl.extractTokenClaims(n,l);if(!(null===(y=null==S?void 0:S.cnf)||void 0===y?void 0:y.kid))throw ta.createTokenClaimsRequiredError();b.keyId=S.cnf.kid;break;case Ln.SSH:b.keyId=p}return b},t.isAccessTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.hasOwnProperty("target")&&(e.credentialType===On.ACCESS_TOKEN||e.credentialType===On.ACCESS_TOKEN_WITH_AUTH_SCHEME)},t}(lc),cl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.createRefreshTokenEntity=function(e,r,n,o,i,a){var s=new t;return s.clientId=o,s.credentialType=On.REFRESH_TOKEN,s.environment=r,s.homeAccountId=e,s.secret=n,s.userAssertionHash=a,i&&(s.familyId=i),s},t.isRefreshTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===On.REFRESH_TOKEN},t}(lc),ll=function(){function e(){}return e.prototype.generateAppMetadataKey=function(){return e.generateAppMetadataCacheKey(this.environment,this.clientId)},e.generateAppMetadataCacheKey=function(e,t){return[Bn,e,t].join(An.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAppMetadataEntity=function(t,r,n){var o=new e;return o.clientId=t,o.environment=r,n&&(o.familyId=n),o},e.isAppMetadataEntity=function(e,t){return!!t&&0===e.indexOf(Bn)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")},e}(),dl=function(){function e(){this.failedRequests=[],this.errors=[],this.cacheHits=0}return e.isServerTelemetryEntity=function(e,t){var r=0===e.indexOf(Un.CACHE_KEY),n=!0;return t&&(n=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&n},e}(),ul=function(){function e(){this.expiresAt=al.nowSeconds()+86400}return e.prototype.updateCloudDiscoveryMetadata=function(e,t){this.aliases=e.aliases,this.preferred_cache=e.preferred_cache,this.preferred_network=e.preferred_network,this.aliasesFromNetwork=t},e.prototype.updateEndpointMetadata=function(e,t){this.authorization_endpoint=e.authorization_endpoint,this.token_endpoint=e.token_endpoint,this.end_session_endpoint=e.end_session_endpoint,this.issuer=e.issuer,this.endpointsFromNetwork=t},e.prototype.updateCanonicalAuthority=function(e){this.canonical_authority=e},e.prototype.resetExpiresAt=function(){this.expiresAt=al.nowSeconds()+86400},e.prototype.isExpired=function(){return this.expiresAt<=al.nowSeconds()},e.isAuthorityMetadataEntity=function(e,t){return!!t&&0===e.indexOf(Dn)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")},e}(),ml=function(){function e(){}return e.isThrottlingEntity=function(e,t){var r=!1;e&&(r=0===e.indexOf(Qn));var n=!0;return t&&(n=t.hasOwnProperty("throttleTime")),r&&n},e}(),pl=function(){function e(){}return e.setRequestState=function(t,r,n){var o=e.generateLibraryState(t,n);return ra.isEmpty(r)?o:""+o+xn.RESOURCE_DELIM+r},e.generateLibraryState=function(e,t){if(!e)throw ta.createNoCryptoObjectError("generateLibraryState");var r={id:e.createNewGuid()};t&&(r.meta=t);var n=JSON.stringify(r);return e.base64Encode(n)},e.parseRequestState=function(e,t){if(!e)throw ta.createNoCryptoObjectError("parseRequestState");if(ra.isEmpty(t))throw ta.createInvalidStateError(t,"Null, undefined or empty state");try{var r=t.split(xn.RESOURCE_DELIM),n=r[0],o=r.length>1?r.slice(1).join(xn.RESOURCE_DELIM):xn.EMPTY_STRING,i=e.base64Decode(n),a=JSON.parse(i);return{userRequestState:ra.isEmpty(o)?xn.EMPTY_STRING:o,libraryState:a}}catch(e){throw ta.createInvalidStateError(t,e)}},e}();!function(e){e.HOME_ACCOUNT_ID="home_account_id",e.UPN="UPN"}(sc||(sc={}));var hl,gl,fl="redirect_uri_empty",yl="A redirect URI is required for all calls, and none has been set.",bl="post_logout_uri_empty",vl="A post logout redirect has not been set.",Sl="storage_not_supported",Nl="Given storage configuration option was not supported.",Cl="no_redirect_callbacks",xl="No redirect callbacks have been set. Please call setRedirectCallbacks() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics.",wl="stubbed_public_client_application_called",El="Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",Rl="in_mem_redirect_unavailable",Tl="Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true.",Pl=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="BrowserConfigurationAuthError",Object.setPrototypeOf(o,t.prototype),o}return nn(t,e),t.createRedirectUriEmptyError=function(){return new t(fl,yl)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(bl,vl)},t.createStorageNotSupportedError=function(e){return new t(Sl,Nl+" Given Location: "+e)},t.createRedirectCallbacksNotSetError=function(){return new t(Cl,xl)},t.createStubPcaInstanceCalledError=function(){return new t(wl,El)},t.createInMemoryRedirectUnavailableError=function(){return new t(Rl,Tl)},t}(po),Il=function(){function e(e){this.validateWindowStorage(e),this.windowStorage=window[e]}return e.prototype.validateWindowStorage=function(e){if(e!==Yn.LocalStorage&&e!==Yn.SessionStorage)throw Pl.createStorageNotSupportedError(e);if(!window[e])throw Pl.createStorageNotSupportedError(e)},e.prototype.getItem=function(e){return this.windowStorage.getItem(e)},e.prototype.setItem=function(e,t){this.windowStorage.setItem(e,t)},e.prototype.removeItem=function(e){this.windowStorage.removeItem(e)},e.prototype.getKeys=function(){return Object.keys(this.windowStorage)},e.prototype.containsKey=function(e){return this.windowStorage.hasOwnProperty(e)},e}(),_l=function(){function e(t){if(this._urlString=t,ra.isEmpty(this._urlString))throw el.createUrlEmptyError();ra.isEmpty(this.getHash())&&(this._urlString=e.canonicalizeUri(t))}return Object.defineProperty(e.prototype,"urlString",{get:function(){return this._urlString},enumerable:!1,configurable:!0}),e.canonicalizeUri=function(e){if(e){var t=e.toLowerCase();return ra.endsWith(t,"?")?t=t.slice(0,-1):ra.endsWith(t,"?/")&&(t=t.slice(0,-2)),ra.endsWith(t,"/")||(t+="/"),t}return e},e.prototype.validateAsUri=function(){var e;try{e=this.getUrlComponents()}catch(e){throw el.createUrlParseError(e)}if(!e.HostNameAndPort||!e.PathSegments)throw el.createUrlParseError("Given url string: "+this.urlString);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw el.createInsecureAuthorityUriError(this.urlString)},e.appendQueryString=function(e,t){return ra.isEmpty(t)?e:e.indexOf("?")<0?e+"?"+t:e+"&"+t},e.removeHashFromUrl=function(t){return e.canonicalizeUri(t.split("#")[0])},e.prototype.replaceTenantPath=function(t){var r=this.getUrlComponents(),n=r.PathSegments;return!t||0===n.length||n[0]!==Sn.COMMON&&n[0]!==Sn.ORGANIZATIONS||(n[0]=t),e.constructAuthorityUriFromObject(r)},e.prototype.getHash=function(){return e.parseHash(this.urlString)},e.prototype.getUrlComponents=function(){var e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw el.createUrlParseError("Given url string: "+this.urlString);var r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},n=r.AbsolutePath.split("/");return n=n.filter((function(e){return e&&e.length>0})),r.PathSegments=n,!ra.isEmpty(r.QueryString)&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r},e.getDomainFromUrl=function(e){var t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw el.createUrlParseError("Given url string: "+e);return r[2]},e.getAbsoluteUrl=function(t,r){if(t[0]===xn.FORWARD_SLASH){var n=new e(r).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+t}return t},e.parseHash=function(e){var t=e.indexOf("#"),r=e.indexOf("#/");return r>-1?e.substring(r+2):t>-1?e.substring(t+1):xn.EMPTY_STRING},e.constructAuthorityUriFromObject=function(t){return new e(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))},e.getDeserializedHash=function(t){if(ra.isEmpty(t))return{};var r=e.parseHash(t),n=ra.queryStringToObject(ra.isEmpty(r)?t:r);if(!n)throw ta.createHashNotDeserializedError(JSON.stringify(n));return n},e.hashContainsKnownProperties=function(t){if(ra.isEmpty(t)||t.indexOf("=")<0)return!1;var r=e.getDeserializedHash(t);return!!(r.code||r.error_description||r.error||r.state)},e}(),Al=function(){function e(){}return e.extractBrowserRequestState=function(e,t){if(ra.isEmpty(t))return null;try{return pl.parseRequestState(e,t).libraryState.meta}catch(e){throw ta.createInvalidStateError(t,e)}},e.parseServerResponseFromHash=function(e){if(!e)return{};var t=new _l(e);return _l.getDeserializedHash(t.getHash())},e}(),Ol=function(e){function t(t,r,n,o){var i=e.call(this,t,n)||this;return i.COOKIE_LIFE_MULTIPLIER=864e5,i.cacheConfig=r,i.logger=o,i.internalStorage=new Fs,i.browserStorage=i.setupBrowserStorage(i.cacheConfig.cacheLocation),i.temporaryCacheStorage=i.setupTemporaryCacheStorage(i.cacheConfig.cacheLocation),i.migrateCacheEntries(),i}return nn(t,e),t.prototype.setupBrowserStorage=function(e){switch(e){case Yn.LocalStorage:case Yn.SessionStorage:try{return new Il(e)}catch(e){this.logger.verbose(e);break}}return this.cacheConfig.cacheLocation=Yn.MemoryStorage,new Fs},t.prototype.setupTemporaryCacheStorage=function(e){switch(e){case Yn.LocalStorage:case Yn.SessionStorage:try{return new Il(Yn.SessionStorage)}catch(e){return this.logger.verbose(e),this.internalStorage}case Yn.MemoryStorage:default:return this.internalStorage}},t.prototype.migrateCacheEntries=function(){var e=this,t=xn.CACHE_PREFIX+"."+vn.ID_TOKEN,r=xn.CACHE_PREFIX+"."+vn.CLIENT_INFO,n=xn.CACHE_PREFIX+"."+vn.ERROR,o=xn.CACHE_PREFIX+"."+vn.ERROR_DESC,i=[this.browserStorage.getItem(t),this.browserStorage.getItem(r),this.browserStorage.getItem(n),this.browserStorage.getItem(o)];[vn.ID_TOKEN,vn.CLIENT_INFO,vn.ERROR,vn.ERROR_DESC].forEach((function(t,r){return e.migrateCacheEntry(t,i[r])}))},t.prototype.migrateCacheEntry=function(e,t){t&&this.setTemporaryCache(e,t,!0)},t.prototype.validateAndParseJson=function(e){try{var t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch(e){return null}},t.prototype.getItem=function(e){return this.browserStorage.getItem(e)},t.prototype.setItem=function(e,t){this.browserStorage.setItem(e,t)},t.prototype.getAccount=function(e){var t=this.getItem(e);if(!t)return null;var r=this.validateAndParseJson(t);return r&&cc.isAccountEntity(r)?nl.toObject(new cc,r):null},t.prototype.setAccount=function(e){this.logger.trace("BrowserCacheManager.setAccount called");var t=e.generateAccountKey();this.setItem(t,JSON.stringify(e))},t.prototype.getIdTokenCredential=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&il.isIdTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),nl.toObject(new il,r)):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null)},t.prototype.setIdTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e))},t.prototype.getAccessTokenCredential=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&sl.isAccessTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),nl.toObject(new sl,r)):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)},t.prototype.setAccessTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e))},t.prototype.getRefreshTokenCredential=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&cl.isRefreshTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),nl.toObject(new cl,r)):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)},t.prototype.setRefreshTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e))},t.prototype.getAppMetadata=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&ll.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),nl.toObject(new ll,r)):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)},t.prototype.setAppMetadata=function(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");var t=e.generateAppMetadataKey();this.setItem(t,JSON.stringify(e))},t.prototype.getServerTelemetry=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&dl.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),nl.toObject(new dl,r)):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)},t.prototype.setServerTelemetry=function(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))},t.prototype.getAuthorityMetadata=function(e){var t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&ul.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),nl.toObject(new ul,r)):null},t.prototype.getAuthorityMetadataKeys=function(){var e=this;return this.internalStorage.getKeys().filter((function(t){return e.isAuthorityMetadata(t)}))},t.prototype.setWrapperMetadata=function(e,t){this.internalStorage.setItem(Zn.WRAPPER_SKU,e),this.internalStorage.setItem(Zn.WRAPPER_VER,t)},t.prototype.getWrapperMetadata=function(){return[this.internalStorage.getItem(Zn.WRAPPER_SKU)||xn.EMPTY_STRING,this.internalStorage.getItem(Zn.WRAPPER_VER)||xn.EMPTY_STRING]},t.prototype.setAuthorityMetadata=function(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))},t.prototype.getActiveAccount=function(){var e=this.generateCacheKey(vn.ACTIVE_ACCOUNT),t=this.browserStorage.getItem(e);return t&&this.getAccountInfoByFilter({localAccountId:t})[0]||null},t.prototype.setActiveAccount=function(e){var t=this.generateCacheKey(vn.ACTIVE_ACCOUNT);e?(this.logger.verbose("setActiveAccount: Active account set"),this.browserStorage.setItem(t,e.localAccountId)):(this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t))},t.prototype.getAccountInfoByFilter=function(e){return this.getAllAccounts().filter((function(t){return!(e.username&&e.username.toLowerCase()!==t.username.toLowerCase()||e.homeAccountId&&e.homeAccountId!==t.homeAccountId||e.localAccountId&&e.localAccountId!==t.localAccountId||e.tenantId&&e.tenantId!==t.tenantId||e.environment&&e.environment!==t.environment)}))},t.prototype.getAccountInfoByHints=function(e,t){var r=this.getAllAccounts().filter((function(r){if(t){var n=r.idTokenClaims&&r.idTokenClaims.sid;return t===n}return!!e&&e===r.username}));if(1===r.length)return r[0];if(r.length>1)throw ta.createMultipleMatchingAccountsInCacheError();return null},t.prototype.getThrottlingCache=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&ml.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),nl.toObject(new ml,r)):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)},t.prototype.setThrottlingCache=function(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))},t.prototype.getTemporaryCache=function(e,t){var r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){var n=this.getItemCookie(r);if(n)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),n}var o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===Yn.LocalStorage){var i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o},t.prototype.setTemporaryCache=function(e,t,r){var n=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(n,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(n,t))},t.prototype.removeItem=function(e){return this.browserStorage.removeItem(e),this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e)),!0},t.prototype.containsKey=function(e){return this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e)},t.prototype.getKeys=function(){return un(this.browserStorage.getKeys(),this.temporaryCacheStorage.getKeys())},t.prototype.clear=function(){return cn(this,void 0,void 0,(function(){var e=this;return ln(this,(function(t){switch(t.label){case 0:return[4,this.removeAllAccounts()];case 1:return t.sent(),this.removeAppMetadata(),this.getKeys().forEach((function(t){!e.browserStorage.containsKey(t)&&!e.temporaryCacheStorage.containsKey(t)||-1===t.indexOf(xn.CACHE_PREFIX)&&-1===t.indexOf(e.clientId)||e.removeItem(t)})),this.internalStorage.clear(),[2]}}))}))},t.prototype.setItemCookie=function(e,t,r){var n=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/;";r&&(n+="expires="+this.getCookieExpirationTime(r)+";"),this.cacheConfig.secureCookies&&(n+="Secure;"),document.cookie=n},t.prototype.getItemCookie=function(e){for(var t=encodeURIComponent(e)+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var o=r[n];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length,o.length))}return xn.EMPTY_STRING},t.prototype.clearMsalCookies=function(){var e=this,t=xn.CACHE_PREFIX+"."+this.clientId;document.cookie.split(";").forEach((function(r){for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t)){var n=r.split("=")[0];e.clearItemCookie(n)}}))},t.prototype.clearItemCookie=function(e){this.setItemCookie(e,xn.EMPTY_STRING,-1)},t.prototype.getCookieExpirationTime=function(e){var t=new Date;return new Date(t.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()},t.prototype.getCache=function(){return this.browserStorage},t.prototype.setCache=function(){},t.prototype.generateCacheKey=function(e){return this.validateAndParseJson(e)?JSON.stringify(e):ra.startsWith(e,xn.CACHE_PREFIX)||ra.startsWith(e,vn.ADAL_ID_TOKEN)?e:xn.CACHE_PREFIX+"."+this.clientId+"."+e},t.prototype.generateAuthorityKey=function(e){var t=pl.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(Xn.AUTHORITY+"."+t)},t.prototype.generateNonceKey=function(e){var t=pl.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(Xn.NONCE_IDTOKEN+"."+t)},t.prototype.generateStateKey=function(e){var t=pl.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(Xn.REQUEST_STATE+"."+t)},t.prototype.getCachedAuthority=function(e){var t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;var n=this.generateAuthorityKey(r);return this.getTemporaryCache(n)},t.prototype.updateCacheEntries=function(e,t,r,n,o){this.logger.trace("BrowserCacheManager.updateCacheEntries called");var i=this.generateStateKey(e);this.setTemporaryCache(i,e,!1);var a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);var s=this.generateAuthorityKey(e);if(this.setTemporaryCache(s,r,!1),o){var c={credential:o.homeAccountId,type:sc.HOME_ACCOUNT_ID};this.setTemporaryCache(Xn.CCS_CREDENTIAL,JSON.stringify(c),!0)}else ra.isEmpty(n)||(c={credential:n,type:sc.UPN},this.setTemporaryCache(Xn.CCS_CREDENTIAL,JSON.stringify(c),!0))},t.prototype.resetRequestCache=function(e){var t=this;this.logger.trace("BrowserCacheManager.resetRequestCache called"),ra.isEmpty(e)||this.getKeys().forEach((function(r){-1!==r.indexOf(e)&&t.removeItem(r)})),e&&(this.removeItem(this.generateStateKey(e)),this.removeItem(this.generateNonceKey(e)),this.removeItem(this.generateAuthorityKey(e))),this.removeItem(this.generateCacheKey(Xn.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(Xn.ORIGIN_URI)),this.removeItem(this.generateCacheKey(Xn.URL_HASH)),this.removeItem(this.generateCacheKey(Xn.CORRELATION_ID)),this.removeItem(this.generateCacheKey(Xn.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(Xn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)},t.prototype.cleanRequestByState=function(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){var t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii("BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: "+r),this.resetRequestCache(r||xn.EMPTY_STRING)}this.clearMsalCookies()},t.prototype.cleanRequestByInteractionType=function(e){var t=this;this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach((function(r){if(-1!==r.indexOf(Xn.REQUEST_STATE)){var n=t.temporaryCacheStorage.getItem(r);if(n){var o=Al.extractBrowserRequestState(t.cryptoImpl,n);o&&o.interactionType===e&&(t.logger.infoPii("BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: "+n),t.resetRequestCache(n))}}})),this.clearMsalCookies(),this.setInteractionInProgress(!1)},t.prototype.cacheCodeRequest=function(e,t){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");var r=t.base64Encode(JSON.stringify(e));this.setTemporaryCache(Xn.REQUEST_PARAMS,r,!0)},t.prototype.getCachedRequest=function(e,t){this.logger.trace("BrowserCacheManager.getCachedRequest called");var r=this.getTemporaryCache(Xn.REQUEST_PARAMS,!0);if(!r)throw Bs.createNoTokenRequestCacheError();var n=this.validateAndParseJson(t.base64Decode(r));if(!n)throw Bs.createUnableToParseTokenRequestCacheError();if(this.removeItem(this.generateCacheKey(Xn.REQUEST_PARAMS)),ra.isEmpty(n.authority)){var o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw Bs.createNoCachedAuthorityError();n.authority=i}return n},t.prototype.getCachedNativeRequest=function(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");var e=this.getTemporaryCache(Xn.NATIVE_REQUEST,!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)},t.prototype.isInteractionInProgress=function(e){var t=this.getInteractionInProgress();return e?t===this.clientId:!!t},t.prototype.getInteractionInProgress=function(){var e=xn.CACHE_PREFIX+"."+Xn.INTERACTION_STATUS_KEY;return this.getTemporaryCache(e,!1)},t.prototype.setInteractionInProgress=function(e){var t=xn.CACHE_PREFIX+"."+Xn.INTERACTION_STATUS_KEY;if(e){if(this.getInteractionInProgress())throw Bs.createInteractionInProgressError();this.setTemporaryCache(t,this.clientId,!1)}else e||this.getInteractionInProgress()!==this.clientId||this.removeItem(t)},t.prototype.getLegacyLoginHint=function(){var e=this.getTemporaryCache(vn.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(vn.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));var t=this.getTemporaryCache(vn.ID_TOKEN,!0);t&&(this.removeItem(this.generateCacheKey(vn.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));var r=t||e;if(r){var n=new rl(r,this.cryptoImpl);if(n.claims&&n.claims.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),n.claims.preferred_username;if(n.claims&&n.claims.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),n.claims.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null},t.prototype.updateCredentialCacheKey=function(e,t){var r=t.generateCredentialKey();if(e!==r){var n=this.getItem(e);if(n)return this.removeItem(e),this.setItem(r,n),this.logger.verbose("Updated an outdated "+t.credentialType+" cache key"),r;this.logger.error("Attempted to update an outdated "+t.credentialType+" cache key but no item matching the outdated key was found in storage")}return e},t}(nl);!function(e){e.AAD="AAD",e.OIDC="OIDC"}(hl||(hl={})),function(e){e[e.None=0]="None",e.AzurePublic="https://login.microsoftonline.com",e.AzurePpe="https://login.windows-ppe.net",e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureUsGovernment="https://login.microsoftonline.us"}(gl||(gl={}));var kl,Ml="7.0.0",ql={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1,proxyUrl:xn.EMPTY_STRING},zl={loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:Gs.Info,correlationId:xn.EMPTY_STRING},Bl={sendGetRequestAsync:function(){return gn(this,void 0,void 0,(function(){return fn(this,(function(e){throw po.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented")}))}))},sendPostRequestAsync:function(){return gn(this,void 0,void 0,(function(){return fn(this,(function(e){throw po.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented")}))}))}},Hl={sku:xn.SKU,version:Ml,cpu:xn.EMPTY_STRING,os:xn.EMPTY_STRING},Dl={clientSecret:xn.EMPTY_STRING,clientAssertion:void 0},Ll={azureCloudInstance:gl.None,tenant:""+xn.DEFAULT_COMMON_TENANT},Ul={application:{appName:"",appVersion:""}},jl={sendGetRequestAsync:function(){return Promise.reject(po.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented for the Network interface."))},sendPostRequestAsync:function(){return Promise.reject(po.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented for the Network interface."))}},Fl=function(){function e(){}return e.prototype.sendGetRequestAsync=function(e,t){return cn(this,void 0,void 0,(function(){var r,n,o;return ln(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fetch(e,{method:Jn.GET,headers:this.getFetchHeaders(t)})];case 1:return r=i.sent(),[3,3];case 2:throw n=i.sent(),window.navigator.onLine?Bs.createGetRequestFailedError(n,e):Bs.createNoNetworkConnectivityError();case 3:return i.trys.push([3,5,,6]),o={headers:this.getHeaderDict(r.headers)},[4,r.json()];case 4:return[2,(o.body=i.sent(),o.status=r.status,o)];case 5:throw i.sent(),Bs.createFailedToParseNetworkResponseError(e);case 6:return[2]}}))}))},e.prototype.sendPostRequestAsync=function(e,t){return cn(this,void 0,void 0,(function(){var r,n,o,i;return ln(this,(function(a){switch(a.label){case 0:r=t&&t.body||xn.EMPTY_STRING,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,fetch(e,{method:Jn.POST,headers:this.getFetchHeaders(t),body:r})];case 2:return n=a.sent(),[3,4];case 3:throw o=a.sent(),window.navigator.onLine?Bs.createPostRequestFailedError(o,e):Bs.createNoNetworkConnectivityError();case 4:return a.trys.push([4,6,,7]),i={headers:this.getHeaderDict(n.headers)},[4,n.json()];case 5:return[2,(i.body=a.sent(),i.status=n.status,i)];case 6:throw a.sent(),Bs.createFailedToParseNetworkResponseError(e);case 7:return[2]}}))}))},e.prototype.getFetchHeaders=function(e){var t=new Headers;if(!e||!e.headers)return t;var r=e.headers;return Object.keys(r).forEach((function(e){t.append(e,r[e])})),t},e.prototype.getHeaderDict=function(e){var t={};return e.forEach((function(e,r){t[r]=e})),t},e}(),Kl=function(){function e(){}return e.prototype.sendGetRequestAsync=function(e,t){return cn(this,void 0,void 0,(function(){return ln(this,(function(r){return[2,this.sendRequestAsync(e,Jn.GET,t)]}))}))},e.prototype.sendPostRequestAsync=function(e,t){return cn(this,void 0,void 0,(function(){return ln(this,(function(r){return[2,this.sendRequestAsync(e,Jn.POST,t)]}))}))},e.prototype.sendRequestAsync=function(e,t,r){var n=this;return new Promise((function(o,i){var a=new XMLHttpRequest;if(a.open(t,e,!0),n.setXhrHeaders(a,r),a.onload=function(){(a.status<200||a.status>=300)&&(t===Jn.POST?i(Bs.createPostRequestFailedError("Failed with status "+a.status,e)):i(Bs.createGetRequestFailedError("Failed with status "+a.status,e)));try{var r=JSON.parse(a.responseText),s={headers:n.getHeaderDict(a),body:r,status:a.status};o(s)}catch(t){i(Bs.createFailedToParseNetworkResponseError(e))}},a.onerror=function(){window.navigator.onLine?t===Jn.POST?i(Bs.createPostRequestFailedError("Failed with status "+a.status,e)):i(Bs.createGetRequestFailedError("Failed with status "+a.status,e)):i(Bs.createNoNetworkConnectivityError())},t===Jn.POST&&r&&r.body)a.send(r.body);else{if(t!==Jn.GET)throw Bs.createHttpMethodNotImplementedError(t);a.send()}}))},e.prototype.setXhrHeaders=function(e,t){if(t&&t.headers){var r=t.headers;Object.keys(r).forEach((function(t){e.setRequestHeader(t,r[t])}))}},e.prototype.getHeaderDict=function(e){var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return t.forEach((function(e){var t=e.split(": "),n=t.shift(),o=t.join(": ");n&&o&&(r[n]=o)})),r},e}(),Gl=function(){function e(){}return e.clearHash=function(e){e.location.hash=xn.EMPTY_STRING,"function"==typeof e.history.replaceState&&e.history.replaceState(null,xn.EMPTY_STRING,""+e.location.origin+e.location.pathname+e.location.search)},e.replaceHash=function(e){var t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):xn.EMPTY_STRING},e.isInIframe=function(){return window.parent!==window},e.isInPopup=function(){return"undefined"!=typeof window&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf("msal.")},e.getCurrentUri=function(){return window.location.href.split("?")[0].split("#")[0]},e.getHomepage=function(){var e=new _l(window.location.href).getUrlComponents();return e.Protocol+"//"+e.HostNameAndPort+"/"},e.getBrowserNetworkClient=function(){return window.fetch&&window.Headers?new Fl:new Kl},e.blockReloadInHiddenIframes=function(){if(_l.hashContainsKnownProperties(window.location.hash)&&e.isInIframe())throw Bs.createBlockReloadInHiddenIframeError()},e.blockRedirectInIframe=function(t,r){var n=e.isInIframe();if(t===to.Redirect&&n&&!r)throw Bs.createRedirectInIframeError(n)},e.blockAcquireTokenInPopups=function(){if(e.isInPopup())throw Bs.createBlockAcquireTokenInPopupsError()},e.blockNonBrowserEnvironment=function(e){if(!e)throw Bs.createNonBrowserEnvironmentError()},e.blockNativeBrokerCalledBeforeInitialized=function(e,t){if(e&&!t)throw Bs.createNativeBrokerCalledBeforeInitialize()},e.detectIEOrEdge=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),r=e.indexOf("Trident/"),n=e.indexOf("Edge/");return t>0||r>0||n>0},e}(),Vl=function(){function e(){}return e.prototype.navigateInternal=function(t,r){return e.defaultNavigateWindow(t,r)},e.prototype.navigateExternal=function(t,r){return e.defaultNavigateWindow(t,r)},e.defaultNavigateWindow=function(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((function(e){setTimeout((function(){e(!0)}),t.timeout)}))},e}(),$l="@azure/msal-browser",Ql="2.26.0";!function(e){e.INITIALIZE_START="msal:initializeStart",e.INITIALIZE_END="msal:initializeEnd",e.ACCOUNT_ADDED="msal:accountAdded",e.ACCOUNT_REMOVED="msal:accountRemoved",e.LOGIN_START="msal:loginStart",e.LOGIN_SUCCESS="msal:loginSuccess",e.LOGIN_FAILURE="msal:loginFailure",e.ACQUIRE_TOKEN_START="msal:acquireTokenStart",e.ACQUIRE_TOKEN_SUCCESS="msal:acquireTokenSuccess",e.ACQUIRE_TOKEN_FAILURE="msal:acquireTokenFailure",e.ACQUIRE_TOKEN_NETWORK_START="msal:acquireTokenFromNetworkStart",e.SSO_SILENT_START="msal:ssoSilentStart",e.SSO_SILENT_SUCCESS="msal:ssoSilentSuccess",e.SSO_SILENT_FAILURE="msal:ssoSilentFailure",e.ACQUIRE_TOKEN_BY_CODE_START="msal:acquireTokenByCodeStart",e.ACQUIRE_TOKEN_BY_CODE_SUCCESS="msal:acquireTokenByCodeSuccess",e.ACQUIRE_TOKEN_BY_CODE_FAILURE="msal:acquireTokenByCodeFailure",e.HANDLE_REDIRECT_START="msal:handleRedirectStart",e.HANDLE_REDIRECT_END="msal:handleRedirectEnd",e.POPUP_OPENED="msal:popupOpened",e.LOGOUT_START="msal:logoutStart",e.LOGOUT_SUCCESS="msal:logoutSuccess",e.LOGOUT_FAILURE="msal:logoutFailure",e.LOGOUT_END="msal:logoutEnd"}(kl||(kl={}));var Wl,Yl=function(){function e(e,t){this.eventCallbacks=new Map,this.logger=e,this.browserCrypto=t,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}return e.prototype.addEventCallback=function(e){if("undefined"!=typeof window){var t=this.browserCrypto.createNewGuid();return this.eventCallbacks.set(t,e),this.logger.verbose("Event callback registered with id: "+t),t}return null},e.prototype.removeEventCallback=function(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback "+e+" removed.")},e.prototype.enableAccountStorageEvents=function(){"undefined"!=typeof window&&(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))},e.prototype.disableAccountStorageEvents=function(){"undefined"!=typeof window&&(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))},e.prototype.emitEvent=function(e,t,r,n){var o=this;if("undefined"!=typeof window){var i={eventType:e,interactionType:t||null,payload:r||null,error:n||null,timestamp:Date.now()};this.logger.info("Emitting event: "+e),this.eventCallbacks.forEach((function(t,r){o.logger.verbose("Emitting event to callback "+r+": "+e),t.apply(null,[i])}))}},e.prototype.handleAccountCacheChange=function(e){try{var t=e.newValue||e.oldValue;if(!t)return;var r=JSON.parse(t);if("object"!=typeof r||!cc.isAccountEntity(r))return;var n=nl.toObject(new cc,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(kl.ACCOUNT_ADDED,void 0,n)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(kl.ACCOUNT_REMOVED,void 0,n))}catch(e){return}},e}(),Jl=function(){function e(){}return e.generateThrottlingStorageKey=function(e){return"throttling."+JSON.stringify(e)},e.preProcess=function(t,r){var n,o=e.generateThrottlingStorageKey(r),i=t.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now())return void t.removeItem(o,kn.THROTTLING);throw new Zs((null===(n=i.errorCodes)||void 0===n?void 0:n.join(" "))||xn.EMPTY_STRING,i.errorMessage,i.subError)}},e.postProcess=function(t,r,n){if(e.checkResponseStatus(n)||e.checkResponseForRetryAfter(n)){var o={throttleTime:e.calculateThrottleTime(parseInt(n.headers[bn.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};t.setThrottlingCache(e.generateThrottlingStorageKey(r),o)}},e.checkResponseStatus=function(e){return 429===e.status||e.status>=500&&e.status<600},e.checkResponseForRetryAfter=function(e){return!!e.headers&&e.headers.hasOwnProperty(bn.RETRY_AFTER)&&(e.status<200||e.status>=300)},e.calculateThrottleTime=function(e){var t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||60),r+3600))},e.removeThrottle=function(e,t,r,n){var o={clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:n,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},i=this.generateThrottlingStorageKey(o);return e.removeItem(i,kn.THROTTLING)},e}(),Xl=function(){function e(e,t){this.networkClient=e,this.cacheManager=t}return e.prototype.sendPostRequest=function(e,t,r){return gn(this,void 0,void 0,(function(){var n,o;return fn(this,(function(i){switch(i.label){case 0:Jl.preProcess(this.cacheManager,e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.networkClient.sendPostRequestAsync(t,r)];case 2:return n=i.sent(),[3,4];case 3:throw(o=i.sent())instanceof po?o:ta.createNetworkError(t,o);case 4:return Jl.postProcess(this.cacheManager,e,n),[2,n]}}))}))},e}(),Zl=function(){function e(e){var t,r,n,o,i,a,s,c,l,d,u,m,p,h,g;this.config=(n=(t=e).authOptions,o=t.systemOptions,i=t.loggerOptions,a=t.storageInterface,s=t.networkInterface,c=t.cryptoInterface,l=t.clientCredentials,d=t.libraryInfo,u=t.telemetry,m=t.serverTelemetryManager,p=t.persistencePlugin,h=t.serializableCache,g=hn(hn({},zl),i),{authOptions:(r=n,hn({clientCapabilities:[],azureCloudOptions:Ll},r)),systemOptions:hn(hn({},ql),o),loggerOptions:g,storageInterface:a||new ol(n.clientId,Xs),networkInterface:s||Bl,cryptoInterface:c||Xs,clientCredentials:l||Dl,libraryInfo:hn(hn({},Hl),d),telemetry:hn(hn({},Ul),u),serverTelemetryManager:m||null,persistencePlugin:p||null,serializableCache:h||null}),this.logger=new Qs(this.config.loggerOptions,"@azure/msal-common",Ml),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new Xl(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority}return e.prototype.createTokenRequestHeaders=function(e){var t={};if(t[bn.CONTENT_TYPE]=xn.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case sc.HOME_ACCOUNT_ID:try{var r=ac(e.credential);t[bn.CCS_HEADER]="Oid:"+r.uid+"@"+r.utid}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case sc.UPN:t[bn.CCS_HEADER]="UPN: "+e.credential}return t},e.prototype.executePostToTokenEndpoint=function(e,t,r,n){return gn(this,void 0,void 0,(function(){var o;return fn(this,(function(i){switch(i.label){case 0:return[4,this.networkManager.sendPostRequest(n,e,{body:t,headers:r,proxyUrl:this.config.systemOptions.proxyUrl})];case 1:return o=i.sent(),this.config.serverTelemetryManager&&o.status<500&&429!==o.status&&this.config.serverTelemetryManager.clearTelemetryCache(),[2,o]}}))}))},e.prototype.updateAuthority=function(e){if(!e.discoveryComplete())throw ta.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.");this.authority=e},e}(),ed=function(){function e(){}return e.validateRedirectUri=function(e){if(ra.isEmpty(e))throw el.createRedirectUriEmptyError()},e.validatePrompt=function(e){var t=[];for(var r in Tn)t.push(Tn[r]);if(t.indexOf(e)<0)throw el.createInvalidPromptError(e)},e.validateClaims=function(e){try{JSON.parse(e)}catch(e){throw el.createInvalidClaimsRequestError()}},e.validateCodeChallengeParams=function(e,t){if(ra.isEmpty(e)||ra.isEmpty(t))throw el.createInvalidCodeChallengeParamsError();this.validateCodeChallengeMethod(t)},e.validateCodeChallengeMethod=function(e){if([qn.PLAIN,qn.S256].indexOf(e)<0)throw el.createInvalidCodeChallengeMethodError()},e.sanitizeEQParams=function(e,t){return e?(t.forEach((function(t,r){e[r]&&delete e[r]})),e):{}},e}(),td=function(){function e(){this.parameters=new Map}return e.prototype.addResponseTypeCode=function(){this.parameters.set(Nn.RESPONSE_TYPE,encodeURIComponent(xn.CODE_RESPONSE_TYPE))},e.prototype.addResponseTypeForTokenAndIdToken=function(){this.parameters.set(Nn.RESPONSE_TYPE,encodeURIComponent(xn.TOKEN_RESPONSE_TYPE+" "+xn.ID_TOKEN_RESPONSE_TYPE))},e.prototype.addResponseMode=function(e){this.parameters.set(Nn.RESPONSE_MODE,encodeURIComponent(e||Pn.QUERY))},e.prototype.addNativeBroker=function(){this.parameters.set(Nn.NATIVE_BROKER,encodeURIComponent("1"))},e.prototype.addScopes=function(e,t){void 0===t&&(t=!0);var r=t?yn(e||[],wn):e||[],n=new tl(r);this.parameters.set(Nn.SCOPE,encodeURIComponent(n.printScopes()))},e.prototype.addClientId=function(e){this.parameters.set(Nn.CLIENT_ID,encodeURIComponent(e))},e.prototype.addRedirectUri=function(e){ed.validateRedirectUri(e),this.parameters.set(Nn.REDIRECT_URI,encodeURIComponent(e))},e.prototype.addPostLogoutRedirectUri=function(e){ed.validateRedirectUri(e),this.parameters.set(Nn.POST_LOGOUT_URI,encodeURIComponent(e))},e.prototype.addIdTokenHint=function(e){this.parameters.set(Nn.ID_TOKEN_HINT,encodeURIComponent(e))},e.prototype.addDomainHint=function(e){this.parameters.set(Rn.DOMAIN_HINT,encodeURIComponent(e))},e.prototype.addLoginHint=function(e){this.parameters.set(Rn.LOGIN_HINT,encodeURIComponent(e))},e.prototype.addCcsUpn=function(e){this.parameters.set(bn.CCS_HEADER,encodeURIComponent("UPN:"+e))},e.prototype.addCcsOid=function(e){this.parameters.set(bn.CCS_HEADER,encodeURIComponent("Oid:"+e.uid+"@"+e.utid))},e.prototype.addSid=function(e){this.parameters.set(Rn.SID,encodeURIComponent(e))},e.prototype.addClaims=function(e,t){var r=this.addClientCapabilitiesToClaims(e,t);ed.validateClaims(r),this.parameters.set(Nn.CLAIMS,encodeURIComponent(r))},e.prototype.addCorrelationId=function(e){this.parameters.set(Nn.CLIENT_REQUEST_ID,encodeURIComponent(e))},e.prototype.addLibraryInfo=function(e){this.parameters.set(Nn.X_CLIENT_SKU,e.sku),this.parameters.set(Nn.X_CLIENT_VER,e.version),e.os&&this.parameters.set(Nn.X_CLIENT_OS,e.os),e.cpu&&this.parameters.set(Nn.X_CLIENT_CPU,e.cpu)},e.prototype.addApplicationTelemetry=function(e){(null==e?void 0:e.appName)&&this.parameters.set(Nn.X_APP_NAME,e.appName),(null==e?void 0:e.appVersion)&&this.parameters.set(Nn.X_APP_VER,e.appVersion)},e.prototype.addPrompt=function(e){ed.validatePrompt(e),this.parameters.set(""+Nn.PROMPT,encodeURIComponent(e))},e.prototype.addState=function(e){ra.isEmpty(e)||this.parameters.set(Nn.STATE,encodeURIComponent(e))},e.prototype.addNonce=function(e){this.parameters.set(Nn.NONCE,encodeURIComponent(e))},e.prototype.addCodeChallengeParams=function(e,t){if(ed.validateCodeChallengeParams(e,t),!e||!t)throw el.createInvalidCodeChallengeParamsError();this.parameters.set(Nn.CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(Nn.CODE_CHALLENGE_METHOD,encodeURIComponent(t))},e.prototype.addAuthorizationCode=function(e){this.parameters.set(Nn.CODE,encodeURIComponent(e))},e.prototype.addDeviceCode=function(e){this.parameters.set(Nn.DEVICE_CODE,encodeURIComponent(e))},e.prototype.addRefreshToken=function(e){this.parameters.set(Nn.REFRESH_TOKEN,encodeURIComponent(e))},e.prototype.addCodeVerifier=function(e){this.parameters.set(Nn.CODE_VERIFIER,encodeURIComponent(e))},e.prototype.addClientSecret=function(e){this.parameters.set(Nn.CLIENT_SECRET,encodeURIComponent(e))},e.prototype.addClientAssertion=function(e){ra.isEmpty(e)||this.parameters.set(Nn.CLIENT_ASSERTION,encodeURIComponent(e))},e.prototype.addClientAssertionType=function(e){ra.isEmpty(e)||this.parameters.set(Nn.CLIENT_ASSERTION_TYPE,encodeURIComponent(e))},e.prototype.addOboAssertion=function(e){this.parameters.set(Nn.OBO_ASSERTION,encodeURIComponent(e))},e.prototype.addRequestTokenUse=function(e){this.parameters.set(Nn.REQUESTED_TOKEN_USE,encodeURIComponent(e))},e.prototype.addGrantType=function(e){this.parameters.set(Nn.GRANT_TYPE,encodeURIComponent(e))},e.prototype.addClientInfo=function(){this.parameters.set("client_info","1")},e.prototype.addExtraQueryParameters=function(e){var t=this;ed.sanitizeEQParams(e,this.parameters),Object.keys(e).forEach((function(r){t.parameters.set(r,e[r])}))},e.prototype.addClientCapabilitiesToClaims=function(e,t){var r;if(e)try{r=JSON.parse(e)}catch(e){throw el.createInvalidClaimsRequestError()}else r={};return t&&t.length>0&&(r.hasOwnProperty(Cn.ACCESS_TOKEN)||(r[Cn.ACCESS_TOKEN]={}),r[Cn.ACCESS_TOKEN][Cn.XMS_CC]={values:t}),JSON.stringify(r)},e.prototype.addUsername=function(e){this.parameters.set(jn.username,encodeURIComponent(e))},e.prototype.addPassword=function(e){this.parameters.set(jn.password,encodeURIComponent(e))},e.prototype.addPopToken=function(e){ra.isEmpty(e)||(this.parameters.set(Nn.TOKEN_TYPE,Ln.POP),this.parameters.set(Nn.REQ_CNF,encodeURIComponent(e)))},e.prototype.addSshJwk=function(e){ra.isEmpty(e)||(this.parameters.set(Nn.TOKEN_TYPE,Ln.SSH),this.parameters.set(Nn.REQ_CNF,encodeURIComponent(e)))},e.prototype.addServerTelemetry=function(e){this.parameters.set(Nn.X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(Nn.X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())},e.prototype.addThrottling=function(){this.parameters.set(Nn.X_MS_LIB_CAPABILITY,"retry-after, h429")},e.prototype.addLogoutHint=function(e){this.parameters.set(Nn.LOGOUT_HINT,encodeURIComponent(e))},e.prototype.createQueryString=function(){var e=new Array;return this.parameters.forEach((function(t,r){e.push(r+"="+t)})),e.join("&")},e}(),rd=function(e,t,r,n,o){this.account=e||null,this.idToken=t||null,this.accessToken=r||null,this.refreshToken=n||null,this.appMetadata=o||null};!function(e){e.SW="sw",e.UHW="uhw"}(Wl||(Wl={}));var nd=function(){function e(e){this.cryptoUtils=e}return e.prototype.generateCnf=function(e){return gn(this,void 0,void 0,(function(){var t,r,n;return fn(this,(function(o){switch(o.label){case 0:return[4,this.generateKid(e)];case 1:return t=o.sent(),r=this.cryptoUtils.base64Encode(JSON.stringify(t)),n={kid:t.kid,reqCnfString:r},[4,this.cryptoUtils.hashString(r)];case 2:return[2,(n.reqCnfHash=o.sent(),n)]}}))}))},e.prototype.generateKid=function(e){return gn(this,void 0,void 0,(function(){return fn(this,(function(t){switch(t.label){case 0:return[4,this.cryptoUtils.getPublicKeyThumbprint(e)];case 1:return[2,{kid:t.sent(),xms_ksl:Wl.SW}]}}))}))},e.prototype.signPopToken=function(e,t,r){return gn(this,void 0,void 0,(function(){return fn(this,(function(n){return[2,this.signPayload(e,t,r)]}))}))},e.prototype.signPayload=function(e,t,r,n){return gn(this,void 0,void 0,(function(){var o,i,a,s,c,l;return fn(this,(function(d){switch(d.label){case 0:return o=r.resourceRequestMethod,i=r.resourceRequestUri,a=r.shrClaims,s=r.shrNonce,c=i?new _l(i):void 0,l=null==c?void 0:c.getUrlComponents(),[4,this.cryptoUtils.signJwt(hn({at:e,ts:al.nowSeconds(),m:null==o?void 0:o.toUpperCase(),u:null==l?void 0:l.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:null==l?void 0:l.AbsolutePath,q:(null==l?void 0:l.QueryString)?[[],l.QueryString]:void 0,client_claims:a||void 0},n),t,r.correlationId)];case 1:return[2,d.sent()]}}))}))},e}(),od=function(){function e(e,t){this.cache=e,this.hasChanged=t}return Object.defineProperty(e.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenCache",{get:function(){return this.cache},enumerable:!1,configurable:!0}),e}(),id=function(){function e(e,t,r,n,o,i){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=n,this.serializableCache=o,this.persistencePlugin=i}return e.prototype.validateServerAuthorizationCodeResponse=function(e,t,r){if(!e.state||!t)throw e.state?ta.createStateNotFoundError("Cached State"):ta.createStateNotFoundError("Server State");if(decodeURIComponent(e.state)!==decodeURIComponent(t))throw ta.createStateMismatchError();if(e.error||e.error_description||e.suberror){if(oc.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new oc(e.error||xn.EMPTY_STRING,e.error_description,e.suberror);throw new Zs(e.error||xn.EMPTY_STRING,e.error_description,e.suberror)}e.client_info&&ic(e.client_info,r)},e.prototype.validateTokenResponse=function(e){if(e.error||e.error_description||e.suberror){if(oc.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new oc(e.error,e.error_description,e.suberror);var t=e.error_codes+" - ["+e.timestamp+"]: "+e.error_description+" - Correlation ID: "+e.correlation_id+" - Trace ID: "+e.trace_id;throw new Zs(e.error,t,e.suberror)}},e.prototype.handleServerTokenResponse=function(t,r,n,o,i,a,s){return gn(this,void 0,void 0,(function(){var c,l,d,u,m;return fn(this,(function(p){switch(p.label){case 0:if(t.id_token&&(c=new rl(t.id_token||xn.EMPTY_STRING,this.cryptoObj),i&&!ra.isEmpty(i.nonce)&&c.claims.nonce!==i.nonce))throw ta.createNonceMismatchError();this.homeAccountIdentifier=cc.generateHomeAccountId(t.client_info||xn.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,c),i&&i.state&&(l=pl.parseRequestState(this.cryptoObj,i.state)),t.key_id=t.key_id||o.sshKid||void 0,d=this.generateCacheRecord(t,r,n,o,c,a,i),p.label=1;case 1:return p.trys.push([1,,5,8]),this.persistencePlugin&&this.serializableCache?(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),u=new od(this.serializableCache,!0),[4,this.persistencePlugin.beforeCacheAccess(u)]):[3,3];case 2:p.sent(),p.label=3;case 3:return s&&d.account&&(m=d.account.generateAccountKey(),!this.cacheStorage.getAccount(m))?(this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),[2,e.generateAuthenticationResult(this.cryptoObj,r,d,!1,o,c,l)]):[4,this.cacheStorage.saveCacheRecord(d)];case 4:return p.sent(),[3,8];case 5:return this.persistencePlugin&&this.serializableCache&&u?(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),[4,this.persistencePlugin.afterCacheAccess(u)]):[3,7];case 6:p.sent(),p.label=7;case 7:return[7];case 8:return[2,e.generateAuthenticationResult(this.cryptoObj,r,d,!1,o,c,l,t.spa_code)]}}))}))},e.prototype.generateCacheRecord=function(e,t,r,n,o,i,a){var s,c,l=t.getPreferredCache();if(ra.isEmpty(l))throw ta.createInvalidCacheEnvironmentError();!ra.isEmpty(e.id_token)&&o&&(s=il.createIdTokenEntity(this.homeAccountIdentifier,l,e.id_token||xn.EMPTY_STRING,this.clientId,o.claims.tid||xn.EMPTY_STRING),c=this.generateAccountEntity(e,o,t,a));var d=null;if(!ra.isEmpty(e.access_token)){var u=e.scope?tl.fromString(e.scope):new tl(n.scopes||[]),m=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,p=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,h=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,g=r+m,f=g+p,y=h&&h>0?r+h:void 0;d=sl.createAccessTokenEntity(this.homeAccountIdentifier,l,e.access_token||xn.EMPTY_STRING,this.clientId,o?o.claims.tid||xn.EMPTY_STRING:t.tenant,u.printScopes(),g,f,this.cryptoObj,y,e.token_type,i,e.key_id,n.claims,n.requestedClaimsHash)}var b=null;ra.isEmpty(e.refresh_token)||(b=cl.createRefreshTokenEntity(this.homeAccountIdentifier,l,e.refresh_token||xn.EMPTY_STRING,this.clientId,e.foci,i));var v=null;return ra.isEmpty(e.foci)||(v=ll.createAppMetadataEntity(this.clientId,l,e.foci)),new rd(c,s,d,b,v)},e.prototype.generateAccountEntity=function(e,t,r,n){var o=r.authorityType,i=n?n.cloud_graph_host_name:xn.EMPTY_STRING,a=n?n.msgraph_host:xn.EMPTY_STRING;if(o===$s.Adfs)return this.logger.verbose("Authority type is ADFS, creating ADFS account"),cc.createGenericAccount(this.homeAccountIdentifier,t,r,i,a);if(ra.isEmpty(e.client_info)&&"AAD"===r.protocolMode)throw ta.createClientInfoEmptyError();return e.client_info?cc.createAccount(e.client_info,this.homeAccountIdentifier,t,r,i,a):cc.createGenericAccount(this.homeAccountIdentifier,t,r,i,a)},e.generateAuthenticationResult=function(e,t,r,n,o,i,a,s){var c,l,d;return gn(this,void 0,void 0,(function(){var u,m,p,h,g,f,y,b,v,S,N;return fn(this,(function(C){switch(C.label){case 0:if(u=xn.EMPTY_STRING,m=[],p=null,g=xn.EMPTY_STRING,!r.accessToken)return[3,4];if(r.accessToken.tokenType!==Ln.POP)return[3,2];if(f=new nd(e),y=r.accessToken,b=y.secret,!(v=y.keyId))throw ta.createKeyIdMissingError();return[4,f.signPopToken(b,v,o)];case 1:return u=C.sent(),[3,3];case 2:u=r.accessToken.secret,C.label=3;case 3:m=tl.fromString(r.accessToken.target).asArray(),p=new Date(1e3*Number(r.accessToken.expiresOn)),h=new Date(1e3*Number(r.accessToken.extendedExpiresOn)),C.label=4;case 4:return r.appMetadata&&(g=r.appMetadata.familyId===Hn?Hn:xn.EMPTY_STRING),S=(null==i?void 0:i.claims.oid)||(null==i?void 0:i.claims.sub)||xn.EMPTY_STRING,N=(null==i?void 0:i.claims.tid)||xn.EMPTY_STRING,[2,{authority:t.canonicalAuthority,uniqueId:S,tenantId:N,scopes:m,account:r.account?r.account.getAccountInfo():null,idToken:i?i.rawToken:xn.EMPTY_STRING,idTokenClaims:i?i.claims:{},accessToken:u,fromCache:n,expiresOn:p,correlationId:o.correlationId,extExpiresOn:h,familyId:g,tokenType:(null===(c=r.accessToken)||void 0===c?void 0:c.tokenType)||xn.EMPTY_STRING,state:a?a.userRequestState:xn.EMPTY_STRING,cloudGraphHostName:(null===(l=r.account)||void 0===l?void 0:l.cloudGraphHostName)||xn.EMPTY_STRING,msGraphHost:(null===(d=r.account)||void 0===d?void 0:d.msGraphHost)||xn.EMPTY_STRING,code:s,fromNativeBroker:!1}]}}))}))},e}(),ad=function(e){function t(t){var r=e.call(this,t)||this;return r.includeRedirectUri=!0,r}return pn(t,e),t.prototype.getAuthCodeUrl=function(e){return gn(this,void 0,void 0,(function(){var t;return fn(this,(function(r){switch(r.label){case 0:return[4,this.createAuthCodeUrlQueryString(e)];case 1:return t=r.sent(),[2,_l.appendQueryString(this.authority.authorizationEndpoint,t)]}}))}))},t.prototype.acquireToken=function(e,t){return gn(this,void 0,void 0,(function(){var r,n,o;return fn(this,(function(i){switch(i.label){case 0:if(this.logger.info("in acquireToken call"),!e||ra.isEmpty(e.code))throw ta.createTokenRequestCannotBeMadeError();return r=al.nowSeconds(),[4,this.executeTokenRequest(this.authority,e)];case 1:return n=i.sent(),(o=new id(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(n.body),[4,o.handleServerTokenResponse(n.body,this.authority,r,e,t)];case 2:return[2,i.sent()]}}))}))},t.prototype.handleFragmentResponse=function(e,t){var r=new id(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),n=new _l(e),o=_l.getDeserializedHash(n.getHash());if(r.validateServerAuthorizationCodeResponse(o,t,this.cryptoUtils),!o.code)throw ta.createNoAuthCodeInServerResponseError();return hn(hn({},o),{code:o.code})},t.prototype.getLogoutUri=function(e){if(!e)throw el.createEmptyLogoutRequestError();var t=this.createLogoutUrlQueryString(e);return _l.appendQueryString(this.authority.endSessionEndpoint,t)},t.prototype.executeTokenRequest=function(e,t){return gn(this,void 0,void 0,(function(){var r,n,o,i,a,s,c;return fn(this,(function(l){switch(l.label){case 0:return r={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},[4,this.createTokenRequestBody(t)];case 1:if(n=l.sent(),o=this.createTokenQueryParameters(t),i=void 0,t.clientInfo)try{a=ic(t.clientInfo,this.cryptoUtils),i={credential:""+a.uid+An.CLIENT_INFO_SEPARATOR+a.utid,type:sc.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}return s=this.createTokenRequestHeaders(i||t.ccsCredential),c=ra.isEmpty(o)?e.tokenEndpoint:e.tokenEndpoint+"?"+o,[2,this.executePostToTokenEndpoint(c,n,s,r)]}}))}))},t.prototype.createTokenQueryParameters=function(e){var t=new td;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()},t.prototype.createTokenRequestBody=function(e){return gn(this,void 0,void 0,(function(){var t,r,n,o,i,a,s;return fn(this,(function(c){switch(c.label){case 0:return(t=new td).addClientId(this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):ed.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(r=this.config.clientCredentials.clientAssertion,t.addClientAssertion(r.assertion),t.addClientAssertionType(r.assertionType)),t.addGrantType(In.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme!==Ln.POP?[3,2]:[4,new nd(this.cryptoUtils).generateCnf(e)];case 1:return n=c.sent(),t.addPopToken(n.reqCnfString),[3,3];case 2:if(e.authenticationScheme===Ln.SSH){if(!e.sshJwk)throw el.createMissingSshJwkError();t.addSshJwk(e.sshJwk)}c.label=3;case 3:if(o=e.correlationId||this.config.cryptoInterface.createNewGuid(),t.addCorrelationId(o),(!ra.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),i=void 0,e.clientInfo)try{a=ic(e.clientInfo,this.cryptoUtils),i={credential:""+a.uid+An.CLIENT_INFO_SEPARATOR+a.utid,type:sc.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else i=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case sc.HOME_ACCOUNT_ID:try{a=ac(i.credential),t.addCcsOid(a)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case sc.UPN:t.addCcsUpn(i.credential)}return e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[Nn.RETURN_SPA_CODE]||t.addExtraQueryParameters(((s={})[Nn.RETURN_SPA_CODE]="1",s)),[2,t.createQueryString()]}}))}))},t.prototype.createAuthCodeUrlQueryString=function(e){return gn(this,void 0,void 0,(function(){var t,r,n,o,i,a;return fn(this,(function(s){switch(s.label){case 0:if((t=new td).addClientId(this.config.authOptions.clientId),r=yn(e.scopes||[],e.extraScopesToConsent||[]),t.addScopes(r),t.addRedirectUri(e.redirectUri),n=e.correlationId||this.config.cryptoInterface.createNewGuid(),t.addCorrelationId(n),t.addResponseMode(e.responseMode),t.addResponseTypeCode(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&t.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&t.addPrompt(e.prompt),e.domainHint&&t.addDomainHint(e.domainHint),e.prompt!==Tn.SELECT_ACCOUNT)if(e.sid&&e.prompt===Tn.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),t.addSid(e.sid);else if(e.account){if((o=this.extractAccountSid(e.account))&&e.prompt===Tn.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),t.addSid(o);try{i=ac(e.account.homeAccountId),t.addCcsOid(i)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),t.addLoginHint(e.account.username);try{i=ac(e.account.homeAccountId),t.addCcsOid(i)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&t.addNonce(e.nonce),e.state&&t.addState(e.state),(!ra.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker?(t.addNativeBroker(),e.authenticationScheme!==Ln.POP?[3,2]:[4,new nd(this.cryptoUtils).generateCnf(e)]):[3,2];case 1:a=s.sent(),t.addPopToken(a.reqCnfHash),s.label=2;case 2:return[2,t.createQueryString()]}}))}))},t.prototype.createLogoutUrlQueryString=function(e){var t=new td;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()},t.prototype.extractAccountSid=function(e){return e.idTokenClaims&&e.idTokenClaims.sid||null},t}(Zl);function sd(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")}var cd,ld=function(){function e(e){this.networkInterface=e}return e.prototype.detectRegion=function(t,r,n){return gn(this,void 0,void 0,(function(){var o,i,a,s,c;return fn(this,(function(l){switch(l.label){case 0:if(o=t)return[3,8];i=e.IMDS_OPTIONS,n&&(i.proxyUrl=n),l.label=1;case 1:return l.trys.push([1,6,,7]),[4,this.getRegionFromIMDS(xn.IMDS_VERSION,i)];case 2:return(a=l.sent()).status===Fn.httpSuccess&&(o=a.body,r.region_source=Kn.IMDS),a.status!==Fn.httpBadRequest?[3,5]:[4,this.getCurrentVersion(i)];case 3:return(s=l.sent())?[4,this.getRegionFromIMDS(s,i)]:(r.region_source=Kn.FAILED_AUTO_DETECTION,[2,null]);case 4:(c=l.sent()).status===Fn.httpSuccess&&(o=c.body,r.region_source=Kn.IMDS),l.label=5;case 5:return[3,7];case 6:return l.sent(),r.region_source=Kn.FAILED_AUTO_DETECTION,[2,null];case 7:return[3,9];case 8:r.region_source=Kn.ENVIRONMENT_VARIABLE,l.label=9;case 9:return o||(r.region_source=Kn.FAILED_AUTO_DETECTION),[2,o||null]}}))}))},e.prototype.getRegionFromIMDS=function(e,t){return gn(this,void 0,void 0,(function(){return fn(this,(function(r){return[2,this.networkInterface.sendGetRequestAsync(xn.IMDS_ENDPOINT+"?api-version="+e+"&format=text",t,xn.IMDS_TIMEOUT)]}))}))},e.prototype.getCurrentVersion=function(e){return gn(this,void 0,void 0,(function(){var t;return fn(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.networkInterface.sendGetRequestAsync(xn.IMDS_ENDPOINT+"?format=json",e)];case 1:return(t=r.sent()).status===Fn.httpBadRequest&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?[2,t.body["newest-versions"][0]]:[2,null];case 2:return r.sent(),[2,null];case 3:return[2]}}))}))},e.IMDS_OPTIONS={headers:{Metadata:"true"}},e}(),dd=function(){function e(e,t,r,n,o){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=n,this.regionDiscovery=new ld(t),this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.proxyUrl=o||xn.EMPTY_STRING}return Object.defineProperty(e.prototype,"authorityType",{get:function(){var e=this.canonicalAuthorityUrlComponents.PathSegments;return e.length&&e[0].toLowerCase()===xn.ADFS?$s.Adfs:$s.Default},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.authorityOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(e){this._canonicalAuthority=new _l(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthorityUrlComponents",{get:function(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.authorization_endpoint);return this.replaceTenant(e)}throw ta.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.token_endpoint);return this.replaceTenant(e)}throw ta.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));return this.replaceTenant(e)}throw ta.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw ta.createLogoutNotSupportedError();var e=this.replacePath(this.metadata.end_session_endpoint);return this.replaceTenant(e)}throw ta.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.issuer);return this.replaceTenant(e)}throw ta.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),e.prototype.replaceTenant=function(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)},e.prototype.replacePath=function(e){var t=e,r=new _l(this.metadata.canonical_authority).getUrlComponents().PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((function(e,n){var o=r[n];e!==o&&(t=t.replace("/"+o+"/","/"+e+"/"))})),t},Object.defineProperty(e.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){return this.authorityType===$s.Adfs||this.protocolMode===hl.OIDC?this.canonicalAuthority+".well-known/openid-configuration":this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!1,configurable:!0}),e.prototype.discoveryComplete=function(){return!!this.metadata},e.prototype.resolveEndpointsAsync=function(){return gn(this,void 0,void 0,(function(){var e,t,r,n;return fn(this,(function(o){switch(o.label){case 0:return(e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort))||(e=new ul).updateCanonicalAuthority(this.canonicalAuthority),[4,this.updateCloudDiscoveryMetadata(e)];case 1:return t=o.sent(),this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network),[4,this.updateEndpointMetadata(e)];case 2:return r=o.sent(),t!==zn.CACHE&&r!==zn.CACHE&&(e.resetExpiresAt(),e.updateCanonicalAuthority(this.canonicalAuthority)),n=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache),this.cacheManager.setAuthorityMetadata(n,e),this.metadata=e,[2]}}))}))},e.prototype.updateEndpointMetadata=function(t){var r;return gn(this,void 0,void 0,(function(){var n,o,i;return fn(this,(function(a){switch(a.label){case 0:return(n=this.getEndpointMetadataFromConfig())?(t.updateEndpointMetadata(n,!1),[2,zn.CONFIG]):this.isAuthoritySameType(t)&&t.endpointsFromNetwork&&!t.isExpired()?[2,zn.CACHE]:[4,this.getEndpointMetadataFromNetwork()];case 1:return(n=a.sent())?(null===(r=this.authorityOptions.azureRegionConfiguration)||void 0===r?void 0:r.azureRegion)?[4,this.regionDiscovery.detectRegion(this.authorityOptions.azureRegionConfiguration.environmentRegion,this.regionDiscoveryMetadata,this.proxyUrl)]:[3,3]:[3,4];case 2:o=a.sent(),i=this.authorityOptions.azureRegionConfiguration.azureRegion===xn.AZURE_REGION_AUTO_DISCOVER_FLAG?o:this.authorityOptions.azureRegionConfiguration.azureRegion,this.authorityOptions.azureRegionConfiguration.azureRegion===xn.AZURE_REGION_AUTO_DISCOVER_FLAG?this.regionDiscoveryMetadata.region_outcome=o?Gn.AUTO_DETECTION_REQUESTED_SUCCESSFUL:Gn.AUTO_DETECTION_REQUESTED_FAILED:this.regionDiscoveryMetadata.region_outcome=o?this.authorityOptions.azureRegionConfiguration.azureRegion===o?Gn.CONFIGURED_MATCHES_DETECTED:Gn.CONFIGURED_NOT_DETECTED:Gn.CONFIGURED_NO_AUTO_DETECTION,i&&(this.regionDiscoveryMetadata.region_used=i,n=e.replaceWithRegionalInformation(n,i)),a.label=3;case 3:return t.updateEndpointMetadata(n,!0),[2,zn.NETWORK];case 4:throw ta.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}}))}))},e.prototype.isAuthoritySameType=function(e){return new _l(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length},e.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw el.createInvalidAuthorityMetadataError()}return null},e.prototype.getEndpointMetadataFromNetwork=function(){return gn(this,void 0,void 0,(function(){var e,t;return fn(this,(function(r){switch(r.label){case 0:e={},this.proxyUrl&&(e.proxyUrl=this.proxyUrl),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint,e)];case 2:return[2,sd((t=r.sent()).body)?t.body:null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},e.prototype.updateCloudDiscoveryMetadata=function(e){return gn(this,void 0,void 0,(function(){var t;return fn(this,(function(r){switch(r.label){case 0:return(t=this.getCloudDiscoveryMetadataFromConfig())?(e.updateCloudDiscoveryMetadata(t,!1),[2,zn.CONFIG]):this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!e.isExpired()?[2,zn.CACHE]:[4,this.getCloudDiscoveryMetadataFromNetwork()];case 1:if(t=r.sent())return e.updateCloudDiscoveryMetadata(t,!0),[2,zn.NETWORK];throw el.createUntrustedAuthorityError()}}))}))},e.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityOptions.cloudDiscoveryMetadata)try{var t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=e.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort);if(r)return r}catch(e){throw el.createInvalidCloudDiscoveryMetadataError()}return this.isInKnownAuthorities()?e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort):null},e.prototype.getCloudDiscoveryMetadataFromNetwork=function(){return gn(this,void 0,void 0,(function(){var t,r,n,o,i;return fn(this,(function(a){switch(a.label){case 0:t=""+xn.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize",r={},this.proxyUrl&&(r.proxyUrl=this.proxyUrl),n=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(t,r)];case 2:return o=a.sent(),i=function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(o.body)?o.body.metadata:[],0===i.length?[2,null]:(n=e.getCloudDiscoveryMetadataFromNetworkResponse(i,this.hostnameAndPort),[3,4]);case 3:return a.sent(),[2,null];case 4:return n||(n=e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),[2,n]}}))}))},e.prototype.isInKnownAuthorities=function(){var e=this;return this.authorityOptions.knownAuthorities.filter((function(t){return _l.getDomainFromUrl(t).toLowerCase()===e.hostnameAndPort})).length>0},e.generateAuthority=function(e,t){var r;if(t&&t.azureCloudInstance!==gl.None){var n=t.tenant?t.tenant:xn.DEFAULT_COMMON_TENANT;r=t.azureCloudInstance+"/"+n+"/"}return r||e},e.createCloudDiscoveryMetadataFromHost=function(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}},e.getCloudDiscoveryMetadataFromNetworkResponse=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.aliases.indexOf(t)>-1)return n}return null},e.prototype.getPreferredCache=function(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw ta.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},e.prototype.isAlias=function(e){return this.metadata.aliases.indexOf(e)>-1},e.isPublicCloudAuthority=function(e){return xn.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0},e.buildRegionalAuthorityString=function(e,t,r){var n=new _l(e);n.validateAsUri();var o=n.getUrlComponents(),i=t+"."+o.HostNameAndPort;this.isPublicCloudAuthority(o.HostNameAndPort)&&(i=t+"."+xn.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX);var a=_l.constructAuthorityUriFromObject(hn(hn({},n.getUrlComponents()),{HostNameAndPort:i})).urlString;return r?a+"?"+r:a},e.replaceWithRegionalInformation=function(t,r){return t.authorization_endpoint=e.buildRegionalAuthorityString(t.authorization_endpoint,r),t.token_endpoint=e.buildRegionalAuthorityString(t.token_endpoint,r,"allowestsrnonmsi=true"),t.end_session_endpoint&&(t.end_session_endpoint=e.buildRegionalAuthorityString(t.end_session_endpoint,r)),t},e}(),ud=function(){function e(){}return e.createDiscoveredInstance=function(t,r,n,o,i){return gn(this,void 0,void 0,(function(){var a,s;return fn(this,(function(c){switch(c.label){case 0:a=e.createInstance(t,r,n,o,i),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.resolveEndpointsAsync()];case 2:return c.sent(),[2,a];case 3:throw s=c.sent(),ta.createEndpointDiscoveryIncompleteError(s);case 4:return[2]}}))}))},e.createInstance=function(e,t,r,n,o){if(ra.isEmpty(e))throw el.createUrlEmptyError();return new dd(e,t,r,n,o)},e}(),md=function(){function e(e,t){this.cacheOutcome=Vn.NO_CACHE_HIT,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||xn.EMPTY_STRING,this.wrapperVer=e.wrapperVer||xn.EMPTY_STRING,this.telemetryCacheKey=Un.CACHE_KEY+An.CACHE_KEY_SEPARATOR+e.clientId}return e.prototype.generateCurrentRequestHeaderValue=function(){var e=""+this.apiId+Un.VALUE_SEPARATOR+this.cacheOutcome,t=[this.wrapperSKU,this.wrapperVer].join(Un.VALUE_SEPARATOR),r=[e,this.getRegionDiscoveryFields()].join(Un.VALUE_SEPARATOR);return[Un.SCHEMA_VERSION,r,t].join(Un.CATEGORY_SEPARATOR)},e.prototype.generateLastRequestHeaderValue=function(){var t=this.getLastRequests(),r=e.maxErrorsToSend(t),n=t.failedRequests.slice(0,2*r).join(Un.VALUE_SEPARATOR),o=t.errors.slice(0,r).join(Un.VALUE_SEPARATOR),i=t.errors.length,a=[i,r<i?Un.OVERFLOW_TRUE:Un.OVERFLOW_FALSE].join(Un.VALUE_SEPARATOR);return[Un.SCHEMA_VERSION,t.cacheHits,n,o,a].join(Un.CATEGORY_SEPARATOR)},e.prototype.cacheFailedRequest=function(e){var t=this.getLastRequests();t.errors.length>=Un.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),ra.isEmpty(e.subError)?ra.isEmpty(e.errorCode)?e&&e.toString()?t.errors.push(e.toString()):t.errors.push(Un.UNKNOWN_ERROR):t.errors.push(e.errorCode):t.errors.push(e.subError),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)},e.prototype.incrementCacheHits=function(){var e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits},e.prototype.getLastRequests=function(){var e=new dl;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e},e.prototype.clearTelemetryCache=function(){var t=this.getLastRequests(),r=e.maxErrorsToSend(t);if(r===t.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{var n=new dl;n.failedRequests=t.failedRequests.slice(2*r),n.errors=t.errors.slice(r),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}},e.maxErrorsToSend=function(e){var t,r=0,n=0,o=e.errors.length;for(t=0;t<o;t++){var i=e.failedRequests[2*t]||xn.EMPTY_STRING,a=e.failedRequests[2*t+1]||xn.EMPTY_STRING,s=e.errors[t]||xn.EMPTY_STRING;if(!((n+=i.toString().length+a.toString().length+s.length+3)<Un.MAX_LAST_HEADER_BYTES))break;r+=1}return r},e.prototype.getRegionDiscoveryFields=function(){var e=[];return e.push(this.regionUsed||xn.EMPTY_STRING),e.push(this.regionSource||xn.EMPTY_STRING),e.push(this.regionOutcome||xn.EMPTY_STRING),e.join(",")},e.prototype.updateRegionDiscoveryMetadata=function(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome},e.prototype.setCacheOutcome=function(e){this.cacheOutcome=e},e}(),pd=function(){function e(e,t,r,n,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=c||this.browserCrypto.createNewGuid(),this.logger=n.clone(no,Ql,this.correlationId),this.performanceClient=a}return e.prototype.clearCacheOnLogout=function(e){return cn(this,void 0,void 0,(function(){return ln(this,(function(t){switch(t.label){case 0:if(!e)return[3,5];cc.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null)),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.browserStorage.removeAccount(cc.generateAccountCacheKey(e))];case 2:return t.sent(),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request."),[3,4];case 3:return t.sent(),this.logger.error("Account provided in logout request was not found. Local cache unchanged."),[3,4];case 4:return[3,9];case 5:return t.trys.push([5,8,,9]),this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),[4,this.browserStorage.clear()];case 6:return t.sent(),[4,this.browserCrypto.clearKeystore()];case 7:return t.sent(),[3,9];case 8:return t.sent(),this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged."),[3,9];case 9:return[2]}}))}))},e.prototype.initializeBaseRequest=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o;return ln(this,(function(i){switch(i.label){case 0:if(this.logger.verbose("Initializing BaseAuthRequest"),t=e.authority||this.config.auth.authority,r=un(e&&e.scopes||[]),(n=sn(sn({},e),{correlationId:this.correlationId,authority:t,scopes:r})).authenticationScheme){if(n.authenticationScheme===Ln.SSH){if(!e.sshJwk)throw el.createMissingSshJwkError();if(!e.sshKid)throw el.createMissingSshKidError()}this.logger.verbose('Authentication Scheme set to "'+n.authenticationScheme+'" as configured in Auth request')}else n.authenticationScheme=Ln.BEARER,this.logger.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return!e.claims||ra.isEmpty(e.claims)?[3,2]:(o=n,[4,this.browserCrypto.hashString(e.claims)]);case 1:o.requestedClaimsHash=i.sent(),i.label=2;case 2:return[2,n]}}))}))},e.prototype.getRedirectUri=function(e){this.logger.verbose("getRedirectUri called");var t=e||this.config.auth.redirectUri||Gl.getCurrentUri();return _l.getAbsoluteUrl(t,Gl.getCurrentUri())},e.prototype.initializeServerTelemetryManager=function(e,t){this.logger.verbose("initializeServerTelemetryManager called");var r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new md(r,this.browserStorage)},e.prototype.getDiscoveredAuthority=function(e){return cn(this,void 0,void 0,(function(){var t;return ln(this,(function(r){switch(r.label){case 0:return this.logger.verbose("getDiscoveredAuthority called"),t={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata},e?(this.logger.verbose("Creating discovered authority with request authority"),[4,ud.createDiscoveredInstance(e,this.config.system.networkClient,this.browserStorage,t)]):[3,2];case 1:case 3:return[2,r.sent()];case 2:return this.logger.verbose("Creating discovered authority with configured authority"),[4,ud.createDiscoveredInstance(this.config.auth.authority,this.config.system.networkClient,this.browserStorage,t)]}}))}))},e}(),hd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nn(t,e),t.prototype.initializeAuthorizationCodeRequest=function(e){return cn(this,void 0,void 0,(function(){var t,r;return ln(this,(function(n){switch(n.label){case 0:return this.logger.verbose("initializeAuthorizationRequest called",e.correlationId),[4,this.browserCrypto.generatePkceCodes()];case 1:return t=n.sent(),r=sn(sn({},e),{redirectUri:e.redirectUri,code:xn.EMPTY_STRING,codeVerifier:t.verifier}),e.codeChallenge=t.challenge,e.codeChallengeMethod=xn.S256_CODE_CHALLENGE_METHOD,[2,r]}}))}))},t.prototype.initializeLogoutRequest=function(e){this.logger.verbose("initializeLogoutRequest called",null==e?void 0:e.correlationId);var t=sn({correlationId:this.correlationId||this.browserCrypto.createNewGuid()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){var r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=_l.getAbsoluteUrl(e.postLogoutRedirectUri,Gl.getCurrentUri())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=_l.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Gl.getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=_l.getAbsoluteUrl(Gl.getCurrentUri(),Gl.getCurrentUri())),t},t.prototype.getLogoutHintFromIdTokenClaims=function(e){var t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null},t.prototype.createAuthCodeClient=function(e,t,r){return cn(this,void 0,void 0,(function(){var n;return ln(this,(function(o){switch(o.label){case 0:return[4,this.getClientConfiguration(e,t,r)];case 1:return n=o.sent(),[2,new ad(n)]}}))}))},t.prototype.getClientConfiguration=function(e,t,r){return cn(this,void 0,void 0,(function(){var n;return ln(this,(function(o){switch(o.label){case 0:return this.logger.verbose("getClientConfiguration called",this.correlationId),[4,this.getDiscoveredAuthority(t,r)];case 1:return n=o.sent(),[2,{authOptions:{clientId:this.config.auth.clientId,authority:n,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,logLevel:this.config.system.loggerOptions.logLevel,correlationId:this.correlationId},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:no,version:Ql,cpu:xn.EMPTY_STRING,os:xn.EMPTY_STRING},telemetry:this.config.telemetry}]}}))}))},t.prototype.validateAndExtractStateFromHash=function(e,t,r){if(this.logger.verbose("validateAndExtractStateFromHash called",r),!e.state)throw Bs.createHashDoesNotContainStateError();var n=Al.extractBrowserRequestState(this.browserCrypto,e.state);if(!n)throw Bs.createUnableToParseStateError();if(n.interactionType!==t)throw Bs.createStateInteractionTypeMismatchError();return this.logger.verbose("Returning state from hash",r),e.state},t.prototype.getDiscoveredAuthority=function(e,t){return cn(this,void 0,void 0,(function(){var r,n,o,i;return ln(this,(function(a){switch(a.label){case 0:return this.logger.verbose("getDiscoveredAuthority called",this.correlationId),r=this.performanceClient.startMeasurement(on.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),n={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata},o=e||this.config.auth.authority,i=dd.generateAuthority(o,t||this.config.auth.azureCloudOptions),this.logger.verbose("Creating discovered authority with configured authority",this.correlationId),[4,ud.createDiscoveredInstance(i,this.config.system.networkClient,this.browserStorage,n).then((function(e){return r.endMeasurement({success:!0}),e})).catch((function(e){throw r.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}))];case 1:return[2,a.sent()]}}))}))},t.prototype.initializeAuthorizationRequest=function(e,t){return cn(this,void 0,void 0,(function(){var r,n,o,i,a,s,c;return ln(this,(function(l){switch(l.label){case 0:return this.logger.verbose("initializeAuthorizationRequest called",this.correlationId),r=this.getRedirectUri(e.redirectUri),n={interactionType:t},o=pl.setRequestState(this.browserCrypto,e&&e.state||xn.EMPTY_STRING,n),a=[{}],[4,this.initializeBaseRequest(e)];case 1:return i=sn.apply(void 0,[sn.apply(void 0,a.concat([l.sent()])),{redirectUri:r,state:o,nonce:e.nonce||this.browserCrypto.createNewGuid(),responseMode:Pn.FRAGMENT}]),(s=e.account||this.browserStorage.getActiveAccount())&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: "+s.homeAccountId,this.correlationId),i.account=s),ra.isEmpty(i.loginHint)&&!s&&(c=this.browserStorage.getLegacyLoginHint())&&(i.loginHint=c),[2,i]}}))}))},t}(pd);!function(e){e.USER_INTERACTION_REQUIRED="USER_INTERACTION_REQUIRED",e.USER_CANCEL="USER_CANCEL",e.NO_NETWORK="NO_NETWORK",e.TRANSIENT_ERROR="TRANSIENT_ERROR",e.PERSISTENT_ERROR="PERSISTENT_ERROR",e.DISABLED="DISABLED"}(cd||(cd={}));var gd="ContentError",fd="user_switch",yd="User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again.",bd=function(e){function t(r,n,o){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i.name="NativeAuthError",i.ext=o,i}return nn(t,e),t.prototype.isFatal=function(){return!(!this.ext||!this.ext.status||this.ext.status!==cd.PERSISTENT_ERROR&&this.ext.status!==cd.DISABLED)||this.errorCode===gd},t.createError=function(e,r,n){if(n&&n.status)switch(n.status){case cd.USER_INTERACTION_REQUIRED:return new oc(e,r);case cd.USER_CANCEL:return Bs.createUserCancelledError();case cd.NO_NETWORK:return Bs.createNoNetworkConnectivityError()}return new t(e,r,n)},t.createUserSwitchError=function(){return new t(fd,yd)},t}(po),vd=function(e){function t(t,r,n,o,i,a,s,c,l,d,u){var m=e.call(this,t,r,n,o,i,a,c,l,u)||this;return m.apiId=s,m.accountId=d,m.nativeMessageHandler=l,m}return nn(t,e),t.prototype.acquireToken=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a;return ln(this,(function(s){switch(s.label){case 0:return this.logger.trace("NativeInteractionClient - acquireToken called."),t=this.performanceClient.startMeasurement(on.NativeInteractionClientAcquireToken,e.correlationId),[4,this.initializeNativeRequest(e)];case 1:return r=s.sent(),n={method:Wn.GetToken,request:r},o=al.nowSeconds(),[4,this.nativeMessageHandler.sendMessage(n)];case 2:return i=s.sent(),a=this.validateNativeResponse(i),[2,this.handleNativeResponse(a,r,o).then((function(e){return t.endMeasurement({success:!0,isNativeBroker:!0}),e})).catch((function(e){throw t.endMeasurement({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e}))]}}))}))},t.prototype.acquireTokenRedirect=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a;return ln(this,(function(s){switch(s.label){case 0:return this.logger.trace("NativeInteractionClient - acquireTokenRedirect called."),[4,this.initializeNativeRequest(e)];case 1:t=s.sent(),r={method:Wn.GetToken,request:t},s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.nativeMessageHandler.sendMessage(r)];case 3:return n=s.sent(),this.validateNativeResponse(n),[3,5];case 4:if((o=s.sent())instanceof bd&&o.isFatal())throw o;return[3,5];case 5:return this.browserStorage.setTemporaryCache(Xn.NATIVE_REQUEST,JSON.stringify(t),!0),i={apiId:eo.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri),[4,this.navigationClient.navigateExternal(a,i)];case 6:return s.sent(),[2]}}))}))},t.prototype.handleRedirectPromise=function(){return cn(this,void 0,void 0,(function(){var e,t,r,n,o,i;return ln(this,(function(a){switch(a.label){case 0:if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(e=this.browserStorage.getCachedNativeRequest()))return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),[2,null];this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Xn.NATIVE_REQUEST)),t={method:Wn.GetToken,request:e},r=al.nowSeconds(),a.label=1;case 1:return a.trys.push([1,3,,4]),this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker."),[4,this.nativeMessageHandler.sendMessage(t)];case 2:return n=a.sent(),this.validateNativeResponse(n),o=this.handleNativeResponse(n,e,r),this.browserStorage.setInteractionInProgress(!1),[2,o];case 3:throw i=a.sent(),this.browserStorage.setInteractionInProgress(!1),i;case 4:return[2]}}))}))},t.prototype.logout=function(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")},t.prototype.handleNativeResponse=function(e,t,r){return cn(this,void 0,void 0,(function(){var n,o,i,a,s,c,l,d,u,m,p,h,g,f,y,b=this;return ln(this,(function(v){switch(v.label){case 0:if(this.logger.trace("NativeInteractionClient - handleNativeResponse called."),e.account.id!==t.accountId)throw bd.createUserSwitchError();return n=new rl(e.id_token||xn.EMPTY_STRING,this.browserCrypto),[4,this.getDiscoveredAuthority(t.authority)];case 1:return o=v.sent(),i=o.getPreferredCache(),a=cc.generateHomeAccountId(e.client_info||xn.EMPTY_STRING,$s.Default,this.logger,this.browserCrypto,n),s=cc.createAccount(e.client_info,a,n,void 0,void 0,void 0,i,e.account.id),this.browserStorage.setAccount(s),c=e.scopes?tl.fromString(e.scopes):tl.fromString(t.scopes),l=e.account.properties||{},d=l.UID||n.claims.oid||n.claims.sub||xn.EMPTY_STRING,u=l.TenantId||n.claims.tid||xn.EMPTY_STRING,p=Ln.BEARER,t.tokenType===Ln.POP?[3,2]:[3,4];case 2:if(p=Ln.POP,e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),m=e.shr,[3,5];if(h=new nd(this.browserCrypto),g={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce},!t.keyId)throw ta.createKeyIdMissingError();return[4,h.signPopToken(e.access_token,t.keyId,g)];case 3:return m=v.sent(),[3,5];case 4:m=e.access_token,v.label=5;case 5:return f=this.getMATSFromResponse(e),y={authority:o.canonicalAuthority,uniqueId:d,tenantId:u,scopes:c.asArray(),account:s.getAccountInfo(),idToken:e.id_token,idTokenClaims:n.claims,accessToken:m,fromCache:!!f&&this.isResponseFromCache(f),expiresOn:new Date(1e3*Number(r+e.expires_in)),tokenType:p,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0},this.browserStorage.removeAccountContext(s).catch((function(e){b.logger.error("Error occurred while removing account context from browser storage. "+e)})),[2,y]}}))}))},t.prototype.validateNativeResponse=function(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expires_in"))return e;throw bd.createUnexpectedError("Response missing expected properties.")},t.prototype.getMATSFromResponse=function(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(e){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null},t.prototype.isResponseFromCache=function(e){return void 0===e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached},t.prototype.initializeNativeRequest=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a,s;return ln(this,(function(c){switch(c.label){case 0:if(this.logger.trace("NativeInteractionClient - initializeNativeRequest called"),t=e.authority||this.config.auth.authority,(r=new _l(t)).validateAsUri(),n=e&&e.scopes||[],(o=new tl(n)).appendScopes(wn),e.prompt)switch(e.prompt){case Tn.NONE:case Tn.CONSENT:this.logger.trace("initializeNativeRequest: prompt is compatible with native flow");break;default:throw this.logger.trace("initializeNativeRequest: prompt = "+e.prompt+" is not compatible with native flow"),Bs.createNativePromptParameterNotSupportedError()}return i=sn(sn({},e),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scopes:o.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:sn(sn(sn({},e.extraQueryParameters),e.tokenQueryParameters),{telemetry:"MATS"}),extendedExpiryToken:!1}),e.authenticationScheme!==Ln.POP?[3,2]:(a={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},[4,new nd(this.browserCrypto).generateCnf(a)]);case 1:s=c.sent(),i.reqCnf=s.reqCnfHash,i.keyId=s.kid,c.label=2;case 2:return this.apiId!==eo.ssoSilent&&this.apiId!==eo.acquireTokenSilent_silentFlow||(i.prompt=Tn.NONE),[2,i]}}))}))},t}(pd),Sd=function(){function e(e,t,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.responseId=0,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this)}return e.prototype.sendMessage=function(e){return cn(this,void 0,void 0,(function(){var t,r=this;return ln(this,(function(n){return this.logger.trace("NativeMessageHandler - sendMessage called."),t={channel:oo,extensionId:this.extensionId,responseId:this.responseId++,body:e},this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: "+JSON.stringify(t)),this.messageChannel.port1.postMessage(t),[2,new Promise((function(e,n){r.resolvers.set(t.responseId,{resolve:e,reject:n})}))]}))}))},e.createProvider=function(t,r){return cn(this,void 0,void 0,(function(){var n,o;return ln(this,(function(i){switch(i.label){case 0:t.trace("NativeMessageHandler - createProvider called."),i.label=1;case 1:return i.trys.push([1,3,,5]),[4,(n=new e(t,r,"ppnbnpeolgkicgegkbkbjmhlideopiji")).sendHandshakeRequest()];case 2:return i.sent(),[2,n];case 3:return i.sent(),[4,(o=new e(t,r)).sendHandshakeRequest()];case 4:return i.sent(),[2,o];case 5:return[2]}}))}))},e.prototype.sendHandshakeRequest=function(){return cn(this,void 0,void 0,(function(){var e,t=this;return ln(this,(function(r){return this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1),e={channel:oo,extensionId:this.extensionId,responseId:this.responseId++,body:{method:Wn.HandshakeRequest}},this.messageChannel.port1.onmessage=function(e){t.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),[2,new Promise((function(r,n){t.handshakeResolvers.set(e.responseId,{resolve:r,reject:n}),t.timeoutId=window.setTimeout((function(){window.removeEventListener("message",t.windowListener,!1),t.messageChannel.port1.close(),t.messageChannel.port2.close(),n(Bs.createNativeHandshakeTimeoutError()),t.handshakeResolvers.delete(e.responseId)}),t.handshakeTimeoutMs)}))]}))}))},e.prototype.onWindowMessage=function(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source===window){var t=e.data;if(t.channel&&t.channel===oo&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===Wn.HandshakeRequest){this.logger.verbose(t.extensionId?"Extension with id: "+t.extensionId+" not installed":"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1);var r=this.handshakeResolvers.get(t.responseId);r&&r.reject(Bs.createNativeExtensionNotInstalledError())}}},e.prototype.onChannelMessage=function(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");var t=e.data,r=this.resolvers.get(t.responseId),n=this.handshakeResolvers.get(t.responseId);try{var o=t.body.method;if(o===Wn.Response){if(!r)return;var i=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: "+JSON.stringify(i)),"Success"!==i.status)r.reject(bd.createError(i.code,i.description,i.ext));else{if(!i.result)throw po.createUnexpectedError("Event does not contain result.");i.result.code&&i.result.description?r.reject(bd.createError(i.result.code,i.result.description,i.result.ext)):r.resolve(i.result)}this.resolvers.delete(t.responseId)}else if(o===Wn.HandshakeResponse){if(!n)return;clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: "+this.extensionId),n.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(t){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: "+t.toString()),this.logger.errorPii("Unable to parse "+e),r?r.reject(t):n&&n.reject(t)}},e.isNativeAvailable=function(e,t,r,n){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(n)switch(n){case Ln.BEARER:case Ln.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0},e}(),Nd=function(){function e(e,t,r,n){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=n}return e.prototype.handleCodeResponseFromHash=function(e,t,r,n){return cn(this,void 0,void 0,(function(){var o,i,a;return ln(this,(function(s){if(this.logger.verbose("InteractionHandler.handleCodeResponse called"),ra.isEmpty(e))throw Bs.createEmptyHashError(e);if(o=this.browserStorage.generateStateKey(t),!(i=this.browserStorage.getTemporaryCache(o)))throw ta.createStateNotFoundError("Cached State");try{a=this.authModule.handleFragmentResponse(e,i)}catch(e){throw e instanceof Zs&&e.subError===Ta?Bs.createUserCancelledError():e}return[2,this.handleCodeResponseFromServer(a,t,r,n)]}))}))},e.prototype.handleCodeResponseFromServer=function(e,t,r,n,o){return void 0===o&&(o=!0),cn(this,void 0,void 0,(function(){var i,a,s,c,l,d;return ln(this,(function(u){switch(u.label){case 0:if(this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),i=this.browserStorage.generateStateKey(t),!(a=this.browserStorage.getTemporaryCache(i)))throw ta.createStateNotFoundError("Cached State");return s=this.browserStorage.generateNonceKey(a),c=this.browserStorage.getTemporaryCache(s),this.authCodeRequest.code=e.code,e.cloud_instance_host_name?[4,this.updateTokenEndpointAuthority(e.cloud_instance_host_name,r,n)]:[3,2];case 1:u.sent(),u.label=2;case 2:return o&&(e.nonce=c||void 0),e.state=a,e.client_info?this.authCodeRequest.clientInfo=e.client_info:(l=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=l),[4,this.authModule.acquireToken(this.authCodeRequest,e)];case 3:return d=u.sent(),this.browserStorage.cleanRequestByState(t),[2,d]}}))}))},e.prototype.updateTokenEndpointAuthority=function(e,t,r){return cn(this,void 0,void 0,(function(){var n,o;return ln(this,(function(i){switch(i.label){case 0:return n="https://"+e+"/"+t.tenant+"/",[4,ud.createDiscoveredInstance(n,r,this.browserStorage,t.options)];case 1:return o=i.sent(),this.authModule.updateAuthority(o),[2]}}))}))},e.prototype.checkCcsCredentials=function(){var e=this.browserStorage.getTemporaryCache(Xn.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch(t){this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii("Cache credential could not be parsed: "+e)}return null},e}(),Cd=function(e){function t(t,r,n,o,i,a,s,c,l){var d=e.call(this,t,r,n,o,i,a,s,c,l)||this;return d.unloadWindow=d.unloadWindow.bind(d),d}return nn(t,e),t.prototype.acquireToken=function(e){try{var t=this.generatePopupName(e.scopes||wn,e.authority||this.config.auth.authority),r=e.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,t,r);this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");var n=this.openSizedPopup("about:blank",t,r);return this.acquireTokenPopupAsync(e,t,r,n)}catch(e){return Promise.reject(e)}},t.prototype.logout=function(e){try{this.logger.verbose("logoutPopup called");var t=this.initializeLogoutRequest(e),r=this.generateLogoutPopupName(t),n=e&&e.authority,o=e&&e.mainWindowRedirectUri,i=(null==e?void 0:e.popupWindowAttributes)||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,i,n,void 0,o);this.logger.verbose("asyncPopup set to false, opening popup");var a=this.openSizedPopup("about:blank",r,i);return this.logoutPopupAsync(t,r,i,n,a,o)}catch(e){return Promise.reject(e)}},t.prototype.acquireTokenPopupAsync=function(e,t,r,n){return cn(this,void 0,void 0,(function(){var o,i,a,s,c,l,d,u,m,p,h,g,f,y,b,v,S=this;return ln(this,(function(N){switch(N.label){case 0:return this.logger.verbose("acquireTokenPopupAsync called"),o=this.initializeServerTelemetryManager(eo.acquireTokenPopup),[4,this.initializeAuthorizationRequest(e,to.Popup)];case 1:i=N.sent(),this.browserStorage.updateCacheEntries(i.state,i.nonce,i.authority,i.loginHint||xn.EMPTY_STRING,i.account||null),N.label=2;case 2:return N.trys.push([2,8,,9]),[4,this.initializeAuthorizationCodeRequest(i)];case 3:return a=N.sent(),[4,this.createAuthCodeClient(o,i.authority,i.azureCloudOptions)];case 4:return s=N.sent(),this.logger.verbose("Auth code client created"),c=Sd.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme),l=void 0,c&&(l=this.performanceClient.startMeasurement(on.FetchAccountIdWithNativeBroker,e.correlationId)),[4,s.getAuthCodeUrl(sn(sn({},i),{nativeBroker:c}))];case 5:return d=N.sent(),u=new Nd(s,this.browserStorage,a,this.logger),m={popup:n,popupName:t,popupWindowAttributes:r},p=this.initiateAuthRequest(d,m),this.eventHandler.emitEvent(kl.POPUP_OPENED,to.Popup,{popupWindow:p},null),[4,this.monitorPopupForHash(p)];case 6:if(h=N.sent(),g=_l.getDeserializedHash(h),f=this.validateAndExtractStateFromHash(g,to.Popup,i.correlationId),Jl.removeThrottle(this.browserStorage,this.config.auth.clientId,a),g.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),l&&l.endMeasurement({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw Bs.createNativeConnectionNotEstablishedError();return y=new vd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,eo.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,g.accountId,i.correlationId),b=pl.parseRequestState(this.browserCrypto,f).userRequestState,[2,y.acquireToken(sn(sn({},i),{state:b,prompt:void 0})).finally((function(){S.browserStorage.cleanRequestByState(f)}))]}return[4,u.handleCodeResponseFromHash(h,f,s.authority,this.networkClient)];case 7:return[2,N.sent()];case 8:throw v=N.sent(),n&&n.close(),v instanceof po&&v.setCorrelationId(this.correlationId),o.cacheFailedRequest(v),this.browserStorage.cleanRequestByState(i.state),v;case 9:return[2]}}))}))},t.prototype.logoutPopupAsync=function(e,t,r,n,o,i){return cn(this,void 0,void 0,(function(){var a,s,c,l,d,u,m;return ln(this,(function(p){switch(p.label){case 0:this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(kl.LOGOUT_START,to.Popup,e),a=this.initializeServerTelemetryManager(eo.logoutPopup),p.label=1;case 1:return p.trys.push([1,5,,6]),[4,this.clearCacheOnLogout(e.account)];case 2:return p.sent(),[4,this.createAuthCodeClient(a,n)];case 3:return s=p.sent(),this.logger.verbose("Auth code client created"),c=s.getLogoutUri(e),this.eventHandler.emitEvent(kl.LOGOUT_SUCCESS,to.Popup,e),l=this.openPopup(c,{popupName:t,popupWindowAttributes:r,popup:o}),this.eventHandler.emitEvent(kl.POPUP_OPENED,to.Popup,{popupWindow:l},null),[4,this.waitForLogoutPopup(l)];case 4:return p.sent(),i?(d={apiId:eo.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=_l.getAbsoluteUrl(i,Gl.getCurrentUri()),this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: "+u),this.navigationClient.navigateInternal(u,d)):this.logger.verbose("No main window navigation requested"),[3,6];case 5:throw m=p.sent(),o&&o.close(),m instanceof po&&m.setCorrelationId(this.correlationId),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(kl.LOGOUT_FAILURE,to.Popup,null,m),this.eventHandler.emitEvent(kl.LOGOUT_END,to.Popup),a.cacheFailedRequest(m),m;case 6:return this.eventHandler.emitEvent(kl.LOGOUT_END,to.Popup),[2]}}))}))},t.prototype.initiateAuthRequest=function(e,t){if(ra.isEmpty(e))throw this.logger.error("Navigate url is empty"),Bs.createEmptyNavigationUriError();return this.logger.infoPii("Navigate to: "+e),this.openPopup(e,t)},t.prototype.monitorPopupForHash=function(e){var t=this;return new Promise((function(r,n){var o=t.config.system.windowHashTimeout/50,i=0;t.logger.verbose("PopupHandler.monitorPopupForHash - polling started");var a=setInterval((function(){if(e.closed)return t.logger.error("PopupHandler.monitorPopupForHash - window closed"),t.cleanPopup(),clearInterval(a),void n(Bs.createUserCancelledError());var s=xn.EMPTY_STRING,c=xn.EMPTY_STRING;try{s=e.location.href,c=e.location.hash}catch(e){}ra.isEmpty(s)||"about:blank"===s||(t.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),i++,c?(t.logger.verbose("PopupHandler.monitorPopupForHash - found hash in url"),clearInterval(a),t.cleanPopup(e),_l.hashContainsKnownProperties(c)?(t.logger.verbose("PopupHandler.monitorPopupForHash - hash contains known properties, returning."),r(c)):(t.logger.error("PopupHandler.monitorPopupForHash - found hash in url but it does not contain known properties. Check that your router is not changing the hash prematurely."),t.logger.errorPii("PopupHandler.monitorPopupForHash - hash found: "+c),n(Bs.createHashDoesNotContainKnownPropertiesError()))):i>o&&(t.logger.error("PopupHandler.monitorPopupForHash - unable to find hash in url, timing out"),clearInterval(a),n(Bs.createMonitorPopupTimeoutError())))}),50)}))},t.prototype.waitForLogoutPopup=function(e){var t=this;return new Promise((function(r){t.logger.verbose("PopupHandler.waitForLogoutPopup - polling started");var n=setInterval((function(){e.closed&&(t.logger.error("PopupHandler.waitForLogoutPopup - window closed"),t.cleanPopup(),clearInterval(n),r());var o=xn.EMPTY_STRING;try{o=e.location.href}catch(e){}ra.isEmpty(o)||"about:blank"===o||(t.logger.verbose("PopupHandler.waitForLogoutPopup - popup window is on same origin as caller, closing."),clearInterval(n),t.cleanPopup(e),r())}),50)}))},t.prototype.openPopup=function(e,t){try{var r=void 0;if(t.popup?(r=t.popup,this.logger.verbosePii("Navigating popup window to: "+e),r.location.assign(e)):void 0===t.popup&&(this.logger.verbosePii("Opening popup window to: "+e),r=this.openSizedPopup(e,t.popupName,t.popupWindowAttributes)),!r)throw Bs.createEmptyWindowCreatedError();return r.focus&&r.focus(),this.currentWindow=r,window.addEventListener("beforeunload",this.unloadWindow),r}catch(e){throw this.logger.error("error opening popup "+e.message),this.browserStorage.setInteractionInProgress(!1),Bs.createPopupWindowError(e.toString())}},t.prototype.openSizedPopup=function(e,t,r){var n,o,i,a,s=window.screenLeft?window.screenLeft:window.screenX,c=window.screenTop?window.screenTop:window.screenY,l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,u=null===(n=r.popupSize)||void 0===n?void 0:n.width,m=null===(o=r.popupSize)||void 0===o?void 0:o.height,p=null===(i=r.popupPosition)||void 0===i?void 0:i.top,h=null===(a=r.popupPosition)||void 0===a?void 0:a.left;return(!u||u<0||u>l)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=483),(!m||m<0||m>d)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),m=600),(!p||p<0||p>d)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),p=Math.max(0,d/2-300+c)),(!h||h<0||h>l)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,l/2-241.5+s)),window.open(e,t,"width="+u+", height="+m+", top="+p+", left="+h+", scrollbars=yes")},t.prototype.unloadWindow=function(e){this.browserStorage.cleanRequestByInteractionType(to.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()},t.prototype.cleanPopup=function(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)},t.prototype.generatePopupName=function(e,t){return"msal."+this.config.auth.clientId+"."+e.join("-")+"."+t+"."+this.correlationId},t.prototype.generateLogoutPopupName=function(e){var t=e.account&&e.account.homeAccountId;return"msal."+this.config.auth.clientId+"."+t+"."+this.correlationId},t}(hd),xd=function(e){function t(t,r,n,o,i){var a=e.call(this,t,r,n,o)||this;return a.browserCrypto=i,a}return nn(t,e),t.prototype.initiateAuthRequest=function(e,t){return cn(this,void 0,void 0,(function(){var r;return ln(this,(function(n){switch(n.label){case 0:return this.logger.verbose("RedirectHandler.initiateAuthRequest called"),ra.isEmpty(e)?[3,7]:(t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Xn.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Xn.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest,this.browserCrypto),this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: "+e),r={apiId:eo.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1},"function"!=typeof t.onRedirectNavigate?[3,4]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1===t.onRedirectNavigate(e)?[3,2]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),[4,t.navigationClient.navigateExternal(e,r)])));case 1:case 5:return n.sent(),[2];case 2:return this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation"),[2];case 3:return[3,6];case 4:return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),[4,t.navigationClient.navigateExternal(e,r)];case 6:return[3,8];case 7:throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Bs.createEmptyNavigationUriError();case 8:return[2]}}))}))},t.prototype.handleCodeResponseFromHash=function(e,t,r,n){return cn(this,void 0,void 0,(function(){var o,i,a,s,c,l,d;return ln(this,(function(u){switch(u.label){case 0:if(this.logger.verbose("RedirectHandler.handleCodeResponse called"),ra.isEmpty(e))throw Bs.createEmptyHashError(e);if(this.browserStorage.setInteractionInProgress(!1),o=this.browserStorage.generateStateKey(t),!(i=this.browserStorage.getTemporaryCache(o)))throw ta.createStateNotFoundError("Cached State");try{a=this.authModule.handleFragmentResponse(e,i)}catch(e){throw e instanceof Zs&&e.subError===Ta?Bs.createUserCancelledError():e}return s=this.browserStorage.generateNonceKey(i),c=this.browserStorage.getTemporaryCache(s),this.authCodeRequest.code=a.code,a.cloud_instance_host_name?[4,this.updateTokenEndpointAuthority(a.cloud_instance_host_name,r,n)]:[3,2];case 1:u.sent(),u.label=2;case 2:return a.nonce=c||void 0,a.state=i,a.client_info?this.authCodeRequest.clientInfo=a.client_info:(l=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=l),[4,this.authModule.acquireToken(this.authCodeRequest,a)];case 3:return d=u.sent(),this.browserStorage.cleanRequestByState(t),[2,d]}}))}))},t}(Nd),wd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nn(t,e),t.prototype.acquireToken=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c,l,d=this;return ln(this,(function(u){switch(u.label){case 0:return[4,this.initializeAuthorizationRequest(e,to.Redirect)];case 1:t=u.sent(),this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||xn.EMPTY_STRING,t.account||null),r=this.initializeServerTelemetryManager(eo.acquireTokenRedirect),n=function(e){e.persisted&&(d.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),d.browserStorage.cleanRequestByState(t.state))},u.label=2;case 2:return u.trys.push([2,7,,8]),[4,this.initializeAuthorizationCodeRequest(t)];case 3:return o=u.sent(),[4,this.createAuthCodeClient(r,t.authority,t.azureCloudOptions)];case 4:return i=u.sent(),this.logger.verbose("Auth code client created"),a=new xd(i,this.browserStorage,o,this.logger,this.browserCrypto),[4,i.getAuthCodeUrl(sn(sn({},t),{nativeBroker:Sd.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}))];case 5:return s=u.sent(),c=this.getRedirectStartPage(e.redirectStartPage),this.logger.verbosePii("Redirect start page: "+c),window.addEventListener("pageshow",n),[4,a.initiateAuthRequest(s,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:e.onRedirectNavigate})];case 6:return[2,u.sent()];case 7:throw(l=u.sent())instanceof po&&l.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",n),r.cacheFailedRequest(l),this.browserStorage.cleanRequestByState(t.state),l;case 8:return[2]}}))}))},t.prototype.handleRedirectPromise=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c,l,d,u,m;return ln(this,(function(p){switch(p.label){case 0:t=this.initializeServerTelemetryManager(eo.handleRedirectPromise),p.label=1;case 1:if(p.trys.push([1,10,,11]),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(r=this.getRedirectResponseHash(e||window.location.hash)))return this.logger.info("handleRedirectPromise did not detect a response hash as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(to.Redirect),[2,null];n=void 0;try{o=_l.getDeserializedHash(r),n=this.validateAndExtractStateFromHash(o,to.Redirect),this.logger.verbose("State extracted from hash")}catch(e){return this.logger.info("handleRedirectPromise was unable to extract state due to: "+e),this.browserStorage.cleanRequestByInteractionType(to.Redirect),[2,null]}return i=this.browserStorage.getTemporaryCache(Xn.ORIGIN_URI,!0)||xn.EMPTY_STRING,a=_l.removeHashFromUrl(i),s=_l.removeHashFromUrl(window.location.href),a===s&&this.config.auth.navigateToLoginRequestUrl?(this.logger.verbose("Current page is loginRequestUrl, handling hash"),[4,this.handleHash(r,n,t)]):[3,3];case 2:return c=p.sent(),i.indexOf("#")>-1&&Gl.replaceHash(i),[2,c];case 3:return this.config.auth.navigateToLoginRequestUrl?[3,4]:(this.logger.verbose("NavigateToLoginRequestUrl set to false, handling hash"),[2,this.handleHash(r,n,t)]);case 4:return Gl.isInIframe()&&!this.config.system.allowRedirectInIframe?[3,9]:(this.browserStorage.setTemporaryCache(Xn.URL_HASH,r,!0),l={apiId:eo.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},d=!0,i&&"null"!==i?[3,6]:(u=Gl.getHomepage(),this.browserStorage.setTemporaryCache(Xn.ORIGIN_URI,u,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),[4,this.navigationClient.navigateInternal(u,l)]));case 5:return d=p.sent(),[3,8];case 6:return this.logger.verbose("Navigating to loginRequestUrl: "+i),[4,this.navigationClient.navigateInternal(i,l)];case 7:d=p.sent(),p.label=8;case 8:if(!d)return[2,this.handleHash(r,n,t)];p.label=9;case 9:return[2,null];case 10:throw(m=p.sent())instanceof po&&m.setCorrelationId(this.correlationId),t.cacheFailedRequest(m),this.browserStorage.cleanRequestByInteractionType(to.Redirect),m;case 11:return[2]}}))}))},t.prototype.getRedirectResponseHash=function(e){if(this.logger.verbose("getRedirectResponseHash called"),_l.hashContainsKnownProperties(e))return Gl.clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash"),e;var t=this.browserStorage.getTemporaryCache(Xn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Xn.URL_HASH)),this.logger.verbose("Hash does not contain known properties, returning cached hash"),t},t.prototype.handleHash=function(e,t,r){return cn(this,void 0,void 0,(function(){var n,o,i,a,s,c,l=this;return ln(this,(function(d){switch(d.label){case 0:if(n=this.browserStorage.getCachedRequest(t,this.browserCrypto),this.logger.verbose("handleHash called, retrieved cached request"),(o=_l.getDeserializedHash(e)).accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Bs.createNativeConnectionNotEstablishedError();return i=new vd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,eo.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,o.accountId,n.correlationId),a=pl.parseRequestState(this.browserCrypto,t).userRequestState,[2,i.acquireToken(sn(sn({},n),{state:a,prompt:void 0})).finally((function(){l.browserStorage.cleanRequestByState(t)}))]}if(!(s=this.browserStorage.getCachedAuthority(t)))throw Bs.createNoCachedAuthorityError();return[4,this.createAuthCodeClient(r,s)];case 1:return c=d.sent(),this.logger.verbose("Auth code client created"),Jl.removeThrottle(this.browserStorage,this.config.auth.clientId,n),[4,new xd(c,this.browserStorage,n,this.logger,this.browserCrypto).handleCodeResponseFromHash(e,t,c.authority,this.networkClient)];case 2:return[2,d.sent()]}}))}))},t.prototype.logout=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a;return ln(this,(function(s){switch(s.label){case 0:this.logger.verbose("logoutRedirect called"),t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(eo.logout),s.label=1;case 1:return s.trys.push([1,10,,11]),this.eventHandler.emitEvent(kl.LOGOUT_START,to.Redirect,e),[4,this.clearCacheOnLogout(t.account)];case 2:return s.sent(),n={apiId:eo.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},[4,this.createAuthCodeClient(r,e&&e.authority)];case 3:return o=s.sent(),this.logger.verbose("Auth code client created"),i=o.getLogoutUri(t),this.eventHandler.emitEvent(kl.LOGOUT_SUCCESS,to.Redirect,t),e&&"function"==typeof e.onRedirectNavigate?!1===e.onRedirectNavigate(i)?[3,5]:(this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(i,n)]):[3,7];case 4:return s.sent(),[2];case 5:this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation"),s.label=6;case 6:return[3,9];case 7:return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(i,n)];case 8:return s.sent(),[2];case 9:return[3,11];case 10:throw(a=s.sent())instanceof po&&a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a),this.eventHandler.emitEvent(kl.LOGOUT_FAILURE,to.Redirect,null,a),this.eventHandler.emitEvent(kl.LOGOUT_END,to.Redirect),a;case 11:return this.eventHandler.emitEvent(kl.LOGOUT_END,to.Redirect),[2]}}))}))},t.prototype.getRedirectStartPage=function(e){var t=e||window.location.href;return _l.getAbsoluteUrl(t,Gl.getCurrentUri())},t}(hd),Ed=function(e){function t(t,r,n,o,i){var a=e.call(this,t,r,n,o)||this;return a.navigateFrameWait=i,a}return nn(t,e),t.prototype.initiateAuthRequest=function(e){return cn(this,void 0,void 0,(function(){var t;return ln(this,(function(r){switch(r.label){case 0:if(ra.isEmpty(e))throw this.logger.info("Navigate url is empty"),Bs.createEmptyNavigationUriError();return this.navigateFrameWait?[4,this.loadFrame(e)]:[3,2];case 1:return t=r.sent(),[3,3];case 2:t=this.loadFrameSync(e),r.label=3;case 3:return[2,t]}}))}))},t.prototype.monitorIframeForHash=function(e,t){var r=this;return new Promise((function(n,o){t<6e3&&r.logger.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower ("+t+"ms) than the default (6000ms). This may result in timeouts.");var i=window.performance.now()+t,a=setInterval((function(){if(window.performance.now()>i)return r.removeHiddenIframe(e),clearInterval(a),void o(Bs.createMonitorIframeTimeoutError());var t=xn.EMPTY_STRING,s=e.contentWindow;try{t=s?s.location.href:xn.EMPTY_STRING}catch(e){}if(!ra.isEmpty(t)){var c=s?s.location.hash:xn.EMPTY_STRING;return _l.hashContainsKnownProperties(c)?(r.removeHiddenIframe(e),clearInterval(a),void n(c)):void 0}}),50)}))},t.prototype.loadFrame=function(e){var t=this;return new Promise((function(r,n){var o=t.createHiddenIframe();setTimeout((function(){o?(o.src=e,r(o)):n("Unable to load iframe")}),t.navigateFrameWait)}))},t.prototype.loadFrameSync=function(e){var t=this.createHiddenIframe();return t.src=e,t},t.prototype.createHiddenIframe=function(){var e=document.createElement("iframe");return e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.getElementsByTagName("body")[0].appendChild(e),e},t.prototype.removeHiddenIframe=function(e){document.body===e.parentNode&&document.body.removeChild(e)},t}(Nd),Rd=function(e){function t(t,r,n,o,i,a,s,c,l,d){var u=e.call(this,t,r,n,o,i,a,c,l,d)||this;return u.apiId=s,u}return nn(t,e),t.prototype.acquireToken=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i;return ln(this,(function(a){switch(a.label){case 0:if(this.logger.verbose("acquireTokenByIframe called"),t=this.performanceClient.startMeasurement(on.SilentIframeClientAcquireToken,e.correlationId),ra.isEmpty(e.loginHint)&&ra.isEmpty(e.sid)&&(!e.account||ra.isEmpty(e.account.username))&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),e.prompt&&e.prompt!==Tn.NONE)throw t.endMeasurement({success:!1}),Bs.createSilentPromptValueError(e.prompt);return[4,this.initializeAuthorizationRequest(sn(sn({},e),{prompt:Tn.NONE}),to.Silent)];case 1:r=a.sent(),this.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||xn.EMPTY_STRING,r.account||null),n=this.initializeServerTelemetryManager(this.apiId),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.createAuthCodeClient(n,r.authority,r.azureCloudOptions)];case 3:return o=a.sent(),this.logger.verbose("Auth code client created"),[4,this.silentTokenHelper(o,r).then((function(e){return t.endMeasurement({success:!0,fromCache:!1}),e}))];case 4:return[2,a.sent()];case 5:throw(i=a.sent())instanceof po&&i.setCorrelationId(this.correlationId),n.cacheFailedRequest(i),this.browserStorage.cleanRequestByState(r.state),t.endMeasurement({errorCode:i instanceof po&&i.errorCode||void 0,subErrorCode:i instanceof po&&i.subError||void 0,success:!1}),i;case 6:return[2]}}))}))},t.prototype.logout=function(){return Promise.reject(Bs.createSilentLogoutUnsupportedError())},t.prototype.silentTokenHelper=function(e,t){return cn(this,void 0,void 0,(function(){var r,n,o,i,a,s,c,l,d,u=this;return ln(this,(function(m){switch(m.label){case 0:return[4,this.initializeAuthorizationCodeRequest(t)];case 1:return r=m.sent(),[4,e.getAuthCodeUrl(sn(sn({},t),{nativeBroker:Sd.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)}))];case 2:return n=m.sent(),[4,(o=new Ed(e,this.browserStorage,r,this.logger,this.config.system.navigateFrameWait)).initiateAuthRequest(n)];case 3:return i=m.sent(),[4,o.monitorIframeForHash(i,this.config.system.iframeHashTimeout)];case 4:if(a=m.sent(),s=_l.getDeserializedHash(a),c=this.validateAndExtractStateFromHash(s,to.Silent,r.correlationId),s.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Bs.createNativeConnectionNotEstablishedError();return l=new vd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,s.accountId,this.correlationId),d=pl.parseRequestState(this.browserCrypto,c).userRequestState,[2,l.acquireToken(sn(sn({},t),{state:d,prompt:Tn.NONE})).finally((function(){u.browserStorage.cleanRequestByState(c)}))]}return[2,o.handleCodeResponseFromHash(a,c,e.authority,this.networkClient)]}}))}))},t}(hd),Td=function(e){function t(t){return e.call(this,t)||this}return pn(t,e),t.prototype.acquireToken=function(e){return gn(this,void 0,void 0,(function(){var t,r,n;return fn(this,(function(o){switch(o.label){case 0:return t=al.nowSeconds(),[4,this.executeTokenRequest(e,this.authority)];case 1:return r=o.sent(),(n=new id(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(r.body),[2,n.handleServerTokenResponse(r.body,this.authority,t,e,void 0,void 0,!0)]}}))}))},t.prototype.acquireTokenByRefreshToken=function(e){return gn(this,void 0,void 0,(function(){var t,r;return fn(this,(function(n){if(!e)throw el.createEmptyTokenRequestError();if(!e.account)throw ta.createNoAccountInSilentRequestError();if(this.cacheManager.isAppMetadataFOCI(e.account.environment,this.config.authOptions.clientId))try{return[2,this.acquireTokenWithCachedRefreshToken(e,!0)]}catch(n){if(t=n instanceof oc&&n.errorCode===rc,r=n instanceof Zs&&"invalid_grant"===n.errorCode&&"client_mismatch"===n.subError,t||r)return[2,this.acquireTokenWithCachedRefreshToken(e,!1)];throw n}return[2,this.acquireTokenWithCachedRefreshToken(e,!1)]}))}))},t.prototype.acquireTokenWithCachedRefreshToken=function(e,t){return gn(this,void 0,void 0,(function(){var r,n;return fn(this,(function(o){if(!(r=this.cacheManager.readRefreshTokenFromCache(this.config.authOptions.clientId,e.account,t)))throw oc.createNoTokensFoundError();return n=hn(hn({},e),{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Ln.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:sc.HOME_ACCOUNT_ID}}),[2,this.acquireToken(n)]}))}))},t.prototype.executeTokenRequest=function(e,t){return gn(this,void 0,void 0,(function(){var r,n,o,i,a;return fn(this,(function(s){switch(s.label){case 0:return[4,this.createTokenRequestBody(e)];case 1:return r=s.sent(),n=this.createTokenQueryParameters(e),o=this.createTokenRequestHeaders(e.ccsCredential),i={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},a=_l.appendQueryString(t.tokenEndpoint,n),[2,this.executePostToTokenEndpoint(a,r,o,i)]}}))}))},t.prototype.createTokenQueryParameters=function(e){var t=new td;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()},t.prototype.createTokenRequestBody=function(e){return gn(this,void 0,void 0,(function(){var t,r,n,o,i;return fn(this,(function(a){switch(a.label){case 0:return(t=new td).addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes),t.addGrantType(In.REFRESH_TOKEN_GRANT),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager),r=e.correlationId||this.config.cryptoInterface.createNewGuid(),t.addCorrelationId(r),t.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(n=this.config.clientCredentials.clientAssertion,t.addClientAssertion(n.assertion),t.addClientAssertionType(n.assertionType)),e.authenticationScheme!==Ln.POP?[3,2]:[4,new nd(this.cryptoUtils).generateCnf(e)];case 1:return o=a.sent(),t.addPopToken(o.reqCnfString),[3,3];case 2:if(e.authenticationScheme===Ln.SSH){if(!e.sshJwk)throw el.createMissingSshJwkError();t.addSshJwk(e.sshJwk)}a.label=3;case 3:if((!ra.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case sc.HOME_ACCOUNT_ID:try{i=ac(e.ccsCredential.credential),t.addCcsOid(i)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case sc.UPN:t.addCcsUpn(e.ccsCredential.credential)}return[2,t.createQueryString()]}}))}))},t}(Zl),Pd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nn(t,e),t.prototype.acquireToken=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a=this;return ln(this,(function(s){switch(s.label){case 0:return r=[sn({},e)],[4,this.initializeBaseRequest(e)];case 1:return t=sn.apply(void 0,r.concat([s.sent()])),n=this.performanceClient.startMeasurement(on.SilentRefreshClientAcquireToken,t.correlationId),o=this.initializeServerTelemetryManager(eo.acquireTokenSilent_silentFlow),[4,this.createRefreshTokenClient(o,t.authority,t.azureCloudOptions)];case 2:return i=s.sent(),this.logger.verbose("Refresh token client created"),[2,i.acquireTokenByRefreshToken(t).then((function(e){return n.endMeasurement({success:!0,fromCache:e.fromCache}),e})).catch((function(e){throw e instanceof po&&e.setCorrelationId(a.correlationId),o.cacheFailedRequest(e),n.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}))]}}))}))},t.prototype.logout=function(){return Promise.reject(Bs.createSilentLogoutUnsupportedError())},t.prototype.createRefreshTokenClient=function(e,t,r){return cn(this,void 0,void 0,(function(){var n;return ln(this,(function(o){switch(o.label){case 0:return[4,this.getClientConfiguration(e,t,r)];case 1:return n=o.sent(),[2,new Td(n)]}}))}))},t}(hd),Id=function(){function e(e,t,r,n){this.isBrowserEnvironment="undefined"!=typeof window,this.config=e,this.storage=t,this.logger=r,this.cryptoObj=n}return e.prototype.loadExternalTokens=function(e,t,r){if(this.logger.info("TokenCache - loadExternalTokens called"),!t.id_token)throw Bs.createUnableToLoadTokenError("Please ensure server response includes id token.");if(e.account)this.loadIdToken(t.id_token,e.account.homeAccountId,e.account.environment,e.account.tenantId,r),this.loadAccessToken(e,t,e.account.homeAccountId,e.account.environment,e.account.tenantId,r);else{if(!e.authority)throw Bs.createUnableToLoadTokenError("Please provide a request with an account or a request with authority.");var n=dd.generateAuthority(e.authority,e.azureCloudOptions),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata},i=new dd(n,this.config.system.networkClient,this.storage,o);if(r.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),this.loadIdToken(t.id_token,r.clientInfo,i.hostnameAndPort,i.tenant,r),this.loadAccessToken(e,t,r.clientInfo,i.hostnameAndPort,i.tenant,r);else{if(!t.client_info)throw Bs.createUnableToLoadTokenError("Please provide clientInfo in the response or options.");this.logger.trace("TokenCache - homeAccountId from response"),this.loadIdToken(t.id_token,t.client_info,i.hostnameAndPort,i.tenant,r),this.loadAccessToken(e,t,t.client_info,i.hostnameAndPort,i.tenant,r)}}},e.prototype.loadIdToken=function(e,t,r,n,o){var i=il.createIdTokenEntity(t,r,e,this.config.auth.clientId,n),a=new rl(e,this.cryptoObj),s=o.clientInfo?cc.createAccount(o.clientInfo,t,a,void 0,void 0,void 0,r):cc.createGenericAccount(t,a,void 0,void 0,void 0,r);if(!this.isBrowserEnvironment)throw Bs.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.");this.logger.verbose("TokenCache - loading id token"),this.storage.setAccount(s),this.storage.setIdTokenCredential(i)},e.prototype.loadAccessToken=function(e,t,r,n,o,i){if(t.access_token){if(!t.expires_in)throw Bs.createUnableToLoadTokenError("Please ensure server response includes expires_in value.");if(!i.extendedExpiresOn)throw Bs.createUnableToLoadTokenError("Please provide an extendedExpiresOn value in the options.");var a=new tl(e.scopes).printScopes(),s=i.expiresOn||t.expires_in+(new Date).getTime()/1e3,c=i.extendedExpiresOn,l=sl.createAccessTokenEntity(r,n,t.access_token,this.config.auth.clientId,o,a,s,c,this.cryptoObj);if(!this.isBrowserEnvironment)throw Bs.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.");this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(l)}else this.logger.verbose("TokenCache - No access token provided for caching")},e}(),_d=function(e){function t(t){return e.call(this,t)||this}return pn(t,e),t.prototype.acquireToken=function(e){return gn(this,void 0,void 0,(function(){var t;return fn(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.acquireCachedToken(e)];case 1:return[2,r.sent()];case 2:if((t=r.sent())instanceof ta&&t.errorCode===Ui)return[2,new Td(this.config).acquireTokenByRefreshToken(e)];throw t;case 3:return[2]}}))}))},t.prototype.acquireCachedToken=function(e){var t,r,n,o;return gn(this,void 0,void 0,(function(){var i,a;return fn(this,(function(s){switch(s.label){case 0:if(!e)throw el.createEmptyTokenRequestError();if(e.forceRefresh)throw null===(t=this.serverTelemetryManager)||void 0===t||t.setCacheOutcome(Vn.FORCE_REFRESH),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because forceRefresh is true."),ta.createRefreshRequiredError();if(!e.account)throw ta.createNoAccountInSilentRequestError();if(i=e.authority||this.authority.getPreferredCache(),!(a=this.cacheManager.readCacheRecord(e.account,this.config.authOptions.clientId,e,i)).accessToken)throw null===(r=this.serverTelemetryManager)||void 0===r||r.setCacheOutcome(Vn.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),ta.createRefreshRequiredError();if(al.wasClockTurnedBack(a.accessToken.cachedAt)||al.isTokenExpired(a.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(Vn.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token is expired or will expire within "+this.config.systemOptions.tokenRenewalOffsetSeconds+" seconds."),ta.createRefreshRequiredError();if(a.accessToken.refreshOn&&al.isTokenExpired(a.accessToken.refreshOn,0))throw null===(o=this.serverTelemetryManager)||void 0===o||o.setCacheOutcome(Vn.REFRESH_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'."),ta.createRefreshRequiredError();return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,this.generateResultFromCacheRecord(a,e)];case 1:return[2,s.sent()]}}))}))},t.prototype.generateResultFromCacheRecord=function(e,t){return gn(this,void 0,void 0,(function(){var r;return fn(this,(function(n){switch(n.label){case 0:return e.idToken&&(r=new rl(e.idToken.secret,this.config.cryptoInterface)),[4,id.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)];case 1:return[2,n.sent()]}}))}))},t}(Zl),Ad=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nn(t,e),t.prototype.acquireToken=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i;return ln(this,(function(a){switch(a.label){case 0:return t=this.performanceClient.startMeasurement(on.SilentCacheClientAcquireToken,e.correlationId),r=this.initializeServerTelemetryManager(eo.acquireTokenSilent_silentFlow),[4,this.createSilentFlowClient(r,e.authority,e.azureCloudOptions)];case 1:n=a.sent(),this.logger.verbose("Silent auth client created"),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,n.acquireCachedToken(e)];case 3:return o=a.sent(),t.endMeasurement({success:!0,fromCache:!0}),[2,o];case 4:throw(i=a.sent())instanceof Bs&&i.errorCode===ys&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),t.endMeasurement({errorCode:i instanceof po&&i.errorCode||void 0,subErrorCode:i instanceof po&&i.subError||void 0,success:!1}),i;case 5:return[2]}}))}))},t.prototype.logout=function(){return Promise.reject(Bs.createSilentLogoutUnsupportedError())},t.prototype.createSilentFlowClient=function(e,t,r){return cn(this,void 0,void 0,(function(){var n;return ln(this,(function(o){switch(o.label){case 0:return[4,this.getClientConfiguration(e,t,r)];case 1:return n=o.sent(),[2,new _d(n)]}}))}))},t.prototype.initializeSilentRequest=function(e,t){return cn(this,void 0,void 0,(function(){var r;return ln(this,(function(n){switch(n.label){case 0:return r=[sn({},e)],[4,this.initializeBaseRequest(e)];case 1:return[2,sn.apply(void 0,[sn.apply(void 0,r.concat([n.sent()])),{account:t,forceRefresh:e.forceRefresh||!1}])]}}))}))},t}(hd),Od=function(e){function t(t){var r=e.call(this,t)||this;return r.includeRedirectUri=!1,r}return nn(t,e),t}(ad),kd=function(e){function t(t,r,n,o,i,a,s,c,l,d){var u=e.call(this,t,r,n,o,i,a,c,l,d)||this;return u.apiId=s,u}return nn(t,e),t.prototype.acquireToken=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a;return ln(this,(function(s){switch(s.label){case 0:if(this.logger.trace("SilentAuthCodeClient.acquireToken called"),!e.code)throw Bs.createAuthCodeRequiredError();return[4,this.initializeAuthorizationRequest(e,to.Silent)];case 1:t=s.sent(),this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||xn.EMPTY_STRING,t.account||null),r=this.initializeServerTelemetryManager(this.apiId),s.label=2;case 2:return s.trys.push([2,4,,5]),n=sn(sn({},t),{code:e.code}),[4,this.getClientConfiguration(r,t.authority)];case 3:return o=s.sent(),i=new Od(o),this.logger.verbose("Auth code client created"),[2,new Ed(i,this.browserStorage,n,this.logger,this.config.system.navigateFrameWait).handleCodeResponseFromServer({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t.state,i.authority,this.networkClient,!1)];case 4:throw(a=s.sent())instanceof po&&a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a),this.browserStorage.cleanRequestByState(t.state),a;case 5:return[2]}}))}))},t.prototype.logout=function(){return Promise.reject(Bs.createSilentLogoutUnsupportedError())},t}(hd),Md=function(){function e(e,t){this.correlationId=t,this.measureName="msal.measure."+e+"."+this.correlationId,this.startMark="msal.start."+e+"."+this.correlationId,this.endMark="msal.end."+e+"."+this.correlationId}return e.supportsBrowserPerformance=function(){return"undefined"!=typeof window&&void 0!==window.performance&&"function"==typeof window.performance.mark&&"function"==typeof window.performance.measure&&"function"==typeof window.performance.clearMarks&&"function"==typeof window.performance.clearMeasures&&"function"==typeof window.performance.getEntriesByName},e.prototype.startMeasurement=function(){if(e.supportsBrowserPerformance())try{window.performance.mark(this.startMark)}catch(e){}},e.prototype.endMeasurement=function(){if(e.supportsBrowserPerformance())try{window.performance.mark(this.endMark),window.performance.measure(this.measureName,this.startMark,this.endMark)}catch(e){}},e.prototype.flushMeasurement=function(){if(e.supportsBrowserPerformance())try{var t=window.performance.getEntriesByName(this.measureName,"measure");if(t.length>0){var r=t[0].duration;return window.performance.clearMeasures(this.measureName),window.performance.clearMarks(this.startMark),window.performance.clearMarks(this.endMark),r}}catch(e){}return null},e}(),qd=function(e){function t(t,r,n,o,i,a){var s=e.call(this,t,r,n,o,i,a)||this;return s.browserCrypto=new Us(s.logger),s.guidGenerator=new No(s.browserCrypto),s}return nn(t,e),t.prototype.startPerformanceMeasuremeant=function(e,t){return new Md(e,t)},t.prototype.generateId=function(){return this.guidGenerator.generateGuid()},t.prototype.getPageVisibility=function(){var e;return(null===(e=document.visibilityState)||void 0===e?void 0:e.toString())||null},t.prototype.startMeasurement=function(t,r){var n=this,o=this.getPageVisibility(),i=e.prototype.startMeasurement.call(this,t,r);return sn(sn({},i),{endMeasurement:function(e){return i.endMeasurement(sn({startPageVisibility:o,endPageVisibility:n.getPageVisibility()},e))}})},t}(Ws),zd=function(){function e(e){this.isBrowserEnvironment="undefined"!=typeof window,this.config=function(e,t){var r=e.auth,n=e.cache,o=e.system,i=e.telemetry,a={clientId:xn.EMPTY_STRING,authority:""+xn.DEFAULT_AUTHORITY,knownAuthorities:[],cloudDiscoveryMetadata:xn.EMPTY_STRING,authorityMetadata:xn.EMPTY_STRING,redirectUri:xn.EMPTY_STRING,postLogoutRedirectUri:xn.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:hl.AAD,azureCloudOptions:{azureCloudInstance:gl.None,tenant:xn.EMPTY_STRING}},s={cacheLocation:Yn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1},c={loggerCallback:function(){},logLevel:Gs.Info,piiLoggingEnabled:!1},l=sn(sn({},ql),{loggerOptions:c,networkClient:t?Gl.getBrowserNetworkClient():jl,navigationClient:new Vl,loadFrameTimeout:0,windowHashTimeout:(null==o?void 0:o.loadFrameTimeout)||6e4,iframeHashTimeout:(null==o?void 0:o.loadFrameTimeout)||6e3,navigateFrameWait:t&&Gl.detectIEOrEdge()?500:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(null==o?void 0:o.nativeBrokerHandshakeTimeout)||2e3}),d={application:{appName:xn.EMPTY_STRING,appVersion:xn.EMPTY_STRING}};return{auth:sn(sn({},a),r),cache:sn(sn({},s),n),system:sn(sn({},l),o),telemetry:sn(sn({},d),i)}}(e,this.isBrowserEnvironment),this.initialized=!1,this.logger=new Qs(this.config.system.loggerOptions,$l,Ql),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.isBrowserEnvironment?new qd(this.config.auth.clientId,this.config.auth.authority,this.logger,$l,Ql,this.config.telemetry.application):new Js(this.config.auth.clientId,this.config.auth.authority,this.logger,$l,Ql,this.config.telemetry.application),this.browserCrypto=this.isBrowserEnvironment?new Vs(this.logger,this.performanceClient):Xs,this.eventHandler=new Yl(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new Ol(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger):function(e,t){var r={cacheLocation:Yn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1};return new Ol(e,r,Xs,t)}(this.config.auth.clientId,this.logger),this.tokenCache=new Id(this.config,this.browserStorage,this.logger,this.browserCrypto)}return e.prototype.initialize=function(){return cn(this,void 0,void 0,(function(){var e,t;return ln(this,(function(r){switch(r.label){case 0:if(this.logger.trace("initialize called"),this.initialized)return this.logger.info("initialize has already been called, exiting early."),[2];if(this.eventHandler.emitEvent(kl.INITIALIZE_START),!this.config.system.allowNativeBroker)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this,[4,Sd.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout)];case 2:return e.nativeExtensionProvider=r.sent(),[3,4];case 3:return t=r.sent(),this.logger.verbose(t),[3,4];case 4:return this.initialized=!0,this.eventHandler.emitEvent(kl.INITIALIZE_END),[2]}}))}))},e.prototype.handleRedirectPromise=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c,l=this;return ln(this,(function(d){return this.logger.verbose("handleRedirectPromise called"),Gl.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),t=this.getAllAccounts(),this.isBrowserEnvironment?(r=e||xn.EMPTY_STRING,void 0===(n=this.redirectResponse.get(r))?(this.eventHandler.emitEvent(kl.HANDLE_REDIRECT_START,to.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise"),o=this.browserStorage.getCachedNativeRequest(),i=void 0,o&&Sd.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e?(this.logger.trace("handleRedirectPromise - acquiring token from native platform"),a=new vd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,eo.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,o.accountId,o.correlationId),i=a.handleRedirectPromise()):(this.logger.trace("handleRedirectPromise - acquiring token from web flow"),s=this.browserStorage.getTemporaryCache(Xn.CORRELATION_ID,!0)||xn.EMPTY_STRING,c=this.createRedirectClient(s),i=c.handleRedirectPromise(e)),n=i.then((function(e){return e&&(t.length<l.getAllAccounts().length?(l.eventHandler.emitEvent(kl.LOGIN_SUCCESS,to.Redirect,e),l.logger.verbose("handleRedirectResponse returned result, login success")):(l.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_SUCCESS,to.Redirect,e),l.logger.verbose("handleRedirectResponse returned result, acquire token success"))),l.eventHandler.emitEvent(kl.HANDLE_REDIRECT_END,to.Redirect),e})).catch((function(e){throw t.length>0?l.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_FAILURE,to.Redirect,null,e):l.eventHandler.emitEvent(kl.LOGIN_FAILURE,to.Redirect,null,e),l.eventHandler.emitEvent(kl.HANDLE_REDIRECT_END,to.Redirect),e})),this.redirectResponse.set(r,n)):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),[2,n]):(this.logger.verbose("handleRedirectPromise returns null, not browser environment"),[2,null])}))}))},e.prototype.acquireTokenRedirect=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a=this;return ln(this,(function(s){return t=this.getRequestCorrelationId(e),this.logger.verbose("acquireTokenRedirect called",t),this.preflightBrowserEnvironmentCheck(to.Redirect),(r=this.getAllAccounts().length>0)?this.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_START,to.Redirect,e):this.eventHandler.emitEvent(kl.LOGIN_START,to.Redirect,e),this.nativeExtensionProvider&&this.canUseNative(e)?(o=new vd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,eo.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),e.correlationId),n=o.acquireTokenRedirect(e).catch((function(t){if(t instanceof bd&&t.isFatal())return a.nativeExtensionProvider=void 0,a.createRedirectClient(e.correlationId).acquireToken(e);throw t}))):(i=this.createRedirectClient(e.correlationId),n=i.acquireToken(e)),[2,n.catch((function(e){throw r?a.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_FAILURE,to.Redirect,null,e):a.eventHandler.emitEvent(kl.LOGIN_FAILURE,to.Redirect,null,e),e}))]}))}))},e.prototype.acquireTokenPopup=function(e){var t=this,r=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(on.AcquireTokenPopup,r);try{this.logger.verbose("acquireTokenPopup called",r),this.preflightBrowserEnvironmentCheck(to.Popup)}catch(e){return Promise.reject(e)}var o=this.getAllAccounts();return o.length>0?this.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_START,to.Popup,e):this.eventHandler.emitEvent(kl.LOGIN_START,to.Popup,e),(this.canUseNative(e)?this.acquireTokenNative(e,eo.acquireTokenPopup).then((function(e){return t.browserStorage.setInteractionInProgress(!1),n.endMeasurement({success:!0,isNativeBroker:!0}),n.flushMeasurement(),e})).catch((function(r){if(r instanceof bd&&r.isFatal())return t.nativeExtensionProvider=void 0,t.createPopupClient(e.correlationId).acquireToken(e);throw r})):this.createPopupClient(e.correlationId).acquireToken(e)).then((function(e){return o.length<t.getAllAccounts().length?t.eventHandler.emitEvent(kl.LOGIN_SUCCESS,to.Popup,e):t.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_SUCCESS,to.Popup,e),n.endMeasurement({success:!0}),n.flushMeasurement(),e})).catch((function(e){return o.length>0?t.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_FAILURE,to.Popup,null,e):t.eventHandler.emitEvent(kl.LOGIN_FAILURE,to.Popup,null,e),n.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),n.flushMeasurement(),Promise.reject(e)}))},e.prototype.ssoSilent=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a=this;return ln(this,(function(s){return t=this.getRequestCorrelationId(e),r=sn(sn({},e),{prompt:Tn.NONE,correlationId:t}),this.preflightBrowserEnvironmentCheck(to.Silent),n=this.performanceClient.startMeasurement(on.SsoSilent,t),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(kl.SSO_SILENT_START,to.Silent,r),this.canUseNative(r)?o=this.acquireTokenNative(r,eo.ssoSilent).catch((function(e){if(e instanceof bd&&e.isFatal())return a.nativeExtensionProvider=void 0,a.createSilentIframeClient(r.correlationId).acquireToken(r);throw e})):(i=this.createSilentIframeClient(r.correlationId),o=i.acquireToken(r)),[2,o.then((function(e){return a.eventHandler.emitEvent(kl.SSO_SILENT_SUCCESS,to.Silent,e),n.endMeasurement({success:!0,isNativeBroker:e.fromNativeBroker}),n.flushMeasurement(),e})).catch((function(e){throw a.eventHandler.emitEvent(kl.SSO_SILENT_FAILURE,to.Silent,null,e),n.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),n.flushMeasurement(),e}))]}))}))},e.prototype.acquireTokenByCode=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i=this;return ln(this,(function(a){t=this.getRequestCorrelationId(e),this.preflightBrowserEnvironmentCheck(to.Silent),this.logger.trace("acquireTokenByCode called",t),this.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_BY_CODE_START,to.Silent,e),r=this.performanceClient.startMeasurement(on.AcquireTokenByCode,e.correlationId);try{if(e.code)return n=e.code,(o=this.hybridAuthCodeResponses.get(n))?(this.logger.verbose("Existing acquireTokenByCode request found",e.correlationId),r.endMeasurement({success:!0}),r.discardMeasurement()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync(sn(sn({},e),{correlationId:t})).then((function(e){return i.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_BY_CODE_SUCCESS,to.Silent,e),i.hybridAuthCodeResponses.delete(n),r.endMeasurement({success:!0,isNativeBroker:e.fromNativeBroker}),r.flushMeasurement(),e})).catch((function(e){throw i.hybridAuthCodeResponses.delete(n),i.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_BY_CODE_FAILURE,to.Silent,null,e),r.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),r.flushMeasurement(),e})),this.hybridAuthCodeResponses.set(n,o)),[2,o];if(e.nativeAccountId){if(this.canUseNative(e,e.nativeAccountId))return[2,this.acquireTokenNative(e,eo.acquireTokenByCode,e.nativeAccountId).catch((function(e){throw e instanceof bd&&e.isFatal()&&(i.nativeExtensionProvider=void 0),e}))];throw Bs.createUnableToAcquireTokenFromNativePlatformError()}throw Bs.createAuthCodeOrNativeAccountIdRequiredError()}catch(e){throw this.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_BY_CODE_FAILURE,to.Silent,null,e),r.endMeasurement({errorCode:e instanceof po&&e.errorCode||void 0,subErrorCode:e instanceof po&&e.subError||void 0,success:!1}),e}return[2]}))}))},e.prototype.acquireTokenByCodeAsync=function(e){return cn(this,void 0,void 0,(function(){return ln(this,(function(t){switch(t.label){case 0:return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),[4,this.createSilentAuthCodeClient(e.correlationId).acquireToken(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.acquireTokenByRefreshToken=function(e){return cn(this,void 0,void 0,(function(){var t,r=this;return ln(this,(function(n){return Gl.blockReloadInHiddenIframes(),t=this.performanceClient.startMeasurement(on.AcquireTokenByRefreshToken,e.correlationId),this.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_NETWORK_START,to.Silent,e),[2,this.createSilentRefreshClient(e.correlationId).acquireToken(e).then((function(e){return t.endMeasurement({success:!0,fromCache:e.fromCache}),e})).catch((function(n){var o=n instanceof Zs,i=n instanceof oc,a="invalid_grant"===n.errorCode;if(o&&a&&!i)return r.logger.verbose("Refresh token expired or invalid, attempting acquire token by iframe",e.correlationId),r.createSilentIframeClient(e.correlationId).acquireToken(e).then((function(e){return t.endMeasurement({success:!0,fromCache:e.fromCache}),e})).catch((function(e){throw t.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}));throw t.endMeasurement({success:!1}),n}))]}))}))},e.prototype.logout=function(e){return cn(this,void 0,void 0,(function(){var t;return ln(this,(function(r){return t=this.getRequestCorrelationId(e),this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),[2,this.logoutRedirect(sn({correlationId:t},e))]}))}))},e.prototype.logoutRedirect=function(e){return cn(this,void 0,void 0,(function(){var t;return ln(this,(function(r){return t=this.getRequestCorrelationId(e),this.preflightBrowserEnvironmentCheck(to.Redirect),[2,this.createRedirectClient(t).logout(e)]}))}))},e.prototype.logoutPopup=function(e){try{var t=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(to.Popup),this.createPopupClient(t).logout(e)}catch(e){return Promise.reject(e)}},e.prototype.getAllAccounts=function(){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts():[]},e.prototype.getAccountByUsername=function(e){var t=this.getAllAccounts();return!ra.isEmpty(e)&&t&&t.length?(this.logger.verbose("Account matching username found, returning"),this.logger.verbosePii("Returning signed-in accounts matching username: "+e),t.filter((function(t){return t.username.toLowerCase()===e.toLowerCase()}))[0]||null):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)},e.prototype.getAccountByHomeId=function(e){var t=this.getAllAccounts();return!ra.isEmpty(e)&&t&&t.length?(this.logger.verbose("Account matching homeAccountId found, returning"),this.logger.verbosePii("Returning signed-in accounts matching homeAccountId: "+e),t.filter((function(t){return t.homeAccountId===e}))[0]||null):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)},e.prototype.getAccountByLocalId=function(e){var t=this.getAllAccounts();return!ra.isEmpty(e)&&t&&t.length?(this.logger.verbose("Account matching localAccountId found, returning"),this.logger.verbosePii("Returning signed-in accounts matching localAccountId: "+e),t.filter((function(t){return t.localAccountId===e}))[0]||null):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)},e.prototype.setActiveAccount=function(e){this.browserStorage.setActiveAccount(e)},e.prototype.getActiveAccount=function(){return this.browserStorage.getActiveAccount()},e.prototype.preflightBrowserEnvironmentCheck=function(e,t){if(void 0===t&&(t=!0),this.logger.verbose("preflightBrowserEnvironmentCheck started"),Gl.blockNonBrowserEnvironment(this.isBrowserEnvironment),Gl.blockRedirectInIframe(e,this.config.system.allowRedirectInIframe),Gl.blockReloadInHiddenIframes(),Gl.blockAcquireTokenInPopups(),Gl.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),e===to.Redirect&&this.config.cache.cacheLocation===Yn.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw Pl.createInMemoryRedirectUnavailableError();e!==to.Redirect&&e!==to.Popup||this.preflightInteractiveRequest(t)},e.prototype.preflightInteractiveRequest=function(e){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),Gl.blockReloadInHiddenIframes(),e&&this.browserStorage.setInteractionInProgress(!0)},e.prototype.acquireTokenNative=function(e,t,r){return cn(this,void 0,void 0,(function(){return ln(this,(function(n){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Bs.createNativeConnectionNotEstablishedError();return[2,new vd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),e.correlationId).acquireToken(e)]}))}))},e.prototype.canUseNative=function(e,t){if(this.logger.trace("canUseNative called"),!Sd.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Tn.NONE:case Tn.CONSENT:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace("canUseNative: prompt = "+e.prompt+" is not compatible with native flow, returning false"),!1}return!(!t&&!this.getNativeAccountId(e)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))},e.prototype.getNativeAccountId=function(e){var t=e.account||this.browserStorage.getAccountInfoByHints(e.loginHint,e.sid)||this.getActiveAccount();return t&&t.nativeAccountId||""},e.prototype.createPopupClient=function(e){return new Cd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.createRedirectClient=function(e){return new wd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.createSilentIframeClient=function(e){return new Rd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,eo.ssoSilent,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.createSilentCacheClient=function(e){return new Ad(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.createSilentRefreshClient=function(e){return new Pd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.createSilentAuthCodeClient=function(e){return new kd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,eo.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.addEventCallback=function(e){return this.eventHandler.addEventCallback(e)},e.prototype.removeEventCallback=function(e){this.eventHandler.removeEventCallback(e)},e.prototype.addPerformanceCallback=function(e){return this.performanceClient.addPerformanceCallback(e)},e.prototype.removePerformanceCallback=function(e){return this.performanceClient.removePerformanceCallback(e)},e.prototype.enableAccountStorageEvents=function(){this.eventHandler.enableAccountStorageEvents()},e.prototype.disableAccountStorageEvents=function(){this.eventHandler.disableAccountStorageEvents()},e.prototype.getTokenCache=function(){return this.tokenCache},e.prototype.getLogger=function(){return this.logger},e.prototype.setLogger=function(e){this.logger=e},e.prototype.initializeWrapperLibrary=function(e,t){this.browserStorage.setWrapperMetadata(e,t)},e.prototype.setNavigationClient=function(e){this.navigationClient=e},e.prototype.getConfiguration=function(){return this.config},e.prototype.getRequestCorrelationId=function(e){return(null==e?void 0:e.correlationId)?e.correlationId:this.isBrowserEnvironment?this.browserCrypto.createNewGuid():xn.EMPTY_STRING},e}(),Bd=function(e){function t(t){var r=e.call(this,t)||this;return r.activeSilentTokenRequests=new Map,r}return nn(t,e),t.prototype.loginRedirect=function(e){return cn(this,void 0,void 0,(function(){var t;return ln(this,(function(r){return t=this.getRequestCorrelationId(e),this.logger.verbose("loginRedirect called",t),[2,this.acquireTokenRedirect(sn({correlationId:t},e||ao))]}))}))},t.prototype.loginPopup=function(e){var t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(sn({correlationId:t},e||ao))},t.prototype.acquireTokenSilent=function(e){return cn(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c=this;return ln(this,(function(l){if(t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(on.AcquireTokenSilent,t),this.preflightBrowserEnvironmentCheck(to.Silent),this.logger.verbose("acquireTokenSilent called",t),!(n=e.account||this.getActiveAccount()))throw Bs.createNoAccountError();return o={clientId:this.config.auth.clientId,authority:e.authority||xn.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:n.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},i=JSON.stringify(o),void 0===(a=this.activeSilentTokenRequests.get(i))?(this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t),s=this.acquireTokenSilentAsync(sn(sn({},e),{correlationId:t}),n).then((function(e){return c.activeSilentTokenRequests.delete(i),r.endMeasurement({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),r.flushMeasurement(),e})).catch((function(e){throw c.activeSilentTokenRequests.delete(i),r.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),r.flushMeasurement(),e})),this.activeSilentTokenRequests.set(i,s),[2,s]):(this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),r.endMeasurement({success:!0}),r.discardMeasurement(),[2,a])}))}))},t.prototype.acquireTokenSilentAsync=function(e,t){return cn(this,void 0,void 0,(function(){var r,n,o,i,a,s=this;return ln(this,(function(c){switch(c.label){case 0:return this.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_START,to.Silent,e),r=this.performanceClient.startMeasurement(on.AcquireTokenSilentAsync,e.correlationId),Sd.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&t.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),o=sn(sn({},e),{account:t}),n=this.acquireTokenNative(o,eo.acquireTokenSilent_silentFlow).catch((function(t){return cn(s,void 0,void 0,(function(){return ln(this,(function(r){if(t instanceof bd&&t.isFatal())return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,[2,this.createSilentIframeClient(e.correlationId).acquireToken(e)];throw t}))}))})),[3,3]):[3,1];case 1:return this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),[4,(i=this.createSilentCacheClient(e.correlationId)).initializeSilentRequest(e,t)];case 2:a=c.sent(),n=i.acquireToken(a).catch((function(){return cn(s,void 0,void 0,(function(){return ln(this,(function(e){return[2,this.acquireTokenByRefreshToken(a)]}))}))})),c.label=3;case 3:return[2,n.then((function(e){return s.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_SUCCESS,to.Silent,e),r.endMeasurement({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e})).catch((function(e){throw s.eventHandler.emitEvent(kl.ACQUIRE_TOKEN_FAILURE,to.Silent,null,e),r.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}))]}}))}))},t}(zd);function Hd(e,t){if(!t.match(/^[0-9a-zA-Z-.:/]+$/)){const t=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://docs.microsoft.com/partner-center/find-ids-and-domain-names.");throw e.info(s("",t)),t}}const Dd=self.location.hash;class Ld extends class extends class{constructor(e){this.logger=e.logger,this.account=e.authenticationRecord}generateUuid(){return(0,Pt.Z)()}handleResult(e,t,r,n){return(null==r?void 0:r.account)&&(this.account=Bt(t,r.account)),function(e,t,r,n){const o=r=>(t.getToken.info(r),new y({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:r}));if(!r)throw o("No response");if(!r.expiresOn)throw o('Response had no "expiresOn" property.');if(!r.accessToken)throw o('Response had no "accessToken" property.')}(e,this.logger,r,n),this.logger.getToken.info(a(e)),{token:r.accessToken,expiresOnTimestamp:r.expiresOn.getTime()}}handleError(e,t,r){if("AuthError"===t.name||"ClientAuthError"===t.name||"BrowserAuthError"===t.name){const r=t;switch(r.errorCode){case"endpoints_resolution_error":return this.logger.info(s(e,t.message)),new u(t.message);case"device_code_polling_cancelled":return new Tt._("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":this.logger.info(s(e,`Authentication returned errorCode ${r.errorCode}`));break;default:this.logger.info(s(e,`Failed to acquire token: ${t.message}`))}}return"ClientConfigurationError"===t.name||"BrowserConfigurationAuthError"===t.name||"AbortError"===t.name?t:new y({scopes:e,getTokenOptions:r,message:t.message})}}{constructor(e){if(super(e),this.logger=e.logger,this.loginStyle=e.loginStyle,!e.clientId)throw new u("A client ID is required in browsers");this.clientId=e.clientId,this.tenantId=function(e,t,r){return t?(Hd(e,t),t):(r||(r=It),r!==It?"common":"organizations")}(this.logger,e.tenantId,e.clientId),this.authorityHost=e.authorityHost,this.msalConfig=function(e){const t=e.tenantId||_t,r=kt(t,e.authorityHost);return{auth:{clientId:e.clientId,authority:r,knownAuthorities:Mt(t,r),redirectUri:e.redirectUri||self.location.origin}}}(e),this.disableAutomaticAuthentication=e.disableAutomaticAuthentication,e.authenticationRecord&&(this.account=Object.assign(Object.assign({},e.authenticationRecord),{tenantId:this.tenantId}))}async init(){}async logout(){var e;null===(e=this.app)||void 0===e||e.logout()}async getToken(e,t={}){const r=function(e,t){if(!(null==t?void 0:t.tenantId))return e;if("adfs"===e)throw new Error("A new tenant Id can't be assigned through the GetTokenOptions when a credential has been originally configured to use the tenant `adfs`.");return null==t?void 0:t.tenantId}(this.tenantId,t)||this.tenantId;return t.authority||(t.authority=kt(r,this.authorityHost)),await this.handleRedirect(),await this.getActiveAccount()||this.disableAutomaticAuthentication||await this.login(e),this.getTokenSilent(e).catch((r=>{if("AuthenticationRequiredError"!==r.name)throw r;if(null==t?void 0:t.disableAutomaticAuthentication)throw new y({scopes:e,getTokenOptions:t,message:"Automatic authentication has been disabled. You may call the authentication() method."});return this.logger.info(`Silent authentication failed, falling back to interactive method ${this.loginStyle}`),this.doGetToken(e)}))}}{constructor(e){super(e),this.loginHint=e.loginHint,this.msalConfig.cache={cacheLocation:"sessionStorage",storeAuthStateInCookie:!0},this.msalConfig.system={loggerOptions:{loggerCallback:qt(this.logger,"Browser")}},this.app=new Bd(this.msalConfig),this.account&&this.app.setActiveAccount(zt(this.account))}async handleBrowserResult(e){try{if(e&&e.account)return this.logger.info("MSAL Browser V2 authentication successful."),this.app.setActiveAccount(e.account),Bt(this.clientId,e.account);const t=await this.app.getActiveAccount();if(t)return Bt(this.clientId,t);const r=this.app.getAllAccounts();if(r.length>1)return this.logger.info('More than one account was found authenticated for this Client ID and Tenant ID.\nHowever, no "authenticationRecord" has been provided for this credential,\ntherefore we\'re unable to pick between these accounts.\nA new login attempt will be requested, to ensure the correct account is picked.\nTo work with multiple accounts for the same Client ID and Tenant ID, please provide an "authenticationRecord" when initializing "InteractiveBrowserCredential".'),void await this.app.logout({onRedirectNavigate:()=>!1});if(1===r.length){const e=r[0];return this.app.setActiveAccount(e),Bt(this.clientId,e)}this.logger.info("No accounts were found through MSAL.")}catch(e){this.logger.info(`Failed to acquire token through MSAL. ${e.message}`)}}async handleRedirect(){return this.handleBrowserResult(await this.app.handleRedirectPromise(Dd)||void 0)}async login(e=[]){const t={scopes:Array.isArray(e)?e:[e],loginHint:this.loginHint};switch(this.loginStyle){case"redirect":return void await this.app.loginRedirect(t);case"popup":return this.handleBrowserResult(await this.app.loginPopup(t))}}async getActiveAccount(){const e=this.app.getActiveAccount();if(e)return Bt(this.clientId,e)}async getTokenSilent(e,t){const r=await this.getActiveAccount();if(!r)throw new y({scopes:e,getTokenOptions:t,message:"Silent authentication failed. We couldn't retrieve an active account from the cache."});const n={authority:(null==t?void 0:t.authority)||this.msalConfig.auth.authority,correlationId:null==t?void 0:t.correlationId,claims:null==t?void 0:t.claims,account:zt(r),forceRefresh:!1,scopes:e};try{this.logger.info("Attempting to acquire token silently");const t=await this.app.acquireTokenSilent(n);return this.handleResult(e,this.clientId,t)}catch(r){throw this.handleError(e,r,t)}}async doGetToken(e,t){const r=await this.getActiveAccount();if(!r)throw new y({scopes:e,getTokenOptions:t,message:"Silent authentication failed. We couldn't retrieve an active account from the cache."});const n={authority:(null==t?void 0:t.authority)||this.msalConfig.auth.authority,correlationId:null==t?void 0:t.correlationId,claims:null==t?void 0:t.claims,account:zt(r),loginHint:this.loginHint,scopes:e};switch(this.loginStyle){case"redirect":return await this.app.acquireTokenRedirect(n),{token:"",expiresOnTimestamp:0};case"popup":return this.handleResult(e,this.clientId,await this.app.acquireTokenPopup(n))}}}const Ud=l("InteractiveBrowserCredential");class jd{constructor(e){if(!(null==e?void 0:e.clientId)){const e=new Error("The parameter `clientId` cannot be left undefined for the `InteractiveBrowserCredential`");throw Ud.info(s("",e)),e}const t=e,r=t.loginStyle||"popup",n=["redirect","popup"];if(-1===n.indexOf(r)){const e=new Error(`Invalid loginStyle: ${t.loginStyle}. Should be any of the following: ${n.join(", ")}.`);throw Ud.info(s("",e)),e}const o=Object.assign(Object.assign({},e),{logger:Ud,loginStyle:r,redirectUri:"function"==typeof e.redirectUri?e.redirectUri():e.redirectUri});this.msalFlow=new Ld(o),this.disableAutomaticAuthentication=null==e?void 0:e.disableAutomaticAuthentication}async getToken(e,t={}){return N(`${this.constructor.name}.getToken`,t,(async t=>{const r=Array.isArray(e)?e:[e];return this.msalFlow.getToken(r,Object.assign(Object.assign({},t),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))}))}async authenticate(e,t={}){return N(`${this.constructor.name}.authenticate`,t,(async t=>{const r=Array.isArray(e)?e:[e];return await this.msalFlow.getToken(r,t),this.msalFlow.getActiveAccount()}))}}const Fd=new Error("ManagedIdentityCredential is not supported in the browser."),Kd=l("ManagedIdentityCredential");class Gd{constructor(){throw Kd.info(s("",Fd)),Fd}async getToken(){throw Kd.getToken.info(s("",Fd)),Fd}}const Vd=new Error("DeviceCodeCredential is not supported in the browser."),$d=l("DeviceCodeCredential");class Qd{constructor(){throw $d.info(s("",Vd)),Vd}getToken(){throw $d.getToken.info(s("",Vd)),Vd}}const Wd=l("UsernamePasswordCredential");class Yd{constructor(e,t,r,n,o){Hd(Wd,e),this.identityClient=new $r(o),this.tenantId=e,this.clientId=t,this.username=r,this.password=n}async getToken(e,t){const{span:r,updatedOptions:n}=S("UsernamePasswordCredential.getToken",t);try{const o=Qt(this.tenantId),i=new URLSearchParams({response_type:"token",grant_type:"password",client_id:this.clientId,username:this.username,password:this.password,scope:"string"==typeof e?e:e.join(" ")}),s=$t({url:`${this.identityClient.authorityHost}/${this.tenantId}/${o}`,method:"POST",body:i.toString(),headers:Gt({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),abortSignal:t&&t.abortSignal,tracingOptions:n.tracingOptions}),c=await this.identityClient.sendTokenRequest(s);return Wd.getToken.info(a(e)),c&&c.accessToken||null}catch(t){throw r.setStatus({code:v.Qn.ERROR,message:t.message}),Wd.getToken.info(s(e,t)),t}finally{r.end()}}}const Jd=new Error("AuthorizationCodeCredential is not supported in the browser. InteractiveBrowserCredential is more appropriate for this use case."),Xd=l("AuthorizationCodeCredential");class Zd{constructor(){throw Xd.info(s("",Jd)),Jd}getToken(){throw Xd.getToken.info(s("",Jd)),Jd}}const eu=new Error("AzurePowerShellCredential is not supported in the browser."),tu=l("AzurePowerShellCredential");class ru{constructor(){throw tu.info(s("",eu)),eu}getToken(){throw tu.getToken.info(s("",eu)),eu}}const nu=new Error("VisualStudioCodeCredential is not supported in the browser."),ou=l("VisualStudioCodeCredential");class iu{constructor(){throw ou.info(s("",nu)),nu}getToken(){throw ou.getToken.info(s("",nu)),nu}}const au="OnBehalfOfCredential",su=new Error(`${au}: Not supported in the browser.`),cu=l(au);class lu{constructor(){throw cu.info(s("",su)),su}getToken(){throw cu.getToken.info(s("",su)),su}}function du(){return new R}},901:(e,t,r)=>{"use strict";r.d(t,{YR:()=>N});const n="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let o,i=[],a=[];const s=[];n&&l(n);const c=Object.assign((e=>u(e)),{enable:l,enabled:d,disable:function(){const e=o||"";return l(""),e},log:function(...e){if(e.length>0){const t=String(e[0]);t.includes(":error")?console.error(...e):t.includes(":warning")?console.warn(...e):t.includes(":info")?console.info(...e):(t.includes(":verbose"),console.debug(...e))}}});function l(e){o=e,i=[],a=[];const t=/\*/g,r=e.split(",").map((e=>e.trim().replace(t,".*?")));for(const e of r)e.startsWith("-")?a.push(new RegExp(`^${e.substr(1)}$`)):i.push(new RegExp(`^${e}$`));for(const e of s)e.enabled=d(e.namespace)}function d(e){if(e.endsWith("*"))return!0;for(const t of a)if(t.test(e))return!1;for(const t of i)if(t.test(e))return!0;return!1}function u(e){const t=Object.assign((function(...r){t.enabled&&(r.length>0&&(r[0]=`${e} ${r[0]}`),t.log(...r))}),{enabled:d(e),destroy:m,log:c.log,namespace:e,extend:p});return s.push(t),t}function m(){const e=s.indexOf(this);return e>=0&&(s.splice(e,1),!0)}function p(e){const t=u(`${this.namespace}:${e}`);return t.log=this.log,t}const h=c,g=new Set,f="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let y;const b=h("azure");b.log=(...e)=>{h.log(...e)};const v=["verbose","info","warning","error"];f&&(E(f)?function(e){if(e&&!E(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${v.join(",")}`);y=e;const t=[];for(const e of g)w(e)&&t.push(e.namespace);h.enable(t.join(","))}(f):console.error(`AZURE_LOG_LEVEL set to unknown log level '${f}'; logging is not enabled. Acceptable values: ${v.join(", ")}.`));const S={verbose:400,info:300,warning:200,error:100};function N(e){const t=b.extend(e);return C(b,t),{error:x(t,"error"),warning:x(t,"warning"),info:x(t,"info"),verbose:x(t,"verbose")}}function C(e,t){t.log=(...t)=>{e.log(...t)}}function x(e,t){const r=Object.assign(e.extend(t),{level:t});if(C(e,r),w(r)){const e=h.disable();h.enable(e+","+r.namespace)}return g.add(r),r}function w(e){return!!(y&&S[e.level]<=S[y])}function E(e){return v.includes(e)}},584:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnonymousCredential:()=>Ns,AnonymousCredentialPolicy:()=>vs,AppendBlobClient:()=>Jl,BaseRequestPolicy:()=>ji,BlobBatch:()=>od,BlobBatchClient:()=>dd,BlobClient:()=>Yl,BlobLeaseClient:()=>rl,BlobServiceClient:()=>gd,BlockBlobClient:()=>Xl,BlockBlobTier:()=>Ol,ContainerClient:()=>ud,Credential:()=>Ss,CredentialPolicy:()=>bs,HttpHeaders:()=>aa,PageBlobClient:()=>Zl,Pipeline:()=>qs,PremiumPageBlobTier:()=>kl,RequestPolicyOptions:()=>Fi,RestError:()=>P,StorageBrowserPolicy:()=>ds,StorageBrowserPolicyFactory:()=>us,StorageOAuthScopes:()=>Ea,StorageRetryPolicy:()=>fs,StorageRetryPolicyFactory:()=>ys,StorageRetryPolicyType:()=>ms,WebResource:()=>sa,deserializationPolicy:()=>ea,isPipelineLike:()=>Ms,logger:()=>Na,newPipeline:()=>zs});var n={};r.r(n),r.d(n,{AccessPolicy:()=>ge,AppendBlobAppendBlockExceptionHeaders:()=>Yr,AppendBlobAppendBlockFromUrlExceptionHeaders:()=>Xr,AppendBlobAppendBlockFromUrlHeaders:()=>Jr,AppendBlobAppendBlockHeaders:()=>Wr,AppendBlobCreateExceptionHeaders:()=>Qr,AppendBlobCreateHeaders:()=>$r,AppendBlobSealExceptionHeaders:()=>en,AppendBlobSealHeaders:()=>Zr,ArrowConfiguration:()=>qe,ArrowField:()=>ze,BlobAbortCopyFromURLExceptionHeaders:()=>br,BlobAbortCopyFromURLHeaders:()=>yr,BlobAcquireLeaseExceptionHeaders:()=>rr,BlobAcquireLeaseHeaders:()=>tr,BlobBreakLeaseExceptionHeaders:()=>dr,BlobBreakLeaseHeaders:()=>lr,BlobChangeLeaseExceptionHeaders:()=>cr,BlobChangeLeaseHeaders:()=>sr,BlobCopyFromURLExceptionHeaders:()=>fr,BlobCopyFromURLHeaders:()=>gr,BlobCreateSnapshotExceptionHeaders:()=>mr,BlobCreateSnapshotHeaders:()=>ur,BlobDeleteExceptionHeaders:()=>Lt,BlobDeleteHeaders:()=>Dt,BlobDeleteImmutabilityPolicyExceptionHeaders:()=>Yt,BlobDeleteImmutabilityPolicyHeaders:()=>Wt,BlobDownloadExceptionHeaders:()=>zt,BlobDownloadHeaders:()=>qt,BlobFlatListSegment:()=>ye,BlobGetAccountInfoExceptionHeaders:()=>Cr,BlobGetAccountInfoHeaders:()=>Nr,BlobGetPropertiesExceptionHeaders:()=>Ht,BlobGetPropertiesHeaders:()=>Bt,BlobGetTagsExceptionHeaders:()=>Rr,BlobGetTagsHeaders:()=>Er,BlobHierarchyListSegment:()=>Ce,BlobItemInternal:()=>be,BlobName:()=>ve,BlobPrefix:()=>xe,BlobPropertiesInternal:()=>Se,BlobQueryExceptionHeaders:()=>wr,BlobQueryHeaders:()=>xr,BlobReleaseLeaseExceptionHeaders:()=>or,BlobReleaseLeaseHeaders:()=>nr,BlobRenewLeaseExceptionHeaders:()=>ar,BlobRenewLeaseHeaders:()=>ir,BlobServiceProperties:()=>Y,BlobServiceStatistics:()=>ne,BlobSetExpiryExceptionHeaders:()=>Kt,BlobSetExpiryHeaders:()=>Ft,BlobSetHttpHeadersExceptionHeaders:()=>Vt,BlobSetHttpHeadersHeaders:()=>Gt,BlobSetImmutabilityPolicyExceptionHeaders:()=>Qt,BlobSetImmutabilityPolicyHeaders:()=>$t,BlobSetLegalHoldExceptionHeaders:()=>Xt,BlobSetLegalHoldHeaders:()=>Jt,BlobSetMetadataExceptionHeaders:()=>er,BlobSetMetadataHeaders:()=>Zt,BlobSetTagsExceptionHeaders:()=>Pr,BlobSetTagsHeaders:()=>Tr,BlobSetTierExceptionHeaders:()=>Sr,BlobSetTierHeaders:()=>vr,BlobStartCopyFromURLExceptionHeaders:()=>hr,BlobStartCopyFromURLHeaders:()=>pr,BlobTag:()=>pe,BlobTags:()=>me,BlobUndeleteExceptionHeaders:()=>jt,BlobUndeleteHeaders:()=>Ut,Block:()=>Re,BlockBlobCommitBlockListExceptionHeaders:()=>un,BlockBlobCommitBlockListHeaders:()=>dn,BlockBlobGetBlockListExceptionHeaders:()=>pn,BlockBlobGetBlockListHeaders:()=>mn,BlockBlobPutBlobFromUrlExceptionHeaders:()=>on,BlockBlobPutBlobFromUrlHeaders:()=>nn,BlockBlobStageBlockExceptionHeaders:()=>sn,BlockBlobStageBlockFromURLExceptionHeaders:()=>ln,BlockBlobStageBlockFromURLHeaders:()=>cn,BlockBlobStageBlockHeaders:()=>an,BlockBlobUploadExceptionHeaders:()=>rn,BlockBlobUploadHeaders:()=>tn,BlockList:()=>Ee,BlockLookupList:()=>we,ClearRange:()=>Ie,ContainerAcquireLeaseExceptionHeaders:()=>St,ContainerAcquireLeaseHeaders:()=>vt,ContainerBreakLeaseExceptionHeaders:()=>Rt,ContainerBreakLeaseHeaders:()=>Et,ContainerChangeLeaseExceptionHeaders:()=>Pt,ContainerChangeLeaseHeaders:()=>Tt,ContainerCreateExceptionHeaders:()=>et,ContainerCreateHeaders:()=>Ze,ContainerDeleteExceptionHeaders:()=>ot,ContainerDeleteHeaders:()=>nt,ContainerFilterBlobsExceptionHeaders:()=>bt,ContainerFilterBlobsHeaders:()=>yt,ContainerGetAccessPolicyExceptionHeaders:()=>ct,ContainerGetAccessPolicyHeaders:()=>st,ContainerGetAccountInfoExceptionHeaders:()=>Mt,ContainerGetAccountInfoHeaders:()=>kt,ContainerGetPropertiesExceptionHeaders:()=>rt,ContainerGetPropertiesHeaders:()=>tt,ContainerItem:()=>ae,ContainerListBlobFlatSegmentExceptionHeaders:()=>_t,ContainerListBlobFlatSegmentHeaders:()=>It,ContainerListBlobHierarchySegmentExceptionHeaders:()=>Ot,ContainerListBlobHierarchySegmentHeaders:()=>At,ContainerProperties:()=>se,ContainerReleaseLeaseExceptionHeaders:()=>Ct,ContainerReleaseLeaseHeaders:()=>Nt,ContainerRenameExceptionHeaders:()=>ht,ContainerRenameHeaders:()=>pt,ContainerRenewLeaseExceptionHeaders:()=>wt,ContainerRenewLeaseHeaders:()=>xt,ContainerRestoreExceptionHeaders:()=>mt,ContainerRestoreHeaders:()=>ut,ContainerSetAccessPolicyExceptionHeaders:()=>dt,ContainerSetAccessPolicyHeaders:()=>lt,ContainerSetMetadataExceptionHeaders:()=>at,ContainerSetMetadataHeaders:()=>it,ContainerSubmitBatchExceptionHeaders:()=>ft,ContainerSubmitBatchHeaders:()=>gt,CorsRule:()=>ee,DelimitedTextConfiguration:()=>ke,FilterBlobItem:()=>ue,FilterBlobSegment:()=>de,GeoReplication:()=>oe,JsonTextConfiguration:()=>Me,KeyInfo:()=>ce,ListBlobsFlatSegmentResponse:()=>fe,ListBlobsHierarchySegmentResponse:()=>Ne,ListContainersSegmentResponse:()=>ie,Logging:()=>J,Metrics:()=>Z,PageBlobClearPagesExceptionHeaders:()=>Mr,PageBlobClearPagesHeaders:()=>kr,PageBlobCopyIncrementalExceptionHeaders:()=>Vr,PageBlobCopyIncrementalHeaders:()=>Gr,PageBlobCreateExceptionHeaders:()=>_r,PageBlobCreateHeaders:()=>Ir,PageBlobGetPageRangesDiffExceptionHeaders:()=>Lr,PageBlobGetPageRangesDiffHeaders:()=>Dr,PageBlobGetPageRangesExceptionHeaders:()=>Hr,PageBlobGetPageRangesHeaders:()=>Br,PageBlobResizeExceptionHeaders:()=>jr,PageBlobResizeHeaders:()=>Ur,PageBlobUpdateSequenceNumberExceptionHeaders:()=>Kr,PageBlobUpdateSequenceNumberHeaders:()=>Fr,PageBlobUploadPagesExceptionHeaders:()=>Or,PageBlobUploadPagesFromURLExceptionHeaders:()=>zr,PageBlobUploadPagesFromURLHeaders:()=>qr,PageBlobUploadPagesHeaders:()=>Ar,PageList:()=>Te,PageRange:()=>Pe,QueryFormat:()=>Oe,QueryRequest:()=>_e,QuerySerialization:()=>Ae,RetentionPolicy:()=>X,ServiceFilterBlobsExceptionHeaders:()=>Xe,ServiceFilterBlobsHeaders:()=>Je,ServiceGetAccountInfoExceptionHeaders:()=>Qe,ServiceGetAccountInfoHeaders:()=>$e,ServiceGetPropertiesExceptionHeaders:()=>Le,ServiceGetPropertiesHeaders:()=>De,ServiceGetStatisticsExceptionHeaders:()=>je,ServiceGetStatisticsHeaders:()=>Ue,ServiceGetUserDelegationKeyExceptionHeaders:()=>Ve,ServiceGetUserDelegationKeyHeaders:()=>Ge,ServiceListContainersSegmentExceptionHeaders:()=>Ke,ServiceListContainersSegmentHeaders:()=>Fe,ServiceSetPropertiesExceptionHeaders:()=>He,ServiceSetPropertiesHeaders:()=>Be,ServiceSubmitBatchExceptionHeaders:()=>Ye,ServiceSubmitBatchHeaders:()=>We,SignedIdentifier:()=>he,StaticWebsite:()=>te,StorageError:()=>re,UserDelegationKey:()=>le});const o="$",i="_";var a=r(586);const s=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,c="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function l(){return(0,a.Z)()}const d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function u(e,t,r){return e&&t?e.split(t).join(r||""):e}class m{constructor(){this._rawQuery={}}any(){return Object.keys(this._rawQuery).length>0}keys(){return Object.keys(this._rawQuery)}set(e,t){const r=t;if(e)if(null!=r){const t=Array.isArray(r)?r:r.toString();this._rawQuery[e]=t}else delete this._rawQuery[e]}get(e){return e?this._rawQuery[e]:void 0}toString(){let e="";for(const t in this._rawQuery){e&&(e+="&");const r=this._rawQuery[t];if(Array.isArray(r)){const n=[];for(const e of r)n.push(`${t}=${e}`);e+=n.join("&")}else e+=`${t}=${r}`}return e}static parse(e){const t=new m;if(e){e.startsWith("?")&&(e=e.substring(1));let r="ParameterName",n="",o="";for(let i=0;i<e.length;++i){const a=e[i];switch(r){case"ParameterName":switch(a){case"=":r="ParameterValue";break;case"&":n="",o="";break;default:n+=a}break;case"ParameterValue":"&"===a?(t.set(n,o),n="",o="",r="ParameterName"):o+=a;break;default:throw new Error("Unrecognized URLQuery parse state: "+r)}}"ParameterValue"===r&&t.set(n,o)}return t}}class p{setScheme(e){e?this.set(e,"SCHEME"):this._scheme=void 0}getScheme(){return this._scheme}setHost(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0}getHost(){return this._host}setPort(e){null==e||""===e?this._port=void 0:this.set(e.toString(),"PORT")}getPort(){return this._port}setPath(e){if(e){const t=e.indexOf("://");if(-1!==t){const r=e.lastIndexOf("/",t);this.set(-1===r?e:e.substr(r+1),"SCHEME")}else this.set(e,"PATH")}else this._path=void 0}appendPath(e){if(e){let t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}}getPath(){return this._path}setQuery(e){this._query=e?m.parse(e):void 0}setQueryParameter(e,t){e&&(this._query||(this._query=new m),this._query.set(e,t))}getQueryParameterValue(e){return this._query?this._query.get(e):void 0}getQuery(){return this._query?this._query.toString():void 0}set(e,t){const r=new g(e,t);for(;r.next();){const e=r.current();let t;if(e)switch(e.type){case"SCHEME":this._scheme=e.text||void 0;break;case"HOST":this._host=e.text||void 0;break;case"PORT":this._port=e.text||void 0;break;case"PATH":t=e.text||void 0,this._path&&"/"!==this._path&&"/"===t||(this._path=t);break;case"QUERY":this._query=m.parse(e.text);break;default:throw new Error(`Unrecognized URLTokenType: ${e.type}`)}}}toString(){let e="";return this._scheme&&(e+=`${this._scheme}://`),this._host&&(e+=this._host),this._port&&(e+=`:${this._port}`),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+=`?${this._query.toString()}`),e}replaceAll(e,t){e&&(this.setScheme(u(this.getScheme(),e,t)),this.setHost(u(this.getHost(),e,t)),this.setPort(u(this.getPort(),e,t)),this.setPath(u(this.getPath(),e,t)),this.setQuery(u(this.getQuery(),e,t)))}static parse(e){const t=new p;return t.set(e,"SCHEME_OR_HOST"),t}}class h{constructor(e,t){this.text=e,this.type=t}static scheme(e){return new h(e,"SCHEME")}static host(e){return new h(e,"HOST")}static port(e){return new h(e,"PORT")}static path(e){return new h(e,"PATH")}static query(e){return new h(e,"QUERY")}}class g{constructor(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=null!=t?t:"SCHEME_OR_HOST",this._currentIndex=0}current(){return this._currentToken}next(){if(f(this))switch(this._currentState){case"SCHEME":!function(e){const t=function(e){return S(e,(e=>function(e){const t=e.charCodeAt(0);return 48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122}(e)))}(e);e._currentToken=h.scheme(t),f(e)?e._currentState="HOST":e._currentState="DONE"}(this);break;case"SCHEME_OR_HOST":!function(e){const t=N(e,":","/","?");f(e)?":"===y(e)?"://"===v(e,3)?(e._currentToken=h.scheme(t),e._currentState="HOST"):(e._currentToken=h.host(t),e._currentState="PORT"):(e._currentToken=h.host(t),"/"===y(e)?e._currentState="PATH":e._currentState="QUERY"):(e._currentToken=h.host(t),e._currentState="DONE")}(this);break;case"HOST":!function(e){"://"===v(e,3)&&b(e,3);const t=N(e,":","/","?");e._currentToken=h.host(t),f(e)?":"===y(e)?e._currentState="PORT":"/"===y(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function(e){":"===y(e)&&b(e);const t=N(e,"/","?");e._currentToken=h.port(t),f(e)?"/"===y(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":!function(e){const t=N(e,"?");e._currentToken=h.path(t),f(e)?e._currentState="QUERY":e._currentState="DONE"}(this);break;case"QUERY":!function(e){"?"===y(e)&&b(e);const t=function(e){let t="";return e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength),t}(e);e._currentToken=h.query(t),e._currentState="DONE"}(this);break;default:throw new Error(`Unrecognized URLTokenizerState: ${this._currentState}`)}else this._currentToken=void 0;return!!this._currentToken}}function f(e){return e._currentIndex<e._textLength}function y(e){return e._text[e._currentIndex]}function b(e,t){f(e)&&(t||(t=1),e._currentIndex+=t)}function v(e,t){let r=e._currentIndex+t;return e._textLength<r&&(r=e._textLength),e._text.substring(e._currentIndex,r)}function S(e,t){let r="";for(;f(e);){const n=y(e);if(!t(n))break;r+=n,b(e)}return r}function N(e,...t){return S(e,(e=>-1===t.indexOf(e)))}const C="REDACTED",x=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],w=["api-version"];class E{constructor({allowedHeaderNames:e=[],allowedQueryParameters:t=[]}={}){e=Array.isArray(e)?x.concat(e):x,t=Array.isArray(t)?w.concat(t):w,this.allowedHeaderNames=new Set(e.map((e=>e.toLowerCase()))),this.allowedQueryParameters=new Set(t.map((e=>e.toLowerCase())))}sanitize(e){const t=new Set;return JSON.stringify(e,((e,r)=>{if(r instanceof Error)return Object.assign(Object.assign({},r),{name:r.name,message:r.message});if("_headersMap"===e)return this.sanitizeHeaders(r);if("url"===e)return this.sanitizeUrl(r);if("query"===e)return this.sanitizeQuery(r);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(r)||!("object"!=typeof(n=r)||null===n||Array.isArray(n)||n instanceof RegExp||n instanceof Date)){if(t.has(r))return"[Circular]";t.add(r)}var n;return r}}),2)}sanitizeHeaders(e){return this.sanitizeObject(e,this.allowedHeaderNames,((e,t)=>e[t].value))}sanitizeQuery(e){return this.sanitizeObject(e,this.allowedQueryParameters,((e,t)=>e[t]))}sanitizeObject(e,t,r){if("object"!=typeof e||null===e)return e;const n={};for(const o of Object.keys(e))t.has(o.toLowerCase())?n[o]=r(e,o):n[o]=C;return n}sanitizeUrl(e){if("string"!=typeof e||null===e)return e;const t=p.parse(e),r=t.getQuery();if(!r)return e;const n=m.parse(r);for(const e of n.keys())this.allowedQueryParameters.has(e.toLowerCase())||n.set(e,C);return t.setQuery(n.toString()),t.toString()}}const R={},T=new E;class P extends Error{constructor(e,t,r,n,o){super(e),this.name="RestError",this.code=t,this.statusCode=r,this.request=n,this.response=o,Object.setPrototypeOf(this,P.prototype)}[R](){return`RestError: ${this.message} \n ${T.sanitize(this)}`}}function I(e){return this instanceof I?(this.v=e,this):new I(e)}function _(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=o[e](t)).value instanceof I?Promise.resolve(r.value.v).then(c,l):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function c(e){s("next",e)}function l(e){s("throw",e)}function d(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function A(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:I(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function k(e){const t=e;return t&&"function"==typeof t.getToken&&(void 0===t.signRequest||t.getToken.length>0)}P.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",P.PARSE_ERROR="PARSE_ERROR",Object.create,Object.create;const M=new Error("ProxyPolicy is not supported in browser environment");function q(e){return{create:(e,t)=>{throw M}}}var z=r(771);function B(e){const{requestOptions:t,tracingOptions:r}=e;let n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["requestOptions","tracingOptions"]);return t&&(n=Object.assign(Object.assign({},n),t)),r&&(n.tracingContext=r.tracingContext,n.spanOptions=null==r?void 0:r.spanOptions),n}function H(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function D(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}class L{constructor(e={},t){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,r){const n=(e,n)=>{throw new Error(`"${r}" with value "${t}" should satisfy the constraint "${e}": ${n}.`)};if(e.constraints&&null!=t){const r=t,{ExclusiveMaximum:o,ExclusiveMinimum:i,InclusiveMaximum:a,InclusiveMinimum:s,MaxItems:c,MaxLength:l,MinItems:d,MinLength:u,MultipleOf:m,Pattern:p,UniqueItems:h}=e.constraints;null!=o&&r>=o&&n("ExclusiveMaximum",o),null!=i&&r<=i&&n("ExclusiveMinimum",i),null!=a&&r>a&&n("InclusiveMaximum",a),null!=s&&r<s&&n("InclusiveMinimum",s);const g=t;if(null!=c&&g.length>c&&n("MaxItems",c),null!=l&&g.length>l&&n("MaxLength",l),null!=d&&g.length<d&&n("MinItems",d),null!=u&&g.length<u&&n("MinLength",u),null!=m&&r%m!=0&&n("MultipleOf",m),p){const e="string"==typeof p?new RegExp(p):p;"string"==typeof t&&null!==t.match(e)||n("Pattern",p)}h&&g.some(((e,t,r)=>r.indexOf(e)!==t))&&n("UniqueItems",h)}}serialize(e,t,r,n={}){var a,c,l;const u={rootName:null!==(a=n.rootName)&&void 0!==a?a:"",includeRoot:null!==(c=n.includeRoot)&&void 0!==c&&c,xmlCharKey:null!==(l=n.xmlCharKey)&&void 0!==l?l:i};let m={};const p=e.type.name;r||(r=e.serializedName),null!==p.match(/^Sequence$/i)&&(m=[]),e.isConstant&&(t=e.defaultValue);const{required:h,nullable:g}=e;if(h&&g&&void 0===t)throw new Error(`${r} cannot be undefined.`);if(h&&!g&&null==t)throw new Error(`${r} cannot be null or undefined.`);if(!h&&!1===g&&null===t)throw new Error(`${r} cannot be null.`);return null==t?m=t:(this.validateConstraints(e,t,r),null!==p.match(/^any$/i)?m=t:null!==p.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?m=function(e,t,r){if(null!=r)if(null!==e.match(/^Number$/i)){if("number"!=typeof r)throw new Error(`${t} with value ${r} must be of type number.`)}else if(null!==e.match(/^String$/i)){if("string"!=typeof r.valueOf())throw new Error(`${t} with value "${r}" must be of type string.`)}else if(null!==e.match(/^Uuid$/i)){if("string"!=typeof r.valueOf()||(n=r,!s.test(n)))throw new Error(`${t} with value "${r}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/i)){if("boolean"!=typeof r)throw new Error(`${t} with value ${r} must be of type boolean.`)}else if(null!==e.match(/^Stream$/i)){const e=typeof r;if(!("string"===e||"function"===e||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||("function"==typeof Blob||"object"==typeof Blob)&&r instanceof Blob))throw new Error(`${t} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`)}var n;return r}(p,r,t):null!==p.match(/^Enum$/i)?m=function(e,t,r){if(!t)throw new Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);if(!t.some((e=>"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r)))throw new Error(`${r} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return r}(r,e.type.allowedValues,t):null!==p.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?m=function(e,t,r){if(null!=t)if(null!==e.match(/^Date$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);t=function(e){if(e)return"string"==typeof e.valueOf()&&(e=new Date(e)),Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/i)&&!function(e){return d.test(e)}(t))throw new Error(`${r} must be a string in ISO 8601 format. Instead was "${t}".`);return t}(p,t,r):null!==p.match(/^ByteArray$/i)?m=function(e,t){let r="";if(null!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);r=H(t)}return r}(r,t):null!==p.match(/^Base64Url$/i)?m=function(e,t){let r="";if(null!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);r=function(e){if(e){if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(e,t){let r=e.length;for(;r-1>=0&&"="===e[r-1];)--r;return e.substr(0,r)}(H(e)).replace(/\+/g,"-").replace(/\//g,"_")}}(t)||""}return r}(r,t):null!==p.match(/^Sequence$/i)?m=function(e,t,r,n,i,a){if(!Array.isArray(r))throw new Error(`${n} must be of type Array.`);const s=t.type.element;if(!s||"object"!=typeof s)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}.`);const c=[];for(let t=0;t<r.length;t++){const l=e.serialize(s,r[t],n,a);if(i&&s.xmlNamespace){const e=s.xmlNamespacePrefix?`xmlns:${s.xmlNamespacePrefix}`:"xmlns";"Composite"===s.type.name?(c[t]=Object.assign({},l),c[t][o]={[e]:s.xmlNamespace}):(c[t]={},c[t][a.xmlCharKey]=l,c[t][o]={[e]:s.xmlNamespace})}else c[t]=l}return c}(this,e,t,r,Boolean(this.isXML),u):null!==p.match(/^Dictionary$/i)?m=function(e,t,r,n,i,a){if("object"!=typeof r)throw new Error(`${n} must be of type object.`);const s=t.type.value;if(!s||"object"!=typeof s)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}.`);const c={};for(const t of Object.keys(r)){const o=e.serialize(s,r[t],n,a);c[t]=K(s,o,i,a)}if(i&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns",r=c;return r[o]={[e]:t.xmlNamespace},r}return c}(this,e,t,r,Boolean(this.isXML),u):null!==p.match(/^Composite$/i)&&(m=function(e,t,r,n,i,a){if($(e,t)&&(t=V(e,t,r,"clientName")),null!=r){const s={},c=F(e,t,n);for(const l of Object.keys(c)){const d=c[l];if(d.readOnly)continue;let u,m=s;if(e.isXML)u=d.xmlIsWrapped?d.xmlName:d.xmlElementName||d.xmlName;else{const e=U(d.serializedName);u=e.pop();for(const t of e)null!=m[t]||null==r[l]&&void 0===d.defaultValue||(m[t]={}),m=m[t]}if(null!=m){if(i&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";m[o]=Object.assign(Object.assign({},m[o]),{[e]:t.xmlNamespace})}const s=""!==d.serializedName?n+"."+d.serializedName:n;let c=r[l];const p=$(e,t);p&&p.clientName===l&&null==c&&(c=t.serializedName);const h=e.serialize(d,c,s,a);if(void 0!==h&&null!=u){const e=K(d,h,i,a);i&&d.xmlIsAttribute?(m[o]=m[o]||{},m[o][u]=h):i&&d.xmlIsWrapped?m[u]={[d.xmlElementName]:e}:m[u]=e}}}const l=function(e,t,r){const n=t.type.additionalProperties;if(!n&&t.type.className){const n=j(e,t,r);return null==n?void 0:n.type.additionalProperties}return n}(e,t,n);if(l){const t=Object.keys(c);for(const o in r)t.every((e=>e!==o))&&(s[o]=e.serialize(l,r[o],n+'["'+o+'"]',a))}return s}return r}(this,e,t,r,Boolean(this.isXML),u))),m}deserialize(e,t,r,n={}){var a,s,c;const l={rootName:null!==(a=n.rootName)&&void 0!==a?a:"",includeRoot:null!==(s=n.includeRoot)&&void 0!==s&&s,xmlCharKey:null!==(c=n.xmlCharKey)&&void 0!==c?c:i};if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;let d;const u=e.type.name;if(r||(r=e.serializedName),null!==u.match(/^Composite$/i))d=function(e,t,r,n,i){var a;$(e,t)&&(t=V(e,t,r,"serializedName"));const s=F(e,t,n);let c={};const l=[];for(const d of Object.keys(s)){const u=s[d],m=U(s[d].serializedName);l.push(m[0]);const{serializedName:p,xmlName:h,xmlElementName:g}=u;let f=n;""!==p&&void 0!==p&&(f=n+"."+p);const y=u.headerCollectionPrefix;if(y){const t={};for(const n of Object.keys(r))n.startsWith(y)&&(t[n.substring(y.length)]=e.deserialize(u.type.value,r[n],f,i)),l.push(n);c[d]=t}else if(e.isXML)if(u.xmlIsAttribute&&r[o])c[d]=e.deserialize(u,r[o][h],f,i);else{const t=g||h||p;if(u.xmlIsWrapped){const t=r[h],n=null!==(a=null==t?void 0:t[g])&&void 0!==a?a:[];c[d]=e.deserialize(u,n,f,i)}else{const n=r[t];c[d]=e.deserialize(u,n,f,i)}}else{let n,o=r;for(const e of m){if(!o)break;o=o[e]}n=o;const a=t.type.polymorphicDiscriminator;let l;if(a&&d===a.clientName&&null==n&&(n=t.serializedName),Array.isArray(r[d])&&""===s[d].serializedName){n=r[d];const t=e.deserialize(u,n,f,i);for(const[e,r]of Object.entries(c))Object.prototype.hasOwnProperty.call(t,e)||(t[e]=r);c=t}else void 0===n&&void 0===u.defaultValue||(l=e.deserialize(u,n,f,i),c[d]=l)}}const d=t.type.additionalProperties;if(d){const t=e=>{for(const t in s)if(U(s[t].serializedName)[0]===e)return!1;return!0};for(const o in r)t(o)&&(c[o]=e.deserialize(d,r[o],n+'["'+o+'"]',i))}else if(r)for(const e of Object.keys(r))void 0!==c[e]||l.includes(e)||G(e,i)||(c[e]=r[e]);return c}(this,e,t,r,l);else{if(this.isXML){const e=l.xmlCharKey,r=t;null!=r[o]&&null!=r[e]&&(t=r[e])}null!==u.match(/^Number$/i)?(d=parseFloat(t),isNaN(d)&&(d=t)):null!==u.match(/^Boolean$/i)?d="true"===t||"false"!==t&&t:null!==u.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?d=t:null!==u.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?d=new Date(t):null!==u.match(/^UnixTime$/i)?d=function(e){if(e)return new Date(1e3*e)}(t):null!==u.match(/^ByteArray$/i)?d=D(t):null!==u.match(/^Base64Url$/i)?d=function(e){if(e){if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return D(e=e.replace(/-/g,"+").replace(/_/g,"/"))}}(t):null!==u.match(/^Sequence$/i)?d=function(e,t,r,n,o){const i=t.type.element;if(!i||"object"!=typeof i)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(r){Array.isArray(r)||(r=[r]);const t=[];for(let a=0;a<r.length;a++)t[a]=e.deserialize(i,r[a],`${n}[${a}]`,o);return t}return r}(this,e,t,r,l):null!==u.match(/^Dictionary$/i)&&(d=function(e,t,r,n,o){const i=t.type.value;if(!i||"object"!=typeof i)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(r){const t={};for(const a of Object.keys(r))t[a]=e.deserialize(i,r[a],n,o);return t}return r}(this,e,t,r,l))}return e.isConstant&&(d=e.defaultValue),d}}function U(e){const t=[];let r="";if(e){const n=e.split(".");for(const e of n)"\\"===e.charAt(e.length-1)?r+=e.substr(0,e.length-1)+".":(r+=e,t.push(r),r="")}return t}function j(e,t,r){const n=t.type.className;if(!n)throw new Error(`Class name for model "${r}" is not provided in the mapper "${JSON.stringify(t,void 0,2)}".`);return e.modelMappers[n]}function F(e,t,r){let n=t.type.modelProperties;if(!n){const o=j(e,t,r);if(!o)throw new Error(`mapper() cannot be null or undefined for model "${t.type.className}".`);if(n=null==o?void 0:o.type.modelProperties,!n)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(o)}" of type "${t.type.className}" for object "${r}".`)}return n}function K(e,t,r,n){if(!r||!e.xmlNamespace)return t;const i={[e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns"]:e.xmlNamespace};if(["Composite"].includes(e.type.name)){if(t[o])return t;{const e=Object.assign({},t);return e[o]=i,e}}const a={};return a[n.xmlCharKey]=t,a[o]=i,a}function G(e,t){return[o,t.xmlCharKey].includes(e)}function V(e,t,r,n){const o=$(e,t);if(o){const i=o[n];if(null!=i){const n=r[i];if(null!=n){const r=t.type.uberParent||t.type.className,o=n===r?n:r+"."+n,i=e.modelMappers.discriminators[o];i&&(t=i)}}}return t}function $(e,t){return t.type.polymorphicDiscriminator||Q(e,t.type.uberParent)||Q(e,t.type.className)}function Q(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}const W=function(e){const t={};for(const e of["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"])t[e]=e;return t}(),Y={serializedName:"BlobServiceProperties",xmlName:"StorageServiceProperties",type:{name:"Composite",className:"BlobServiceProperties",modelProperties:{blobAnalyticsLogging:{serializedName:"Logging",xmlName:"Logging",type:{name:"Composite",className:"Logging"}},hourMetrics:{serializedName:"HourMetrics",xmlName:"HourMetrics",type:{name:"Composite",className:"Metrics"}},minuteMetrics:{serializedName:"MinuteMetrics",xmlName:"MinuteMetrics",type:{name:"Composite",className:"Metrics"}},cors:{serializedName:"Cors",xmlName:"Cors",xmlIsWrapped:!0,xmlElementName:"CorsRule",type:{name:"Sequence",element:{type:{name:"Composite",className:"CorsRule"}}}},defaultServiceVersion:{serializedName:"DefaultServiceVersion",xmlName:"DefaultServiceVersion",type:{name:"String"}},deleteRetentionPolicy:{serializedName:"DeleteRetentionPolicy",xmlName:"DeleteRetentionPolicy",type:{name:"Composite",className:"RetentionPolicy"}},staticWebsite:{serializedName:"StaticWebsite",xmlName:"StaticWebsite",type:{name:"Composite",className:"StaticWebsite"}}}}},J={serializedName:"Logging",type:{name:"Composite",className:"Logging",modelProperties:{version:{serializedName:"Version",required:!0,xmlName:"Version",type:{name:"String"}},deleteProperty:{serializedName:"Delete",required:!0,xmlName:"Delete",type:{name:"Boolean"}},read:{serializedName:"Read",required:!0,xmlName:"Read",type:{name:"Boolean"}},write:{serializedName:"Write",required:!0,xmlName:"Write",type:{name:"Boolean"}},retentionPolicy:{serializedName:"RetentionPolicy",xmlName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy"}}}}},X={serializedName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy",modelProperties:{enabled:{serializedName:"Enabled",required:!0,xmlName:"Enabled",type:{name:"Boolean"}},days:{constraints:{InclusiveMinimum:1},serializedName:"Days",xmlName:"Days",type:{name:"Number"}}}}},Z={serializedName:"Metrics",type:{name:"Composite",className:"Metrics",modelProperties:{version:{serializedName:"Version",xmlName:"Version",type:{name:"String"}},enabled:{serializedName:"Enabled",required:!0,xmlName:"Enabled",type:{name:"Boolean"}},includeAPIs:{serializedName:"IncludeAPIs",xmlName:"IncludeAPIs",type:{name:"Boolean"}},retentionPolicy:{serializedName:"RetentionPolicy",xmlName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy"}}}}},ee={serializedName:"CorsRule",type:{name:"Composite",className:"CorsRule",modelProperties:{allowedOrigins:{serializedName:"AllowedOrigins",required:!0,xmlName:"AllowedOrigins",type:{name:"String"}},allowedMethods:{serializedName:"AllowedMethods",required:!0,xmlName:"AllowedMethods",type:{name:"String"}},allowedHeaders:{serializedName:"AllowedHeaders",required:!0,xmlName:"AllowedHeaders",type:{name:"String"}},exposedHeaders:{serializedName:"ExposedHeaders",required:!0,xmlName:"ExposedHeaders",type:{name:"String"}},maxAgeInSeconds:{constraints:{InclusiveMinimum:0},serializedName:"MaxAgeInSeconds",required:!0,xmlName:"MaxAgeInSeconds",type:{name:"Number"}}}}},te={serializedName:"StaticWebsite",type:{name:"Composite",className:"StaticWebsite",modelProperties:{enabled:{serializedName:"Enabled",required:!0,xmlName:"Enabled",type:{name:"Boolean"}},indexDocument:{serializedName:"IndexDocument",xmlName:"IndexDocument",type:{name:"String"}},errorDocument404Path:{serializedName:"ErrorDocument404Path",xmlName:"ErrorDocument404Path",type:{name:"String"}},defaultIndexDocumentPath:{serializedName:"DefaultIndexDocumentPath",xmlName:"DefaultIndexDocumentPath",type:{name:"String"}}}}},re={serializedName:"StorageError",type:{name:"Composite",className:"StorageError",modelProperties:{message:{serializedName:"Message",xmlName:"Message",type:{name:"String"}},code:{serializedName:"Code",xmlName:"Code",type:{name:"String"}}}}},ne={serializedName:"BlobServiceStatistics",xmlName:"StorageServiceStats",type:{name:"Composite",className:"BlobServiceStatistics",modelProperties:{geoReplication:{serializedName:"GeoReplication",xmlName:"GeoReplication",type:{name:"Composite",className:"GeoReplication"}}}}},oe={serializedName:"GeoReplication",type:{name:"Composite",className:"GeoReplication",modelProperties:{status:{serializedName:"Status",required:!0,xmlName:"Status",type:{name:"Enum",allowedValues:["live","bootstrap","unavailable"]}},lastSyncOn:{serializedName:"LastSyncTime",required:!0,xmlName:"LastSyncTime",type:{name:"DateTimeRfc1123"}}}}},ie={serializedName:"ListContainersSegmentResponse",xmlName:"EnumerationResults",type:{name:"Composite",className:"ListContainersSegmentResponse",modelProperties:{serviceEndpoint:{serializedName:"ServiceEndpoint",required:!0,xmlName:"ServiceEndpoint",xmlIsAttribute:!0,type:{name:"String"}},prefix:{serializedName:"Prefix",xmlName:"Prefix",type:{name:"String"}},marker:{serializedName:"Marker",xmlName:"Marker",type:{name:"String"}},maxPageSize:{serializedName:"MaxResults",xmlName:"MaxResults",type:{name:"Number"}},containerItems:{serializedName:"ContainerItems",required:!0,xmlName:"Containers",xmlIsWrapped:!0,xmlElementName:"Container",type:{name:"Sequence",element:{type:{name:"Composite",className:"ContainerItem"}}}},continuationToken:{serializedName:"NextMarker",xmlName:"NextMarker",type:{name:"String"}}}}},ae={serializedName:"ContainerItem",xmlName:"Container",type:{name:"Composite",className:"ContainerItem",modelProperties:{name:{serializedName:"Name",required:!0,xmlName:"Name",type:{name:"String"}},deleted:{serializedName:"Deleted",xmlName:"Deleted",type:{name:"Boolean"}},version:{serializedName:"Version",xmlName:"Version",type:{name:"String"}},properties:{serializedName:"Properties",xmlName:"Properties",type:{name:"Composite",className:"ContainerProperties"}},metadata:{serializedName:"Metadata",xmlName:"Metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},se={serializedName:"ContainerProperties",type:{name:"Composite",className:"ContainerProperties",modelProperties:{lastModified:{serializedName:"Last-Modified",required:!0,xmlName:"Last-Modified",type:{name:"DateTimeRfc1123"}},etag:{serializedName:"Etag",required:!0,xmlName:"Etag",type:{name:"String"}},leaseStatus:{serializedName:"LeaseStatus",xmlName:"LeaseStatus",type:{name:"Enum",allowedValues:["locked","unlocked"]}},leaseState:{serializedName:"LeaseState",xmlName:"LeaseState",type:{name:"Enum",allowedValues:["available","leased","expired","breaking","broken"]}},leaseDuration:{serializedName:"LeaseDuration",xmlName:"LeaseDuration",type:{name:"Enum",allowedValues:["infinite","fixed"]}},publicAccess:{serializedName:"PublicAccess",xmlName:"PublicAccess",type:{name:"Enum",allowedValues:["container","blob"]}},hasImmutabilityPolicy:{serializedName:"HasImmutabilityPolicy",xmlName:"HasImmutabilityPolicy",type:{name:"Boolean"}},hasLegalHold:{serializedName:"HasLegalHold",xmlName:"HasLegalHold",type:{name:"Boolean"}},defaultEncryptionScope:{serializedName:"DefaultEncryptionScope",xmlName:"DefaultEncryptionScope",type:{name:"String"}},preventEncryptionScopeOverride:{serializedName:"DenyEncryptionScopeOverride",xmlName:"DenyEncryptionScopeOverride",type:{name:"Boolean"}},deletedOn:{serializedName:"DeletedTime",xmlName:"DeletedTime",type:{name:"DateTimeRfc1123"}},remainingRetentionDays:{serializedName:"RemainingRetentionDays",xmlName:"RemainingRetentionDays",type:{name:"Number"}},isImmutableStorageWithVersioningEnabled:{serializedName:"ImmutableStorageWithVersioningEnabled",xmlName:"ImmutableStorageWithVersioningEnabled",type:{name:"Boolean"}}}}},ce={serializedName:"KeyInfo",type:{name:"Composite",className:"KeyInfo",modelProperties:{startsOn:{serializedName:"Start",required:!0,xmlName:"Start",type:{name:"String"}},expiresOn:{serializedName:"Expiry",required:!0,xmlName:"Expiry",type:{name:"String"}}}}},le={serializedName:"UserDelegationKey",type:{name:"Composite",className:"UserDelegationKey",modelProperties:{signedObjectId:{serializedName:"SignedOid",required:!0,xmlName:"SignedOid",type:{name:"String"}},signedTenantId:{serializedName:"SignedTid",required:!0,xmlName:"SignedTid",type:{name:"String"}},signedStartsOn:{serializedName:"SignedStart",required:!0,xmlName:"SignedStart",type:{name:"String"}},signedExpiresOn:{serializedName:"SignedExpiry",required:!0,xmlName:"SignedExpiry",type:{name:"String"}},signedService:{serializedName:"SignedService",required:!0,xmlName:"SignedService",type:{name:"String"}},signedVersion:{serializedName:"SignedVersion",required:!0,xmlName:"SignedVersion",type:{name:"String"}},value:{serializedName:"Value",required:!0,xmlName:"Value",type:{name:"String"}}}}},de={serializedName:"FilterBlobSegment",xmlName:"EnumerationResults",type:{name:"Composite",className:"FilterBlobSegment",modelProperties:{serviceEndpoint:{serializedName:"ServiceEndpoint",required:!0,xmlName:"ServiceEndpoint",xmlIsAttribute:!0,type:{name:"String"}},where:{serializedName:"Where",required:!0,xmlName:"Where",type:{name:"String"}},blobs:{serializedName:"Blobs",required:!0,xmlName:"Blobs",xmlIsWrapped:!0,xmlElementName:"Blob",type:{name:"Sequence",element:{type:{name:"Composite",className:"FilterBlobItem"}}}},continuationToken:{serializedName:"NextMarker",xmlName:"NextMarker",type:{name:"String"}}}}},ue={serializedName:"FilterBlobItem",xmlName:"Blob",type:{name:"Composite",className:"FilterBlobItem",modelProperties:{name:{serializedName:"Name",required:!0,xmlName:"Name",type:{name:"String"}},containerName:{serializedName:"ContainerName",required:!0,xmlName:"ContainerName",type:{name:"String"}},tags:{serializedName:"Tags",xmlName:"Tags",type:{name:"Composite",className:"BlobTags"}}}}},me={serializedName:"BlobTags",xmlName:"Tags",type:{name:"Composite",className:"BlobTags",modelProperties:{blobTagSet:{serializedName:"BlobTagSet",required:!0,xmlName:"TagSet",xmlIsWrapped:!0,xmlElementName:"Tag",type:{name:"Sequence",element:{type:{name:"Composite",className:"BlobTag"}}}}}}},pe={serializedName:"BlobTag",xmlName:"Tag",type:{name:"Composite",className:"BlobTag",modelProperties:{key:{serializedName:"Key",required:!0,xmlName:"Key",type:{name:"String"}},value:{serializedName:"Value",required:!0,xmlName:"Value",type:{name:"String"}}}}},he={serializedName:"SignedIdentifier",xmlName:"SignedIdentifier",type:{name:"Composite",className:"SignedIdentifier",modelProperties:{id:{serializedName:"Id",required:!0,xmlName:"Id",type:{name:"String"}},accessPolicy:{serializedName:"AccessPolicy",xmlName:"AccessPolicy",type:{name:"Composite",className:"AccessPolicy"}}}}},ge={serializedName:"AccessPolicy",type:{name:"Composite",className:"AccessPolicy",modelProperties:{startsOn:{serializedName:"Start",xmlName:"Start",type:{name:"String"}},expiresOn:{serializedName:"Expiry",xmlName:"Expiry",type:{name:"String"}},permissions:{serializedName:"Permission",xmlName:"Permission",type:{name:"String"}}}}},fe={serializedName:"ListBlobsFlatSegmentResponse",xmlName:"EnumerationResults",type:{name:"Composite",className:"ListBlobsFlatSegmentResponse",modelProperties:{serviceEndpoint:{serializedName:"ServiceEndpoint",required:!0,xmlName:"ServiceEndpoint",xmlIsAttribute:!0,type:{name:"String"}},containerName:{serializedName:"ContainerName",required:!0,xmlName:"ContainerName",xmlIsAttribute:!0,type:{name:"String"}},prefix:{serializedName:"Prefix",xmlName:"Prefix",type:{name:"String"}},marker:{serializedName:"Marker",xmlName:"Marker",type:{name:"String"}},maxPageSize:{serializedName:"MaxResults",xmlName:"MaxResults",type:{name:"Number"}},segment:{serializedName:"Segment",xmlName:"Blobs",type:{name:"Composite",className:"BlobFlatListSegment"}},continuationToken:{serializedName:"NextMarker",xmlName:"NextMarker",type:{name:"String"}}}}},ye={serializedName:"BlobFlatListSegment",xmlName:"Blobs",type:{name:"Composite",className:"BlobFlatListSegment",modelProperties:{blobItems:{serializedName:"BlobItems",required:!0,xmlName:"BlobItems",xmlElementName:"Blob",type:{name:"Sequence",element:{type:{name:"Composite",className:"BlobItemInternal"}}}}}}},be={serializedName:"BlobItemInternal",xmlName:"Blob",type:{name:"Composite",className:"BlobItemInternal",modelProperties:{name:{serializedName:"Name",xmlName:"Name",type:{name:"Composite",className:"BlobName"}},deleted:{serializedName:"Deleted",required:!0,xmlName:"Deleted",type:{name:"Boolean"}},snapshot:{serializedName:"Snapshot",required:!0,xmlName:"Snapshot",type:{name:"String"}},versionId:{serializedName:"VersionId",xmlName:"VersionId",type:{name:"String"}},isCurrentVersion:{serializedName:"IsCurrentVersion",xmlName:"IsCurrentVersion",type:{name:"Boolean"}},properties:{serializedName:"Properties",xmlName:"Properties",type:{name:"Composite",className:"BlobPropertiesInternal"}},metadata:{serializedName:"Metadata",xmlName:"Metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},blobTags:{serializedName:"BlobTags",xmlName:"Tags",type:{name:"Composite",className:"BlobTags"}},objectReplicationMetadata:{serializedName:"ObjectReplicationMetadata",xmlName:"OrMetadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},hasVersionsOnly:{serializedName:"HasVersionsOnly",xmlName:"HasVersionsOnly",type:{name:"Boolean"}}}}},ve={serializedName:"BlobName",type:{name:"Composite",className:"BlobName",modelProperties:{encoded:{serializedName:"Encoded",xmlName:"Encoded",xmlIsAttribute:!0,type:{name:"Boolean"}},content:{serializedName:"content",xmlName:"content",type:{name:"String"}}}}},Se={serializedName:"BlobPropertiesInternal",xmlName:"Properties",type:{name:"Composite",className:"BlobPropertiesInternal",modelProperties:{createdOn:{serializedName:"Creation-Time",xmlName:"Creation-Time",type:{name:"DateTimeRfc1123"}},lastModified:{serializedName:"Last-Modified",required:!0,xmlName:"Last-Modified",type:{name:"DateTimeRfc1123"}},etag:{serializedName:"Etag",required:!0,xmlName:"Etag",type:{name:"String"}},contentLength:{serializedName:"Content-Length",xmlName:"Content-Length",type:{name:"Number"}},contentType:{serializedName:"Content-Type",xmlName:"Content-Type",type:{name:"String"}},contentEncoding:{serializedName:"Content-Encoding",xmlName:"Content-Encoding",type:{name:"String"}},contentLanguage:{serializedName:"Content-Language",xmlName:"Content-Language",type:{name:"String"}},contentMD5:{serializedName:"Content-MD5",xmlName:"Content-MD5",type:{name:"ByteArray"}},contentDisposition:{serializedName:"Content-Disposition",xmlName:"Content-Disposition",type:{name:"String"}},cacheControl:{serializedName:"Cache-Control",xmlName:"Cache-Control",type:{name:"String"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},blobType:{serializedName:"BlobType",xmlName:"BlobType",type:{name:"Enum",allowedValues:["BlockBlob","PageBlob","AppendBlob"]}},leaseStatus:{serializedName:"LeaseStatus",xmlName:"LeaseStatus",type:{name:"Enum",allowedValues:["locked","unlocked"]}},leaseState:{serializedName:"LeaseState",xmlName:"LeaseState",type:{name:"Enum",allowedValues:["available","leased","expired","breaking","broken"]}},leaseDuration:{serializedName:"LeaseDuration",xmlName:"LeaseDuration",type:{name:"Enum",allowedValues:["infinite","fixed"]}},copyId:{serializedName:"CopyId",xmlName:"CopyId",type:{name:"String"}},copyStatus:{serializedName:"CopyStatus",xmlName:"CopyStatus",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},copySource:{serializedName:"CopySource",xmlName:"CopySource",type:{name:"String"}},copyProgress:{serializedName:"CopyProgress",xmlName:"CopyProgress",type:{name:"String"}},copyCompletedOn:{serializedName:"CopyCompletionTime",xmlName:"CopyCompletionTime",type:{name:"DateTimeRfc1123"}},copyStatusDescription:{serializedName:"CopyStatusDescription",xmlName:"CopyStatusDescription",type:{name:"String"}},serverEncrypted:{serializedName:"ServerEncrypted",xmlName:"ServerEncrypted",type:{name:"Boolean"}},incrementalCopy:{serializedName:"IncrementalCopy",xmlName:"IncrementalCopy",type:{name:"Boolean"}},destinationSnapshot:{serializedName:"DestinationSnapshot",xmlName:"DestinationSnapshot",type:{name:"String"}},deletedOn:{serializedName:"DeletedTime",xmlName:"DeletedTime",type:{name:"DateTimeRfc1123"}},remainingRetentionDays:{serializedName:"RemainingRetentionDays",xmlName:"RemainingRetentionDays",type:{name:"Number"}},accessTier:{serializedName:"AccessTier",xmlName:"AccessTier",type:{name:"Enum",allowedValues:["P4","P6","P10","P15","P20","P30","P40","P50","P60","P70","P80","Hot","Cool","Archive"]}},accessTierInferred:{serializedName:"AccessTierInferred",xmlName:"AccessTierInferred",type:{name:"Boolean"}},archiveStatus:{serializedName:"ArchiveStatus",xmlName:"ArchiveStatus",type:{name:"Enum",allowedValues:["rehydrate-pending-to-hot","rehydrate-pending-to-cool"]}},customerProvidedKeySha256:{serializedName:"CustomerProvidedKeySha256",xmlName:"CustomerProvidedKeySha256",type:{name:"String"}},encryptionScope:{serializedName:"EncryptionScope",xmlName:"EncryptionScope",type:{name:"String"}},accessTierChangedOn:{serializedName:"AccessTierChangeTime",xmlName:"AccessTierChangeTime",type:{name:"DateTimeRfc1123"}},tagCount:{serializedName:"TagCount",xmlName:"TagCount",type:{name:"Number"}},expiresOn:{serializedName:"Expiry-Time",xmlName:"Expiry-Time",type:{name:"DateTimeRfc1123"}},isSealed:{serializedName:"Sealed",xmlName:"Sealed",type:{name:"Boolean"}},rehydratePriority:{serializedName:"RehydratePriority",xmlName:"RehydratePriority",type:{name:"Enum",allowedValues:["High","Standard"]}},lastAccessedOn:{serializedName:"LastAccessTime",xmlName:"LastAccessTime",type:{name:"DateTimeRfc1123"}},immutabilityPolicyExpiresOn:{serializedName:"ImmutabilityPolicyUntilDate",xmlName:"ImmutabilityPolicyUntilDate",type:{name:"DateTimeRfc1123"}},immutabilityPolicyMode:{serializedName:"ImmutabilityPolicyMode",xmlName:"ImmutabilityPolicyMode",type:{name:"Enum",allowedValues:["Mutable","Unlocked","Locked"]}},legalHold:{serializedName:"LegalHold",xmlName:"LegalHold",type:{name:"Boolean"}}}}},Ne={serializedName:"ListBlobsHierarchySegmentResponse",xmlName:"EnumerationResults",type:{name:"Composite",className:"ListBlobsHierarchySegmentResponse",modelProperties:{serviceEndpoint:{serializedName:"ServiceEndpoint",required:!0,xmlName:"ServiceEndpoint",xmlIsAttribute:!0,type:{name:"String"}},containerName:{serializedName:"ContainerName",required:!0,xmlName:"ContainerName",xmlIsAttribute:!0,type:{name:"String"}},prefix:{serializedName:"Prefix",xmlName:"Prefix",type:{name:"String"}},marker:{serializedName:"Marker",xmlName:"Marker",type:{name:"String"}},maxPageSize:{serializedName:"MaxResults",xmlName:"MaxResults",type:{name:"Number"}},delimiter:{serializedName:"Delimiter",xmlName:"Delimiter",type:{name:"String"}},segment:{serializedName:"Segment",xmlName:"Blobs",type:{name:"Composite",className:"BlobHierarchyListSegment"}},continuationToken:{serializedName:"NextMarker",xmlName:"NextMarker",type:{name:"String"}}}}},Ce={serializedName:"BlobHierarchyListSegment",xmlName:"Blobs",type:{name:"Composite",className:"BlobHierarchyListSegment",modelProperties:{blobPrefixes:{serializedName:"BlobPrefixes",xmlName:"BlobPrefixes",xmlElementName:"BlobPrefix",type:{name:"Sequence",element:{type:{name:"Composite",className:"BlobPrefix"}}}},blobItems:{serializedName:"BlobItems",required:!0,xmlName:"BlobItems",xmlElementName:"Blob",type:{name:"Sequence",element:{type:{name:"Composite",className:"BlobItemInternal"}}}}}}},xe={serializedName:"BlobPrefix",type:{name:"Composite",className:"BlobPrefix",modelProperties:{name:{serializedName:"Name",xmlName:"Name",type:{name:"Composite",className:"BlobName"}}}}},we={serializedName:"BlockLookupList",xmlName:"BlockList",type:{name:"Composite",className:"BlockLookupList",modelProperties:{committed:{serializedName:"Committed",xmlName:"Committed",xmlElementName:"Committed",type:{name:"Sequence",element:{type:{name:"String"}}}},uncommitted:{serializedName:"Uncommitted",xmlName:"Uncommitted",xmlElementName:"Uncommitted",type:{name:"Sequence",element:{type:{name:"String"}}}},latest:{serializedName:"Latest",xmlName:"Latest",xmlElementName:"Latest",type:{name:"Sequence",element:{type:{name:"String"}}}}}}},Ee={serializedName:"BlockList",type:{name:"Composite",className:"BlockList",modelProperties:{committedBlocks:{serializedName:"CommittedBlocks",xmlName:"CommittedBlocks",xmlIsWrapped:!0,xmlElementName:"Block",type:{name:"Sequence",element:{type:{name:"Composite",className:"Block"}}}},uncommittedBlocks:{serializedName:"UncommittedBlocks",xmlName:"UncommittedBlocks",xmlIsWrapped:!0,xmlElementName:"Block",type:{name:"Sequence",element:{type:{name:"Composite",className:"Block"}}}}}}},Re={serializedName:"Block",type:{name:"Composite",className:"Block",modelProperties:{name:{serializedName:"Name",required:!0,xmlName:"Name",type:{name:"String"}},size:{serializedName:"Size",required:!0,xmlName:"Size",type:{name:"Number"}}}}},Te={serializedName:"PageList",type:{name:"Composite",className:"PageList",modelProperties:{pageRange:{serializedName:"PageRange",xmlName:"PageRange",xmlElementName:"PageRange",type:{name:"Sequence",element:{type:{name:"Composite",className:"PageRange"}}}},clearRange:{serializedName:"ClearRange",xmlName:"ClearRange",xmlElementName:"ClearRange",type:{name:"Sequence",element:{type:{name:"Composite",className:"ClearRange"}}}},continuationToken:{serializedName:"NextMarker",xmlName:"NextMarker",type:{name:"String"}}}}},Pe={serializedName:"PageRange",xmlName:"PageRange",type:{name:"Composite",className:"PageRange",modelProperties:{start:{serializedName:"Start",required:!0,xmlName:"Start",type:{name:"Number"}},end:{serializedName:"End",required:!0,xmlName:"End",type:{name:"Number"}}}}},Ie={serializedName:"ClearRange",xmlName:"ClearRange",type:{name:"Composite",className:"ClearRange",modelProperties:{start:{serializedName:"Start",required:!0,xmlName:"Start",type:{name:"Number"}},end:{serializedName:"End",required:!0,xmlName:"End",type:{name:"Number"}}}}},_e={serializedName:"QueryRequest",xmlName:"QueryRequest",type:{name:"Composite",className:"QueryRequest",modelProperties:{queryType:{serializedName:"QueryType",required:!0,xmlName:"QueryType",type:{name:"String"}},expression:{serializedName:"Expression",required:!0,xmlName:"Expression",type:{name:"String"}},inputSerialization:{serializedName:"InputSerialization",xmlName:"InputSerialization",type:{name:"Composite",className:"QuerySerialization"}},outputSerialization:{serializedName:"OutputSerialization",xmlName:"OutputSerialization",type:{name:"Composite",className:"QuerySerialization"}}}}},Ae={serializedName:"QuerySerialization",type:{name:"Composite",className:"QuerySerialization",modelProperties:{format:{serializedName:"Format",xmlName:"Format",type:{name:"Composite",className:"QueryFormat"}}}}},Oe={serializedName:"QueryFormat",type:{name:"Composite",className:"QueryFormat",modelProperties:{type:{serializedName:"Type",required:!0,xmlName:"Type",type:{name:"Enum",allowedValues:["delimited","json","arrow","parquet"]}},delimitedTextConfiguration:{serializedName:"DelimitedTextConfiguration",xmlName:"DelimitedTextConfiguration",type:{name:"Composite",className:"DelimitedTextConfiguration"}},jsonTextConfiguration:{serializedName:"JsonTextConfiguration",xmlName:"JsonTextConfiguration",type:{name:"Composite",className:"JsonTextConfiguration"}},arrowConfiguration:{serializedName:"ArrowConfiguration",xmlName:"ArrowConfiguration",type:{name:"Composite",className:"ArrowConfiguration"}},parquetTextConfiguration:{serializedName:"ParquetTextConfiguration",xmlName:"ParquetTextConfiguration",type:{name:"any"}}}}},ke={serializedName:"DelimitedTextConfiguration",xmlName:"DelimitedTextConfiguration",type:{name:"Composite",className:"DelimitedTextConfiguration",modelProperties:{columnSeparator:{serializedName:"ColumnSeparator",xmlName:"ColumnSeparator",type:{name:"String"}},fieldQuote:{serializedName:"FieldQuote",xmlName:"FieldQuote",type:{name:"String"}},recordSeparator:{serializedName:"RecordSeparator",xmlName:"RecordSeparator",type:{name:"String"}},escapeChar:{serializedName:"EscapeChar",xmlName:"EscapeChar",type:{name:"String"}},headersPresent:{serializedName:"HeadersPresent",xmlName:"HasHeaders",type:{name:"Boolean"}}}}},Me={serializedName:"JsonTextConfiguration",xmlName:"JsonTextConfiguration",type:{name:"Composite",className:"JsonTextConfiguration",modelProperties:{recordSeparator:{serializedName:"RecordSeparator",xmlName:"RecordSeparator",type:{name:"String"}}}}},qe={serializedName:"ArrowConfiguration",xmlName:"ArrowConfiguration",type:{name:"Composite",className:"ArrowConfiguration",modelProperties:{schema:{serializedName:"Schema",required:!0,xmlName:"Schema",xmlIsWrapped:!0,xmlElementName:"Field",type:{name:"Sequence",element:{type:{name:"Composite",className:"ArrowField"}}}}}}},ze={serializedName:"ArrowField",xmlName:"Field",type:{name:"Composite",className:"ArrowField",modelProperties:{type:{serializedName:"Type",required:!0,xmlName:"Type",type:{name:"String"}},name:{serializedName:"Name",xmlName:"Name",type:{name:"String"}},precision:{serializedName:"Precision",xmlName:"Precision",type:{name:"Number"}},scale:{serializedName:"Scale",xmlName:"Scale",type:{name:"Number"}}}}},Be={serializedName:"Service_setPropertiesHeaders",type:{name:"Composite",className:"ServiceSetPropertiesHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},He={serializedName:"Service_setPropertiesExceptionHeaders",type:{name:"Composite",className:"ServiceSetPropertiesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},De={serializedName:"Service_getPropertiesHeaders",type:{name:"Composite",className:"ServiceGetPropertiesHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Le={serializedName:"Service_getPropertiesExceptionHeaders",type:{name:"Composite",className:"ServiceGetPropertiesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ue={serializedName:"Service_getStatisticsHeaders",type:{name:"Composite",className:"ServiceGetStatisticsHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},je={serializedName:"Service_getStatisticsExceptionHeaders",type:{name:"Composite",className:"ServiceGetStatisticsExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Fe={serializedName:"Service_listContainersSegmentHeaders",type:{name:"Composite",className:"ServiceListContainersSegmentHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ke={serializedName:"Service_listContainersSegmentExceptionHeaders",type:{name:"Composite",className:"ServiceListContainersSegmentExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ge={serializedName:"Service_getUserDelegationKeyHeaders",type:{name:"Composite",className:"ServiceGetUserDelegationKeyHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ve={serializedName:"Service_getUserDelegationKeyExceptionHeaders",type:{name:"Composite",className:"ServiceGetUserDelegationKeyExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},$e={serializedName:"Service_getAccountInfoHeaders",type:{name:"Composite",className:"ServiceGetAccountInfoHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},skuName:{serializedName:"x-ms-sku-name",xmlName:"x-ms-sku-name",type:{name:"Enum",allowedValues:["Standard_LRS","Standard_GRS","Standard_RAGRS","Standard_ZRS","Premium_LRS"]}},accountKind:{serializedName:"x-ms-account-kind",xmlName:"x-ms-account-kind",type:{name:"Enum",allowedValues:["Storage","BlobStorage","StorageV2","FileStorage","BlockBlobStorage"]}},isHierarchicalNamespaceEnabled:{serializedName:"x-ms-is-hns-enabled",xmlName:"x-ms-is-hns-enabled",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Qe={serializedName:"Service_getAccountInfoExceptionHeaders",type:{name:"Composite",className:"ServiceGetAccountInfoExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},We={serializedName:"Service_submitBatchHeaders",type:{name:"Composite",className:"ServiceSubmitBatchHeaders",modelProperties:{contentType:{serializedName:"content-type",xmlName:"content-type",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ye={serializedName:"Service_submitBatchExceptionHeaders",type:{name:"Composite",className:"ServiceSubmitBatchExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Je={serializedName:"Service_filterBlobsHeaders",type:{name:"Composite",className:"ServiceFilterBlobsHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Xe={serializedName:"Service_filterBlobsExceptionHeaders",type:{name:"Composite",className:"ServiceFilterBlobsExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ze={serializedName:"Container_createHeaders",type:{name:"Composite",className:"ContainerCreateHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},et={serializedName:"Container_createExceptionHeaders",type:{name:"Composite",className:"ContainerCreateExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},tt={serializedName:"Container_getPropertiesHeaders",type:{name:"Composite",className:"ContainerGetPropertiesHeaders",modelProperties:{metadata:{serializedName:"x-ms-meta",xmlName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},leaseDuration:{serializedName:"x-ms-lease-duration",xmlName:"x-ms-lease-duration",type:{name:"Enum",allowedValues:["infinite","fixed"]}},leaseState:{serializedName:"x-ms-lease-state",xmlName:"x-ms-lease-state",type:{name:"Enum",allowedValues:["available","leased","expired","breaking","broken"]}},leaseStatus:{serializedName:"x-ms-lease-status",xmlName:"x-ms-lease-status",type:{name:"Enum",allowedValues:["locked","unlocked"]}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},blobPublicAccess:{serializedName:"x-ms-blob-public-access",xmlName:"x-ms-blob-public-access",type:{name:"Enum",allowedValues:["container","blob"]}},hasImmutabilityPolicy:{serializedName:"x-ms-has-immutability-policy",xmlName:"x-ms-has-immutability-policy",type:{name:"Boolean"}},hasLegalHold:{serializedName:"x-ms-has-legal-hold",xmlName:"x-ms-has-legal-hold",type:{name:"Boolean"}},defaultEncryptionScope:{serializedName:"x-ms-default-encryption-scope",xmlName:"x-ms-default-encryption-scope",type:{name:"String"}},denyEncryptionScopeOverride:{serializedName:"x-ms-deny-encryption-scope-override",xmlName:"x-ms-deny-encryption-scope-override",type:{name:"Boolean"}},isImmutableStorageWithVersioningEnabled:{serializedName:"x-ms-immutable-storage-with-versioning-enabled",xmlName:"x-ms-immutable-storage-with-versioning-enabled",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},rt={serializedName:"Container_getPropertiesExceptionHeaders",type:{name:"Composite",className:"ContainerGetPropertiesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},nt={serializedName:"Container_deleteHeaders",type:{name:"Composite",className:"ContainerDeleteHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},ot={serializedName:"Container_deleteExceptionHeaders",type:{name:"Composite",className:"ContainerDeleteExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},it={serializedName:"Container_setMetadataHeaders",type:{name:"Composite",className:"ContainerSetMetadataHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},at={serializedName:"Container_setMetadataExceptionHeaders",type:{name:"Composite",className:"ContainerSetMetadataExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},st={serializedName:"Container_getAccessPolicyHeaders",type:{name:"Composite",className:"ContainerGetAccessPolicyHeaders",modelProperties:{blobPublicAccess:{serializedName:"x-ms-blob-public-access",xmlName:"x-ms-blob-public-access",type:{name:"Enum",allowedValues:["container","blob"]}},etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},ct={serializedName:"Container_getAccessPolicyExceptionHeaders",type:{name:"Composite",className:"ContainerGetAccessPolicyExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},lt={serializedName:"Container_setAccessPolicyHeaders",type:{name:"Composite",className:"ContainerSetAccessPolicyHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},dt={serializedName:"Container_setAccessPolicyExceptionHeaders",type:{name:"Composite",className:"ContainerSetAccessPolicyExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},ut={serializedName:"Container_restoreHeaders",type:{name:"Composite",className:"ContainerRestoreHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},mt={serializedName:"Container_restoreExceptionHeaders",type:{name:"Composite",className:"ContainerRestoreExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},pt={serializedName:"Container_renameHeaders",type:{name:"Composite",className:"ContainerRenameHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},ht={serializedName:"Container_renameExceptionHeaders",type:{name:"Composite",className:"ContainerRenameExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},gt={serializedName:"Container_submitBatchHeaders",type:{name:"Composite",className:"ContainerSubmitBatchHeaders",modelProperties:{contentType:{serializedName:"content-type",xmlName:"content-type",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}}}}},ft={serializedName:"Container_submitBatchExceptionHeaders",type:{name:"Composite",className:"ContainerSubmitBatchExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},yt={serializedName:"Container_filterBlobsHeaders",type:{name:"Composite",className:"ContainerFilterBlobsHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},bt={serializedName:"Container_filterBlobsExceptionHeaders",type:{name:"Composite",className:"ContainerFilterBlobsExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},vt={serializedName:"Container_acquireLeaseHeaders",type:{name:"Composite",className:"ContainerAcquireLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},leaseId:{serializedName:"x-ms-lease-id",xmlName:"x-ms-lease-id",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},St={serializedName:"Container_acquireLeaseExceptionHeaders",type:{name:"Composite",className:"ContainerAcquireLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Nt={serializedName:"Container_releaseLeaseHeaders",type:{name:"Composite",className:"ContainerReleaseLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},Ct={serializedName:"Container_releaseLeaseExceptionHeaders",type:{name:"Composite",className:"ContainerReleaseLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},xt={serializedName:"Container_renewLeaseHeaders",type:{name:"Composite",className:"ContainerRenewLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},leaseId:{serializedName:"x-ms-lease-id",xmlName:"x-ms-lease-id",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},wt={serializedName:"Container_renewLeaseExceptionHeaders",type:{name:"Composite",className:"ContainerRenewLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Et={serializedName:"Container_breakLeaseHeaders",type:{name:"Composite",className:"ContainerBreakLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},leaseTime:{serializedName:"x-ms-lease-time",xmlName:"x-ms-lease-time",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},Rt={serializedName:"Container_breakLeaseExceptionHeaders",type:{name:"Composite",className:"ContainerBreakLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Tt={serializedName:"Container_changeLeaseHeaders",type:{name:"Composite",className:"ContainerChangeLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},leaseId:{serializedName:"x-ms-lease-id",xmlName:"x-ms-lease-id",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},Pt={serializedName:"Container_changeLeaseExceptionHeaders",type:{name:"Composite",className:"ContainerChangeLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},It={serializedName:"Container_listBlobFlatSegmentHeaders",type:{name:"Composite",className:"ContainerListBlobFlatSegmentHeaders",modelProperties:{contentType:{serializedName:"content-type",xmlName:"content-type",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},_t={serializedName:"Container_listBlobFlatSegmentExceptionHeaders",type:{name:"Composite",className:"ContainerListBlobFlatSegmentExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},At={serializedName:"Container_listBlobHierarchySegmentHeaders",type:{name:"Composite",className:"ContainerListBlobHierarchySegmentHeaders",modelProperties:{contentType:{serializedName:"content-type",xmlName:"content-type",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ot={serializedName:"Container_listBlobHierarchySegmentExceptionHeaders",type:{name:"Composite",className:"ContainerListBlobHierarchySegmentExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},kt={serializedName:"Container_getAccountInfoHeaders",type:{name:"Composite",className:"ContainerGetAccountInfoHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},skuName:{serializedName:"x-ms-sku-name",xmlName:"x-ms-sku-name",type:{name:"Enum",allowedValues:["Standard_LRS","Standard_GRS","Standard_RAGRS","Standard_ZRS","Premium_LRS"]}},accountKind:{serializedName:"x-ms-account-kind",xmlName:"x-ms-account-kind",type:{name:"Enum",allowedValues:["Storage","BlobStorage","StorageV2","FileStorage","BlockBlobStorage"]}}}}},Mt={serializedName:"Container_getAccountInfoExceptionHeaders",type:{name:"Composite",className:"ContainerGetAccountInfoExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},qt={serializedName:"Blob_downloadHeaders",type:{name:"Composite",className:"BlobDownloadHeaders",modelProperties:{lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},metadata:{serializedName:"x-ms-meta",xmlName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},objectReplicationPolicyId:{serializedName:"x-ms-or-policy-id",xmlName:"x-ms-or-policy-id",type:{name:"String"}},objectReplicationRules:{serializedName:"x-ms-or",xmlName:"x-ms-or",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-or-"},contentLength:{serializedName:"content-length",xmlName:"content-length",type:{name:"Number"}},contentType:{serializedName:"content-type",xmlName:"content-type",type:{name:"String"}},contentRange:{serializedName:"content-range",xmlName:"content-range",type:{name:"String"}},etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},contentEncoding:{serializedName:"content-encoding",xmlName:"content-encoding",type:{name:"String"}},cacheControl:{serializedName:"cache-control",xmlName:"cache-control",type:{name:"String"}},contentDisposition:{serializedName:"content-disposition",xmlName:"content-disposition",type:{name:"String"}},contentLanguage:{serializedName:"content-language",xmlName:"content-language",type:{name:"String"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},blobType:{serializedName:"x-ms-blob-type",xmlName:"x-ms-blob-type",type:{name:"Enum",allowedValues:["BlockBlob","PageBlob","AppendBlob"]}},copyCompletedOn:{serializedName:"x-ms-copy-completion-time",xmlName:"x-ms-copy-completion-time",type:{name:"DateTimeRfc1123"}},copyStatusDescription:{serializedName:"x-ms-copy-status-description",xmlName:"x-ms-copy-status-description",type:{name:"String"}},copyId:{serializedName:"x-ms-copy-id",xmlName:"x-ms-copy-id",type:{name:"String"}},copyProgress:{serializedName:"x-ms-copy-progress",xmlName:"x-ms-copy-progress",type:{name:"String"}},copySource:{serializedName:"x-ms-copy-source",xmlName:"x-ms-copy-source",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",xmlName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},leaseDuration:{serializedName:"x-ms-lease-duration",xmlName:"x-ms-lease-duration",type:{name:"Enum",allowedValues:["infinite","fixed"]}},leaseState:{serializedName:"x-ms-lease-state",xmlName:"x-ms-lease-state",type:{name:"Enum",allowedValues:["available","leased","expired","breaking","broken"]}},leaseStatus:{serializedName:"x-ms-lease-status",xmlName:"x-ms-lease-status",type:{name:"Enum",allowedValues:["locked","unlocked"]}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},isCurrentVersion:{serializedName:"x-ms-is-current-version",xmlName:"x-ms-is-current-version",type:{name:"Boolean"}},acceptRanges:{serializedName:"accept-ranges",xmlName:"accept-ranges",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},blobCommittedBlockCount:{serializedName:"x-ms-blob-committed-block-count",xmlName:"x-ms-blob-committed-block-count",type:{name:"Number"}},isServerEncrypted:{serializedName:"x-ms-server-encrypted",xmlName:"x-ms-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},blobContentMD5:{serializedName:"x-ms-blob-content-md5",xmlName:"x-ms-blob-content-md5",type:{name:"ByteArray"}},tagCount:{serializedName:"x-ms-tag-count",xmlName:"x-ms-tag-count",type:{name:"Number"}},isSealed:{serializedName:"x-ms-blob-sealed",xmlName:"x-ms-blob-sealed",type:{name:"Boolean"}},lastAccessed:{serializedName:"x-ms-last-access-time",xmlName:"x-ms-last-access-time",type:{name:"DateTimeRfc1123"}},immutabilityPolicyExpiresOn:{serializedName:"x-ms-immutability-policy-until-date",xmlName:"x-ms-immutability-policy-until-date",type:{name:"DateTimeRfc1123"}},immutabilityPolicyMode:{serializedName:"x-ms-immutability-policy-mode",xmlName:"x-ms-immutability-policy-mode",type:{name:"Enum",allowedValues:["Mutable","Unlocked","Locked"]}},legalHold:{serializedName:"x-ms-legal-hold",xmlName:"x-ms-legal-hold",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},contentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}}}}},zt={serializedName:"Blob_downloadExceptionHeaders",type:{name:"Composite",className:"BlobDownloadExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Bt={serializedName:"Blob_getPropertiesHeaders",type:{name:"Composite",className:"BlobGetPropertiesHeaders",modelProperties:{lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},createdOn:{serializedName:"x-ms-creation-time",xmlName:"x-ms-creation-time",type:{name:"DateTimeRfc1123"}},metadata:{serializedName:"x-ms-meta",xmlName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},objectReplicationPolicyId:{serializedName:"x-ms-or-policy-id",xmlName:"x-ms-or-policy-id",type:{name:"String"}},objectReplicationRules:{serializedName:"x-ms-or",xmlName:"x-ms-or",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-or-"},blobType:{serializedName:"x-ms-blob-type",xmlName:"x-ms-blob-type",type:{name:"Enum",allowedValues:["BlockBlob","PageBlob","AppendBlob"]}},copyCompletedOn:{serializedName:"x-ms-copy-completion-time",xmlName:"x-ms-copy-completion-time",type:{name:"DateTimeRfc1123"}},copyStatusDescription:{serializedName:"x-ms-copy-status-description",xmlName:"x-ms-copy-status-description",type:{name:"String"}},copyId:{serializedName:"x-ms-copy-id",xmlName:"x-ms-copy-id",type:{name:"String"}},copyProgress:{serializedName:"x-ms-copy-progress",xmlName:"x-ms-copy-progress",type:{name:"String"}},copySource:{serializedName:"x-ms-copy-source",xmlName:"x-ms-copy-source",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",xmlName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},isIncrementalCopy:{serializedName:"x-ms-incremental-copy",xmlName:"x-ms-incremental-copy",type:{name:"Boolean"}},destinationSnapshot:{serializedName:"x-ms-copy-destination-snapshot",xmlName:"x-ms-copy-destination-snapshot",type:{name:"String"}},leaseDuration:{serializedName:"x-ms-lease-duration",xmlName:"x-ms-lease-duration",type:{name:"Enum",allowedValues:["infinite","fixed"]}},leaseState:{serializedName:"x-ms-lease-state",xmlName:"x-ms-lease-state",type:{name:"Enum",allowedValues:["available","leased","expired","breaking","broken"]}},leaseStatus:{serializedName:"x-ms-lease-status",xmlName:"x-ms-lease-status",type:{name:"Enum",allowedValues:["locked","unlocked"]}},contentLength:{serializedName:"content-length",xmlName:"content-length",type:{name:"Number"}},contentType:{serializedName:"content-type",xmlName:"content-type",type:{name:"String"}},etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},contentEncoding:{serializedName:"content-encoding",xmlName:"content-encoding",type:{name:"String"}},contentDisposition:{serializedName:"content-disposition",xmlName:"content-disposition",type:{name:"String"}},contentLanguage:{serializedName:"content-language",xmlName:"content-language",type:{name:"String"}},cacheControl:{serializedName:"cache-control",xmlName:"cache-control",type:{name:"String"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},acceptRanges:{serializedName:"accept-ranges",xmlName:"accept-ranges",type:{name:"String"}},blobCommittedBlockCount:{serializedName:"x-ms-blob-committed-block-count",xmlName:"x-ms-blob-committed-block-count",type:{name:"Number"}},isServerEncrypted:{serializedName:"x-ms-server-encrypted",xmlName:"x-ms-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},accessTier:{serializedName:"x-ms-access-tier",xmlName:"x-ms-access-tier",type:{name:"String"}},accessTierInferred:{serializedName:"x-ms-access-tier-inferred",xmlName:"x-ms-access-tier-inferred",type:{name:"Boolean"}},archiveStatus:{serializedName:"x-ms-archive-status",xmlName:"x-ms-archive-status",type:{name:"String"}},accessTierChangedOn:{serializedName:"x-ms-access-tier-change-time",xmlName:"x-ms-access-tier-change-time",type:{name:"DateTimeRfc1123"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},isCurrentVersion:{serializedName:"x-ms-is-current-version",xmlName:"x-ms-is-current-version",type:{name:"Boolean"}},tagCount:{serializedName:"x-ms-tag-count",xmlName:"x-ms-tag-count",type:{name:"Number"}},expiresOn:{serializedName:"x-ms-expiry-time",xmlName:"x-ms-expiry-time",type:{name:"DateTimeRfc1123"}},isSealed:{serializedName:"x-ms-blob-sealed",xmlName:"x-ms-blob-sealed",type:{name:"Boolean"}},rehydratePriority:{serializedName:"x-ms-rehydrate-priority",xmlName:"x-ms-rehydrate-priority",type:{name:"Enum",allowedValues:["High","Standard"]}},lastAccessed:{serializedName:"x-ms-last-access-time",xmlName:"x-ms-last-access-time",type:{name:"DateTimeRfc1123"}},immutabilityPolicyExpiresOn:{serializedName:"x-ms-immutability-policy-until-date",xmlName:"x-ms-immutability-policy-until-date",type:{name:"DateTimeRfc1123"}},immutabilityPolicyMode:{serializedName:"x-ms-immutability-policy-mode",xmlName:"x-ms-immutability-policy-mode",type:{name:"Enum",allowedValues:["Mutable","Unlocked","Locked"]}},legalHold:{serializedName:"x-ms-legal-hold",xmlName:"x-ms-legal-hold",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ht={serializedName:"Blob_getPropertiesExceptionHeaders",type:{name:"Composite",className:"BlobGetPropertiesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Dt={serializedName:"Blob_deleteHeaders",type:{name:"Composite",className:"BlobDeleteHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Lt={serializedName:"Blob_deleteExceptionHeaders",type:{name:"Composite",className:"BlobDeleteExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ut={serializedName:"Blob_undeleteHeaders",type:{name:"Composite",className:"BlobUndeleteHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},jt={serializedName:"Blob_undeleteExceptionHeaders",type:{name:"Composite",className:"BlobUndeleteExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ft={serializedName:"Blob_setExpiryHeaders",type:{name:"Composite",className:"BlobSetExpiryHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},Kt={serializedName:"Blob_setExpiryExceptionHeaders",type:{name:"Composite",className:"BlobSetExpiryExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Gt={serializedName:"Blob_setHttpHeadersHeaders",type:{name:"Composite",className:"BlobSetHttpHeadersHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Vt={serializedName:"Blob_setHttpHeadersExceptionHeaders",type:{name:"Composite",className:"BlobSetHttpHeadersExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},$t={serializedName:"Blob_setImmutabilityPolicyHeaders",type:{name:"Composite",className:"BlobSetImmutabilityPolicyHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},immutabilityPolicyExpiry:{serializedName:"x-ms-immutability-policy-until-date",xmlName:"x-ms-immutability-policy-until-date",type:{name:"DateTimeRfc1123"}},immutabilityPolicyMode:{serializedName:"x-ms-immutability-policy-mode",xmlName:"x-ms-immutability-policy-mode",type:{name:"Enum",allowedValues:["Mutable","Unlocked","Locked"]}}}}},Qt={serializedName:"Blob_setImmutabilityPolicyExceptionHeaders",type:{name:"Composite",className:"BlobSetImmutabilityPolicyExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Wt={serializedName:"Blob_deleteImmutabilityPolicyHeaders",type:{name:"Composite",className:"BlobDeleteImmutabilityPolicyHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},Yt={serializedName:"Blob_deleteImmutabilityPolicyExceptionHeaders",type:{name:"Composite",className:"BlobDeleteImmutabilityPolicyExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Jt={serializedName:"Blob_setLegalHoldHeaders",type:{name:"Composite",className:"BlobSetLegalHoldHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},legalHold:{serializedName:"x-ms-legal-hold",xmlName:"x-ms-legal-hold",type:{name:"Boolean"}}}}},Xt={serializedName:"Blob_setLegalHoldExceptionHeaders",type:{name:"Composite",className:"BlobSetLegalHoldExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Zt={serializedName:"Blob_setMetadataHeaders",type:{name:"Composite",className:"BlobSetMetadataHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},er={serializedName:"Blob_setMetadataExceptionHeaders",type:{name:"Composite",className:"BlobSetMetadataExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},tr={serializedName:"Blob_acquireLeaseHeaders",type:{name:"Composite",className:"BlobAcquireLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},leaseId:{serializedName:"x-ms-lease-id",xmlName:"x-ms-lease-id",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},rr={serializedName:"Blob_acquireLeaseExceptionHeaders",type:{name:"Composite",className:"BlobAcquireLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},nr={serializedName:"Blob_releaseLeaseHeaders",type:{name:"Composite",className:"BlobReleaseLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},or={serializedName:"Blob_releaseLeaseExceptionHeaders",type:{name:"Composite",className:"BlobReleaseLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},ir={serializedName:"Blob_renewLeaseHeaders",type:{name:"Composite",className:"BlobRenewLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},leaseId:{serializedName:"x-ms-lease-id",xmlName:"x-ms-lease-id",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},ar={serializedName:"Blob_renewLeaseExceptionHeaders",type:{name:"Composite",className:"BlobRenewLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},sr={serializedName:"Blob_changeLeaseHeaders",type:{name:"Composite",className:"BlobChangeLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},leaseId:{serializedName:"x-ms-lease-id",xmlName:"x-ms-lease-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},cr={serializedName:"Blob_changeLeaseExceptionHeaders",type:{name:"Composite",className:"BlobChangeLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},lr={serializedName:"Blob_breakLeaseHeaders",type:{name:"Composite",className:"BlobBreakLeaseHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},leaseTime:{serializedName:"x-ms-lease-time",xmlName:"x-ms-lease-time",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}}}}},dr={serializedName:"Blob_breakLeaseExceptionHeaders",type:{name:"Composite",className:"BlobBreakLeaseExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},ur={serializedName:"Blob_createSnapshotHeaders",type:{name:"Composite",className:"BlobCreateSnapshotHeaders",modelProperties:{snapshot:{serializedName:"x-ms-snapshot",xmlName:"x-ms-snapshot",type:{name:"String"}},etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},mr={serializedName:"Blob_createSnapshotExceptionHeaders",type:{name:"Composite",className:"BlobCreateSnapshotExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},pr={serializedName:"Blob_startCopyFromURLHeaders",type:{name:"Composite",className:"BlobStartCopyFromURLHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},copyId:{serializedName:"x-ms-copy-id",xmlName:"x-ms-copy-id",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",xmlName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},hr={serializedName:"Blob_startCopyFromURLExceptionHeaders",type:{name:"Composite",className:"BlobStartCopyFromURLExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},gr={serializedName:"Blob_copyFromURLHeaders",type:{name:"Composite",className:"BlobCopyFromURLHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},copyId:{serializedName:"x-ms-copy-id",xmlName:"x-ms-copy-id",type:{name:"String"}},copyStatus:{defaultValue:"success",isConstant:!0,serializedName:"x-ms-copy-status",type:{name:"String"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},fr={serializedName:"Blob_copyFromURLExceptionHeaders",type:{name:"Composite",className:"BlobCopyFromURLExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},yr={serializedName:"Blob_abortCopyFromURLHeaders",type:{name:"Composite",className:"BlobAbortCopyFromURLHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},br={serializedName:"Blob_abortCopyFromURLExceptionHeaders",type:{name:"Composite",className:"BlobAbortCopyFromURLExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},vr={serializedName:"Blob_setTierHeaders",type:{name:"Composite",className:"BlobSetTierHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Sr={serializedName:"Blob_setTierExceptionHeaders",type:{name:"Composite",className:"BlobSetTierExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Nr={serializedName:"Blob_getAccountInfoHeaders",type:{name:"Composite",className:"BlobGetAccountInfoHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},skuName:{serializedName:"x-ms-sku-name",xmlName:"x-ms-sku-name",type:{name:"Enum",allowedValues:["Standard_LRS","Standard_GRS","Standard_RAGRS","Standard_ZRS","Premium_LRS"]}},accountKind:{serializedName:"x-ms-account-kind",xmlName:"x-ms-account-kind",type:{name:"Enum",allowedValues:["Storage","BlobStorage","StorageV2","FileStorage","BlockBlobStorage"]}}}}},Cr={serializedName:"Blob_getAccountInfoExceptionHeaders",type:{name:"Composite",className:"BlobGetAccountInfoExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},xr={serializedName:"Blob_queryHeaders",type:{name:"Composite",className:"BlobQueryHeaders",modelProperties:{lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},metadata:{serializedName:"x-ms-meta",xmlName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}}},contentLength:{serializedName:"content-length",xmlName:"content-length",type:{name:"Number"}},contentType:{serializedName:"content-type",xmlName:"content-type",type:{name:"String"}},contentRange:{serializedName:"content-range",xmlName:"content-range",type:{name:"String"}},etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},contentEncoding:{serializedName:"content-encoding",xmlName:"content-encoding",type:{name:"String"}},cacheControl:{serializedName:"cache-control",xmlName:"cache-control",type:{name:"String"}},contentDisposition:{serializedName:"content-disposition",xmlName:"content-disposition",type:{name:"String"}},contentLanguage:{serializedName:"content-language",xmlName:"content-language",type:{name:"String"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},blobType:{serializedName:"x-ms-blob-type",xmlName:"x-ms-blob-type",type:{name:"Enum",allowedValues:["BlockBlob","PageBlob","AppendBlob"]}},copyCompletionTime:{serializedName:"x-ms-copy-completion-time",xmlName:"x-ms-copy-completion-time",type:{name:"DateTimeRfc1123"}},copyStatusDescription:{serializedName:"x-ms-copy-status-description",xmlName:"x-ms-copy-status-description",type:{name:"String"}},copyId:{serializedName:"x-ms-copy-id",xmlName:"x-ms-copy-id",type:{name:"String"}},copyProgress:{serializedName:"x-ms-copy-progress",xmlName:"x-ms-copy-progress",type:{name:"String"}},copySource:{serializedName:"x-ms-copy-source",xmlName:"x-ms-copy-source",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",xmlName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},leaseDuration:{serializedName:"x-ms-lease-duration",xmlName:"x-ms-lease-duration",type:{name:"Enum",allowedValues:["infinite","fixed"]}},leaseState:{serializedName:"x-ms-lease-state",xmlName:"x-ms-lease-state",type:{name:"Enum",allowedValues:["available","leased","expired","breaking","broken"]}},leaseStatus:{serializedName:"x-ms-lease-status",xmlName:"x-ms-lease-status",type:{name:"Enum",allowedValues:["locked","unlocked"]}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},acceptRanges:{serializedName:"accept-ranges",xmlName:"accept-ranges",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},blobCommittedBlockCount:{serializedName:"x-ms-blob-committed-block-count",xmlName:"x-ms-blob-committed-block-count",type:{name:"Number"}},isServerEncrypted:{serializedName:"x-ms-server-encrypted",xmlName:"x-ms-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},blobContentMD5:{serializedName:"x-ms-blob-content-md5",xmlName:"x-ms-blob-content-md5",type:{name:"ByteArray"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},contentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}}}}},wr={serializedName:"Blob_queryExceptionHeaders",type:{name:"Composite",className:"BlobQueryExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Er={serializedName:"Blob_getTagsHeaders",type:{name:"Composite",className:"BlobGetTagsHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Rr={serializedName:"Blob_getTagsExceptionHeaders",type:{name:"Composite",className:"BlobGetTagsExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Tr={serializedName:"Blob_setTagsHeaders",type:{name:"Composite",className:"BlobSetTagsHeaders",modelProperties:{clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Pr={serializedName:"Blob_setTagsExceptionHeaders",type:{name:"Composite",className:"BlobSetTagsExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ir={serializedName:"PageBlob_createHeaders",type:{name:"Composite",className:"PageBlobCreateHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},_r={serializedName:"PageBlob_createExceptionHeaders",type:{name:"Composite",className:"PageBlobCreateExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ar={serializedName:"PageBlob_uploadPagesHeaders",type:{name:"Composite",className:"PageBlobUploadPagesHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Or={serializedName:"PageBlob_uploadPagesExceptionHeaders",type:{name:"Composite",className:"PageBlobUploadPagesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},kr={serializedName:"PageBlob_clearPagesHeaders",type:{name:"Composite",className:"PageBlobClearPagesHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Mr={serializedName:"PageBlob_clearPagesExceptionHeaders",type:{name:"Composite",className:"PageBlobClearPagesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},qr={serializedName:"PageBlob_uploadPagesFromURLHeaders",type:{name:"Composite",className:"PageBlobUploadPagesFromURLHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},zr={serializedName:"PageBlob_uploadPagesFromURLExceptionHeaders",type:{name:"Composite",className:"PageBlobUploadPagesFromURLExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Br={serializedName:"PageBlob_getPageRangesHeaders",type:{name:"Composite",className:"PageBlobGetPageRangesHeaders",modelProperties:{lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},blobContentLength:{serializedName:"x-ms-blob-content-length",xmlName:"x-ms-blob-content-length",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Hr={serializedName:"PageBlob_getPageRangesExceptionHeaders",type:{name:"Composite",className:"PageBlobGetPageRangesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Dr={serializedName:"PageBlob_getPageRangesDiffHeaders",type:{name:"Composite",className:"PageBlobGetPageRangesDiffHeaders",modelProperties:{lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},blobContentLength:{serializedName:"x-ms-blob-content-length",xmlName:"x-ms-blob-content-length",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Lr={serializedName:"PageBlob_getPageRangesDiffExceptionHeaders",type:{name:"Composite",className:"PageBlobGetPageRangesDiffExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Ur={serializedName:"PageBlob_resizeHeaders",type:{name:"Composite",className:"PageBlobResizeHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},jr={serializedName:"PageBlob_resizeExceptionHeaders",type:{name:"Composite",className:"PageBlobResizeExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Fr={serializedName:"PageBlob_updateSequenceNumberHeaders",type:{name:"Composite",className:"PageBlobUpdateSequenceNumberHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},blobSequenceNumber:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Kr={serializedName:"PageBlob_updateSequenceNumberExceptionHeaders",type:{name:"Composite",className:"PageBlobUpdateSequenceNumberExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Gr={serializedName:"PageBlob_copyIncrementalHeaders",type:{name:"Composite",className:"PageBlobCopyIncrementalHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},copyId:{serializedName:"x-ms-copy-id",xmlName:"x-ms-copy-id",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",xmlName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Vr={serializedName:"PageBlob_copyIncrementalExceptionHeaders",type:{name:"Composite",className:"PageBlobCopyIncrementalExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},$r={serializedName:"AppendBlob_createHeaders",type:{name:"Composite",className:"AppendBlobCreateHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Qr={serializedName:"AppendBlob_createExceptionHeaders",type:{name:"Composite",className:"AppendBlobCreateExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Wr={serializedName:"AppendBlob_appendBlockHeaders",type:{name:"Composite",className:"AppendBlobAppendBlockHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},blobAppendOffset:{serializedName:"x-ms-blob-append-offset",xmlName:"x-ms-blob-append-offset",type:{name:"String"}},blobCommittedBlockCount:{serializedName:"x-ms-blob-committed-block-count",xmlName:"x-ms-blob-committed-block-count",type:{name:"Number"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Yr={serializedName:"AppendBlob_appendBlockExceptionHeaders",type:{name:"Composite",className:"AppendBlobAppendBlockExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Jr={serializedName:"AppendBlob_appendBlockFromUrlHeaders",type:{name:"Composite",className:"AppendBlobAppendBlockFromUrlHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},blobAppendOffset:{serializedName:"x-ms-blob-append-offset",xmlName:"x-ms-blob-append-offset",type:{name:"String"}},blobCommittedBlockCount:{serializedName:"x-ms-blob-committed-block-count",xmlName:"x-ms-blob-committed-block-count",type:{name:"Number"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Xr={serializedName:"AppendBlob_appendBlockFromUrlExceptionHeaders",type:{name:"Composite",className:"AppendBlobAppendBlockFromUrlExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Zr={serializedName:"AppendBlob_sealHeaders",type:{name:"Composite",className:"AppendBlobSealHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isSealed:{serializedName:"x-ms-blob-sealed",xmlName:"x-ms-blob-sealed",type:{name:"Boolean"}}}}},en={serializedName:"AppendBlob_sealExceptionHeaders",type:{name:"Composite",className:"AppendBlobSealExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},tn={serializedName:"BlockBlob_uploadHeaders",type:{name:"Composite",className:"BlockBlobUploadHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},rn={serializedName:"BlockBlob_uploadExceptionHeaders",type:{name:"Composite",className:"BlockBlobUploadExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},nn={serializedName:"BlockBlob_putBlobFromUrlHeaders",type:{name:"Composite",className:"BlockBlobPutBlobFromUrlHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},on={serializedName:"BlockBlob_putBlobFromUrlExceptionHeaders",type:{name:"Composite",className:"BlockBlobPutBlobFromUrlExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},an={serializedName:"BlockBlob_stageBlockHeaders",type:{name:"Composite",className:"BlockBlobStageBlockHeaders",modelProperties:{contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},sn={serializedName:"BlockBlob_stageBlockExceptionHeaders",type:{name:"Composite",className:"BlockBlobStageBlockExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},cn={serializedName:"BlockBlob_stageBlockFromURLHeaders",type:{name:"Composite",className:"BlockBlobStageBlockFromURLHeaders",modelProperties:{contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},ln={serializedName:"BlockBlob_stageBlockFromURLExceptionHeaders",type:{name:"Composite",className:"BlockBlobStageBlockFromURLExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},dn={serializedName:"BlockBlob_commitBlockListHeaders",type:{name:"Composite",className:"BlockBlobCommitBlockListHeaders",modelProperties:{etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",xmlName:"content-md5",type:{name:"ByteArray"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},versionId:{serializedName:"x-ms-version-id",xmlName:"x-ms-version-id",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",xmlName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},encryptionKeySha256:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}},encryptionScope:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},un={serializedName:"BlockBlob_commitBlockListExceptionHeaders",type:{name:"Composite",className:"BlockBlobCommitBlockListExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},mn={serializedName:"BlockBlob_getBlockListHeaders",type:{name:"Composite",className:"BlockBlobGetBlockListHeaders",modelProperties:{lastModified:{serializedName:"last-modified",xmlName:"last-modified",type:{name:"DateTimeRfc1123"}},etag:{serializedName:"etag",xmlName:"etag",type:{name:"String"}},contentType:{serializedName:"content-type",xmlName:"content-type",type:{name:"String"}},blobContentLength:{serializedName:"x-ms-blob-content-length",xmlName:"x-ms-blob-content-length",type:{name:"Number"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},pn={serializedName:"BlockBlob_getBlockListExceptionHeaders",type:{name:"Composite",className:"BlockBlobGetBlockListExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}};var hn;!function(e){e.Csv=",",e.Ssv=" ",e.Tsv="\t",e.Pipes="|",e.Multi="Multi"}(hn||(hn={}));const gn={parameterPath:["options","contentType"],mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},fn={parameterPath:"blobServiceProperties",mapper:Y},yn={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},bn={parameterPath:"url",mapper:{serializedName:"url",required:!0,xmlName:"url",type:{name:"String"}},skipEncoding:!0},vn={parameterPath:"restype",mapper:{defaultValue:"service",isConstant:!0,serializedName:"restype",type:{name:"String"}}},Sn={parameterPath:"comp",mapper:{defaultValue:"properties",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Nn={parameterPath:["options","timeoutInSeconds"],mapper:{constraints:{InclusiveMinimum:0},serializedName:"timeout",xmlName:"timeout",type:{name:"Number"}}},Cn={parameterPath:"version",mapper:{defaultValue:"2021-06-08",isConstant:!0,serializedName:"x-ms-version",type:{name:"String"}}},xn={parameterPath:["options","requestId"],mapper:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}},wn={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},En={parameterPath:"comp",mapper:{defaultValue:"list",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Rn={parameterPath:["options","prefix"],mapper:{serializedName:"prefix",xmlName:"prefix",type:{name:"String"}}},Tn={parameterPath:["options","marker"],mapper:{serializedName:"marker",xmlName:"marker",type:{name:"String"}}},Pn={parameterPath:["options","maxPageSize"],mapper:{constraints:{InclusiveMinimum:1},serializedName:"maxresults",xmlName:"maxresults",type:{name:"Number"}}},In={parameterPath:["options","include"],mapper:{serializedName:"include",xmlName:"include",xmlElementName:"ListContainersIncludeType",type:{name:"Sequence",element:{type:{name:"Enum",allowedValues:["metadata","deleted","system"]}}}},collectionFormat:hn.Csv},_n={parameterPath:"keyInfo",mapper:ce},An={parameterPath:"restype",mapper:{defaultValue:"account",isConstant:!0,serializedName:"restype",type:{name:"String"}}},On={parameterPath:"body",mapper:{serializedName:"body",required:!0,xmlName:"body",type:{name:"Stream"}}},kn={parameterPath:"comp",mapper:{defaultValue:"batch",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Mn={parameterPath:"contentLength",mapper:{serializedName:"Content-Length",required:!0,xmlName:"Content-Length",type:{name:"Number"}}},qn={parameterPath:"multipartContentType",mapper:{serializedName:"Content-Type",required:!0,xmlName:"Content-Type",type:{name:"String"}}},zn={parameterPath:"comp",mapper:{defaultValue:"blobs",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Bn={parameterPath:["options","where"],mapper:{serializedName:"where",xmlName:"where",type:{name:"String"}}},Hn={parameterPath:"restype",mapper:{defaultValue:"container",isConstant:!0,serializedName:"restype",type:{name:"String"}}},Dn={parameterPath:["options","metadata"],mapper:{serializedName:"x-ms-meta",xmlName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"}},Ln={parameterPath:["options","access"],mapper:{serializedName:"x-ms-blob-public-access",xmlName:"x-ms-blob-public-access",type:{name:"Enum",allowedValues:["container","blob"]}}},Un={parameterPath:["options","leaseAccessConditions","leaseId"],mapper:{serializedName:"x-ms-lease-id",xmlName:"x-ms-lease-id",type:{name:"String"}}},jn={parameterPath:["options","modifiedAccessConditions","ifModifiedSince"],mapper:{serializedName:"If-Modified-Since",xmlName:"If-Modified-Since",type:{name:"DateTimeRfc1123"}}},Fn={parameterPath:["options","modifiedAccessConditions","ifUnmodifiedSince"],mapper:{serializedName:"If-Unmodified-Since",xmlName:"If-Unmodified-Since",type:{name:"DateTimeRfc1123"}}},Kn={parameterPath:"comp",mapper:{defaultValue:"metadata",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Gn={parameterPath:"comp",mapper:{defaultValue:"acl",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Vn={parameterPath:"comp",mapper:{defaultValue:"undelete",isConstant:!0,serializedName:"comp",type:{name:"String"}}},$n={parameterPath:"comp",mapper:{defaultValue:"lease",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Qn={parameterPath:"action",mapper:{defaultValue:"acquire",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},Wn={parameterPath:["options","duration"],mapper:{serializedName:"x-ms-lease-duration",xmlName:"x-ms-lease-duration",type:{name:"Number"}}},Yn={parameterPath:["options","proposedLeaseId"],mapper:{serializedName:"x-ms-proposed-lease-id",xmlName:"x-ms-proposed-lease-id",type:{name:"String"}}},Jn={parameterPath:"action",mapper:{defaultValue:"release",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},Xn={parameterPath:"leaseId",mapper:{serializedName:"x-ms-lease-id",required:!0,xmlName:"x-ms-lease-id",type:{name:"String"}}},Zn={parameterPath:"action",mapper:{defaultValue:"renew",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},eo={parameterPath:"action",mapper:{defaultValue:"break",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},to={parameterPath:["options","breakPeriod"],mapper:{serializedName:"x-ms-lease-break-period",xmlName:"x-ms-lease-break-period",type:{name:"Number"}}},ro={parameterPath:"action",mapper:{defaultValue:"change",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},no={parameterPath:"proposedLeaseId",mapper:{serializedName:"x-ms-proposed-lease-id",required:!0,xmlName:"x-ms-proposed-lease-id",type:{name:"String"}}},oo={parameterPath:["options","include"],mapper:{serializedName:"include",xmlName:"include",xmlElementName:"ListBlobsIncludeItem",type:{name:"Sequence",element:{type:{name:"Enum",allowedValues:["copy","deleted","metadata","snapshots","uncommittedblobs","versions","tags","immutabilitypolicy","legalhold","deletedwithversions"]}}}},collectionFormat:hn.Csv},io={parameterPath:["options","snapshot"],mapper:{serializedName:"snapshot",xmlName:"snapshot",type:{name:"String"}}},ao={parameterPath:["options","versionId"],mapper:{serializedName:"versionid",xmlName:"versionid",type:{name:"String"}}},so={parameterPath:["options","range"],mapper:{serializedName:"x-ms-range",xmlName:"x-ms-range",type:{name:"String"}}},co={parameterPath:["options","cpkInfo","encryptionKey"],mapper:{serializedName:"x-ms-encryption-key",xmlName:"x-ms-encryption-key",type:{name:"String"}}},lo={parameterPath:["options","cpkInfo","encryptionKeySha256"],mapper:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}}},uo={parameterPath:["options","cpkInfo","encryptionAlgorithm"],mapper:{serializedName:"x-ms-encryption-algorithm",xmlName:"x-ms-encryption-algorithm",type:{name:"String"}}},mo={parameterPath:["options","modifiedAccessConditions","ifMatch"],mapper:{serializedName:"If-Match",xmlName:"If-Match",type:{name:"String"}}},po={parameterPath:["options","modifiedAccessConditions","ifNoneMatch"],mapper:{serializedName:"If-None-Match",xmlName:"If-None-Match",type:{name:"String"}}},ho={parameterPath:["options","modifiedAccessConditions","ifTags"],mapper:{serializedName:"x-ms-if-tags",xmlName:"x-ms-if-tags",type:{name:"String"}}},go={parameterPath:["options","blobHttpHeaders","blobCacheControl"],mapper:{serializedName:"x-ms-blob-cache-control",xmlName:"x-ms-blob-cache-control",type:{name:"String"}}},fo={parameterPath:["options","blobHttpHeaders","blobContentType"],mapper:{serializedName:"x-ms-blob-content-type",xmlName:"x-ms-blob-content-type",type:{name:"String"}}},yo={parameterPath:["options","blobHttpHeaders","blobContentMD5"],mapper:{serializedName:"x-ms-blob-content-md5",xmlName:"x-ms-blob-content-md5",type:{name:"ByteArray"}}},bo={parameterPath:["options","blobHttpHeaders","blobContentEncoding"],mapper:{serializedName:"x-ms-blob-content-encoding",xmlName:"x-ms-blob-content-encoding",type:{name:"String"}}},vo={parameterPath:["options","blobHttpHeaders","blobContentLanguage"],mapper:{serializedName:"x-ms-blob-content-language",xmlName:"x-ms-blob-content-language",type:{name:"String"}}},So={parameterPath:["options","blobHttpHeaders","blobContentDisposition"],mapper:{serializedName:"x-ms-blob-content-disposition",xmlName:"x-ms-blob-content-disposition",type:{name:"String"}}},No={parameterPath:"comp",mapper:{defaultValue:"immutabilityPolicies",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Co={parameterPath:["options","immutabilityPolicyExpiry"],mapper:{serializedName:"x-ms-immutability-policy-until-date",xmlName:"x-ms-immutability-policy-until-date",type:{name:"DateTimeRfc1123"}}},xo={parameterPath:["options","immutabilityPolicyMode"],mapper:{serializedName:"x-ms-immutability-policy-mode",xmlName:"x-ms-immutability-policy-mode",type:{name:"Enum",allowedValues:["Mutable","Unlocked","Locked"]}}},wo={parameterPath:["options","encryptionScope"],mapper:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}}},Eo={parameterPath:["options","tier"],mapper:{serializedName:"x-ms-access-tier",xmlName:"x-ms-access-tier",type:{name:"Enum",allowedValues:["P4","P6","P10","P15","P20","P30","P40","P50","P60","P70","P80","Hot","Cool","Archive"]}}},Ro={parameterPath:["options","rehydratePriority"],mapper:{serializedName:"x-ms-rehydrate-priority",xmlName:"x-ms-rehydrate-priority",type:{name:"Enum",allowedValues:["High","Standard"]}}},To={parameterPath:["options","sourceModifiedAccessConditions","sourceIfModifiedSince"],mapper:{serializedName:"x-ms-source-if-modified-since",xmlName:"x-ms-source-if-modified-since",type:{name:"DateTimeRfc1123"}}},Po={parameterPath:["options","sourceModifiedAccessConditions","sourceIfUnmodifiedSince"],mapper:{serializedName:"x-ms-source-if-unmodified-since",xmlName:"x-ms-source-if-unmodified-since",type:{name:"DateTimeRfc1123"}}},Io={parameterPath:["options","sourceModifiedAccessConditions","sourceIfMatch"],mapper:{serializedName:"x-ms-source-if-match",xmlName:"x-ms-source-if-match",type:{name:"String"}}},_o={parameterPath:["options","sourceModifiedAccessConditions","sourceIfNoneMatch"],mapper:{serializedName:"x-ms-source-if-none-match",xmlName:"x-ms-source-if-none-match",type:{name:"String"}}},Ao={parameterPath:["options","sourceModifiedAccessConditions","sourceIfTags"],mapper:{serializedName:"x-ms-source-if-tags",xmlName:"x-ms-source-if-tags",type:{name:"String"}}},Oo={parameterPath:"copySource",mapper:{serializedName:"x-ms-copy-source",required:!0,xmlName:"x-ms-copy-source",type:{name:"String"}}},ko={parameterPath:["options","blobTagsString"],mapper:{serializedName:"x-ms-tags",xmlName:"x-ms-tags",type:{name:"String"}}},Mo={parameterPath:["options","legalHold"],mapper:{serializedName:"x-ms-legal-hold",xmlName:"x-ms-legal-hold",type:{name:"Boolean"}}},qo={parameterPath:["options","sourceContentMD5"],mapper:{serializedName:"x-ms-source-content-md5",xmlName:"x-ms-source-content-md5",type:{name:"ByteArray"}}},zo={parameterPath:["options","copySourceAuthorization"],mapper:{serializedName:"x-ms-copy-source-authorization",xmlName:"x-ms-copy-source-authorization",type:{name:"String"}}},Bo={parameterPath:["options","copySourceTags"],mapper:{serializedName:"x-ms-copy-source-tag-option",xmlName:"x-ms-copy-source-tag-option",type:{name:"Enum",allowedValues:["REPLACE","COPY"]}}},Ho={parameterPath:["options","queryRequest"],mapper:_e},Do={parameterPath:"comp",mapper:{defaultValue:"tags",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Lo={parameterPath:["options","tags"],mapper:me},Uo={parameterPath:["options","transactionalContentMD5"],mapper:{serializedName:"Content-MD5",xmlName:"Content-MD5",type:{name:"ByteArray"}}},jo={parameterPath:["options","transactionalContentCrc64"],mapper:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}}},Fo={parameterPath:"blobContentLength",mapper:{serializedName:"x-ms-blob-content-length",required:!0,xmlName:"x-ms-blob-content-length",type:{name:"Number"}}},Ko={parameterPath:["options","blobSequenceNumber"],mapper:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}}},Go={parameterPath:["options","contentType"],mapper:{defaultValue:"application/octet-stream",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},Vo={parameterPath:"body",mapper:{serializedName:"body",required:!0,xmlName:"body",type:{name:"Stream"}}},$o={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Qo={parameterPath:"comp",mapper:{defaultValue:"page",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Wo={parameterPath:"pageWrite",mapper:{defaultValue:"update",isConstant:!0,serializedName:"x-ms-page-write",type:{name:"String"}}},Yo={parameterPath:["options","sequenceNumberAccessConditions","ifSequenceNumberLessThanOrEqualTo"],mapper:{serializedName:"x-ms-if-sequence-number-le",xmlName:"x-ms-if-sequence-number-le",type:{name:"Number"}}},Jo={parameterPath:["options","sequenceNumberAccessConditions","ifSequenceNumberLessThan"],mapper:{serializedName:"x-ms-if-sequence-number-lt",xmlName:"x-ms-if-sequence-number-lt",type:{name:"Number"}}},Xo={parameterPath:["options","sequenceNumberAccessConditions","ifSequenceNumberEqualTo"],mapper:{serializedName:"x-ms-if-sequence-number-eq",xmlName:"x-ms-if-sequence-number-eq",type:{name:"Number"}}},Zo={parameterPath:"sourceUrl",mapper:{serializedName:"x-ms-copy-source",required:!0,xmlName:"x-ms-copy-source",type:{name:"String"}}},ei={parameterPath:["options","sourceContentCrc64"],mapper:{serializedName:"x-ms-source-content-crc64",xmlName:"x-ms-source-content-crc64",type:{name:"ByteArray"}}},ti={parameterPath:"comp",mapper:{defaultValue:"pagelist",isConstant:!0,serializedName:"comp",type:{name:"String"}}},ri={parameterPath:"comp",mapper:{defaultValue:"appendblock",isConstant:!0,serializedName:"comp",type:{name:"String"}}},ni={parameterPath:["options","appendPositionAccessConditions","maxSize"],mapper:{serializedName:"x-ms-blob-condition-maxsize",xmlName:"x-ms-blob-condition-maxsize",type:{name:"Number"}}},oi={parameterPath:["options","appendPositionAccessConditions","appendPosition"],mapper:{serializedName:"x-ms-blob-condition-appendpos",xmlName:"x-ms-blob-condition-appendpos",type:{name:"Number"}}},ii={parameterPath:["options","sourceRange"],mapper:{serializedName:"x-ms-source-range",xmlName:"x-ms-source-range",type:{name:"String"}}},ai={parameterPath:"blobType",mapper:{defaultValue:"BlockBlob",isConstant:!0,serializedName:"x-ms-blob-type",type:{name:"String"}}},si={parameterPath:"comp",mapper:{defaultValue:"block",isConstant:!0,serializedName:"comp",type:{name:"String"}}},ci={parameterPath:"blockId",mapper:{serializedName:"blockid",required:!0,xmlName:"blockid",type:{name:"String"}}},li={parameterPath:"blocks",mapper:we},di={parameterPath:"comp",mapper:{defaultValue:"blocklist",isConstant:!0,serializedName:"comp",type:{name:"String"}}};class ui{constructor(e){this.client=e}setProperties(e,t){const r={blobServiceProperties:e,options:B(t||{})};return this.client.sendOperationRequest(r,pi)}getProperties(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,hi)}getStatistics(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,gi)}listContainersSegment(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,fi)}getUserDelegationKey(e,t){const r={keyInfo:e,options:B(t||{})};return this.client.sendOperationRequest(r,yi)}getAccountInfo(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,bi)}submitBatch(e,t,r,n){const o={contentLength:e,multipartContentType:t,body:r,options:B(n||{})};return this.client.sendOperationRequest(o,vi)}filterBlobs(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Si)}}const mi=new L(n,!0),pi={path:"/",httpMethod:"PUT",responses:{202:{headersMapper:Be},default:{bodyMapper:re,headersMapper:He}},requestBody:fn,queryParameters:[vn,Sn,Nn],urlParameters:[bn],headerParameters:[gn,yn,Cn,xn],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:mi},hi={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:Y,headersMapper:De},default:{bodyMapper:re,headersMapper:Le}},queryParameters:[vn,Sn,Nn],urlParameters:[bn],headerParameters:[Cn,xn,wn],isXML:!0,serializer:mi},gi={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:ne,headersMapper:Ue},default:{bodyMapper:re,headersMapper:je}},queryParameters:[vn,Nn,{parameterPath:"comp",mapper:{defaultValue:"stats",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn],isXML:!0,serializer:mi},fi={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:ie,headersMapper:Fe},default:{bodyMapper:re,headersMapper:Ke}},queryParameters:[Nn,En,Rn,Tn,Pn,In],urlParameters:[bn],headerParameters:[Cn,xn,wn],isXML:!0,serializer:mi},yi={path:"/",httpMethod:"POST",responses:{200:{bodyMapper:le,headersMapper:Ge},default:{bodyMapper:re,headersMapper:Ve}},requestBody:_n,queryParameters:[vn,Nn,{parameterPath:"comp",mapper:{defaultValue:"userdelegationkey",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[gn,yn,Cn,xn],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:mi},bi={path:"/",httpMethod:"GET",responses:{200:{headersMapper:$e},default:{bodyMapper:re,headersMapper:Qe}},queryParameters:[Sn,An],urlParameters:[bn],headerParameters:[Cn,wn],isXML:!0,serializer:mi},vi={path:"/",httpMethod:"POST",responses:{202:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:We},default:{bodyMapper:re,headersMapper:Ye}},requestBody:On,queryParameters:[Nn,kn],urlParameters:[bn],headerParameters:[gn,yn,Cn,xn,Mn,qn],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:mi},Si={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:de,headersMapper:Je},default:{bodyMapper:re,headersMapper:Xe}},queryParameters:[Nn,Tn,Pn,zn,Bn],urlParameters:[bn],headerParameters:[Cn,xn,wn],isXML:!0,serializer:mi};class Ni{constructor(e){this.client=e}create(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,xi)}getProperties(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,wi)}delete(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Ei)}setMetadata(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Ri)}getAccessPolicy(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Ti)}setAccessPolicy(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Pi)}restore(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Ii)}rename(e,t){const r={sourceContainerName:e,options:B(t||{})};return this.client.sendOperationRequest(r,_i)}submitBatch(e,t,r,n){const o={contentLength:e,multipartContentType:t,body:r,options:B(n||{})};return this.client.sendOperationRequest(o,Ai)}filterBlobs(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Oi)}acquireLease(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,ki)}releaseLease(e,t){const r={leaseId:e,options:B(t||{})};return this.client.sendOperationRequest(r,Mi)}renewLease(e,t){const r={leaseId:e,options:B(t||{})};return this.client.sendOperationRequest(r,qi)}breakLease(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,zi)}changeLease(e,t,r){const n={leaseId:e,proposedLeaseId:t,options:B(r||{})};return this.client.sendOperationRequest(n,Bi)}listBlobFlatSegment(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Hi)}listBlobHierarchySegment(e,t){const r={delimiter:e,options:B(t||{})};return this.client.sendOperationRequest(r,Di)}getAccountInfo(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Li)}}const Ci=new L(n,!0),xi={path:"/{containerName}",httpMethod:"PUT",responses:{201:{headersMapper:Ze},default:{bodyMapper:re,headersMapper:et}},queryParameters:[Nn,Hn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Dn,Ln,{parameterPath:["options","containerEncryptionScope","defaultEncryptionScope"],mapper:{serializedName:"x-ms-default-encryption-scope",xmlName:"x-ms-default-encryption-scope",type:{name:"String"}}},{parameterPath:["options","containerEncryptionScope","preventEncryptionScopeOverride"],mapper:{serializedName:"x-ms-deny-encryption-scope-override",xmlName:"x-ms-deny-encryption-scope-override",type:{name:"Boolean"}}}],isXML:!0,serializer:Ci},wi={path:"/{containerName}",httpMethod:"GET",responses:{200:{headersMapper:tt},default:{bodyMapper:re,headersMapper:rt}},queryParameters:[Nn,Hn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un],isXML:!0,serializer:Ci},Ei={path:"/{containerName}",httpMethod:"DELETE",responses:{202:{headersMapper:nt},default:{bodyMapper:re,headersMapper:ot}},queryParameters:[Nn,Hn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn],isXML:!0,serializer:Ci},Ri={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:it},default:{bodyMapper:re,headersMapper:at}},queryParameters:[Nn,Hn,Kn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Dn,Un,jn],isXML:!0,serializer:Ci},Ti={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}},serializedName:"SignedIdentifiers",xmlName:"SignedIdentifiers",xmlIsWrapped:!0,xmlElementName:"SignedIdentifier"},headersMapper:st},default:{bodyMapper:re,headersMapper:ct}},queryParameters:[Nn,Hn,Gn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un],isXML:!0,serializer:Ci},Pi={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:lt},default:{bodyMapper:re,headersMapper:dt}},requestBody:{parameterPath:["options","containerAcl"],mapper:{serializedName:"containerAcl",xmlName:"SignedIdentifiers",xmlIsWrapped:!0,xmlElementName:"SignedIdentifier",type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}}}},queryParameters:[Nn,Hn,Gn],urlParameters:[bn],headerParameters:[gn,yn,Cn,xn,Ln,Un,jn,Fn],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:Ci},Ii={path:"/{containerName}",httpMethod:"PUT",responses:{201:{headersMapper:ut},default:{bodyMapper:re,headersMapper:mt}},queryParameters:[Nn,Hn,Vn],urlParameters:[bn],headerParameters:[Cn,xn,wn,{parameterPath:["options","deletedContainerName"],mapper:{serializedName:"x-ms-deleted-container-name",xmlName:"x-ms-deleted-container-name",type:{name:"String"}}},{parameterPath:["options","deletedContainerVersion"],mapper:{serializedName:"x-ms-deleted-container-version",xmlName:"x-ms-deleted-container-version",type:{name:"String"}}}],isXML:!0,serializer:Ci},_i={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:pt},default:{bodyMapper:re,headersMapper:ht}},queryParameters:[Nn,Hn,{parameterPath:"comp",mapper:{defaultValue:"rename",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,{parameterPath:"sourceContainerName",mapper:{serializedName:"x-ms-source-container-name",required:!0,xmlName:"x-ms-source-container-name",type:{name:"String"}}},{parameterPath:["options","sourceLeaseId"],mapper:{serializedName:"x-ms-source-lease-id",xmlName:"x-ms-source-lease-id",type:{name:"String"}}}],isXML:!0,serializer:Ci},Ai={path:"/{containerName}",httpMethod:"POST",responses:{202:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:gt},default:{bodyMapper:re,headersMapper:ft}},requestBody:On,queryParameters:[Nn,kn,Hn],urlParameters:[bn],headerParameters:[gn,yn,Cn,xn,Mn,qn],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:Ci},Oi={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:de,headersMapper:yt},default:{bodyMapper:re,headersMapper:bt}},queryParameters:[Nn,Tn,Pn,zn,Bn,Hn],urlParameters:[bn],headerParameters:[Cn,xn,wn],isXML:!0,serializer:Ci},ki={path:"/{containerName}",httpMethod:"PUT",responses:{201:{headersMapper:vt},default:{bodyMapper:re,headersMapper:St}},queryParameters:[Nn,Hn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,Qn,Wn,Yn],isXML:!0,serializer:Ci},Mi={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:Nt},default:{bodyMapper:re,headersMapper:Ct}},queryParameters:[Nn,Hn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,Jn,Xn],isXML:!0,serializer:Ci},qi={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:xt},default:{bodyMapper:re,headersMapper:wt}},queryParameters:[Nn,Hn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,Xn,Zn],isXML:!0,serializer:Ci},zi={path:"/{containerName}",httpMethod:"PUT",responses:{202:{headersMapper:Et},default:{bodyMapper:re,headersMapper:Rt}},queryParameters:[Nn,Hn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,eo,to],isXML:!0,serializer:Ci},Bi={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:Tt},default:{bodyMapper:re,headersMapper:Pt}},queryParameters:[Nn,Hn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,Xn,ro,no],isXML:!0,serializer:Ci},Hi={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:fe,headersMapper:It},default:{bodyMapper:re,headersMapper:_t}},queryParameters:[Nn,En,Rn,Tn,Pn,Hn,oo],urlParameters:[bn],headerParameters:[Cn,xn,wn],isXML:!0,serializer:Ci},Di={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:Ne,headersMapper:At},default:{bodyMapper:re,headersMapper:Ot}},queryParameters:[Nn,En,Rn,Tn,Pn,Hn,oo,{parameterPath:"delimiter",mapper:{serializedName:"delimiter",required:!0,xmlName:"delimiter",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn],isXML:!0,serializer:Ci},Li={path:"/{containerName}",httpMethod:"GET",responses:{200:{headersMapper:kt},default:{bodyMapper:re,headersMapper:Mt}},queryParameters:[Sn,An],urlParameters:[bn],headerParameters:[Cn,wn],isXML:!0,serializer:Ci};var Ui;!function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO"}(Ui||(Ui={}));class ji{constructor(e,t){this._nextPolicy=e,this._options=t}shouldLog(e){return this._options.shouldLog(e)}log(e,t){this._options.log(e,t)}}class Fi{constructor(e){this._logger=e}shouldLog(e){return!!this._logger&&e!==Ui.OFF&&e<=this._logger.minimumLogLevel}log(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)}}if(!(self.document&&self.DOMParser&&self.Node&&self.XMLSerializer))throw new Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');let Ki,Gi,Vi,$i;function Qi(){return Ki||(Ki=document.implementation.createDocument(null,null,null)),Ki}function Wi(){return Gi||(Gi=new DOMParser),Gi}function Yi(e,t){let r={};const n=e.childNodes.length,i=e.childNodes[0],a=i&&1===n&&i.nodeType===Node.TEXT_NODE&&i.nodeValue||void 0,s=function(e){return function(e){return!!e.attributes}(e)&&e.hasAttributes()?e:void 0}(e);if(s){r[o]={};for(let e=0;e<s.attributes.length;e++){const t=s.attributes[e];r[o][t.nodeName]=t.nodeValue}a&&(r[t.xmlCharKey]=a)}else 0===n?r="":a&&(r=a);if(!a)for(let o=0;o<n;o++){const n=e.childNodes[o];if(n.nodeType!==Node.TEXT_NODE){const e=Yi(n,t);r[n.nodeName]?Array.isArray(r[n.nodeName])?r[n.nodeName].push(e):r[n.nodeName]=[r[n.nodeName],e]:r[n.nodeName]=e}}return r}function Ji(e,t={}){var r,n,o;const a={rootName:null!==(r=t.rootName)&&void 0!==r?r:"root",includeRoot:null!==(n=t.includeRoot)&&void 0!==n&&n,xmlCharKey:null!==(o=t.xmlCharKey)&&void 0!==o?o:i},s=Zi(e,a.rootName,a)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+(Vi||(Vi=new XMLSerializer),Vi).serializeToString(s)}function Xi(e){const t=[];for(const r of Object.keys(e)){const n=Qi().createAttribute(r);n.value=e[r].toString(),t.push(n)}return t}function Zi(e,t,r){if(null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e){const r=Qi().createElement(t);return r.textContent=null==e?"":e.toString(),[r]}if(Array.isArray(e)){const n=[];for(const o of e)for(const e of Zi(o,t,r))n.push(e);return n}if("object"==typeof e){const n=Qi().createElement(t);for(const t of Object.keys(e))if(t===o)for(const r of Xi(e[t]))n.attributes.setNamedItem(r);else if(t===r.xmlCharKey)n.textContent=e[t].toString();else for(const o of Zi(e[t],t,r))n.appendChild(o);return[n]}throw new Error(`Illegal value passed to buildObject: ${e}`)}function ea(e,t){return{create:(r,n)=>new na(r,n,e,t)}}const ta=["application/json","text/json"],ra=["application/xml","application/atom+xml"];class na extends ji{constructor(e,t,r,n={}){var o;super(e,t),this.jsonContentTypes=r&&r.json||ta,this.xmlContentTypes=r&&r.xml||ra,this.xmlCharKey=null!==(o=n.xmlCharKey)&&void 0!==o?o:i}async sendRequest(e){return this._nextPolicy.sendRequest(e).then((e=>function(e,t,r,n={}){var o,a,s;const c={rootName:null!==(o=n.rootName)&&void 0!==o?o:"",includeRoot:null!==(a=n.includeRoot)&&void 0!==a&&a,xmlCharKey:null!==(s=n.xmlCharKey)&&void 0!==s?s:i};return function(e,t,r,n){var o;const a=e=>{const t=`Error "${e}" occurred while parsing the response body - ${r.bodyAsText}.`,n=e.code||P.PARSE_ERROR,o=new P(t,n,r.status,r.request,r);return Promise.reject(o)};if(!(null===(o=r.request.streamResponseStatusCodes)||void 0===o?void 0:o.has(r.status))&&!r.request.streamResponseBody&&r.bodyAsText){const o=r.bodyAsText,s=r.headers.get("Content-Type")||"",c=s?s.split(";").map((e=>e.toLowerCase())):[];if(0===c.length||c.some((t=>-1!==e.indexOf(t))))return new Promise((e=>{r.parsedBody=JSON.parse(o),e(r)})).catch(a);if(c.some((e=>-1!==t.indexOf(e))))return function(e,t={}){var r,n,o;try{const a={rootName:null!==(r=t.rootName)&&void 0!==r?r:"",includeRoot:null!==(n=t.includeRoot)&&void 0!==n&&n,xmlCharKey:null!==(o=t.xmlCharKey)&&void 0!==o?o:i},s=Wi().parseFromString(e,"application/xml");let c;return function(e){const t=e.getElementsByTagName("parsererror");if(t.length>0&&function(){var e;if(void 0===$i)try{$i=null!==(e=Wi().parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==e?e:""}catch(e){$i=""}return $i}())for(let e=0;e<t.length;e++)if(t[e].namespaceURI===$i)throw new Error(t[e].innerHTML)}(s),c=a.includeRoot?Yi(s,a):Yi(s.childNodes[0],a),Promise.resolve(c)}catch(e){return Promise.reject(e)}}(o,n).then((e=>(r.parsedBody=e,r))).catch(a)}return Promise.resolve(r)}(e,t,r,c).then((e=>{if(!function(e){const t=e.request.shouldDeserialize;let r;return r=void 0===t||("boolean"==typeof t?t:t(e)),r}(e))return e;const t=e.request.operationSpec;if(!t||!t.responses)return e;const o=function(e){let t;const r=e.request,n=r.operationSpec;if(n){const o=r.operationResponseGetter;t=o?o(n,e):n.responses[e.status]}return t}(e),{error:i,shouldReturnResponse:a}=function(e,t,r){var n;const o=200<=e.status&&e.status<300;if(function(e){const t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?o:r){if(!r)return{error:null,shouldReturnResponse:!1};if(!r.isError)return{error:null,shouldReturnResponse:!1}}const i=null!=r?r:t.responses.default,a=(null===(n=e.request.streamResponseStatusCodes)||void 0===n?void 0:n.has(e.status))||e.request.streamResponseBody?`Unexpected status code: ${e.status}`:e.bodyAsText,s=new P(a,void 0,e.status,e.request,e);if(!i)throw s;const c=i.bodyMapper,l=i.headersMapper;try{if(e.parsedBody){const r=e.parsedBody;let n;if(c){let e=r;t.isXML&&c.type.name===W.Sequence&&(e="object"==typeof r?r[c.xmlElementName]:[]),n=t.serializer.deserialize(c,e,"error.response.parsedBody")}const o=r.error||n||r;s.code=o.code,o.message&&(s.message=o.message),c&&(s.response.parsedBody=n)}e.headers&&l&&(s.response.parsedHeaders=t.serializer.deserialize(l,e.headers.rawHeaders(),"operationRes.parsedHeaders"))}catch(t){s.message=`Error "${t.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:s,shouldReturnResponse:!1}}(e,t,o);if(i)throw i;if(a)return e;if(o){if(o.bodyMapper){let r=e.parsedBody;t.isXML&&o.bodyMapper.type.name===W.Sequence&&(r="object"==typeof r?r[o.bodyMapper.xmlElementName]:[]);try{e.parsedBody=t.serializer.deserialize(o.bodyMapper,r,"operationRes.parsedBody",n)}catch(t){throw new P(`Error ${t} occurred in deserializing the responseBody - ${e.bodyAsText}`,void 0,e.status,e.request,e)}}else"HEAD"===t.httpMethod&&(e.parsedBody=r.status>=200&&r.status<300);o.headersMapper&&(e.parsedHeaders=t.serializer.deserialize(o.headersMapper,e.headers.rawHeaders(),"operationRes.parsedHeaders",n))}return e}))}(this.jsonContentTypes,this.xmlContentTypes,e,{xmlCharKey:this.xmlCharKey})))}}function oa(e){return e.toLowerCase()}function ia(e){if(e&&"object"==typeof e){const t=e;if("function"==typeof t.rawHeaders&&"function"==typeof t.clone&&"function"==typeof t.get&&"function"==typeof t.set&&"function"==typeof t.contains&&"function"==typeof t.remove&&"function"==typeof t.headersArray&&"function"==typeof t.headerValues&&"function"==typeof t.headerNames&&"function"==typeof t.toJson)return!0}return!1}class aa{constructor(e){if(this._headersMap={},e)for(const t in e)this.set(t,e[t])}set(e,t){this._headersMap[oa(e)]={name:e,value:t.toString()}}get(e){const t=this._headersMap[oa(e)];return t?t.value:void 0}contains(e){return!!this._headersMap[oa(e)]}remove(e){const t=this.contains(e);return delete this._headersMap[oa(e)],t}rawHeaders(){return this.toJson({preserveCase:!0})}headersArray(){const e=[];for(const t in this._headersMap)e.push(this._headersMap[t]);return e}headerNames(){const e=[],t=this.headersArray();for(let r=0;r<t.length;++r)e.push(t[r].name);return e}headerValues(){const e=[],t=this.headersArray();for(let r=0;r<t.length;++r)e.push(t[r].value);return e}toJson(e={}){const t={};if(e.preserveCase)for(const e in this._headersMap){const r=this._headersMap[e];t[r.name]=r.value}else for(const e in this._headersMap){const r=this._headersMap[e];t[oa(r.name)]=r.value}return t}toString(){return JSON.stringify(this.toJson({preserveCase:!0}))}clone(){const e={};for(const t in this._headersMap){const r=this._headersMap[t];e[r.name]=r.value}return new aa(e)}}class sa{constructor(e,t,r,n,o,i,a,s,c,d,u,m,p,h,g){this.streamResponseBody=i,this.streamResponseStatusCodes=g,this.url=e||"",this.method=t||"GET",this.headers=ia(o)?o:new aa(o),this.body=r,this.query=n,this.formData=void 0,this.withCredentials=a||!1,this.abortSignal=s,this.timeout=c||0,this.onUploadProgress=d,this.onDownloadProgress=u,this.proxySettings=m,this.keepAlive=p,this.decompressResponse=h,this.requestId=this.headers.get("x-ms-client-request-id")||l()}validateRequestProperties(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")}prepare(e){if(!e)throw new Error("options object is required");if(void 0===e.method||null===e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(void 0!==e.pathTemplate&&null!==e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||void 0!==e.url&&null!==e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!=typeof e.url)throw new Error('options.url must be of type "string".');this.url=e.url}if(e.method){const t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){const{pathTemplate:t,pathParameters:r}=e;if("string"!=typeof t)throw new Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");const n=e.baseUrl;let o=n+(n.endsWith("/")?"":"/")+(t.startsWith("/")?t.slice(1):t);const i=o.match(/({[\w-]*\s*[\w-]*})/gi);if(i&&i.length){if(!r)throw new Error(`pathTemplate: ${t} has been provided. Hence, options.pathParameters must also be provided.`);i.forEach((function(e){const n=e.slice(1,-1),i=r[n];if(null==i||"string"!=typeof i&&"object"!=typeof i){const e=JSON.stringify(r,void 0,2);throw new Error(`pathTemplate: ${t} contains the path parameter ${n} however, it is not present in parameters: ${e}.The value of the path parameter can either be a "string" of the form { ${n}: "some sample value" } or it can be an "object" of the form { "${n}": { value: "some sample value", skipUrlEncoding: true } }.`)}if("string"==typeof i.valueOf()&&(o=o.replace(e,encodeURIComponent(i))),"object"==typeof i.valueOf()){if(!i.value)throw new Error(`options.pathParameters[${n}] is of type "object" but it does not contain a "value" property.`);o=i.skipUrlEncoding?o.replace(e,i.value):o.replace(e,encodeURIComponent(i.value))}}))}this.url=o}if(e.queryParameters){const t=e.queryParameters;if("object"!=typeof t)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");const r=[];this.query={};for(const e in t){const n=t[e];if(n)if("string"==typeof n)r.push(e+"="+encodeURIComponent(n)),this.query[e]=encodeURIComponent(n);else if("object"==typeof n){if(!n.value)throw new Error(`options.queryParameters[${e}] is of type "object" but it does not contain a "value" property.`);n.skipUrlEncoding?(r.push(e+"="+n.value),this.query[e]=n.value):(r.push(e+"="+encodeURIComponent(n.value)),this.query[e]=encodeURIComponent(n.value))}}this.url+=r.join("&")}if(e.headers){const t=e.headers;for(const r of Object.keys(e.headers))this.headers.set(r,t[r])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,void 0!==e.body&&null!==e.body&&(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new L(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),e.spanOptions&&(this.spanOptions=e.spanOptions),e.tracingContext&&(this.tracingContext=e.tracingContext),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this}clone(){const e=new sa(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(e.formData=this.formData),this.operationSpec&&(e.operationSpec=this.operationSpec),this.shouldDeserialize&&(e.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(e.operationResponseGetter=this.operationResponseGetter),e}}var ca=r(951),la=r(901);const da=(0,la.YR)("core-http"),ua=(0,ca.q)({packagePrefix:"",namespace:""});function ma(e={}){return{create:(t,r)=>new pa(t,r,e)}}class pa extends ji{constructor(e,t,r){super(e,t),this.userAgent=r.userAgent}async sendRequest(e){if(!e.tracingContext)return this._nextPolicy.sendRequest(e);const t=this.tryCreateSpan(e);if(!t)return this._nextPolicy.sendRequest(e);try{const r=await this._nextPolicy.sendRequest(e);return this.tryProcessResponse(t,r),r}catch(e){throw this.tryProcessError(t,e),e}}tryCreateSpan(e){var t;try{const{span:r}=ua(`HTTP ${e.method}`,{tracingOptions:{spanOptions:Object.assign(Object.assign({},e.spanOptions),{kind:z.MU.CLIENT}),tracingContext:e.tracingContext}});if(!r.isRecording())return void r.end();const n=null===(t=e.tracingContext)||void 0===t?void 0:t.getValue(Symbol.for("az.namespace"));"string"==typeof n&&r.setAttribute("az.namespace",n),r.setAttributes({"http.method":e.method,"http.url":e.url,requestId:e.requestId}),this.userAgent&&r.setAttribute("http.user_agent",this.userAgent);const o=r.spanContext(),i=function(e){const t=[];if(e.traceId||t.push("traceId"),e.spanId||t.push("spanId"),t.length)return;const r=(e.traceFlags||0).toString(16),n=1===r.length?`0${r}`:r;return`00-${e.traceId}-${e.spanId}-${n}`}(o);if(i&&(0,z.BM)(o)){e.headers.set("traceparent",i);const t=o.traceState&&o.traceState.serialize();t&&e.headers.set("tracestate",t)}return r}catch(e){return void da.warning(`Skipping creating a tracing span due to an error: ${e.message}`)}}tryProcessError(e,t){try{e.setStatus({code:z.Qn.ERROR,message:t.message}),t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(e){da.warning(`Skipping tracing span processing due to an error: ${e.message}`)}}tryProcessResponse(e,t){try{e.setAttribute("http.status_code",t.status);const r=t.headers.get("x-ms-request-id");r&&e.setAttribute("serviceRequestId",r),e.setStatus({code:z.Qn.OK}),e.end()}catch(e){da.warning(`Skipping tracing span processing due to an error: ${e.message}`)}}}const ha={enable:!0};class ga extends ji{constructor(e,t,r){super(e,t),this.keepAliveOptions=r}async sendRequest(e){return e.keepAlive=this.keepAliveOptions.enable,this._nextPolicy.sendRequest(e)}}function fa(e="x-ms-client-request-id"){return{create:(t,r)=>new ya(t,r,e)}}class ya extends ji{constructor(e,t,r){super(e,t),this._requestIdHeaderName=r}sendRequest(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,e.requestId),this._nextPolicy.sendRequest(e)}}function ba(e={}){return{create:(t,r)=>new va(t,r,e)}}class va extends ji{constructor(e,t,{logger:r=da.info,allowedHeaderNames:n=[],allowedQueryParameters:o=[]}={}){super(e,t),this.logger=r,this.sanitizer=new E({allowedHeaderNames:n,allowedQueryParameters:o})}get allowedHeaderNames(){return this.sanitizer.allowedHeaderNames}set allowedHeaderNames(e){this.sanitizer.allowedHeaderNames=e}get allowedQueryParameters(){return this.sanitizer.allowedQueryParameters}set allowedQueryParameters(e){this.sanitizer.allowedQueryParameters=e}sendRequest(e){return this.logger.enabled?(this.logRequest(e),this._nextPolicy.sendRequest(e).then((e=>this.logResponse(e)))):this._nextPolicy.sendRequest(e)}logRequest(e){this.logger(`Request: ${this.sanitizer.sanitize(e)}`)}logResponse(e){return this.logger(`Response status code: ${e.status}`),this.logger(`Headers: ${this.sanitizer.sanitize(e.headers)}`),e}}const Sa=new Error("DisableResponseDecompressionPolicy is not supported in browser environment"),Na=(0,la.YR)("storage-blob"),Ca="2021-06-08",xa=268435456,wa=4194304,Ea="https://storage.azure.com/.default",Ra="_",Ta="snapshot",Pa="versionid",Ia="timeout",_a="Content-ID",Aa="User-Agent",Oa="",ka=["Access-Control-Allow-Origin","Cache-Control","Content-Length","Content-Type","Date","Request-Id","traceparent","Transfer-Encoding","User-Agent","x-ms-client-request-id","x-ms-date","x-ms-error-code","x-ms-request-id","x-ms-return-client-request-id","x-ms-version","Accept-Ranges","Content-Disposition","Content-Encoding","Content-Language","Content-MD5","Content-Range","ETag","Last-Modified","Server","Vary","x-ms-content-crc64","x-ms-copy-action","x-ms-copy-completion-time","x-ms-copy-id","x-ms-copy-progress","x-ms-copy-status","x-ms-has-immutability-policy","x-ms-has-legal-hold","x-ms-lease-state","x-ms-lease-status","x-ms-range","x-ms-request-server-encrypted","x-ms-server-encrypted","x-ms-snapshot","x-ms-source-range","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","x-ms-access-tier","x-ms-access-tier-change-time","x-ms-access-tier-inferred","x-ms-account-kind","x-ms-archive-status","x-ms-blob-append-offset","x-ms-blob-cache-control","x-ms-blob-committed-block-count","x-ms-blob-condition-appendpos","x-ms-blob-condition-maxsize","x-ms-blob-content-disposition","x-ms-blob-content-encoding","x-ms-blob-content-language","x-ms-blob-content-length","x-ms-blob-content-md5","x-ms-blob-content-type","x-ms-blob-public-access","x-ms-blob-sequence-number","x-ms-blob-type","x-ms-copy-destination-snapshot","x-ms-creation-time","x-ms-default-encryption-scope","x-ms-delete-snapshots","x-ms-delete-type-permanent","x-ms-deny-encryption-scope-override","x-ms-encryption-algorithm","x-ms-if-sequence-number-eq","x-ms-if-sequence-number-le","x-ms-if-sequence-number-lt","x-ms-incremental-copy","x-ms-lease-action","x-ms-lease-break-period","x-ms-lease-duration","x-ms-lease-id","x-ms-lease-time","x-ms-page-write","x-ms-proposed-lease-id","x-ms-range-get-content-md5","x-ms-rehydrate-priority","x-ms-sequence-number-action","x-ms-sku-name","x-ms-source-content-md5","x-ms-source-if-match","x-ms-source-if-modified-since","x-ms-source-if-none-match","x-ms-source-if-unmodified-since","x-ms-tag-count","x-ms-encryption-key-sha256","x-ms-if-tags","x-ms-source-if-tags"],Ma=["comp","maxresults","rscc","rscd","rsce","rscl","rsct","se","si","sip","sp","spr","sr","srt","ss","st","sv","include","marker","prefix","copyid","restype","blockid","blocklisttype","delimiter","prevsnapshot","ske","skoid","sks","skt","sktid","skv","snapshot"];function qa(e,t){const r=e.split(";");for(const e of r)if(e.trim().startsWith(t))return e.trim().match(t+"=(.*)")[1];return""}function za(e){let t="";e.startsWith("UseDevelopmentStorage=true")&&(t=function(e){let t="";if(-1!==e.search("DevelopmentStorageProxyUri=")){const r=e.split(";");for(const e of r)e.trim().startsWith("DevelopmentStorageProxyUri=")&&(t=e.trim().match("DevelopmentStorageProxyUri=(.*)")[1])}return t}(e),e="DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://127.0.0.1:10000/devstoreaccount1;");let r=qa(e,"BlobEndpoint");if(r=r.endsWith("/")?r.slice(0,-1):r,-1!==e.search("DefaultEndpointsProtocol=")&&-1!==e.search("AccountKey=")){let n="",o="",i=Buffer.from("accountKey","base64"),a="";if(o=qa(e,"AccountName"),i=Buffer.from(qa(e,"AccountKey"),"base64"),!r){n=qa(e,"DefaultEndpointsProtocol");const t=n.toLowerCase();if("https"!==t&&"http"!==t)throw new Error("Invalid DefaultEndpointsProtocol in the provided Connection String. Expecting 'https' or 'http'");if(a=qa(e,"EndpointSuffix"),!a)throw new Error("Invalid EndpointSuffix in the provided Connection String");r=`${n}://${o}.blob.${a}`}if(!o)throw new Error("Invalid AccountName in the provided Connection String");if(0===i.length)throw new Error("Invalid AccountKey in the provided Connection String");return{kind:"AccountConnString",url:r,accountName:o,accountKey:i,proxyUri:t}}{const t=qa(e,"SharedAccessSignature"),n=Va(r);if(!r)throw new Error("Invalid BlobEndpoint in the provided SAS Connection String");if(!t)throw new Error("Invalid SharedAccessSignature in the provided SAS Connection String");return{kind:"SASConnString",url:r,accountName:n,accountSas:t}}}function Ba(e,t){const r=p.parse(e);let n=r.getPath();return n=n?n.endsWith("/")?`${n}${t}`:`${n}/${t}`:t,r.setPath(n),r.toString()}function Ha(e,t,r){const n=p.parse(e);return n.setQueryParameter(t,r),n.toString()}function Da(e,t){return p.parse(e).getQueryParameterValue(t)}function La(e){return p.parse(e).getPath()}function Ua(e){const t=p.parse(e),r=t.getPath();if(!r)throw new RangeError("Invalid url without valid path.");let n=t.getQuery()||"";return n=n.trim(),""!==n&&(n=n.startsWith("?")?n:`?${n}`),`${r}${n}`}function ja(e,t){const r=p.parse(e);let n=r.getQuery();return n?n+="&"+t:n=t,r.setQuery(n),r.toString()}function Fa(e,t=!0){const r=e.toISOString();return t?r.substring(0,r.length-1)+"0000Z":r.substring(0,r.length-5)+"Z"}function Ka(e,t){e.length>42&&(e=e.slice(0,42));return r=e+function(e,t,r=" "){return String.prototype.padStart?e.padStart(t,r):(r=r||" ",e.length>t?e:((t-=e.length)>r.length&&(r+=r.repeat(t/r.length)),r.slice(0,t)+e))}(t.toString(),48-e.length,"0"),c?Buffer.from(r).toString("base64"):btoa(r);var r}function Ga(e,t){return e.toLocaleLowerCase()===t.toLocaleLowerCase()}function Va(e){const t=p.parse(e);let r;try{return r="blob"===t.getHost().split(".")[1]?t.getHost().split(".")[0]:$a(t)?t.getPath().split("/")[1]:"",r}catch(e){throw new Error("Unable to extract accountName with provided information.")}}function $a(e){if(void 0===e.getHost())return!1;const t=e.getHost()+(void 0===e.getPort()?"":":"+e.getPort());return/^.*:.*:.*$|^localhost(:[0-9]+)?$|^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])(\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])){3}(:[0-9]+)?$/.test(t)}function Qa(e){if(void 0===e)return;const t=[];for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r];t.push(`${encodeURIComponent(r)}=${encodeURIComponent(n)}`)}return t.join("&")}function Wa(e){if(void 0===e)return;const t={blobTagSet:[]};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r];t.blobTagSet.push({key:r,value:n})}return t}function Ya(e){if(void 0===e)return;const t={};for(const r of e.blobTagSet)t[r.key]=r.value;return t}function Ja(e){if(void 0!==e)switch(e.kind){case"csv":return{format:{type:"delimited",delimitedTextConfiguration:{columnSeparator:e.columnSeparator||",",fieldQuote:e.fieldQuote||"",recordSeparator:e.recordSeparator,escapeChar:e.escapeCharacter||"",headersPresent:e.hasHeaders||!1}}};case"json":return{format:{type:"json",jsonTextConfiguration:{recordSeparator:e.recordSeparator}}};case"arrow":return{format:{type:"arrow",arrowConfiguration:{schema:e.schema}}};case"parquet":return{format:{type:"parquet"}};default:throw Error("Invalid BlobQueryTextConfiguration.")}}function Xa(e){if(!e)return;if("policy-id"in e)return;const t=[];for(const r in e){const n=r.split("_"),o="or-";n[0].startsWith(o)&&(n[0]=n[0].substring(o.length));const i={ruleId:n[1],replicationStatus:e[r]},a=t.findIndex((e=>e.policyId===n[0]));a>-1?t[a].rules.push(i):t.push({policyId:n[0],rules:[i]})}return t}function Za(e,t){return e.credential=t,e}function es(e){return e?e.scheme+" "+e.value:void 0}function ts(e){return e.encoded?decodeURIComponent(e.content):e.content}function rs(e){var t;return Object.assign(Object.assign({},e),{segment:{blobPrefixes:null===(t=e.segment.blobPrefixes)||void 0===t?void 0:t.map((e=>({name:ts(e.name)}))),blobItems:e.segment.blobItems.map((e=>Object.assign(Object.assign({},e),{name:ts(e.name)})))}})}function ns(e){if(void 0!==e)return"true"===e||"false"!==e&&void 0}function os(e){return void 0!==e.$&&void 0!==e["#"]?{encoded:ns(e.$.Encoded),content:e["#"]}:{encoded:!1,content:e}}function is(e){const t=e;return t.properties=function(e){const t=e;return e["Creation-Time"]&&(t.createdOn=new Date(e["Creation-Time"]),delete t["Creation-Time"]),e["Last-Modified"]&&(t.lastModified=new Date(e["Last-Modified"]),delete t["Last-Modified"]),e.Etag&&(t.etag=e.Etag,delete t.Etag),e["Content-Length"]&&(t.contentLength=parseFloat(e["Content-Length"]),delete t["Content-Length"]),e["Content-Type"]&&(t.contentType=e["Content-Type"],delete t["Content-Type"]),e["Content-Encoding"]&&(t.contentEncoding=e["Content-Encoding"],delete t["Content-Encoding"]),e["Content-Language"]&&(t.contentLanguage=e["Content-Language"],delete t["Content-Language"]),e["Content-MD5"]&&(t.contentMD5=function(e){if(c)return Buffer.from(e,"base64");{const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}}(e["Content-MD5"]),delete t["Content-MD5"]),e["Content-Disposition"]&&(t.contentDisposition=e["Content-Disposition"],delete t["Content-Disposition"]),e["Cache-Control"]&&(t.cacheControl=e["Cache-Control"],delete t["Cache-Control"]),e["x-ms-blob-sequence-number"]&&(t.blobSequenceNumber=parseFloat(e["x-ms-blob-sequence-number"]),delete t["x-ms-blob-sequence-number"]),e.BlobType&&(t.blobType=e.BlobType,delete t.BlobType),e.LeaseStatus&&(t.leaseStatus=e.LeaseStatus,delete t.LeaseStatus),e.LeaseState&&(t.leaseState=e.LeaseState,delete t.LeaseState),e.LeaseDuration&&(t.leaseDuration=e.LeaseDuration,delete t.LeaseDuration),e.CopyId&&(t.copyId=e.CopyId,delete t.CopyId),e.CopyStatus&&(t.copyStatus=e.CopyStatus,delete t.CopyStatus),e.CopySource&&(t.copySource=e.CopySource,delete t.CopySource),e.CopyProgress&&(t.copyProgress=e.CopyProgress,delete t.CopyProgress),e.CopyCompletionTime&&(t.copyCompletedOn=new Date(e.CopyCompletionTime),delete t.CopyCompletionTime),e.CopyStatusDescription&&(t.copyStatusDescription=e.CopyStatusDescription,delete t.CopyStatusDescription),e.ServerEncrypted&&(t.serverEncrypted=ns(e.ServerEncrypted),delete t.ServerEncrypted),e.IncrementalCopy&&(t.incrementalCopy=ns(e.IncrementalCopy),delete t.IncrementalCopy),e.DestinationSnapshot&&(t.destinationSnapshot=e.DestinationSnapshot,delete t.DestinationSnapshot),e.DeletedTime&&(t.deletedOn=new Date(e.DeletedTime),delete t.DeletedTime),e.RemainingRetentionDays&&(t.remainingRetentionDays=parseFloat(e.RemainingRetentionDays),delete t.RemainingRetentionDays),e.AccessTier&&(t.accessTier=e.AccessTier,delete t.AccessTier),e.AccessTierInferred&&(t.accessTierInferred=ns(e.AccessTierInferred),delete t.AccessTierInferred),e.ArchiveStatus&&(t.archiveStatus=e.ArchiveStatus,delete t.ArchiveStatus),e.CustomerProvidedKeySha256&&(t.customerProvidedKeySha256=e.CustomerProvidedKeySha256,delete t.CustomerProvidedKeySha256),e.EncryptionScope&&(t.encryptionScope=e.EncryptionScope,delete t.EncryptionScope),e.AccessTierChangeTime&&(t.accessTierChangedOn=new Date(e.AccessTierChangeTime),delete t.AccessTierChangeTime),e.TagCount&&(t.tagCount=parseFloat(e.TagCount),delete t.TagCount),e["Expiry-Time"]&&(t.expiresOn=new Date(e["Expiry-Time"]),delete t["Expiry-Time"]),e.Sealed&&(t.isSealed=ns(e.Sealed),delete t.Sealed),e.RehydratePriority&&(t.rehydratePriority=e.RehydratePriority,delete t.RehydratePriority),e.LastAccessTime&&(t.lastAccessedOn=new Date(e.LastAccessTime),delete t.LastAccessTime),e.ImmutabilityPolicyUntilDate&&(t.immutabilityPolicyExpiresOn=new Date(e.ImmutabilityPolicyUntilDate),delete t.ImmutabilityPolicyUntilDate),e.ImmutabilityPolicyMode&&(t.immutabilityPolicyMode=e.ImmutabilityPolicyMode,delete t.ImmutabilityPolicyMode),e.LegalHold&&(t.legalHold=ns(e.LegalHold),delete t.LegalHold),t}(e.Properties),delete t.Properties,t.name=os(e.Name),delete t.Name,t.deleted=ns(e.Deleted),delete t.Deleted,e.Snapshot&&(t.snapshot=e.Snapshot,delete t.Snapshot),e.VersionId&&(t.versionId=e.VersionId,delete t.VersionId),e.IsCurrentVersion&&(t.isCurrentVersion=ns(e.IsCurrentVersion),delete t.IsCurrentVersion),e.Metadata&&(t.metadata=e.Metadata,delete t.Metadata),e.Tags&&(t.blobTags=function(e){if(void 0===e||void 0===e.TagSet||void 0===e.TagSet.Tag)return;const t=[];return e.TagSet.Tag instanceof Array?e.TagSet.Tag.forEach((e=>{t.push(ss(e))})):t.push(ss(e.TagSet.Tag)),{blobTagSet:t}}(e.Tags),delete t.Tags),e.OrMetadata&&(t.objectReplicationMetadata=e.OrMetadata,delete t.OrMetadata),e.HasVersionsOnly&&(t.hasVersionsOnly=ns(e.HasVersionsOnly),delete t.HasVersionsOnly),t}function as(e){return{name:os(e.Name)}}function ss(e){return{key:e.Key,value:e.Value}}function cs(e){const t=[];return e instanceof Array?e.forEach((e=>{t.push(is(e))})):t.push(is(e)),t}function*ls(e){let t=[],r=[];e.pageRange&&(t=e.pageRange),e.clearRange&&(r=e.clearRange);let n=0,o=0;for(;n<t.length&&o<r.length;)t[n].start<r[o].start?(yield{start:t[n].start,end:t[n].end,isClear:!1},++n):(yield{start:r[o].start,end:r[o].end,isClear:!0},++o);for(;n<t.length;++n)yield{start:t[n].start,end:t[n].end,isClear:!1};for(;o<r.length;++o)yield{start:r[o].start,end:r[o].end,isClear:!0}}class ds extends ji{constructor(e,t){super(e,t)}async sendRequest(e){return c||("GET"!==e.method.toUpperCase()&&"HEAD"!==e.method.toUpperCase()||(e.url=Ha(e.url,Ra,(new Date).getTime().toString())),e.headers.remove("Cookie"),e.headers.remove("Content-Length")),this._nextPolicy.sendRequest(e)}}class us{create(e,t){return new ds(e,t)}}var ms,ps=r(679);!function(e){e[e.EXPONENTIAL=0]="EXPONENTIAL",e[e.FIXED=1]="FIXED"}(ms||(ms={}));const hs={maxRetryDelayInMs:12e4,maxTries:4,retryDelayInMs:4e3,retryPolicyType:ms.EXPONENTIAL,secondaryHost:"",tryTimeoutInMs:void 0},gs=new ps._("The operation was aborted.");class fs extends ji{constructor(e,t,r=hs){super(e,t),this.retryOptions={retryPolicyType:r.retryPolicyType?r.retryPolicyType:hs.retryPolicyType,maxTries:r.maxTries&&r.maxTries>=1?Math.floor(r.maxTries):hs.maxTries,tryTimeoutInMs:r.tryTimeoutInMs&&r.tryTimeoutInMs>=0?r.tryTimeoutInMs:hs.tryTimeoutInMs,retryDelayInMs:r.retryDelayInMs&&r.retryDelayInMs>=0?Math.min(r.retryDelayInMs,r.maxRetryDelayInMs?r.maxRetryDelayInMs:hs.maxRetryDelayInMs):hs.retryDelayInMs,maxRetryDelayInMs:r.maxRetryDelayInMs&&r.maxRetryDelayInMs>=0?r.maxRetryDelayInMs:hs.maxRetryDelayInMs,secondaryHost:r.secondaryHost?r.secondaryHost:hs.secondaryHost}}async sendRequest(e){return this.attemptSendRequest(e,!1,1)}async attemptSendRequest(e,t,r){const n=e.clone(),o=t||!this.retryOptions.secondaryHost||!("GET"===e.method||"HEAD"===e.method||"OPTIONS"===e.method)||r%2==1;let i;o||(n.url=function(e,t){const r=p.parse(e);return r.setHost(t),r.toString()}(n.url,this.retryOptions.secondaryHost)),this.retryOptions.tryTimeoutInMs&&(n.url=Ha(n.url,Ia,Math.floor(this.retryOptions.tryTimeoutInMs/1e3).toString()));try{if(Na.info(`RetryPolicy: =====> Try=${r} ${o?"Primary":"Secondary"}`),i=await this._nextPolicy.sendRequest(n),!this.shouldRetry(o,r,i))return i;t=t||!o&&404===i.status}catch(e){if(Na.error(`RetryPolicy: Caught error, message: ${e.message}, code: ${e.code}`),!this.shouldRetry(o,r,i,e))throw e}return await this.delay(o,r,e.abortSignal),this.attemptSendRequest(e,t,++r)}shouldRetry(e,t,r,n){if(t>=this.retryOptions.maxTries)return Na.info(`RetryPolicy: Attempt(s) ${t} >= maxTries ${this.retryOptions.maxTries}, no further try.`),!1;const o=["ETIMEDOUT","ESOCKETTIMEDOUT","ECONNREFUSED","ECONNRESET","ENOENT","ENOTFOUND","TIMEOUT","EPIPE","REQUEST_SEND_ERROR"];if(n)for(const e of o)if(n.name.toUpperCase().includes(e)||n.message.toUpperCase().includes(e)||n.code&&n.code.toString().toUpperCase()===e)return Na.info(`RetryPolicy: Network error ${e} found, will retry.`),!0;if(r||n){const t=r?r.status:n?n.statusCode:0;if(!e&&404===t)return Na.info("RetryPolicy: Secondary access with 404, will retry."),!0;if(503===t||500===t)return Na.info(`RetryPolicy: Will retry for status code ${t}.`),!0}return!("PARSE_ERROR"!==(null==n?void 0:n.code)||!(null==n?void 0:n.message.startsWith('Error "Error: Unclosed root tag'))||(Na.info("RetryPolicy: Incomplete XML response likely due to service timeout, will retry."),0))}async delay(e,t,r){let n=0;if(e)switch(this.retryOptions.retryPolicyType){case ms.EXPONENTIAL:n=Math.min((Math.pow(2,t-1)-1)*this.retryOptions.retryDelayInMs,this.retryOptions.maxRetryDelayInMs);break;case ms.FIXED:n=this.retryOptions.retryDelayInMs}else n=1e3*Math.random();return Na.info(`RetryPolicy: Delay for ${n}ms`),async function(e,t,r){return new Promise(((n,o)=>{let i;const a=()=>{void 0!==i&&clearTimeout(i),o(r)};i=setTimeout((()=>{void 0!==t&&t.removeEventListener("abort",a),n()}),e),void 0!==t&&t.addEventListener("abort",a)}))}(n,r,gs)}}class ys{constructor(e){this.retryOptions=e}create(e,t){return new fs(e,t,this.retryOptions)}}class bs extends ji{sendRequest(e){return this._nextPolicy.sendRequest(this.signRequest(e))}signRequest(e){return e}}class vs extends bs{constructor(e,t){super(e,t)}}class Ss{create(e,t){throw new Error("Method should be implemented in children classes.")}}class Ns extends Ss{create(e,t){return new vs(e,t)}}var Cs=r(598);class xs extends ji{constructor(e,t,r){super(e,t),this.telemetry=r}async sendRequest(e){return c&&(e.headers||(e.headers=new aa),e.headers.get(Aa)||e.headers.set(Aa,this.telemetry)),this._nextPolicy.sendRequest(e)}}class ws{constructor(e){const t=[];if(c){if(e){const r=e.userAgentPrefix||"";r.length>0&&-1===t.indexOf(r)&&t.push(r)}const r="azsdk-js-storageblob/12.10.0";-1===t.indexOf(r)&&t.push(r);let n=`(NODE-VERSION ${process.version})`;Cs&&(n=`(NODE-VERSION ${process.version}; ${Cs.type()} ${Cs.release()})`),-1===t.indexOf(n)&&t.push(n)}this.telemetryString=t.join(" ")}create(e,t){return new xs(e,t,this.telemetryString)}}class Es{sendRequest(e){var t;const r=new XMLHttpRequest;if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");const n=e.abortSignal;if(n){if(n.aborted)return Promise.reject(new ps._("The operation was aborted."));const e=()=>{r.abort()};n.addEventListener("abort",e),r.addEventListener("readystatechange",(()=>{r.readyState===XMLHttpRequest.DONE&&n.removeEventListener("abort",e)}))}if(Rs(r.upload,e.onUploadProgress),Rs(r,e.onDownloadProgress),e.formData){const t=e.formData,r=new FormData,n=(e,t)=>{t&&Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"options")?r.append(e,t.value,t.options):r.append(e,t)};for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(let t=0;t<r.length;t++)n(e,r[t]);else n(e,r)}e.body=r,e.formData=void 0;const o=e.headers.get("Content-Type");o&&-1!==o.indexOf("multipart/form-data")&&e.headers.remove("Content-Type")}r.open(e.method,e.url),r.timeout=e.timeout,r.withCredentials=e.withCredentials;for(const t of e.headers.headersArray())r.setRequestHeader(t.name,t.value);return r.responseType=(null===(t=e.streamResponseStatusCodes)||void 0===t?void 0:t.size)||e.streamResponseBody?"blob":"text",r.send(void 0===e.body?null:e.body),"blob"===r.responseType?new Promise(((t,n)=>{!function(e,t,r,n){e.addEventListener("readystatechange",(()=>{var o;if(e.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(t.streamResponseBody||(null===(o=t.streamResponseStatusCodes)||void 0===o?void 0:o.has(e.status))){const n=new Promise(((r,n)=>{e.addEventListener("load",(()=>{r(e.response)})),Ps(t,e,n)}));r({request:t,status:e.status,headers:Ts(e),blobBody:n})}else e.addEventListener("load",(()=>{if(e.response){const o=new FileReader;o.onload=function(n){var o;const i=null===(o=n.target)||void 0===o?void 0:o.result;r({request:t,status:e.status,headers:Ts(e),bodyAsText:i})},o.onerror=function(e){n(o.error)},o.readAsText(e.response,"UTF-8")}else r({request:t,status:e.status,headers:Ts(e)})}))}))}(r,e,t,n),Ps(e,r,n)})):new Promise((function(t,n){r.addEventListener("load",(()=>t({request:e,status:r.status,headers:Ts(r),bodyAsText:r.responseText}))),Ps(e,r,n)}))}}function Rs(e,t){t&&e.addEventListener("progress",(e=>t({loadedBytes:e.loaded})))}function Ts(e){const t=new aa,r=e.getAllResponseHeaders().trim().split(/[\r\n]+/);for(const e of r){const r=e.indexOf(":"),n=e.slice(0,r),o=e.slice(r+2);t.set(n,o)}return t}function Ps(e,t,r){t.addEventListener("error",(()=>r(new P(`Failed to send request to ${e.url}`,P.REQUEST_SEND_ERROR,void 0,e))));const n=new ps._("The operation was aborted.");t.addEventListener("abort",(()=>r(n))),t.addEventListener("timeout",(()=>r(n)))}const Is=new Es;function _s(e,t,r){return new Promise(((n,o)=>{let i,a;const s=()=>o(new ps._((null==r?void 0:r.abortErrorMsg)?null==r?void 0:r.abortErrorMsg:"The operation was aborted.")),c=()=>{(null==r?void 0:r.abortSignal)&&a&&r.abortSignal.removeEventListener("abort",a)};if(a=()=>(null!=i&&clearTimeout(i),c(),s()),(null==r?void 0:r.abortSignal)&&r.abortSignal.aborted)return s();i=setTimeout((()=>{c(),n(t)}),e),(null==r?void 0:r.abortSignal)&&r.abortSignal.addEventListener("abort",a)}))}const As="authorization",Os={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function ks(e,t,r){let n=null,o=null;const i=Object.assign(Object.assign({},Os),r),a={get isRefreshing(){return null!==n},get shouldRefresh(){var e;return!a.isRefreshing&&(null!==(e=null==o?void 0:o.expiresOnTimestamp)&&void 0!==e?e:0)-i.refreshWindowInMs<Date.now()},get mustRefresh(){return null===o||o.expiresOnTimestamp-i.forcedRefreshWindowInMs<Date.now()}};function s(r){var s;return a.isRefreshing||(n=async function(e,t,r){async function n(){if(!(Date.now()<r)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(e){return null}}let o=await n();for(;null===o;)await _s(t),o=await n();return o}((()=>e.getToken(t,r)),i.retryIntervalInMs,null!==(s=null==o?void 0:o.expiresOnTimestamp)&&void 0!==s?s:Date.now()).then((e=>(n=null,o=e,o))).catch((e=>{throw n=null,o=null,e}))),n}return async e=>a.mustRefresh?s(e):(a.shouldRefresh&&s(e),o)}function Ms(e){if(!e||"object"!=typeof e)return!1;const t=e;return Array.isArray(t.factories)&&"object"==typeof t.options&&"function"==typeof t.toServiceClientOptions}class qs{constructor(e,t={}){this.factories=e,this.options=Object.assign(Object.assign({},t),{httpClient:t.httpClient||Is})}toServiceClientOptions(){return{httpClient:this.options.httpClient,requestPolicyFactories:this.factories}}}function zs(e,t={}){var r;void 0===e&&(e=new Ns);const n=new ws(t.userAgentOptions),o=[ma({userAgent:n.telemetryString}),(i=t.keepAliveOptions,{create:(e,t)=>new ga(e,t,i||ha)}),n,fa(),new us,new ys(t.retryOptions),ea(void 0,{xmlCharKey:"#"}),ba({logger:Na.info,allowedHeaderNames:ka,allowedQueryParameters:Ma})];var i;return c&&(o.push(q(t.proxyOptions)),o.push({create:(e,t)=>{throw Sa}})),o.push(k(e)?Za(function(e,t){let r=ks(e,t);class n extends ji{constructor(e,t){super(e,t)}async sendRequest(t){if(!t.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");const n=r,o=(await n({abortSignal:t.abortSignal,tracingOptions:{tracingContext:t.tracingContext}})).token;t.headers.set(As,`Bearer ${o}`);const i=await this._nextPolicy.sendRequest(t);if(401===(null==i?void 0:i.status)){const n=function(e){const t=e.headers.get("WWW-Authenticate");if(401===e.status&&t)return t}(i);if(n){const o=function(e){return`${e.slice("Bearer ".length).trim()} `.split(" ").filter((e=>e)).map((e=>(([e,t])=>({[e]:t}))(e.trim().split("=")))).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}(n),i=o.resource_id+"/.default",a=p.parse(o.authorization_uri).getPath().split("/")[1],s=ks(e,i),c=(await s({abortSignal:t.abortSignal,tracingOptions:{tracingContext:t.tracingContext},tenantId:a})).token;return r=s,t.headers.set(As,`Bearer ${c}`),this._nextPolicy.sendRequest(t)}}return i}}return{create:(e,t)=>new n(e,t)}}(e,null!==(r=t.audience)&&void 0!==r?r:Ea),e):e),new qs(o,t)}class Bs{}const Hs=["GET","HEAD"];class Ds extends ji{constructor(e,t,r=20){super(e,t),this.maxRetries=r}sendRequest(e){return this._nextPolicy.sendRequest(e).then((e=>Ls(this,e,0)))}}function Ls(e,t,r){const{request:n,status:o}=t,i=t.headers.get("location");if(i&&(300===o||301===o&&Hs.includes(n.method)||302===o&&Hs.includes(n.method)||303===o&&"POST"===n.method||307===o)&&(!e.maxRetries||r<e.maxRetries)){const t=p.parse(n.url);return t.setPath(i),n.url=t.toString(),303===o&&(n.method="GET",delete n.body),e._nextPolicy.sendRequest(n).then((t=>Ls(e,t,r+1)))}return Promise.resolve(t)}function Us(e){return"number"==typeof e}function js(e,t,r,n,o){return!!t(n,o)&&r.retryCount<e}function Fs(e,t={retryCount:0,retryInterval:0},r){r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;let n=Math.pow(2,t.retryCount-1)-1;return n*=.8*e.retryInterval+Math.floor(Math.random()*(.4*e.retryInterval)),t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}const Ks="authorization",Gs="Retry-After";var Vs;!function(e){e[e.Exponential=0]="Exponential"}(Vs||(Vs={}));class $s extends ji{constructor(e,t,r,n,o){super(e,t),this.retryCount=Us(r)?r:3,this.retryInterval=Us(n)?n:3e4,this.maxRetryInterval=Us(o)?o:9e4}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).then((t=>Qs(this,e,t))).catch((t=>Qs(this,e,t.response,void 0,t)))}}async function Qs(e,t,r,n,o){n=Fs({retryInterval:e.retryInterval,minRetryInterval:0,maxRetryInterval:e.maxRetryInterval},n,o);const i=t.abortSignal&&t.abortSignal.aborted;if(i||!js(e.retryCount,(function(e){const t=null==e?void 0:e.status;return!(503===t&&(null==r?void 0:r.headers.get(Gs))||void 0===t||t<500&&408!==t||501===t||505===t)}),n,r)){if(i||o||!r)throw n.error||new P("Failed to send the request.",P.REQUEST_SEND_ERROR,r&&r.status,r&&r.request,r);return r}da.info(`Retrying request in ${n.retryInterval}`);try{await _s(n.retryInterval);const r=await e._nextPolicy.sendRequest(t.clone());return Qs(e,t,r,n)}catch(o){return Qs(e,t,r,n,o)}}function Ws(e){return Ys(e.parameterPath,e.mapper)}function Ys(e,t){let r;return r="string"==typeof e?e:Array.isArray(e)?e.join("."):t.serializedName,r}const Js=function(){return"x-ms-useragent"};function Xs(){const e=[{key:"core-http",value:"2.2.5"}],t=function(){const e=self.navigator;return[{key:"OS",value:(e.oscpu||e.platform).replace(" ","")}]}();return function(e,t=" ",r="/"){return e.map((e=>{const t=e.value?`${r}${e.value}`:"";return`${e.key}${t}`})).join(t)}(e.concat(t))}class Zs extends ji{constructor(e,t,r,n){super(e,t),this._nextPolicy=e,this._options=t,this.headerKey=r,this.headerValue=n}sendRequest(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)}addUserAgentHeader(e){e.headers||(e.headers=new aa),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)}}const ec={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function tc(e,t){const r=function(e,t,r){let n=null,o=null;const i=Object.assign(Object.assign({},ec),r),a={get isRefreshing(){return null!==n},get shouldRefresh(){var e;return!a.isRefreshing&&(null!==(e=null==o?void 0:o.expiresOnTimestamp)&&void 0!==e?e:0)-i.refreshWindowInMs<Date.now()},get mustRefresh(){return null===o||o.expiresOnTimestamp-i.forcedRefreshWindowInMs<Date.now()}};function s(r){var s;return a.isRefreshing||(n=async function(e,t,r){async function n(){if(!(Date.now()<r)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(e){return null}}let o=await n();for(;null===o;)await _s(t),o=await n();return o}((()=>e.getToken(t,r)),i.retryIntervalInMs,null!==(s=null==o?void 0:o.expiresOnTimestamp)&&void 0!==s?s:Date.now()).then((e=>(n=null,o=e,o))).catch((e=>{throw n=null,o=null,e}))),n}return async e=>a.mustRefresh?s(e):(a.shouldRefresh&&s(e),o)}(e,t);class n extends ji{constructor(e,t){super(e,t)}async sendRequest(e){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");const{token:t}=await r({abortSignal:e.abortSignal,tracingOptions:{tracingContext:e.tracingContext}});return e.headers.set(Ks,`Bearer ${t}`),this._nextPolicy.sendRequest(e)}}return{create:(e,t)=>new n(e,t)}}let rc;class nc extends ji{constructor(e,t,r=30){super(e,t),this._retryTimeout=r}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).then((t=>function(e,t,r){if(409===r.status){const n=function(e){let t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){const e=r.error.message.match(/.*'(.*)'/i);e&&(t=e.pop())}}return t}(r.bodyAsText);if(n){const o=function(e){let t;const r=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!r||!r[0])throw new Error(`Unable to extract subscriptionId from the given url - ${e}.`);return t=r[0],t}(t.url);return async function(e,t,r,n){const o=`${t}providers/${r}/register?api-version=2016-02-01`,i=`${t}providers/${r}?api-version=2016-02-01`,a=oc(n);if(a.method="POST",a.url=o,200!==(await e._nextPolicy.sendRequest(a)).status)throw new Error(`Autoregistration of ${r} failed. Please try registering manually.`);return ic(e,i,n)}(e,o,n,t).catch((()=>!1)).then((n=>n?(t.headers.set("x-ms-client-request-id",l()),e._nextPolicy.sendRequest(t.clone())):r))}}return Promise.resolve(r)}(this,e,t)))}}function oc(e,t=!1){const r=e.clone();return t&&(r.url=e.url),r.headers.set("x-ms-client-request-id",l()),r.headers.set("Content-Type","application/json; charset=utf-8"),r}async function ic(e,t,r){const n=oc(r);n.url=t,n.method="GET";const o=await e._nextPolicy.sendRequest(n),i=o.parsedBody;return!(!o.parsedBody||!i.registrationState||"Registered"!==i.registrationState)||(await _s(1e3*e._retryTimeout),ic(e,t,r))}class ac extends ji{constructor(e,t,r){super(e,t),this.authenticationProvider=r}signRequest(e){return this.authenticationProvider.signRequest(e)}sendRequest(e){return this.signRequest(e).then((e=>this._nextPolicy.sendRequest(e)))}}class sc extends ji{constructor(e,t,r,n,o,i){super(e,t),this.retryCount=Us(r)?r:3,this.retryInterval=Us(n)?n:3e4,this.minRetryInterval=Us(o)?o:3e3,this.maxRetryInterval=Us(i)?i:9e4}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).catch((t=>cc(this,e,t.response,t)))}}async function cc(e,t,r,n,o){if(o=Fs(e,o,n),!js(e.retryCount,(function(e,t){return!(!t||!t.code||"ETIMEDOUT"!==t.code&&"ESOCKETTIMEDOUT"!==t.code&&"ECONNREFUSED"!==t.code&&"ECONNRESET"!==t.code&&"ENOENT"!==t.code)}),o,r,n))return n?Promise.reject(o.error):r;try{return await _s(o.retryInterval),e._nextPolicy.sendRequest(t.clone())}catch(n){return cc(e,t,r,n,o)}}const lc={TooManyRequests:429,ServiceUnavailable:503},dc="The operation was aborted.";class uc extends ji{constructor(e,t,r){super(e,t),this.numberOfRetries=0,this._handleResponse=r||this._defaultResponseHandler}async sendRequest(e){const t=await this._nextPolicy.sendRequest(e.clone());return t.status!==lc.TooManyRequests&&t.status!==lc.ServiceUnavailable?t:this._handleResponse(e,t)}async _defaultResponseHandler(e,t){var r;const n=t.headers.get(Gs);if(n){const t=uc.parseRetryAfterHeader(n);if(t){if(this.numberOfRetries+=1,await _s(t,void 0,{abortSignal:e.abortSignal,abortErrorMsg:dc}),null===(r=e.abortSignal)||void 0===r?void 0:r.aborted)throw new ps._(dc);return this.numberOfRetries<3?this.sendRequest(e):this._nextPolicy.sendRequest(e)}}return t}static parseRetryAfterHeader(e){const t=Number(e);return Number.isNaN(t)?uc.parseDateRetryAfterHeader(e):1e3*t}static parseDateRetryAfterHeader(e){try{const t=Date.now(),r=Date.parse(e)-t;return Number.isNaN(r)?void 0:r}catch(e){return}}}function mc(e,t){let r;return"string"==typeof e?r=e:(r=t(),"function"==typeof e&&(r=e(r))),r}function pc(e,t,r,n){return hc(e,t,r.parameterPath,r.mapper,n)}function hc(e,t,r,n,o){var i;let a;"string"==typeof r&&(r=[r]);const s=null===(i=t.options)||void 0===i?void 0:i.serializerOptions;if(Array.isArray(r)){if(r.length>0){if(n.isConstant)a=n.defaultValue;else{let o=gc(t,r);o.propertyFound||(o=gc(e,r));let i=!1;o.propertyFound||(i=n.required||"options"===r[0]&&2===r.length),a=i?n.defaultValue:o.propertyValue}const i=Ys(r,n);o.serialize(n,a,i,s)}}else{n.required&&(a={});for(const i in r){const c=n.type.modelProperties[i],l=r[i],d=hc(e,t,l,c,o),u=Ys(l,c);o.serialize(c,d,u,s),null!=d&&(a||(a={}),a[i]=d)}}return a}function gc(e,t){const r={propertyFound:!1};let n=0;for(;n<t.length;++n){const r=t[n];if(null==e||!(r in e))break;e=e[r]}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}function fc(e,t){const r=e.parsedHeaders,n=t&&t.bodyMapper,o=t=>Object.defineProperty(t,"_response",{value:e});if(n){const t=n.type.name;if("Stream"===t)return o(Object.assign(Object.assign({},r),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody}));const i="Composite"===t&&n.type.modelProperties||{},a=Object.keys(i).some((e=>""===i[e].serializedName));if("Sequence"===t||a){const t=[...e.parsedBody||[]];for(const r of Object.keys(i))i[r].serializedName&&(t[r]=e.parsedBody[r]);if(r)for(const e of Object.keys(r))t[e]=r[e];return o(t),t}if("Composite"===t||"Dictionary"===t)return o(Object.assign(Object.assign({},r),e.parsedBody))}return n||"HEAD"===e.request.method||"object"!=typeof(i=e.parsedBody)&&"function"!=typeof i||null===i?o(Object.assign(Object.assign({},r),{body:e.parsedBody})):o(Object.assign(Object.assign({},r),e.parsedBody));var i}class yc extends class{constructor(e,t){let r;if(t||(t={}),this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||(rc||(rc=new Es),rc),this._requestPolicyOptions=new Fi(t.httpPipelineLogger),Array.isArray(t.requestPolicyFactories))da.info("ServiceClient: using custom request policies"),r=t.requestPolicyFactories;else{let o;if(k(e)){da.info("ServiceClient: creating bearer token authentication policy from provided credentials");const r=()=>{let r;const n=this,o=t;return{create(t,i){const a=function(e,t){if(null==e?void 0:e.credentialScopes){const t=e.credentialScopes;return Array.isArray(t)?t.map((e=>new URL(e).toString())):new URL(t).toString()}if(t)return`${t}/.default`}(o,n.baseUri);if(!a)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==r&&(r=tc(e,a)),r.create(t,i)}}};o=r()}else if(e&&"function"==typeof e.signRequest)da.info("ServiceClient: creating signing policy from provided credentials"),n=e,o={create:(e,t)=>new ac(e,t,n)};else if(null!=e)throw new Error("The credentials argument must implement the TokenCredential interface");if(da.info("ServiceClient: using default request policies"),r=function(e,t){const r=[];t.generateClientRequestIdHeader&&r.push(fa(t.clientRequestIdHeaderName)),e&&r.push(e);const n=mc(t.userAgentHeaderName,Js),o=mc(t.userAgent,Xs);return n&&o&&r.push(function(e){const t=e&&null!=e.key?e.key:"x-ms-useragent",r=e&&null!=e.value?e.value:Xs();return{create:(e,n)=>new Zs(e,n,t,r)}}({key:n,value:o})),r.push(function(e=20){return{create:(t,r)=>new Ds(t,r,e)}}()),r.push(function(e=30){return{create:(t,r)=>new nc(t,r,e)}}(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(r.push({create:(e,t)=>new $s(e,t,undefined,undefined,undefined)}),r.push({create:(e,t)=>new sc(e,t,void 0,void 0,void 0,void 0)}),r.push({create:(e,t)=>new uc(e,t)})),r.push(ea(t.deserializationContentTypes)),c&&r.push(q(t.proxySettings)),r.push(ba({logger:da.info})),r}(o,t),t.requestPolicyFactories){const e=t.requestPolicyFactories(r);e&&(r=e)}}var n;this._requestPolicyFactories=r}sendRequest(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");let t;try{!function(e){if(e&&"object"==typeof e){const t=e;if("string"==typeof t.url&&"string"==typeof t.method&&"object"==typeof t.headers&&ia(t.headers)&&"function"==typeof t.validateRequestProperties&&"function"==typeof t.prepare&&"function"==typeof t.clone)return!0}return!1}(e)?(t=new sa,t=t.prepare(e)):(e.validateRequestProperties(),t=e)}catch(e){return Promise.reject(e)}let r=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(let e=this._requestPolicyFactories.length-1;e>=0;--e)r=this._requestPolicyFactories[e].create(r,this._requestPolicyOptions);return r.sendRequest(t)}async sendOperationRequest(e,t,r){var n;"function"==typeof e.options&&(r=e.options,e.options=void 0);const a=null===(n=e.options)||void 0===n?void 0:n.serializerOptions,s=new sa;let c;try{const r=t.baseUrl||this.baseUri;if(!r)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");s.method=t.httpMethod,s.operationSpec=t;const n=p.parse(r);if(t.path&&n.appendPath(t.path),t.urlParameters&&t.urlParameters.length>0)for(const r of t.urlParameters){let o=pc(this,e,r,t.serializer);o=t.serializer.serialize(r.mapper,o,Ws(r),a),r.skipEncoding||(o=encodeURIComponent(o)),n.replaceAll(`{${r.mapper.serializedName||Ws(r)}}`,o)}if(t.queryParameters&&t.queryParameters.length>0)for(const r of t.queryParameters){let o=pc(this,e,r,t.serializer);if(null!=o){if(o=t.serializer.serialize(r.mapper,o,Ws(r),a),void 0!==r.collectionFormat&&null!==r.collectionFormat)if(r.collectionFormat===hn.Multi){if(0===o.length)continue;for(const e in o){const t=o[e];o[e]=null==t?"":t.toString()}}else r.collectionFormat!==hn.Ssv&&r.collectionFormat!==hn.Tsv||(o=o.join(r.collectionFormat));if(!r.skipEncoding)if(Array.isArray(o))for(const e in o)void 0!==o[e]&&null!==o[e]&&(o[e]=encodeURIComponent(o[e]));else o=encodeURIComponent(o);void 0!==r.collectionFormat&&null!==r.collectionFormat&&r.collectionFormat!==hn.Multi&&r.collectionFormat!==hn.Ssv&&r.collectionFormat!==hn.Tsv&&(o=o.join(r.collectionFormat)),n.setQueryParameter(r.mapper.serializedName||Ws(r),o)}}s.url=n.toString();const l=t.contentType||this.requestContentType;if(l&&t.requestBody&&s.headers.set("Content-Type",l),t.headerParameters)for(const r of t.headerParameters){let n=pc(this,e,r,t.serializer);if(null!=n){n=t.serializer.serialize(r.mapper,n,Ws(r),a);const e=r.mapper.headerCollectionPrefix;if(e)for(const t of Object.keys(n))s.headers.set(e+t,n[t]);else s.headers.set(r.mapper.serializedName||Ws(r),n)}}const d=e.options;if(d){if(d.customHeaders)for(const e in d.customHeaders)s.headers.set(e,d.customHeaders[e]);d.abortSignal&&(s.abortSignal=d.abortSignal),d.timeout&&(s.timeout=d.timeout),d.onUploadProgress&&(s.onUploadProgress=d.onUploadProgress),d.onDownloadProgress&&(s.onDownloadProgress=d.onDownloadProgress),d.spanOptions&&(s.spanOptions=d.spanOptions),d.tracingContext&&(s.tracingContext=d.tracingContext),void 0!==d.shouldDeserialize&&null!==d.shouldDeserialize&&(s.shouldDeserialize=d.shouldDeserialize)}let u,m;s.withCredentials=this._withCredentials,function(e,t,r,n){var a,s,c,l,d,u;const m=null!==(s=null===(a=r.options)||void 0===a?void 0:a.serializerOptions)&&void 0!==s?s:{},p={rootName:null!==(c=m.rootName)&&void 0!==c?c:"",includeRoot:null!==(l=m.includeRoot)&&void 0!==l&&l,xmlCharKey:null!==(d=m.xmlCharKey)&&void 0!==d?d:i},h=m.xmlCharKey;if(n.requestBody&&n.requestBody.mapper){t.body=pc(e,r,n.requestBody,n.serializer);const i=n.requestBody.mapper,{required:a,xmlName:s,xmlElementName:c,serializedName:l,xmlNamespace:d,xmlNamespacePrefix:m}=i,g=i.type.name;try{if(void 0!==t.body&&null!==t.body||a){const e=Ws(n.requestBody);t.body=n.serializer.serialize(i,t.body,e,p);const r=g===W.Stream;if(n.isXML){const e=m?`xmlns:${m}`:"xmlns",n=function(e,t,r,n,i){if(e&&!["Composite","Sequence","Dictionary"].includes(r)){const r={};return r[i.xmlCharKey]=n,r[o]={[t]:e},r}return n}(d,e,g,t.body,p);g===W.Sequence?t.body=Ji(function(e,t,r,n){if(Array.isArray(e)||(e=[e]),!r||!n)return{[t]:e};const i={[t]:e};return i[o]={[r]:n},i}(n,c||s||l,e,d),{rootName:s||l,xmlCharKey:h}):r||(t.body=Ji(n,{rootName:s||l,xmlCharKey:h}))}else{if(g===W.String&&((null===(u=n.contentType)||void 0===u?void 0:u.match("text/plain"))||"text"===n.mediaType))return;r||(t.body=JSON.stringify(t.body))}}}catch(e){throw new Error(`Error "${e.message}" occurred in serializing the payload - ${JSON.stringify(l,void 0,"  ")}.`)}}else if(n.formDataParameters&&n.formDataParameters.length>0){t.formData={};for(const o of n.formDataParameters){const i=pc(e,r,o,n.serializer);if(null!=i){const e=o.mapper.serializedName||Ws(o);t.formData[e]=n.serializer.serialize(o.mapper,i,Ws(o),p)}}}}(this,s,e,t),void 0===s.streamResponseStatusCodes&&(s.streamResponseStatusCodes=function(e){const t=new Set;for(const r in e.responses){const n=e.responses[r];n.bodyMapper&&n.bodyMapper.type.name===W.Stream&&t.add(Number(r))}return t}(t));try{u=await this.sendRequest(s)}catch(e){m=e}m?(m.response&&(m.details=fc(m.response,t.responses[m.statusCode]||t.responses.default)),c=Promise.reject(m)):c=Promise.resolve(fc(u,t.responses[u.status]))}catch(e){c=Promise.reject(e)}const l=r;return l&&c.then((e=>l(null,e._response.parsedBody,e._response.request,e._response))).catch((e=>l(e))),c}}{constructor(e,t){if(void 0===e)throw new Error("'url' cannot be null");if(t||(t={}),!t.userAgent){const e=Xs();t.userAgent=`azure-storage-blob/12.10.0 ${e}`}super(void 0,t),this.requestContentType="application/json; charset=utf-8",this.baseUri=t.endpoint||"{url}",this.url=e,this.version=t.version||"2021-06-08"}}class bc{constructor(e,t){this.url=function(e){const t=p.parse(e);let r=t.getPath();return r=r||"/",r=encodeURIComponent(r).replace(/%2F/g,"/").replace(/'/g,"%27").replace(/\+/g,"%20").replace(/%25/g,"%"),t.setPath(r),t.toString()}(e),this.accountName=Va(e),this.pipeline=t,this.storageClientContext=new yc(this.url,t.toServiceClientOptions()),this.isHttps=Ga(function(e){return p.parse(e).getScheme()}(this.url)||"","https"),this.credential=new Ns;for(const e of this.pipeline.factories)c&&e instanceof Bs||e instanceof Ns?this.credential=e:k(e.credential)&&(this.credential=e.credential);this.storageClientContext.requestContentType=void 0}}const vc=(0,ca.q)({packagePrefix:"Azure.Storage.Blob",namespace:"Microsoft.Storage"});function Sc(e){var t,r;return{spanOptions:null===(t=null==e?void 0:e.tracingOptions)||void 0===t?void 0:t.spanOptions,tracingContext:null===(r=null==e?void 0:e.tracingOptions)||void 0===r?void 0:r.tracingContext}}class Nc{constructor(){this.read=!1,this.add=!1,this.create=!1,this.write=!1,this.delete=!1,this.deleteVersion=!1,this.tag=!1,this.move=!1,this.execute=!1,this.setImmutabilityPolicy=!1,this.permanentDelete=!1}static parse(e){const t=new Nc;for(const r of e)switch(r){case"r":t.read=!0;break;case"a":t.add=!0;break;case"c":t.create=!0;break;case"w":t.write=!0;break;case"d":t.delete=!0;break;case"x":t.deleteVersion=!0;break;case"t":t.tag=!0;break;case"m":t.move=!0;break;case"e":t.execute=!0;break;case"i":t.setImmutabilityPolicy=!0;break;case"y":t.permanentDelete=!0;break;default:throw new RangeError(`Invalid permission: ${r}`)}return t}static from(e){const t=new Nc;return e.read&&(t.read=!0),e.add&&(t.add=!0),e.create&&(t.create=!0),e.write&&(t.write=!0),e.delete&&(t.delete=!0),e.deleteVersion&&(t.deleteVersion=!0),e.tag&&(t.tag=!0),e.move&&(t.move=!0),e.execute&&(t.execute=!0),e.setImmutabilityPolicy&&(t.setImmutabilityPolicy=!0),e.permanentDelete&&(t.permanentDelete=!0),t}toString(){const e=[];return this.read&&e.push("r"),this.add&&e.push("a"),this.create&&e.push("c"),this.write&&e.push("w"),this.delete&&e.push("d"),this.deleteVersion&&e.push("x"),this.tag&&e.push("t"),this.move&&e.push("m"),this.execute&&e.push("e"),this.setImmutabilityPolicy&&e.push("i"),this.permanentDelete&&e.push("y"),e.join("")}}class Cc{constructor(){this.read=!1,this.add=!1,this.create=!1,this.write=!1,this.delete=!1,this.deleteVersion=!1,this.list=!1,this.tag=!1,this.move=!1,this.execute=!1,this.setImmutabilityPolicy=!1,this.permanentDelete=!1,this.filterByTags=!1}static parse(e){const t=new Cc;for(const r of e)switch(r){case"r":t.read=!0;break;case"a":t.add=!0;break;case"c":t.create=!0;break;case"w":t.write=!0;break;case"d":t.delete=!0;break;case"l":t.list=!0;break;case"t":t.tag=!0;break;case"x":t.deleteVersion=!0;break;case"m":t.move=!0;break;case"e":t.execute=!0;break;case"i":t.setImmutabilityPolicy=!0;break;case"y":t.permanentDelete=!0;break;case"f":t.filterByTags=!0;break;default:throw new RangeError(`Invalid permission ${r}`)}return t}static from(e){const t=new Cc;return e.read&&(t.read=!0),e.add&&(t.add=!0),e.create&&(t.create=!0),e.write&&(t.write=!0),e.delete&&(t.delete=!0),e.list&&(t.list=!0),e.deleteVersion&&(t.deleteVersion=!0),e.tag&&(t.tag=!0),e.move&&(t.move=!0),e.execute&&(t.execute=!0),e.setImmutabilityPolicy&&(t.setImmutabilityPolicy=!0),e.permanentDelete&&(t.permanentDelete=!0),e.filterByTags&&(t.filterByTags=!0),t}toString(){const e=[];return this.read&&e.push("r"),this.add&&e.push("a"),this.create&&e.push("c"),this.write&&e.push("w"),this.delete&&e.push("d"),this.deleteVersion&&e.push("x"),this.list&&e.push("l"),this.tag&&e.push("t"),this.move&&e.push("m"),this.execute&&e.push("e"),this.setImmutabilityPolicy&&e.push("i"),this.permanentDelete&&e.push("y"),this.filterByTags&&e.push("f"),e.join("")}}class xc{}function wc(e){return e.end?`${e.start}-${e.end}`:e.start}var Ec;!function(e){e.Https="https",e.HttpsAndHttp="https,http"}(Ec||(Ec={}));class Rc{constructor(e,t,r,n,o,i,a,s,c,l,d,u,m,p,h,g,f,y,b,v){this.version=e,this.signature=t,void 0!==r&&"string"!=typeof r?(this.permissions=r.permissions,this.services=r.services,this.resourceTypes=r.resourceTypes,this.protocol=r.protocol,this.startsOn=r.startsOn,this.expiresOn=r.expiresOn,this.ipRangeInner=r.ipRange,this.identifier=r.identifier,this.encryptionScope=r.encryptionScope,this.resource=r.resource,this.cacheControl=r.cacheControl,this.contentDisposition=r.contentDisposition,this.contentEncoding=r.contentEncoding,this.contentLanguage=r.contentLanguage,this.contentType=r.contentType,r.userDelegationKey&&(this.signedOid=r.userDelegationKey.signedObjectId,this.signedTenantId=r.userDelegationKey.signedTenantId,this.signedStartsOn=r.userDelegationKey.signedStartsOn,this.signedExpiresOn=r.userDelegationKey.signedExpiresOn,this.signedService=r.userDelegationKey.signedService,this.signedVersion=r.userDelegationKey.signedVersion,this.preauthorizedAgentObjectId=r.preauthorizedAgentObjectId,this.correlationId=r.correlationId)):(this.services=n,this.resourceTypes=o,this.expiresOn=s,this.permissions=r,this.protocol=i,this.startsOn=a,this.ipRangeInner=c,this.encryptionScope=v,this.identifier=l,this.resource=d,this.cacheControl=u,this.contentDisposition=m,this.contentEncoding=p,this.contentLanguage=h,this.contentType=g,f&&(this.signedOid=f.signedObjectId,this.signedTenantId=f.signedTenantId,this.signedStartsOn=f.signedStartsOn,this.signedExpiresOn=f.signedExpiresOn,this.signedService=f.signedService,this.signedVersion=f.signedVersion,this.preauthorizedAgentObjectId=y,this.correlationId=b))}get ipRange(){if(this.ipRangeInner)return{end:this.ipRangeInner.end,start:this.ipRangeInner.start}}toString(){const e=["sv","ss","srt","spr","st","se","sip","si","ses","skoid","sktid","skt","ske","sks","skv","sr","sp","sig","rscc","rscd","rsce","rscl","rsct","saoid","scid"],t=[];for(const r of e)switch(r){case"sv":this.tryAppendQueryParameter(t,r,this.version);break;case"ss":this.tryAppendQueryParameter(t,r,this.services);break;case"srt":this.tryAppendQueryParameter(t,r,this.resourceTypes);break;case"spr":this.tryAppendQueryParameter(t,r,this.protocol);break;case"st":this.tryAppendQueryParameter(t,r,this.startsOn?Fa(this.startsOn,!1):void 0);break;case"se":this.tryAppendQueryParameter(t,r,this.expiresOn?Fa(this.expiresOn,!1):void 0);break;case"sip":this.tryAppendQueryParameter(t,r,this.ipRange?wc(this.ipRange):void 0);break;case"si":this.tryAppendQueryParameter(t,r,this.identifier);break;case"ses":this.tryAppendQueryParameter(t,r,this.encryptionScope);break;case"skoid":this.tryAppendQueryParameter(t,r,this.signedOid);break;case"sktid":this.tryAppendQueryParameter(t,r,this.signedTenantId);break;case"skt":this.tryAppendQueryParameter(t,r,this.signedStartsOn?Fa(this.signedStartsOn,!1):void 0);break;case"ske":this.tryAppendQueryParameter(t,r,this.signedExpiresOn?Fa(this.signedExpiresOn,!1):void 0);break;case"sks":this.tryAppendQueryParameter(t,r,this.signedService);break;case"skv":this.tryAppendQueryParameter(t,r,this.signedVersion);break;case"sr":this.tryAppendQueryParameter(t,r,this.resource);break;case"sp":this.tryAppendQueryParameter(t,r,this.permissions);break;case"sig":this.tryAppendQueryParameter(t,r,this.signature);break;case"rscc":this.tryAppendQueryParameter(t,r,this.cacheControl);break;case"rscd":this.tryAppendQueryParameter(t,r,this.contentDisposition);break;case"rsce":this.tryAppendQueryParameter(t,r,this.contentEncoding);break;case"rscl":this.tryAppendQueryParameter(t,r,this.contentLanguage);break;case"rsct":this.tryAppendQueryParameter(t,r,this.contentType);break;case"saoid":this.tryAppendQueryParameter(t,r,this.preauthorizedAgentObjectId);break;case"scid":this.tryAppendQueryParameter(t,r,this.correlationId)}return t.join("&")}tryAppendQueryParameter(e,t,r){r&&(t=encodeURIComponent(t),r=encodeURIComponent(r),t.length>0&&r.length>0&&e.push(`${t}=${r}`))}}function Tc(e,t,r){const n=e.version?e.version:Ca,o=t instanceof Bs?t:void 0;let i;if(void 0===o&&void 0!==r&&(i=new xc(r,t)),void 0===o&&void 0===i)throw TypeError("Invalid sharedKeyCredential, userDelegationKey or accountName.");if(n>="2020-12-06")return void 0!==o?function(e,t){if(!((e=Ic(e)).identifier||e.permissions&&e.expiresOn))throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when 'identifier' is not provided.");let r,n="c",o=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",o=e.versionId)),e.permissions&&(r=e.blobName?Nc.parse(e.permissions.toString()).toString():Cc.parse(e.permissions.toString()).toString());const i=[r||"",e.startsOn?Fa(e.startsOn,!1):"",e.expiresOn?Fa(e.expiresOn,!1):"",Pc(t.accountName,e.containerName,e.blobName),e.identifier,e.ipRange?wc(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,o,e.encryptionScope,e.cacheControl?e.cacheControl:"",e.contentDisposition?e.contentDisposition:"",e.contentEncoding?e.contentEncoding:"",e.contentLanguage?e.contentLanguage:"",e.contentType?e.contentType:""].join("\n"),a=t.computeHMACSHA256(i);return new Rc(e.version,a,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,void 0,void 0,void 0,e.encryptionScope)}(e,o):function(e,t){if(!(e=Ic(e)).permissions||!e.expiresOn)throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when generating user delegation SAS.");let r,n="c",o=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",o=e.versionId)),e.permissions&&(r=e.blobName?Nc.parse(e.permissions.toString()).toString():Cc.parse(e.permissions.toString()).toString());const i=[r||"",e.startsOn?Fa(e.startsOn,!1):"",e.expiresOn?Fa(e.expiresOn,!1):"",Pc(t.accountName,e.containerName,e.blobName),t.userDelegationKey.signedObjectId,t.userDelegationKey.signedTenantId,t.userDelegationKey.signedStartsOn?Fa(t.userDelegationKey.signedStartsOn,!1):"",t.userDelegationKey.signedExpiresOn?Fa(t.userDelegationKey.signedExpiresOn,!1):"",t.userDelegationKey.signedService,t.userDelegationKey.signedVersion,e.preauthorizedAgentObjectId,void 0,e.correlationId,e.ipRange?wc(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,o,e.encryptionScope,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType].join("\n"),a=t.computeHMACSHA256(i);return new Rc(e.version,a,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,t.userDelegationKey,e.preauthorizedAgentObjectId,e.correlationId,e.encryptionScope)}(e,i);if(n>="2018-11-09")return void 0!==o?function(e,t){if(!((e=Ic(e)).identifier||e.permissions&&e.expiresOn))throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when 'identifier' is not provided.");let r,n="c",o=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",o=e.versionId)),e.permissions&&(r=e.blobName?Nc.parse(e.permissions.toString()).toString():Cc.parse(e.permissions.toString()).toString());const i=[r||"",e.startsOn?Fa(e.startsOn,!1):"",e.expiresOn?Fa(e.expiresOn,!1):"",Pc(t.accountName,e.containerName,e.blobName),e.identifier,e.ipRange?wc(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,o,e.cacheControl?e.cacheControl:"",e.contentDisposition?e.contentDisposition:"",e.contentEncoding?e.contentEncoding:"",e.contentLanguage?e.contentLanguage:"",e.contentType?e.contentType:""].join("\n"),a=t.computeHMACSHA256(i);return new Rc(e.version,a,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType)}(e,o):n>="2020-02-10"?function(e,t){if(!(e=Ic(e)).permissions||!e.expiresOn)throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when generating user delegation SAS.");let r,n="c",o=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",o=e.versionId)),e.permissions&&(r=e.blobName?Nc.parse(e.permissions.toString()).toString():Cc.parse(e.permissions.toString()).toString());const i=[r||"",e.startsOn?Fa(e.startsOn,!1):"",e.expiresOn?Fa(e.expiresOn,!1):"",Pc(t.accountName,e.containerName,e.blobName),t.userDelegationKey.signedObjectId,t.userDelegationKey.signedTenantId,t.userDelegationKey.signedStartsOn?Fa(t.userDelegationKey.signedStartsOn,!1):"",t.userDelegationKey.signedExpiresOn?Fa(t.userDelegationKey.signedExpiresOn,!1):"",t.userDelegationKey.signedService,t.userDelegationKey.signedVersion,e.preauthorizedAgentObjectId,void 0,e.correlationId,e.ipRange?wc(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,o,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType].join("\n"),a=t.computeHMACSHA256(i);return new Rc(e.version,a,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,t.userDelegationKey,e.preauthorizedAgentObjectId,e.correlationId)}(e,i):function(e,t){if(!(e=Ic(e)).permissions||!e.expiresOn)throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when generating user delegation SAS.");let r,n="c",o=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",o=e.versionId)),e.permissions&&(r=e.blobName?Nc.parse(e.permissions.toString()).toString():Cc.parse(e.permissions.toString()).toString());const i=[r||"",e.startsOn?Fa(e.startsOn,!1):"",e.expiresOn?Fa(e.expiresOn,!1):"",Pc(t.accountName,e.containerName,e.blobName),t.userDelegationKey.signedObjectId,t.userDelegationKey.signedTenantId,t.userDelegationKey.signedStartsOn?Fa(t.userDelegationKey.signedStartsOn,!1):"",t.userDelegationKey.signedExpiresOn?Fa(t.userDelegationKey.signedExpiresOn,!1):"",t.userDelegationKey.signedService,t.userDelegationKey.signedVersion,e.ipRange?wc(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,o,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType].join("\n"),a=t.computeHMACSHA256(i);return new Rc(e.version,a,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,t.userDelegationKey)}(e,i);if(n>="2015-04-05"){if(void 0!==o)return function(e,t){if(!((e=Ic(e)).identifier||e.permissions&&e.expiresOn))throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when 'identifier' is not provided.");let r,n="c";e.blobName&&(n="b"),e.permissions&&(r=e.blobName?Nc.parse(e.permissions.toString()).toString():Cc.parse(e.permissions.toString()).toString());const o=[r||"",e.startsOn?Fa(e.startsOn,!1):"",e.expiresOn?Fa(e.expiresOn,!1):"",Pc(t.accountName,e.containerName,e.blobName),e.identifier,e.ipRange?wc(e.ipRange):"",e.protocol?e.protocol:"",e.version,e.cacheControl?e.cacheControl:"",e.contentDisposition?e.contentDisposition:"",e.contentEncoding?e.contentEncoding:"",e.contentLanguage?e.contentLanguage:"",e.contentType?e.contentType:""].join("\n"),i=t.computeHMACSHA256(o);return new Rc(e.version,i,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType)}(e,o);throw new RangeError("'version' must be >= '2018-11-09' when generating user delegation SAS using user delegation key.")}throw new RangeError("'version' must be >= '2015-04-05'.")}function Pc(e,t,r){const n=[`/blob/${e}/${t}`];return r&&n.push(`/${r}`),n.join("")}function Ic(e){const t=e.version?e.version:Ca;if(e.snapshotTime&&t<"2018-11-09")throw RangeError("'version' must be >= '2018-11-09' when providing 'snapshotTime'.");if(void 0===e.blobName&&e.snapshotTime)throw RangeError("Must provide 'blobName' when providing 'snapshotTime'.");if(e.versionId&&t<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when providing 'versionId'.");if(void 0===e.blobName&&e.versionId)throw RangeError("Must provide 'blobName' when providing 'versionId'.");if(e.permissions&&e.permissions.setImmutabilityPolicy&&t<"2020-08-04")throw RangeError("'version' must be >= '2020-08-04' when provided 'i' permission.");if(e.permissions&&e.permissions.deleteVersion&&t<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when providing 'x' permission.");if(e.permissions&&e.permissions.permanentDelete&&t<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when providing 'y' permission.");if(e.permissions&&e.permissions.tag&&t<"2019-12-12")throw RangeError("'version' must be >= '2019-12-12' when providing 't' permission.");if(t<"2020-02-10"&&e.permissions&&(e.permissions.move||e.permissions.execute))throw RangeError("'version' must be >= '2020-02-10' when providing the 'm' or 'e' permission.");if(t<"2021-04-10"&&e.permissions&&e.permissions.filterByTags)throw RangeError("'version' must be >= '2021-04-10' when providing the 'f' permission.");if(t<"2020-02-10"&&(e.preauthorizedAgentObjectId||e.correlationId))throw RangeError("'version' must be >= '2020-02-10' when providing 'preauthorizedAgentObjectId' or 'correlationId'.");if(e.encryptionScope&&t<"2020-12-06")throw RangeError("'version' must be >= '2020-12-06' when provided 'encryptionScope' in SAS.");return e.version=t,e}class _c{constructor(e){this.client=e}download(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Oc)}getProperties(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,kc)}delete(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Mc)}undelete(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,qc)}setExpiry(e,t){const r={expiryOptions:e,options:B(t||{})};return this.client.sendOperationRequest(r,zc)}setHttpHeaders(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Bc)}setImmutabilityPolicy(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Hc)}deleteImmutabilityPolicy(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Dc)}setLegalHold(e,t){const r={legalHold:e,options:B(t||{})};return this.client.sendOperationRequest(r,Lc)}setMetadata(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Uc)}acquireLease(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,jc)}releaseLease(e,t){const r={leaseId:e,options:B(t||{})};return this.client.sendOperationRequest(r,Fc)}renewLease(e,t){const r={leaseId:e,options:B(t||{})};return this.client.sendOperationRequest(r,Kc)}changeLease(e,t,r){const n={leaseId:e,proposedLeaseId:t,options:B(r||{})};return this.client.sendOperationRequest(n,Gc)}breakLease(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Vc)}createSnapshot(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,$c)}startCopyFromURL(e,t){const r={copySource:e,options:B(t||{})};return this.client.sendOperationRequest(r,Qc)}copyFromURL(e,t){const r={copySource:e,options:B(t||{})};return this.client.sendOperationRequest(r,Wc)}abortCopyFromURL(e,t){const r={copyId:e,options:B(t||{})};return this.client.sendOperationRequest(r,Yc)}setTier(e,t){const r={tier:e,options:B(t||{})};return this.client.sendOperationRequest(r,Jc)}getAccountInfo(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Xc)}query(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Zc)}getTags(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,el)}setTags(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,tl)}}const Ac=new L(n,!0),Oc={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:qt},206:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:qt},default:{bodyMapper:re,headersMapper:zt}},queryParameters:[Nn,io,ao],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn,so,{parameterPath:["options","rangeGetContentMD5"],mapper:{serializedName:"x-ms-range-get-content-md5",xmlName:"x-ms-range-get-content-md5",type:{name:"Boolean"}}},{parameterPath:["options","rangeGetContentCRC64"],mapper:{serializedName:"x-ms-range-get-content-crc64",xmlName:"x-ms-range-get-content-crc64",type:{name:"Boolean"}}},co,lo,uo,mo,po,ho],isXML:!0,serializer:Ac},kc={path:"/{containerName}/{blob}",httpMethod:"HEAD",responses:{200:{headersMapper:Bt},default:{bodyMapper:re,headersMapper:Ht}},queryParameters:[Nn,io,ao],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn,co,lo,uo,mo,po,ho],isXML:!0,serializer:Ac},Mc={path:"/{containerName}/{blob}",httpMethod:"DELETE",responses:{202:{headersMapper:Dt},default:{bodyMapper:re,headersMapper:Lt}},queryParameters:[Nn,io,ao,{parameterPath:["options","blobDeleteType"],mapper:{serializedName:"deletetype",xmlName:"deletetype",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn,mo,po,ho,{parameterPath:["options","deleteSnapshots"],mapper:{serializedName:"x-ms-delete-snapshots",xmlName:"x-ms-delete-snapshots",type:{name:"Enum",allowedValues:["include","only"]}}}],isXML:!0,serializer:Ac},qc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:Ut},default:{bodyMapper:re,headersMapper:jt}},queryParameters:[Nn,Vn],urlParameters:[bn],headerParameters:[Cn,xn,wn],isXML:!0,serializer:Ac},zc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:Ft},default:{bodyMapper:re,headersMapper:Kt}},queryParameters:[Nn,{parameterPath:"comp",mapper:{defaultValue:"expiry",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,{parameterPath:"expiryOptions",mapper:{serializedName:"x-ms-expiry-option",required:!0,xmlName:"x-ms-expiry-option",type:{name:"String"}}},{parameterPath:["options","expiresOn"],mapper:{serializedName:"x-ms-expiry-time",xmlName:"x-ms-expiry-time",type:{name:"String"}}}],isXML:!0,serializer:Ac},Bc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:Gt},default:{bodyMapper:re,headersMapper:Vt}},queryParameters:[Sn,Nn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn,mo,po,ho,go,fo,yo,bo,vo,So],isXML:!0,serializer:Ac},Hc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:$t},default:{bodyMapper:re,headersMapper:Qt}},queryParameters:[Nn,No],urlParameters:[bn],headerParameters:[Cn,xn,wn,Fn,Co,xo],isXML:!0,serializer:Ac},Dc={path:"/{containerName}/{blob}",httpMethod:"DELETE",responses:{200:{headersMapper:Wt},default:{bodyMapper:re,headersMapper:Yt}},queryParameters:[Nn,No],urlParameters:[bn],headerParameters:[Cn,xn,wn],isXML:!0,serializer:Ac},Lc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:Jt},default:{bodyMapper:re,headersMapper:Xt}},queryParameters:[Nn,{parameterPath:"comp",mapper:{defaultValue:"legalhold",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,{parameterPath:"legalHold",mapper:{serializedName:"x-ms-legal-hold",required:!0,xmlName:"x-ms-legal-hold",type:{name:"Boolean"}}}],isXML:!0,serializer:Ac},Uc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:Zt},default:{bodyMapper:re,headersMapper:er}},queryParameters:[Nn,Kn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Dn,Un,jn,Fn,co,lo,uo,mo,po,ho,wo],isXML:!0,serializer:Ac},jc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tr},default:{bodyMapper:re,headersMapper:rr}},queryParameters:[Nn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,Qn,Wn,Yn,mo,po,ho],isXML:!0,serializer:Ac},Fc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:nr},default:{bodyMapper:re,headersMapper:or}},queryParameters:[Nn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,Jn,Xn,mo,po,ho],isXML:!0,serializer:Ac},Kc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ir},default:{bodyMapper:re,headersMapper:ar}},queryParameters:[Nn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,Xn,Zn,mo,po,ho],isXML:!0,serializer:Ac},Gc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:sr},default:{bodyMapper:re,headersMapper:cr}},queryParameters:[Nn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,Xn,ro,no,mo,po,ho],isXML:!0,serializer:Ac},Vc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:lr},default:{bodyMapper:re,headersMapper:dr}},queryParameters:[Nn,$n],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,eo,to,mo,po,ho],isXML:!0,serializer:Ac},$c={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ur},default:{bodyMapper:re,headersMapper:mr}},queryParameters:[Nn,{parameterPath:"comp",mapper:{defaultValue:"snapshot",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,Dn,Un,jn,Fn,co,lo,uo,mo,po,ho,wo],isXML:!0,serializer:Ac},Qc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:pr},default:{bodyMapper:re,headersMapper:hr}},queryParameters:[Nn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Dn,Un,jn,Fn,mo,po,ho,Co,xo,Eo,Ro,To,Po,Io,_o,Ao,Oo,ko,{parameterPath:["options","sealBlob"],mapper:{serializedName:"x-ms-seal-blob",xmlName:"x-ms-seal-blob",type:{name:"Boolean"}}},Mo],isXML:!0,serializer:Ac},Wc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:gr},default:{bodyMapper:re,headersMapper:fr}},queryParameters:[Nn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Dn,Un,jn,Fn,mo,po,ho,Co,xo,wo,Eo,To,Po,Io,_o,Oo,ko,Mo,{parameterPath:"xMsRequiresSync",mapper:{defaultValue:"true",isConstant:!0,serializedName:"x-ms-requires-sync",type:{name:"String"}}},qo,zo,Bo],isXML:!0,serializer:Ac},Yc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{204:{headersMapper:yr},default:{bodyMapper:re,headersMapper:br}},queryParameters:[Nn,{parameterPath:"comp",mapper:{defaultValue:"copy",isConstant:!0,serializedName:"comp",type:{name:"String"}}},{parameterPath:"copyId",mapper:{serializedName:"copyid",required:!0,xmlName:"copyid",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,{parameterPath:"copyActionAbortConstant",mapper:{defaultValue:"abort",isConstant:!0,serializedName:"x-ms-copy-action",type:{name:"String"}}}],isXML:!0,serializer:Ac},Jc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:vr},202:{headersMapper:vr},default:{bodyMapper:re,headersMapper:Sr}},queryParameters:[Nn,io,ao,{parameterPath:"comp",mapper:{defaultValue:"tier",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,ho,Ro,{parameterPath:"tier",mapper:{serializedName:"x-ms-access-tier",required:!0,xmlName:"x-ms-access-tier",type:{name:"Enum",allowedValues:["P4","P6","P10","P15","P20","P30","P40","P50","P60","P70","P80","Hot","Cool","Archive"]}}}],isXML:!0,serializer:Ac},Xc={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{headersMapper:Nr},default:{bodyMapper:re,headersMapper:Cr}},queryParameters:[Sn,An],urlParameters:[bn],headerParameters:[Cn,wn],isXML:!0,serializer:Ac},Zc={path:"/{containerName}/{blob}",httpMethod:"POST",responses:{200:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:xr},206:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:xr},default:{bodyMapper:re,headersMapper:wr}},requestBody:Ho,queryParameters:[Nn,io,{parameterPath:"comp",mapper:{defaultValue:"query",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[gn,yn,Cn,xn,Un,jn,Fn,co,lo,uo,mo,po,ho],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:Ac},el={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:me,headersMapper:Er},default:{bodyMapper:re,headersMapper:Rr}},queryParameters:[Nn,io,ao,Do],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,ho],isXML:!0,serializer:Ac},tl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{204:{headersMapper:Tr},default:{bodyMapper:re,headersMapper:Pr}},requestBody:Lo,queryParameters:[Nn,ao,Do],urlParameters:[bn],headerParameters:[gn,yn,Cn,xn,Un,ho,Uo,jo],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:Ac};class rl{constructor(e,t){const r=new yc(e.url,e.pipeline.toServiceClientOptions());this._url=e.url,void 0===e.name?(this._isContainer=!0,this._containerOrBlobOperation=new Ni(r)):(this._isContainer=!1,this._containerOrBlobOperation=new _c(r)),t||(t=l()),this._leaseId=t}get leaseId(){return this._leaseId}get url(){return this._url}async acquireLease(e,t={}){var r,n,o,i,a,s;const{span:c,updatedOptions:l}=vc("BlobLeaseClient-acquireLease",t);if(this._isContainer&&((null===(r=t.conditions)||void 0===r?void 0:r.ifMatch)&&(null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)!==Oa||(null===(o=t.conditions)||void 0===o?void 0:o.ifNoneMatch)&&(null===(i=t.conditions)||void 0===i?void 0:i.ifNoneMatch)!==Oa||(null===(a=t.conditions)||void 0===a?void 0:a.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{return await this._containerOrBlobOperation.acquireLease(Object.assign({abortSignal:t.abortSignal,duration:e,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(s=t.conditions)||void 0===s?void 0:s.tagConditions}),proposedLeaseId:this._leaseId},Sc(l)))}catch(e){throw c.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{c.end()}}async changeLease(e,t={}){var r,n,o,i,a,s;const{span:c,updatedOptions:l}=vc("BlobLeaseClient-changeLease",t);if(this._isContainer&&((null===(r=t.conditions)||void 0===r?void 0:r.ifMatch)&&(null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)!==Oa||(null===(o=t.conditions)||void 0===o?void 0:o.ifNoneMatch)&&(null===(i=t.conditions)||void 0===i?void 0:i.ifNoneMatch)!==Oa||(null===(a=t.conditions)||void 0===a?void 0:a.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{const r=await this._containerOrBlobOperation.changeLease(this._leaseId,e,Object.assign({abortSignal:t.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(s=t.conditions)||void 0===s?void 0:s.tagConditions})},Sc(l)));return this._leaseId=e,r}catch(e){throw c.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{c.end()}}async releaseLease(e={}){var t,r,n,o,i,a;const{span:s,updatedOptions:c}=vc("BlobLeaseClient-releaseLease",e);if(this._isContainer&&((null===(t=e.conditions)||void 0===t?void 0:t.ifMatch)&&(null===(r=e.conditions)||void 0===r?void 0:r.ifMatch)!==Oa||(null===(n=e.conditions)||void 0===n?void 0:n.ifNoneMatch)&&(null===(o=e.conditions)||void 0===o?void 0:o.ifNoneMatch)!==Oa||(null===(i=e.conditions)||void 0===i?void 0:i.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{return await this._containerOrBlobOperation.releaseLease(this._leaseId,Object.assign({abortSignal:e.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(a=e.conditions)||void 0===a?void 0:a.tagConditions})},Sc(c)))}catch(e){throw s.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{s.end()}}async renewLease(e={}){var t,r,n,o,i,a;const{span:s,updatedOptions:c}=vc("BlobLeaseClient-renewLease",e);if(this._isContainer&&((null===(t=e.conditions)||void 0===t?void 0:t.ifMatch)&&(null===(r=e.conditions)||void 0===r?void 0:r.ifMatch)!==Oa||(null===(n=e.conditions)||void 0===n?void 0:n.ifNoneMatch)&&(null===(o=e.conditions)||void 0===o?void 0:o.ifNoneMatch)!==Oa||(null===(i=e.conditions)||void 0===i?void 0:i.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{return await this._containerOrBlobOperation.renewLease(this._leaseId,Object.assign({abortSignal:e.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(a=e.conditions)||void 0===a?void 0:a.tagConditions})},Sc(c)))}catch(e){throw s.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{s.end()}}async breakLease(e,t={}){var r,n,o,i,a,s;const{span:c,updatedOptions:l}=vc("BlobLeaseClient-breakLease",t);if(this._isContainer&&((null===(r=t.conditions)||void 0===r?void 0:r.ifMatch)&&(null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)!==Oa||(null===(o=t.conditions)||void 0===o?void 0:o.ifNoneMatch)&&(null===(i=t.conditions)||void 0===i?void 0:i.ifNoneMatch)!==Oa||(null===(a=t.conditions)||void 0===a?void 0:a.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{const r=Object.assign({abortSignal:t.abortSignal,breakPeriod:e,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(s=t.conditions)||void 0===s?void 0:s.tagConditions})},Sc(l));return await this._containerOrBlobOperation.breakLease(r)}catch(e){throw c.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{c.end()}}}class nl{constructor(e,t={}){this.originalResponse=e}get acceptRanges(){return this.originalResponse.acceptRanges}get cacheControl(){return this.originalResponse.cacheControl}get contentDisposition(){return this.originalResponse.contentDisposition}get contentEncoding(){return this.originalResponse.contentEncoding}get contentLanguage(){return this.originalResponse.contentLanguage}get blobSequenceNumber(){return this.originalResponse.blobSequenceNumber}get blobType(){return this.originalResponse.blobType}get contentLength(){return this.originalResponse.contentLength}get contentMD5(){return this.originalResponse.contentMD5}get contentRange(){return this.originalResponse.contentRange}get contentType(){return this.originalResponse.contentType}get copyCompletedOn(){}get copyId(){return this.originalResponse.copyId}get copyProgress(){return this.originalResponse.copyProgress}get copySource(){return this.originalResponse.copySource}get copyStatus(){return this.originalResponse.copyStatus}get copyStatusDescription(){return this.originalResponse.copyStatusDescription}get leaseDuration(){return this.originalResponse.leaseDuration}get leaseState(){return this.originalResponse.leaseState}get leaseStatus(){return this.originalResponse.leaseStatus}get date(){return this.originalResponse.date}get blobCommittedBlockCount(){return this.originalResponse.blobCommittedBlockCount}get etag(){return this.originalResponse.etag}get errorCode(){return this.originalResponse.errorCode}get isServerEncrypted(){return this.originalResponse.isServerEncrypted}get blobContentMD5(){return this.originalResponse.blobContentMD5}get lastModified(){return this.originalResponse.lastModified}get metadata(){return this.originalResponse.metadata}get requestId(){return this.originalResponse.requestId}get clientRequestId(){return this.originalResponse.clientRequestId}get version(){return this.originalResponse.version}get encryptionKeySha256(){return this.originalResponse.encryptionKeySha256}get contentCrc64(){return this.originalResponse.contentCrc64}get blobBody(){throw Error("Quick query in browser is not supported yet.")}get readableStreamBody(){}get _response(){return this.originalResponse._response}}class ol{constructor(e){this.client=e}create(e,t){const r={contentLength:e,options:B(t||{})};return this.client.sendOperationRequest(r,sl)}appendBlock(e,t,r){const n={contentLength:e,body:t,options:B(r||{})};return this.client.sendOperationRequest(n,cl)}appendBlockFromUrl(e,t,r){const n={sourceUrl:e,contentLength:t,options:B(r||{})};return this.client.sendOperationRequest(n,ll)}seal(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,dl)}}const il=new L(n,!0),al=new L(n,!1),sl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:$r},default:{bodyMapper:re,headersMapper:Qr}},queryParameters:[Nn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Mn,Dn,Un,jn,Fn,co,lo,uo,mo,po,ho,go,fo,yo,bo,vo,So,Co,xo,wo,ko,Mo,{parameterPath:"blobType",mapper:{defaultValue:"AppendBlob",isConstant:!0,serializedName:"x-ms-blob-type",type:{name:"String"}}}],isXML:!0,serializer:il},cl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:Wr},default:{bodyMapper:re,headersMapper:Yr}},requestBody:Vo,queryParameters:[Nn,ri],urlParameters:[bn],headerParameters:[Cn,xn,Mn,Un,jn,Fn,co,lo,uo,mo,po,ho,wo,Uo,jo,Go,$o,ni,oi],mediaType:"binary",serializer:al},ll={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:Jr},default:{bodyMapper:re,headersMapper:Xr}},queryParameters:[Nn,ri],urlParameters:[bn],headerParameters:[Cn,xn,wn,Mn,Un,jn,Fn,co,lo,uo,mo,po,ho,wo,To,Po,Io,_o,qo,zo,Uo,Zo,ei,ni,oi,ii],isXML:!0,serializer:il},dl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:Zr},default:{bodyMapper:re,headersMapper:en}},queryParameters:[Nn,{parameterPath:"comp",mapper:{defaultValue:"seal",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn,mo,po,oi],isXML:!0,serializer:il};class ul{constructor(e){this.client=e}upload(e,t,r){const n={contentLength:e,body:t,options:B(r||{})};return this.client.sendOperationRequest(n,hl)}putBlobFromUrl(e,t,r){const n={contentLength:e,copySource:t,options:B(r||{})};return this.client.sendOperationRequest(n,gl)}stageBlock(e,t,r,n){const o={blockId:e,contentLength:t,body:r,options:B(n||{})};return this.client.sendOperationRequest(o,fl)}stageBlockFromURL(e,t,r,n){const o={blockId:e,contentLength:t,sourceUrl:r,options:B(n||{})};return this.client.sendOperationRequest(o,yl)}commitBlockList(e,t){const r={blocks:e,options:B(t||{})};return this.client.sendOperationRequest(r,bl)}getBlockList(e,t){const r={listType:e,options:B(t||{})};return this.client.sendOperationRequest(r,vl)}}const ml=new L(n,!0),pl=new L(n,!1),hl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tn},default:{bodyMapper:re,headersMapper:rn}},requestBody:Vo,queryParameters:[Nn],urlParameters:[bn],headerParameters:[Cn,xn,Mn,Dn,Un,jn,Fn,co,lo,uo,mo,po,ho,go,fo,yo,bo,vo,So,Co,xo,wo,Eo,ko,Mo,Uo,Go,$o,ai],mediaType:"binary",serializer:pl},gl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:nn},default:{bodyMapper:re,headersMapper:on}},queryParameters:[Nn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Mn,Dn,Un,jn,Fn,co,lo,uo,mo,po,ho,go,fo,yo,bo,vo,So,wo,Eo,To,Po,Io,_o,Ao,Oo,ko,qo,zo,Bo,Uo,ai,{parameterPath:["options","copySourceBlobProperties"],mapper:{serializedName:"x-ms-copy-source-blob-properties",xmlName:"x-ms-copy-source-blob-properties",type:{name:"Boolean"}}}],isXML:!0,serializer:ml},fl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:an},default:{bodyMapper:re,headersMapper:sn}},requestBody:Vo,queryParameters:[Nn,si,ci],urlParameters:[bn],headerParameters:[Cn,xn,Mn,Un,co,lo,uo,wo,Uo,jo,Go,$o],mediaType:"binary",serializer:pl},yl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:cn},default:{bodyMapper:re,headersMapper:ln}},queryParameters:[Nn,si,ci],urlParameters:[bn],headerParameters:[Cn,xn,wn,Mn,Un,co,lo,uo,wo,To,Po,Io,_o,qo,zo,Zo,ei,ii],isXML:!0,serializer:ml},bl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:dn},default:{bodyMapper:re,headersMapper:un}},requestBody:li,queryParameters:[Nn,di],urlParameters:[bn],headerParameters:[gn,yn,Cn,xn,Dn,Un,jn,Fn,co,lo,uo,mo,po,ho,go,fo,yo,bo,vo,So,Co,xo,wo,Eo,ko,Mo,Uo,jo],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:ml},vl={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:Ee,headersMapper:mn},default:{bodyMapper:re,headersMapper:pn}},queryParameters:[Nn,io,di,{parameterPath:"listType",mapper:{defaultValue:"committed",serializedName:"blocklisttype",required:!0,xmlName:"blocklisttype",type:{name:"Enum",allowedValues:["committed","uncommitted","all"]}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,ho],isXML:!0,serializer:ml};class Sl{constructor(e){this.client=e}create(e,t,r){const n={contentLength:e,blobContentLength:t,options:B(r||{})};return this.client.sendOperationRequest(n,xl)}uploadPages(e,t,r){const n={contentLength:e,body:t,options:B(r||{})};return this.client.sendOperationRequest(n,wl)}clearPages(e,t){const r={contentLength:e,options:B(t||{})};return this.client.sendOperationRequest(r,El)}uploadPagesFromURL(e,t,r,n,o){const i={sourceUrl:e,sourceRange:t,contentLength:r,range:n,options:B(o||{})};return this.client.sendOperationRequest(i,Rl)}getPageRanges(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Tl)}getPageRangesDiff(e){const t={options:B(e||{})};return this.client.sendOperationRequest(t,Pl)}resize(e,t){const r={blobContentLength:e,options:B(t||{})};return this.client.sendOperationRequest(r,Il)}updateSequenceNumber(e,t){const r={sequenceNumberAction:e,options:B(t||{})};return this.client.sendOperationRequest(r,_l)}copyIncremental(e,t){const r={copySource:e,options:B(t||{})};return this.client.sendOperationRequest(r,Al)}}const Nl=new L(n,!0),Cl=new L(n,!1),xl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:Ir},default:{bodyMapper:re,headersMapper:_r}},queryParameters:[Nn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Mn,Dn,Un,jn,Fn,co,lo,uo,mo,po,ho,go,fo,yo,bo,vo,So,Co,xo,wo,Eo,ko,Mo,{parameterPath:"blobType",mapper:{defaultValue:"PageBlob",isConstant:!0,serializedName:"x-ms-blob-type",type:{name:"String"}}},Fo,Ko],isXML:!0,serializer:Nl},wl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:Ar},default:{bodyMapper:re,headersMapper:Or}},requestBody:Vo,queryParameters:[Nn,Qo],urlParameters:[bn],headerParameters:[Cn,xn,Mn,Un,jn,Fn,so,co,lo,uo,mo,po,ho,wo,Uo,jo,Go,$o,Wo,Yo,Jo,Xo],mediaType:"binary",serializer:Cl},El={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:kr},default:{bodyMapper:re,headersMapper:Mr}},queryParameters:[Nn,Qo],urlParameters:[bn],headerParameters:[Cn,xn,wn,Mn,Un,jn,Fn,so,co,lo,uo,mo,po,ho,wo,Yo,Jo,Xo,{parameterPath:"pageWrite",mapper:{defaultValue:"clear",isConstant:!0,serializedName:"x-ms-page-write",type:{name:"String"}}}],isXML:!0,serializer:Nl},Rl={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:qr},default:{bodyMapper:re,headersMapper:zr}},queryParameters:[Nn,Qo],urlParameters:[bn],headerParameters:[Cn,xn,wn,Mn,Un,jn,Fn,co,lo,uo,mo,po,ho,wo,To,Po,Io,_o,qo,zo,Wo,Yo,Jo,Xo,Zo,{parameterPath:"sourceRange",mapper:{serializedName:"x-ms-source-range",required:!0,xmlName:"x-ms-source-range",type:{name:"String"}}},ei,{parameterPath:"range",mapper:{serializedName:"x-ms-range",required:!0,xmlName:"x-ms-range",type:{name:"String"}}}],isXML:!0,serializer:Nl},Tl={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:Te,headersMapper:Br},default:{bodyMapper:re,headersMapper:Hr}},queryParameters:[Nn,Tn,Pn,io,ti],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn,so,mo,po,ho],isXML:!0,serializer:Nl},Pl={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:Te,headersMapper:Dr},default:{bodyMapper:re,headersMapper:Lr}},queryParameters:[Nn,Tn,Pn,io,ti,{parameterPath:["options","prevsnapshot"],mapper:{serializedName:"prevsnapshot",xmlName:"prevsnapshot",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn,so,mo,po,ho,{parameterPath:["options","prevSnapshotUrl"],mapper:{serializedName:"x-ms-previous-snapshot-url",xmlName:"x-ms-previous-snapshot-url",type:{name:"String"}}}],isXML:!0,serializer:Nl},Il={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:Ur},default:{bodyMapper:re,headersMapper:jr}},queryParameters:[Sn,Nn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn,co,lo,uo,mo,po,ho,wo,Fo],isXML:!0,serializer:Nl},_l={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:Fr},default:{bodyMapper:re,headersMapper:Kr}},queryParameters:[Sn,Nn],urlParameters:[bn],headerParameters:[Cn,xn,wn,Un,jn,Fn,mo,po,ho,Ko,{parameterPath:"sequenceNumberAction",mapper:{serializedName:"x-ms-sequence-number-action",required:!0,xmlName:"x-ms-sequence-number-action",type:{name:"Enum",allowedValues:["max","update","increment"]}}}],isXML:!0,serializer:Nl},Al={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:Gr},default:{bodyMapper:re,headersMapper:Vr}},queryParameters:[Nn,{parameterPath:"comp",mapper:{defaultValue:"incrementalcopy",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[bn],headerParameters:[Cn,xn,wn,jn,Fn,mo,po,ho,Oo],isXML:!0,serializer:Nl};var Ol,kl,Ml;function ql(e){if(void 0!==e)return e}function zl(e,t){if(e&&!t)throw new RangeError("Customer-provided encryption key must be used over HTTPS.");e&&!e.encryptionAlgorithm&&(e.encryptionAlgorithm="AES256")}function Bl(e){const t=(e._response.parsedBody.pageRange||[]).map((e=>({offset:e.start,count:e.end-e.start}))),r=(e._response.parsedBody.clearRange||[]).map((e=>({offset:e.start,count:e.end-e.start})));return Object.assign(Object.assign({},e),{pageRange:t,clearRange:r,_response:Object.assign(Object.assign({},e._response),{parsedBody:{pageRange:t,clearRange:r}})})}!function(e){e.Hot="Hot",e.Cool="Cool",e.Archive="Archive"}(Ol||(Ol={})),function(e){e.P4="P4",e.P6="P6",e.P10="P10",e.P15="P15",e.P20="P20",e.P30="P30",e.P40="P40",e.P50="P50",e.P60="P60",e.P70="P70",e.P80="P80"}(kl||(kl={})),function(e){e.StorageOAuthScopes="https://storage.azure.com/.default",e.DiskComputeOAuthScopes="https://disk.compute.azure.com/.default"}(Ml||(Ml={}));class Hl extends Error{constructor(e){super(e),this.name="PollerStoppedError",Object.setPrototypeOf(this,Hl.prototype)}}class Dl extends Error{constructor(e){super(e),this.name="PollerCancelledError",Object.setPrototypeOf(this,Dl.prototype)}}class Ll extends class{constructor(e){this.stopped=!0,this.pollProgressCallbacks=[],this.operation=e,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),this.promise.catch((()=>{}))}async startPolling(){for(this.stopped&&(this.stopped=!1);!this.isStopped()&&!this.isDone();)await this.poll(),await this.delay()}async pollOnce(e={}){try{this.isDone()||(this.operation=await this.operation.update({abortSignal:e.abortSignal,fireProgress:this.fireProgress.bind(this)}),this.isDone()&&this.resolve&&this.resolve(this.operation.state.result))}catch(e){throw this.operation.state.error=e,this.reject&&this.reject(e),e}}fireProgress(e){for(const t of this.pollProgressCallbacks)t(e)}async cancelOnce(e={}){this.operation=await this.operation.cancel(e),this.reject&&this.reject(new Dl("Poller cancelled"))}poll(e={}){if(!this.pollOncePromise){this.pollOncePromise=this.pollOnce(e);const t=()=>{this.pollOncePromise=void 0};this.pollOncePromise.then(t,t).catch(this.reject)}return this.pollOncePromise}async pollUntilDone(){return this.stopped&&this.startPolling().catch(this.reject),this.promise}onProgress(e){return this.pollProgressCallbacks.push(e),()=>{this.pollProgressCallbacks=this.pollProgressCallbacks.filter((t=>t!==e))}}isDone(){const e=this.operation.state;return Boolean(e.isCompleted||e.isCancelled||e.error)}stopPolling(){this.stopped||(this.stopped=!0,this.reject&&this.reject(new Hl("This poller is already stopped")))}isStopped(){return this.stopped}cancelOperation(e={}){if(this.stopped||(this.stopped=!0),this.cancelPromise){if(e.abortSignal)throw new Error("A cancel request is currently pending")}else this.cancelPromise=this.cancelOnce(e);return this.cancelPromise}getOperationState(){return this.operation.state}getResult(){return this.operation.state.result}toString(){return this.operation.toString()}}{constructor(e){const{blobClient:t,copySource:r,intervalInMs:n=15e3,onProgress:o,resumeFrom:i,startCopyFromURLOptions:a}=e;let s;i&&(s=JSON.parse(i).state),super(Kl(Object.assign(Object.assign({},s),{blobClient:t,copySource:r,startCopyFromURLOptions:a}))),"function"==typeof o&&this.onProgress(o),this.intervalInMs=n}delay(){return _s(this.intervalInMs)}}const Ul=async function(e={}){const t=this.state,{copyId:r}=t;return t.isCompleted?Kl(t):r?(await t.blobClient.abortCopyFromURL(r,{abortSignal:e.abortSignal}),t.isCancelled=!0,Kl(t)):(t.isCancelled=!0,Kl(t))},jl=async function(e={}){const t=this.state,{blobClient:r,copySource:n,startCopyFromURLOptions:o}=t;if(t.isStarted){if(!t.isCompleted)try{const r=await t.blobClient.getProperties({abortSignal:e.abortSignal}),{copyStatus:n,copyProgress:o}=r,i=t.copyProgress;o&&(t.copyProgress=o),"pending"===n&&o!==i&&"function"==typeof e.fireProgress?e.fireProgress(t):"success"===n?(t.result=r,t.isCompleted=!0):"failed"===n&&(t.error=new Error(`Blob copy failed with reason: "${r.copyStatusDescription||"unknown"}"`),t.isCompleted=!0)}catch(e){t.error=e,t.isCompleted=!0}}else{t.isStarted=!0;const e=await r.startCopyFromURL(n,o);t.copyId=e.copyId,"success"===e.copyStatus&&(t.result=e,t.isCompleted=!0)}return Kl(t)},Fl=function(){return JSON.stringify({state:this.state},((e,t)=>{if("blobClient"!==e)return t}))};function Kl(e){return{state:Object.assign({},e),cancel:Ul,toString:Fl,update:jl}}function Gl(e){if(e.offset<0)throw new RangeError("Range.offset cannot be smaller than 0.");if(e.count&&e.count<=0)throw new RangeError("Range.count must be larger than 0. Leave it undefined if you want a range from offset to the end.");return e.count?`bytes=${e.offset}-${e.offset+e.count-1}`:`bytes=${e.offset}-`}var Vl,$l=r(187);!function(e){e[e.Good=0]="Good",e[e.Error=1]="Error"}(Vl||(Vl={}));class Ql{constructor(e=5){if(this.actives=0,this.completed=0,this.offset=0,this.operations=[],this.state=Vl.Good,e<1)throw new RangeError("concurrency must be larger than 0");this.concurrency=e,this.emitter=new $l.EventEmitter}addOperation(e){this.operations.push((async()=>{try{this.actives++,await e(),this.actives--,this.completed++,this.parallelExecute()}catch(e){this.emitter.emit("error",e)}}))}async do(){return 0===this.operations.length?Promise.resolve():(this.parallelExecute(),new Promise(((e,t)=>{this.emitter.on("finish",e),this.emitter.on("error",(e=>{this.state=Vl.Error,t(e)}))})))}nextOperation(){return this.offset<this.operations.length?this.operations[this.offset++]:null}parallelExecute(){if(this.state!==Vl.Error)if(this.completed>=this.operations.length)this.emitter.emit("finish");else for(;this.actives<this.concurrency;){const e=this.nextOperation();if(!e)return;e()}}}class Wl{}class Yl extends bc{constructor(e,t,r,n){let o,i;if(n=n||{},Ms(t))i=e,o=t;else if(c&&t instanceof Bs||t instanceof Ns||k(t))i=e,o=zs(t,n=r);else if(t||"string"==typeof t){if(!t||"string"!=typeof t||!r||"string"!=typeof r)throw new Error("Expecting non-empty strings for containerName and blobName parameters");{const a=t,s=r,l=za(e);if("AccountConnString"===l.kind){if(!c)throw new Error("Account connection string is only supported in Node.js environment");{const e=new Bs(l.accountName,l.accountKey);i=Ba(Ba(l.url,encodeURIComponent(a)),encodeURIComponent(s)),n.proxyOptions||(n.proxyOptions=void l.proxyUri),o=zs(e,n)}}else{if("SASConnString"!==l.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");i=Ba(Ba(l.url,encodeURIComponent(a)),encodeURIComponent(s))+"?"+l.accountSas,o=zs(new Ns,n)}}}else i=e,o=zs(new Ns,n);super(i,o),({blobName:this._name,containerName:this._containerName}=this.getBlobAndContainerNamesFromUrl()),this.blobContext=new _c(this.storageClientContext),this._snapshot=Da(this.url,Ta),this._versionId=Da(this.url,Pa)}get name(){return this._name}get containerName(){return this._containerName}withSnapshot(e){return new Yl(Ha(this.url,Ta,0===e.length?void 0:e),this.pipeline)}withVersion(e){return new Yl(Ha(this.url,Pa,0===e.length?void 0:e),this.pipeline)}getAppendBlobClient(){return new Jl(this.url,this.pipeline)}getBlockBlobClient(){return new Xl(this.url,this.pipeline)}getPageBlobClient(){return new Zl(this.url,this.pipeline)}async download(e=0,t,r={}){var n;r.conditions=r.conditions||{},r.conditions=r.conditions||{},zl(r.customerProvidedKey,this.isHttps);const{span:o,updatedOptions:i}=vc("BlobClient-download",r);try{const a=await this.blobContext.download(Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),requestOptions:{onDownloadProgress:c?void 0:r.onProgress},range:0!==e||t?Gl({offset:e,count:t}):void 0,rangeGetContentMD5:r.rangeGetContentMD5,rangeGetContentCRC64:r.rangeGetContentCrc64,snapshot:r.snapshot,cpkInfo:r.customerProvidedKey},Sc(i))),s=Object.assign(Object.assign({},a),{_response:a._response,objectReplicationDestinationPolicyId:a.objectReplicationPolicyId,objectReplicationSourceProperties:Xa(a.objectReplicationRules)});if(!c)return s;if((void 0===r.maxRetryRequests||r.maxRetryRequests<0)&&(r.maxRetryRequests=5),void 0===a.contentLength)throw new RangeError("File download response doesn't contain valid content length header");if(!a.etag)throw new RangeError("File download response doesn't contain valid etag header");return new 1(s,(async t=>{var n;const o={leaseAccessConditions:r.conditions,modifiedAccessConditions:{ifMatch:r.conditions.ifMatch||a.etag,ifModifiedSince:r.conditions.ifModifiedSince,ifNoneMatch:r.conditions.ifNoneMatch,ifUnmodifiedSince:r.conditions.ifUnmodifiedSince,ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions},range:Gl({count:e+a.contentLength-t,offset:t}),rangeGetContentMD5:r.rangeGetContentMD5,rangeGetContentCRC64:r.rangeGetContentCrc64,snapshot:r.snapshot,cpkInfo:r.customerProvidedKey};return(await this.blobContext.download(Object.assign({abortSignal:r.abortSignal},o))).readableStreamBody}),e,a.contentLength,{maxRetryRequests:r.maxRetryRequests,onProgress:r.onProgress})}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async exists(e={}){const{span:t,updatedOptions:r}=vc("BlobClient-exists",e);try{return zl(e.customerProvidedKey,this.isHttps),await this.getProperties({abortSignal:e.abortSignal,customerProvidedKey:e.customerProvidedKey,conditions:e.conditions,tracingOptions:r.tracingOptions}),!0}catch(e){if(404===e.statusCode)return!1;if(409===e.statusCode&&("BlobUsesCustomerSpecifiedEncryption"===e.details.errorCode||"BlobDoesNotUseCustomerSpecifiedEncryption"===e.details.errorCode))return!0;throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async getProperties(e={}){var t;const{span:r,updatedOptions:n}=vc("BlobClient-getProperties",e);try{e.conditions=e.conditions||{},zl(e.customerProvidedKey,this.isHttps);const o=await this.blobContext.getProperties(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey},Sc(n)));return Object.assign(Object.assign({},o),{_response:o._response,objectReplicationDestinationPolicyId:o.objectReplicationPolicyId,objectReplicationSourceProperties:Xa(o.objectReplicationRules)})}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async delete(e={}){var t;const{span:r,updatedOptions:n}=vc("BlobClient-delete",e);e.conditions=e.conditions||{};try{return await this.blobContext.delete(Object.assign({abortSignal:e.abortSignal,deleteSnapshots:e.deleteSnapshots,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions})},Sc(n)))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async deleteIfExists(e={}){var t,r;const{span:n,updatedOptions:o}=vc("BlobClient-deleteIfExists",e);try{const e=await this.delete(o);return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(e){if("BlobNotFound"===(null===(t=e.details)||void 0===t?void 0:t.errorCode))return n.setStatus({code:z.Qn.ERROR,message:"Expected exception when deleting a blob or snapshot only if it exists."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async undelete(e={}){const{span:t,updatedOptions:r}=vc("BlobClient-undelete",e);try{return await this.blobContext.undelete(Object.assign({abortSignal:e.abortSignal},Sc(r)))}catch(e){throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async setHTTPHeaders(e,t={}){var r;const{span:n,updatedOptions:o}=vc("BlobClient-setHTTPHeaders",t);t.conditions=t.conditions||{};try{return zl(t.customerProvidedKey,this.isHttps),await this.blobContext.setHttpHeaders(Object.assign({abortSignal:t.abortSignal,blobHttpHeaders:e,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions})},Sc(o)))}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async setMetadata(e,t={}){var r;const{span:n,updatedOptions:o}=vc("BlobClient-setMetadata",t);t.conditions=t.conditions||{};try{return zl(t.customerProvidedKey,this.isHttps),await this.blobContext.setMetadata(Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:e,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope},Sc(o)))}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async setTags(e,t={}){var r;const{span:n,updatedOptions:o}=vc("BlobClient-setTags",t);try{return await this.blobContext.setTags(Object.assign(Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions})},Sc(o)),{tags:Wa(e)}))}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async getTags(e={}){var t;const{span:r,updatedOptions:n}=vc("BlobClient-getTags",e);try{const o=await this.blobContext.getTags(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions})},Sc(n)));return Object.assign(Object.assign({},o),{_response:o._response,tags:Ya({blobTagSet:o.blobTagSet})||{}})}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}getBlobLeaseClient(e){return new rl(this,e)}async createSnapshot(e={}){var t;const{span:r,updatedOptions:n}=vc("BlobClient-createSnapshot",e);e.conditions=e.conditions||{};try{return zl(e.customerProvidedKey,this.isHttps),await this.blobContext.createSnapshot(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,metadata:e.metadata,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey,encryptionScope:e.encryptionScope},Sc(n)))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async beginCopyFromURL(e,t={}){const r=new Ll({blobClient:{abortCopyFromURL:(...e)=>this.abortCopyFromURL(...e),getProperties:(...e)=>this.getProperties(...e),startCopyFromURL:(...e)=>this.startCopyFromURL(...e)},copySource:e,intervalInMs:t.intervalInMs,onProgress:t.onProgress,resumeFrom:t.resumeFrom,startCopyFromURLOptions:t});return await r.poll(),r}async abortCopyFromURL(e,t={}){const{span:r,updatedOptions:n}=vc("BlobClient-abortCopyFromURL",t);try{return await this.blobContext.abortCopyFromURL(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions},Sc(n)))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async syncCopyFromURL(e,t={}){var r,n,o;const{span:i,updatedOptions:a}=vc("BlobClient-syncCopyFromURL",t);t.conditions=t.conditions||{},t.sourceConditions=t.sourceConditions||{};try{return await this.blobContext.copyFromURL(e,Object.assign({abortSignal:t.abortSignal,metadata:t.metadata,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:t.sourceConditions.ifMatch,sourceIfModifiedSince:t.sourceConditions.ifModifiedSince,sourceIfNoneMatch:t.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:t.sourceConditions.ifUnmodifiedSince},sourceContentMD5:t.sourceContentMD5,copySourceAuthorization:es(t.sourceAuthorization),blobTagsString:Qa(t.tags),immutabilityPolicyExpiry:null===(n=t.immutabilityPolicy)||void 0===n?void 0:n.expiriesOn,immutabilityPolicyMode:null===(o=t.immutabilityPolicy)||void 0===o?void 0:o.policyMode,legalHold:t.legalHold,encryptionScope:t.encryptionScope,copySourceTags:t.copySourceTags},Sc(a)))}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}async setAccessTier(e,t={}){var r;const{span:n,updatedOptions:o}=vc("BlobClient-setAccessTier",t);try{return await this.blobContext.setTier(ql(e),Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),rehydratePriority:t.rehydratePriority},Sc(o)))}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async downloadToBuffer(e,t,r,n={}){let o,i=0,a=0,s=n;e instanceof Buffer?(o=e,i=t||0,a="number"==typeof r?r:0):(i="number"==typeof e?e:0,a="number"==typeof t?t:0,s=r||{});const{span:c,updatedOptions:l}=vc("BlobClient-downloadToBuffer",s);try{if(s.blockSize||(s.blockSize=0),s.blockSize<0)throw new RangeError("blockSize option must be >= 0");if(0===s.blockSize&&(s.blockSize=wa),i<0)throw new RangeError("offset option must be >= 0");if(a&&a<=0)throw new RangeError("count option must be greater than 0");if(s.conditions||(s.conditions={}),!a){const e=await this.getProperties(Object.assign(Object.assign({},s),{tracingOptions:Object.assign(Object.assign({},s.tracingOptions),Sc(l))}));if(a=e.contentLength-i,a<0)throw new RangeError(`offset ${i} shouldn't be larger than blob size ${e.contentLength}`)}if(!o)try{o=Buffer.alloc(a)}catch(e){throw new Error(`Unable to allocate the buffer of size: ${a}(in bytes). Please try passing your own buffer to the "downloadToBuffer" method or try using other methods like "download" or "downloadToFile".\t ${e.message}`)}if(o.length<a)throw new RangeError(`The buffer's size should be equal to or larger than the request count of bytes: ${a}`);let e=0;const t=new Ql(s.concurrency);for(let r=i;r<i+a;r+=s.blockSize)t.addOperation((async()=>{let t=i+a;r+s.blockSize<t&&(t=r+s.blockSize),(await this.download(r,t-r,{abortSignal:s.abortSignal,conditions:s.conditions,maxRetryRequests:s.maxRetryRequestsPerBlock,customerProvidedKey:s.customerProvidedKey,tracingOptions:Object.assign(Object.assign({},s.tracingOptions),Sc(l))})).readableStreamBody,await void 0,e+=t-r,s.onProgress&&s.onProgress({loadedBytes:e})}));return await t.do(),o}catch(e){throw c.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{c.end()}}async downloadToFile(e,t=0,r,n={}){const{span:o,updatedOptions:i}=vc("BlobClient-downloadToFile",n);try{const e=await this.download(t,r,Object.assign(Object.assign({},n),{tracingOptions:Object.assign(Object.assign({},n.tracingOptions),Sc(i))}));return e.readableStreamBody&&await void e.readableStreamBody,e.blobDownloadStream=void 0,e}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}getBlobAndContainerNamesFromUrl(){let e,t;try{const r=p.parse(this.url);if("blob"===r.getHost().split(".")[1]){const n=r.getPath().match("/([^/]*)(/(.*))?");e=n[1],t=n[3]}else if($a(r)){const n=r.getPath().match("/([^/]*)/([^/]*)(/(.*))?");e=n[2],t=n[4]}else{const n=r.getPath().match("/([^/]*)(/(.*))?");e=n[1],t=n[3]}if(e=decodeURIComponent(e),t=decodeURIComponent(t),t=t.replace(/\\/g,"/"),!e)throw new Error("Provided containerName is invalid.");return{blobName:t,containerName:e}}catch(e){throw new Error("Unable to extract blobName and containerName with provided information.")}}async startCopyFromURL(e,t={}){var r,n,o;const{span:i,updatedOptions:a}=vc("BlobClient-startCopyFromURL",t);t.conditions=t.conditions||{},t.sourceConditions=t.sourceConditions||{};try{return await this.blobContext.startCopyFromURL(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:t.sourceConditions.ifMatch,sourceIfModifiedSince:t.sourceConditions.ifModifiedSince,sourceIfNoneMatch:t.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:t.sourceConditions.ifUnmodifiedSince,sourceIfTags:t.sourceConditions.tagConditions},immutabilityPolicyExpiry:null===(n=t.immutabilityPolicy)||void 0===n?void 0:n.expiriesOn,immutabilityPolicyMode:null===(o=t.immutabilityPolicy)||void 0===o?void 0:o.policyMode,legalHold:t.legalHold,rehydratePriority:t.rehydratePriority,tier:ql(t.tier),blobTagsString:Qa(t.tags),sealBlob:t.sealBlob},Sc(a)))}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}generateSasUrl(e){return new Promise((t=>{if(!(this.credential instanceof Bs))throw new RangeError("Can only generate the SAS when the client is initialized with a shared key credential");const r=Tc(Object.assign({containerName:this._containerName,blobName:this._name,snapshotTime:this._snapshot,versionId:this._versionId},e),this.credential).toString();t(ja(this.url,r))}))}async deleteImmutabilityPolicy(e){const{span:t,updatedOptions:r}=vc("BlobClient-deleteImmutabilityPolicy",e);try{return await this.blobContext.deleteImmutabilityPolicy(Object.assign({abortSignal:null==e?void 0:e.abortSignal},Sc(r)))}catch(e){throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async setImmutabilityPolicy(e,t){const{span:r,updatedOptions:n}=vc("BlobClient-setImmutabilityPolicy",t);try{return await this.blobContext.setImmutabilityPolicy(Object.assign({abortSignal:null==t?void 0:t.abortSignal,immutabilityPolicyExpiry:e.expiriesOn,immutabilityPolicyMode:e.policyMode,modifiedAccessConditions:null==t?void 0:t.modifiedAccessCondition},Sc(n)))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async setLegalHold(e,t){const{span:r,updatedOptions:n}=vc("BlobClient-setLegalHold",t);try{return await this.blobContext.setLegalHold(e,Object.assign({abortSignal:null==t?void 0:t.abortSignal},Sc(n)))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}}class Jl extends Yl{constructor(e,t,r,n){let o,i;if(n=n||{},Ms(t))i=e,o=t;else if(c&&t instanceof Bs||t instanceof Ns||k(t))i=e,o=zs(t,n=r);else if(t||"string"==typeof t){if(!t||"string"!=typeof t||!r||"string"!=typeof r)throw new Error("Expecting non-empty strings for containerName and blobName parameters");{const a=t,s=r,l=za(e);if("AccountConnString"===l.kind){if(!c)throw new Error("Account connection string is only supported in Node.js environment");{const e=new Bs(l.accountName,l.accountKey);i=Ba(Ba(l.url,encodeURIComponent(a)),encodeURIComponent(s)),n.proxyOptions||(n.proxyOptions=void l.proxyUri),o=zs(e,n)}}else{if("SASConnString"!==l.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");i=Ba(Ba(l.url,encodeURIComponent(a)),encodeURIComponent(s))+"?"+l.accountSas,o=zs(new Ns,n)}}}else i=e,o=zs(new Ns,n);super(i,o),this.appendBlobContext=new ol(this.storageClientContext)}withSnapshot(e){return new Jl(Ha(this.url,Ta,0===e.length?void 0:e),this.pipeline)}async create(e={}){var t,r,n;const{span:o,updatedOptions:i}=vc("AppendBlobClient-create",e);e.conditions=e.conditions||{};try{return zl(e.customerProvidedKey,this.isHttps),await this.appendBlobContext.create(0,Object.assign({abortSignal:e.abortSignal,blobHttpHeaders:e.blobHTTPHeaders,leaseAccessConditions:e.conditions,metadata:e.metadata,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey,encryptionScope:e.encryptionScope,immutabilityPolicyExpiry:null===(r=e.immutabilityPolicy)||void 0===r?void 0:r.expiriesOn,immutabilityPolicyMode:null===(n=e.immutabilityPolicy)||void 0===n?void 0:n.policyMode,legalHold:e.legalHold,blobTagsString:Qa(e.tags)},Sc(i)))}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async createIfNotExists(e={}){var t,r;const{span:n,updatedOptions:o}=vc("AppendBlobClient-createIfNotExists",e),i={ifNoneMatch:"*"};try{const e=await this.create(Object.assign(Object.assign({},o),{conditions:i}));return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(e){if("BlobAlreadyExists"===(null===(t=e.details)||void 0===t?void 0:t.errorCode))return n.setStatus({code:z.Qn.ERROR,message:"Expected exception when creating a blob only if it does not already exist."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async seal(e={}){var t;const{span:r,updatedOptions:n}=vc("AppendBlobClient-seal",e);e.conditions=e.conditions||{};try{return await this.appendBlobContext.seal(Object.assign({abortSignal:e.abortSignal,appendPositionAccessConditions:e.conditions,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions})},Sc(n)))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async appendBlock(e,t,r={}){var n;const{span:o,updatedOptions:i}=vc("AppendBlobClient-appendBlock",r);r.conditions=r.conditions||{};try{return zl(r.customerProvidedKey,this.isHttps),await this.appendBlobContext.appendBlock(t,e,Object.assign({abortSignal:r.abortSignal,appendPositionAccessConditions:r.conditions,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),requestOptions:{onUploadProgress:r.onProgress},transactionalContentMD5:r.transactionalContentMD5,transactionalContentCrc64:r.transactionalContentCrc64,cpkInfo:r.customerProvidedKey,encryptionScope:r.encryptionScope},Sc(i)))}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async appendBlockFromURL(e,t,r,n={}){var o;const{span:i,updatedOptions:a}=vc("AppendBlobClient-appendBlockFromURL",n);n.conditions=n.conditions||{},n.sourceConditions=n.sourceConditions||{};try{return zl(n.customerProvidedKey,this.isHttps),await this.appendBlobContext.appendBlockFromUrl(e,0,Object.assign({abortSignal:n.abortSignal,sourceRange:Gl({offset:t,count:r}),sourceContentMD5:n.sourceContentMD5,sourceContentCrc64:n.sourceContentCrc64,leaseAccessConditions:n.conditions,appendPositionAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(o=n.conditions)||void 0===o?void 0:o.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:n.sourceConditions.ifMatch,sourceIfModifiedSince:n.sourceConditions.ifModifiedSince,sourceIfNoneMatch:n.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:n.sourceConditions.ifUnmodifiedSince},copySourceAuthorization:es(n.sourceAuthorization),cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope},Sc(a)))}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}}class Xl extends Yl{constructor(e,t,r,n){let o,i;if(n=n||{},Ms(t))i=e,o=t;else if(c&&t instanceof Bs||t instanceof Ns||k(t))i=e,o=zs(t,n=r);else if(t||"string"==typeof t){if(!t||"string"!=typeof t||!r||"string"!=typeof r)throw new Error("Expecting non-empty strings for containerName and blobName parameters");{const a=t,s=r,l=za(e);if("AccountConnString"===l.kind){if(!c)throw new Error("Account connection string is only supported in Node.js environment");{const e=new Bs(l.accountName,l.accountKey);i=Ba(Ba(l.url,encodeURIComponent(a)),encodeURIComponent(s)),n.proxyOptions||(n.proxyOptions=void l.proxyUri),o=zs(e,n)}}else{if("SASConnString"!==l.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");i=Ba(Ba(l.url,encodeURIComponent(a)),encodeURIComponent(s))+"?"+l.accountSas,o=zs(new Ns,n)}}}else i=e,o=zs(new Ns,n);super(i,o),this.blockBlobContext=new ul(this.storageClientContext),this._blobContext=new _c(this.storageClientContext)}withSnapshot(e){return new Xl(Ha(this.url,Ta,0===e.length?void 0:e),this.pipeline)}async query(e,t={}){var r;zl(t.customerProvidedKey,this.isHttps);const{span:n,updatedOptions:o}=vc("BlockBlobClient-query",t);try{if(!c)throw new Error("This operation currently is only supported in Node.js.");zl(t.customerProvidedKey,this.isHttps);const i=await this._blobContext.query(Object.assign({abortSignal:t.abortSignal,queryRequest:{queryType:"SQL",expression:e,inputSerialization:Ja(t.inputTextConfiguration),outputSerialization:Ja(t.outputTextConfiguration)},leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),cpkInfo:t.customerProvidedKey},Sc(o)));return new nl(i,{abortSignal:t.abortSignal,onProgress:t.onProgress,onError:t.onError})}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async upload(e,t,r={}){var n,o,i;r.conditions=r.conditions||{};const{span:a,updatedOptions:s}=vc("BlockBlobClient-upload",r);try{return zl(r.customerProvidedKey,this.isHttps),await this.blockBlobContext.upload(t,e,Object.assign({abortSignal:r.abortSignal,blobHttpHeaders:r.blobHTTPHeaders,leaseAccessConditions:r.conditions,metadata:r.metadata,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),requestOptions:{onUploadProgress:r.onProgress},cpkInfo:r.customerProvidedKey,encryptionScope:r.encryptionScope,immutabilityPolicyExpiry:null===(o=r.immutabilityPolicy)||void 0===o?void 0:o.expiriesOn,immutabilityPolicyMode:null===(i=r.immutabilityPolicy)||void 0===i?void 0:i.policyMode,legalHold:r.legalHold,tier:ql(r.tier),blobTagsString:Qa(r.tags)},Sc(s)))}catch(e){throw a.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{a.end()}}async syncUploadFromURL(e,t={}){var r,n,o,i,a;t.conditions=t.conditions||{};const{span:s,updatedOptions:c}=vc("BlockBlobClient-syncUploadFromURL",t);try{return zl(t.customerProvidedKey,this.isHttps),await this.blockBlobContext.putBlobFromUrl(0,e,Object.assign(Object.assign(Object.assign({},t),{blobHttpHeaders:t.blobHTTPHeaders,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:t.conditions.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:null===(r=t.sourceConditions)||void 0===r?void 0:r.ifMatch,sourceIfModifiedSince:null===(n=t.sourceConditions)||void 0===n?void 0:n.ifModifiedSince,sourceIfNoneMatch:null===(o=t.sourceConditions)||void 0===o?void 0:o.ifNoneMatch,sourceIfUnmodifiedSince:null===(i=t.sourceConditions)||void 0===i?void 0:i.ifUnmodifiedSince,sourceIfTags:null===(a=t.sourceConditions)||void 0===a?void 0:a.tagConditions},cpkInfo:t.customerProvidedKey,copySourceAuthorization:es(t.sourceAuthorization),tier:ql(t.tier),blobTagsString:Qa(t.tags),copySourceTags:t.copySourceTags}),Sc(c)))}catch(e){throw s.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{s.end()}}async stageBlock(e,t,r,n={}){const{span:o,updatedOptions:i}=vc("BlockBlobClient-stageBlock",n);try{return zl(n.customerProvidedKey,this.isHttps),await this.blockBlobContext.stageBlock(e,r,t,Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,requestOptions:{onUploadProgress:n.onProgress},transactionalContentMD5:n.transactionalContentMD5,transactionalContentCrc64:n.transactionalContentCrc64,cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope},Sc(i)))}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async stageBlockFromURL(e,t,r=0,n,o={}){const{span:i,updatedOptions:a}=vc("BlockBlobClient-stageBlockFromURL",o);try{return zl(o.customerProvidedKey,this.isHttps),await this.blockBlobContext.stageBlockFromURL(e,0,t,Object.assign({abortSignal:o.abortSignal,leaseAccessConditions:o.conditions,sourceContentMD5:o.sourceContentMD5,sourceContentCrc64:o.sourceContentCrc64,sourceRange:0!==r||n?Gl({offset:r,count:n}):void 0,cpkInfo:o.customerProvidedKey,encryptionScope:o.encryptionScope,copySourceAuthorization:es(o.sourceAuthorization)},Sc(a)))}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}async commitBlockList(e,t={}){var r,n,o;t.conditions=t.conditions||{};const{span:i,updatedOptions:a}=vc("BlockBlobClient-commitBlockList",t);try{return zl(t.customerProvidedKey,this.isHttps),await this.blockBlobContext.commitBlockList({latest:e},Object.assign({abortSignal:t.abortSignal,blobHttpHeaders:t.blobHTTPHeaders,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope,immutabilityPolicyExpiry:null===(n=t.immutabilityPolicy)||void 0===n?void 0:n.expiriesOn,immutabilityPolicyMode:null===(o=t.immutabilityPolicy)||void 0===o?void 0:o.policyMode,legalHold:t.legalHold,tier:ql(t.tier),blobTagsString:Qa(t.tags)},Sc(a)))}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}async getBlockList(e,t={}){var r;const{span:n,updatedOptions:o}=vc("BlockBlobClient-getBlockList",t);try{const i=await this.blockBlobContext.getBlockList(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions})},Sc(o)));return i.committedBlocks||(i.committedBlocks=[]),i.uncommittedBlocks||(i.uncommittedBlocks=[]),i}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async uploadData(e,t={}){const{span:r,updatedOptions:n}=vc("BlockBlobClient-uploadData",t);try{if(c){let t;return t=e instanceof Buffer?e:e instanceof ArrayBuffer?Buffer.from(e):Buffer.from(e.buffer,e.byteOffset,e.byteLength),this.uploadSeekableInternal(((e,r)=>t.slice(e,e+r)),t.byteLength,n)}{const t=new Blob([e]);return this.uploadSeekableInternal(((e,r)=>t.slice(e,e+r)),t.size,n)}}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async uploadBrowserData(e,t={}){const{span:r,updatedOptions:n}=vc("BlockBlobClient-uploadBrowserData",t);try{const t=new Blob([e]);return await this.uploadSeekableInternal(((e,r)=>t.slice(e,e+r)),t.size,n)}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async uploadSeekableInternal(e,t,r={}){if(r.blockSize||(r.blockSize=0),r.blockSize<0||r.blockSize>4194304e3)throw new RangeError("blockSize option must be >= 0 and <= 4194304000");if(0===r.maxSingleShotSize||r.maxSingleShotSize||(r.maxSingleShotSize=xa),r.maxSingleShotSize<0||r.maxSingleShotSize>xa)throw new RangeError("maxSingleShotSize option must be >= 0 and <= 268435456");if(0===r.blockSize){if(t>2097152e8)throw new RangeError(`${t} is too larger to upload to a block blob.`);t>r.maxSingleShotSize&&(r.blockSize=Math.ceil(t/5e4),r.blockSize<wa&&(r.blockSize=wa))}r.blobHTTPHeaders||(r.blobHTTPHeaders={}),r.conditions||(r.conditions={});const{span:n,updatedOptions:o}=vc("BlockBlobClient-uploadSeekableInternal",r);try{if(t<=r.maxSingleShotSize)return await this.upload(e(0,t),t,o);const i=Math.floor((t-1)/r.blockSize)+1;if(i>5e4)throw new RangeError("The buffer's size is too big or the BlockSize is too small;the number of blocks must be <= 50000");const a=[],s=l();let c=0;const d=new Ql(r.concurrency);for(let n=0;n<i;n++)d.addOperation((async()=>{const l=Ka(s,n),d=r.blockSize*n,u=(n===i-1?t:d+r.blockSize)-d;a.push(l),await this.stageBlock(l,e(d,u),u,{abortSignal:r.abortSignal,conditions:r.conditions,encryptionScope:r.encryptionScope,tracingOptions:o.tracingOptions}),c+=u,r.onProgress&&r.onProgress({loadedBytes:c})}));return await d.do(),this.commitBlockList(a,o)}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async uploadFile(e,t={}){const{span:r,updatedOptions:n}=vc("BlockBlobClient-uploadFile",t);try{const e=(await void 0).size;return await this.uploadSeekableInternal(((e,t)=>()=>{}),e,Object.assign(Object.assign({},t),{tracingOptions:Object.assign(Object.assign({},t.tracingOptions),Sc(n))}))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async uploadStream(e,t=8388608,r=5,n={}){n.blobHTTPHeaders||(n.blobHTTPHeaders={}),n.conditions||(n.conditions={});const{span:o,updatedOptions:i}=vc("BlockBlobClient-uploadStream",n);try{let a=0;const s=l();let c=0;const d=[],u=new Wl(e,t,r,(async(e,t)=>{const r=Ka(s,a);d.push(r),a++,await this.stageBlock(r,e,t,{conditions:n.conditions,encryptionScope:n.encryptionScope,tracingOptions:i.tracingOptions}),c+=t,n.onProgress&&n.onProgress({loadedBytes:c})}),Math.ceil(r/4*3));return await u.do(),await this.commitBlockList(d,Object.assign(Object.assign({},n),{tracingOptions:Object.assign(Object.assign({},n.tracingOptions),Sc(i))}))}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}}class Zl extends Yl{constructor(e,t,r,n){let o,i;if(n=n||{},Ms(t))i=e,o=t;else if(c&&t instanceof Bs||t instanceof Ns||k(t))i=e,o=zs(t,n=r);else if(t||"string"==typeof t){if(!t||"string"!=typeof t||!r||"string"!=typeof r)throw new Error("Expecting non-empty strings for containerName and blobName parameters");{const a=t,s=r,l=za(e);if("AccountConnString"===l.kind){if(!c)throw new Error("Account connection string is only supported in Node.js environment");{const e=new Bs(l.accountName,l.accountKey);i=Ba(Ba(l.url,encodeURIComponent(a)),encodeURIComponent(s)),n.proxyOptions||(n.proxyOptions=void l.proxyUri),o=zs(e,n)}}else{if("SASConnString"!==l.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");i=Ba(Ba(l.url,encodeURIComponent(a)),encodeURIComponent(s))+"?"+l.accountSas,o=zs(new Ns,n)}}}else i=e,o=zs(new Ns,n);super(i,o),this.pageBlobContext=new Sl(this.storageClientContext)}withSnapshot(e){return new Zl(Ha(this.url,Ta,0===e.length?void 0:e),this.pipeline)}async create(e,t={}){var r,n,o;t.conditions=t.conditions||{};const{span:i,updatedOptions:a}=vc("PageBlobClient-create",t);try{return zl(t.customerProvidedKey,this.isHttps),await this.pageBlobContext.create(0,e,Object.assign({abortSignal:t.abortSignal,blobHttpHeaders:t.blobHTTPHeaders,blobSequenceNumber:t.blobSequenceNumber,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope,immutabilityPolicyExpiry:null===(n=t.immutabilityPolicy)||void 0===n?void 0:n.expiriesOn,immutabilityPolicyMode:null===(o=t.immutabilityPolicy)||void 0===o?void 0:o.policyMode,legalHold:t.legalHold,tier:ql(t.tier),blobTagsString:Qa(t.tags)},Sc(a)))}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}async createIfNotExists(e,t={}){var r,n;const{span:o,updatedOptions:i}=vc("PageBlobClient-createIfNotExists",t);try{const r={ifNoneMatch:"*"},n=await this.create(e,Object.assign(Object.assign({},t),{conditions:r,tracingOptions:i.tracingOptions}));return Object.assign(Object.assign({succeeded:!0},n),{_response:n._response})}catch(e){if("BlobAlreadyExists"===(null===(r=e.details)||void 0===r?void 0:r.errorCode))return o.setStatus({code:z.Qn.ERROR,message:"Expected exception when creating a blob only if it does not already exist."}),Object.assign(Object.assign({succeeded:!1},null===(n=e.response)||void 0===n?void 0:n.parsedHeaders),{_response:e.response});throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async uploadPages(e,t,r,n={}){var o;n.conditions=n.conditions||{};const{span:i,updatedOptions:a}=vc("PageBlobClient-uploadPages",n);try{return zl(n.customerProvidedKey,this.isHttps),await this.pageBlobContext.uploadPages(r,e,Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(o=n.conditions)||void 0===o?void 0:o.tagConditions}),requestOptions:{onUploadProgress:n.onProgress},range:Gl({offset:t,count:r}),sequenceNumberAccessConditions:n.conditions,transactionalContentMD5:n.transactionalContentMD5,transactionalContentCrc64:n.transactionalContentCrc64,cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope},Sc(a)))}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}async uploadPagesFromURL(e,t,r,n,o={}){var i;o.conditions=o.conditions||{},o.sourceConditions=o.sourceConditions||{};const{span:a,updatedOptions:s}=vc("PageBlobClient-uploadPagesFromURL",o);try{return zl(o.customerProvidedKey,this.isHttps),await this.pageBlobContext.uploadPagesFromURL(e,Gl({offset:t,count:n}),0,Gl({offset:r,count:n}),Object.assign({abortSignal:o.abortSignal,sourceContentMD5:o.sourceContentMD5,sourceContentCrc64:o.sourceContentCrc64,leaseAccessConditions:o.conditions,sequenceNumberAccessConditions:o.conditions,modifiedAccessConditions:Object.assign(Object.assign({},o.conditions),{ifTags:null===(i=o.conditions)||void 0===i?void 0:i.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:o.sourceConditions.ifMatch,sourceIfModifiedSince:o.sourceConditions.ifModifiedSince,sourceIfNoneMatch:o.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:o.sourceConditions.ifUnmodifiedSince},cpkInfo:o.customerProvidedKey,encryptionScope:o.encryptionScope,copySourceAuthorization:es(o.sourceAuthorization)},Sc(s)))}catch(e){throw a.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{a.end()}}async clearPages(e=0,t,r={}){var n;r.conditions=r.conditions||{};const{span:o,updatedOptions:i}=vc("PageBlobClient-clearPages",r);try{return await this.pageBlobContext.clearPages(0,Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),range:Gl({offset:e,count:t}),sequenceNumberAccessConditions:r.conditions,cpkInfo:r.customerProvidedKey,encryptionScope:r.encryptionScope},Sc(i)))}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async getPageRanges(e=0,t,r={}){var n;r.conditions=r.conditions||{};const{span:o,updatedOptions:i}=vc("PageBlobClient-getPageRanges",r);try{return await this.pageBlobContext.getPageRanges(Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),range:Gl({offset:e,count:t})},Sc(i))).then(Bl)}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async listPageRangesSegment(e=0,t,r,n={}){var o;const{span:i,updatedOptions:a}=vc("PageBlobClient-getPageRangesSegment",n);try{return await this.pageBlobContext.getPageRanges(Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(o=n.conditions)||void 0===o?void 0:o.tagConditions}),range:Gl({offset:e,count:t}),marker:r,maxPageSize:n.maxPageSize},Sc(a)))}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}listPageRangeItemSegments(e=0,t,r,n={}){return _(this,arguments,(function*(){let o;if(r||void 0===r)do{o=yield I(this.listPageRangesSegment(e,t,r,n)),r=o.continuationToken,yield yield I(yield I(o))}while(r)}))}listPageRangeItems(e=0,t,r={}){return _(this,arguments,(function*(){var n,o;try{for(var i,a=O(this.listPageRangeItemSegments(e,t,void 0,r));!(i=yield I(a.next())).done;){const e=i.value;yield I(yield*A(O(ls(e))))}}catch(e){n={error:e}}finally{try{i&&!i.done&&(o=a.return)&&(yield I(o.call(a)))}finally{if(n)throw n.error}}}))}listPageRanges(e=0,t,r={}){r.conditions=r.conditions||{};const n=this.listPageRangeItems(e,t,r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(n={})=>this.listPageRangeItemSegments(e,t,n.continuationToken,Object.assign({maxPageSize:n.maxPageSize},r))}}async getPageRangesDiff(e,t,r,n={}){var o;n.conditions=n.conditions||{};const{span:i,updatedOptions:a}=vc("PageBlobClient-getPageRangesDiff",n);try{return await this.pageBlobContext.getPageRangesDiff(Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(o=n.conditions)||void 0===o?void 0:o.tagConditions}),prevsnapshot:r,range:Gl({offset:e,count:t})},Sc(a))).then(Bl)}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}async listPageRangesDiffSegment(e,t,r,n,o){var i;const{span:a,updatedOptions:s}=vc("PageBlobClient-getPageRangesDiffSegment",o);try{return await this.pageBlobContext.getPageRangesDiff(Object.assign({abortSignal:null==o?void 0:o.abortSignal,leaseAccessConditions:null==o?void 0:o.conditions,modifiedAccessConditions:Object.assign(Object.assign({},null==o?void 0:o.conditions),{ifTags:null===(i=null==o?void 0:o.conditions)||void 0===i?void 0:i.tagConditions}),prevsnapshot:r,range:Gl({offset:e,count:t}),marker:n,maxPageSize:null==o?void 0:o.maxPageSize},Sc(s)))}catch(e){throw a.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{a.end()}}listPageRangeDiffItemSegments(e,t,r,n,o){return _(this,arguments,(function*(){let i;if(n||void 0===n)do{i=yield I(this.listPageRangesDiffSegment(e,t,r,n,o)),n=i.continuationToken,yield yield I(yield I(i))}while(n)}))}listPageRangeDiffItems(e,t,r,n){return _(this,arguments,(function*(){var o,i;try{for(var a,s=O(this.listPageRangeDiffItemSegments(e,t,r,void 0,n));!(a=yield I(s.next())).done;){const e=a.value;yield I(yield*A(O(ls(e))))}}catch(e){o={error:e}}finally{try{a&&!a.done&&(i=s.return)&&(yield I(i.call(s)))}finally{if(o)throw o.error}}}))}listPageRangesDiff(e,t,r,n={}){n.conditions=n.conditions||{};const o=this.listPageRangeDiffItems(e,t,r,Object.assign({},n));return{next:()=>o.next(),[Symbol.asyncIterator](){return this},byPage:(o={})=>this.listPageRangeDiffItemSegments(e,t,r,o.continuationToken,Object.assign({maxPageSize:o.maxPageSize},n))}}async getPageRangesDiffForManagedDisks(e,t,r,n={}){var o;n.conditions=n.conditions||{};const{span:i,updatedOptions:a}=vc("PageBlobClient-GetPageRangesDiffForManagedDisks",n);try{return await this.pageBlobContext.getPageRangesDiff(Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(o=n.conditions)||void 0===o?void 0:o.tagConditions}),prevSnapshotUrl:r,range:Gl({offset:e,count:t})},Sc(a))).then(Bl)}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}async resize(e,t={}){var r;t.conditions=t.conditions||{};const{span:n,updatedOptions:o}=vc("PageBlobClient-resize",t);try{return await this.pageBlobContext.resize(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),encryptionScope:t.encryptionScope},Sc(o)))}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async updateSequenceNumber(e,t,r={}){var n;r.conditions=r.conditions||{};const{span:o,updatedOptions:i}=vc("PageBlobClient-updateSequenceNumber",r);try{return await this.pageBlobContext.updateSequenceNumber(e,Object.assign({abortSignal:r.abortSignal,blobSequenceNumber:t,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions})},Sc(i)))}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async startCopyIncremental(e,t={}){var r;const{span:n,updatedOptions:o}=vc("PageBlobClient-startCopyIncremental",t);try{return await this.pageBlobContext.copyIncremental(e,Object.assign({abortSignal:t.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions})},Sc(o)))}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}}const ed=": ";class td{constructor(e,t){if(!e||!e.contentType)throw new RangeError("batchResponse is malformed or doesn't contain valid content-type.");if(!t||0===t.size)throw new RangeError("Invalid state: subRequests is not provided or size is 0.");this.batchResponse=e,this.subRequests=t,this.responseBatchBoundary=this.batchResponse.contentType.split("=")[1],this.perResponsePrefix=`--${this.responseBatchBoundary}\r\n`,this.batchResponseEnding=`--${this.responseBatchBoundary}--`}async parseBatchResponse(){if(202!==this.batchResponse._response.status)throw new Error(`Invalid state: batch request failed with status: '${this.batchResponse._response.status}'.`);const e=(await async function(e){return async function(e){const t=new FileReader;return new Promise(((r,n)=>{t.onloadend=e=>{r(e.target.result)},t.onerror=n,t.readAsText(e)}))}(await e.blobBody)}(this.batchResponse)).split(this.batchResponseEnding)[0].split(this.perResponsePrefix).slice(1),t=e.length;if(t!==this.subRequests.size&&1!==t)throw new Error("Invalid state: sub responses' count is not equal to sub requests' count.");const r=new Array(t);let n=0,o=0;for(let i=0;i<t;i++){const t=e[i],a={};a.headers=new aa;const s=t.split("\r\n");let c=!1,l=!1,d=!1,u=-1;for(const e of s)if(c)if(""!==e.trim())if(l)a.bodyAsText||(a.bodyAsText=""),a.bodyAsText+=e;else{if(-1===e.indexOf(ed))throw new Error(`Invalid state: find non-empty line '${e}' without HTTP header delimiter ': '.`);const t=e.split(ed);a.headers.set(t[0],t[1]),"x-ms-error-code"===t[0]&&(a.errorCode=t[1],d=!0)}else l||(l=!0);else if(e.startsWith(_a)&&(u=parseInt(e.split(ed)[1])),e.startsWith("HTTP/1.1")){c=!0;const t=e.split(" ");a.status=parseInt(t[1]),a.statusMessage=t.slice(2).join(" ")}-1!==u&&Number.isInteger(u)&&u>=0&&u<this.subRequests.size&&void 0===r[u]?(a._request=this.subRequests.get(u),r[u]=a):Na.error(`subResponses[${i}] is dropped as the Content-ID is not found or invalid, Content-ID: ${u}`),d?o++:n++}return{subResponses:r,subResponsesSucceededCount:n,subResponsesFailedCount:o}}}var rd;!function(e){e[e.LOCKED=0]="LOCKED",e[e.UNLOCKED=1]="UNLOCKED"}(rd||(rd={}));class nd{static async lock(e){return new Promise((t=>{void 0===this.keys[e]||this.keys[e]===rd.UNLOCKED?(this.keys[e]=rd.LOCKED,t()):this.onUnlockEvent(e,(()=>{this.keys[e]=rd.LOCKED,t()}))}))}static async unlock(e){return new Promise((t=>{this.keys[e]===rd.LOCKED&&this.emitUnlockEvent(e),delete this.keys[e],t()}))}static onUnlockEvent(e,t){void 0===this.listeners[e]?this.listeners[e]=[t]:this.listeners[e].push(t)}static emitUnlockEvent(e){if(void 0!==this.listeners[e]&&this.listeners[e].length>0){const t=this.listeners[e].shift();setImmediate((()=>{t.call(this)}))}}}nd.keys={},nd.listeners={};class od{constructor(){this.batch="batch",this.batchRequest=new id}getMultiPartContentType(){return this.batchRequest.getMultipartContentType()}getHttpRequestBody(){return this.batchRequest.getHttpRequestBody()}getSubRequests(){return this.batchRequest.getSubRequests()}async addSubRequestInternal(e,t){await nd.lock(this.batch);try{this.batchRequest.preAddSubRequest(e),await t(),this.batchRequest.postAddSubRequest(e)}finally{await nd.unlock(this.batch)}}setBatchType(e){if(this.batchType||(this.batchType=e),this.batchType!==e)throw new RangeError(`BlobBatch only supports one operation type per batch and it already is being used for ${this.batchType} operations.`)}async deleteBlob(e,t,r){let n,o;if("string"==typeof e&&(c&&t instanceof Bs||t instanceof Ns||k(t)))n=e,o=t;else{if(!(e instanceof Yl))throw new RangeError("Invalid arguments. Either url and credential, or BlobClient need be provided.");n=e.url,o=e.credential,r=t}r||(r={});const{span:i,updatedOptions:a}=vc("BatchDeleteRequest-addSubRequest",r);try{this.setBatchType("delete"),await this.addSubRequestInternal({url:n,credential:o},(async()=>{await new Yl(n,this.batchRequest.createPipeline(o)).delete(a)}))}catch(e){throw i.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{i.end()}}async setBlobAccessTier(e,t,r,n){let o,i,a;if("string"==typeof e&&(c&&t instanceof Bs||t instanceof Ns||k(t)))o=e,i=t,a=r;else{if(!(e instanceof Yl))throw new RangeError("Invalid arguments. Either url and credential, or BlobClient need be provided.");o=e.url,i=e.credential,a=t,n=r}n||(n={});const{span:s,updatedOptions:l}=vc("BatchSetTierRequest-addSubRequest",n);try{this.setBatchType("setAccessTier"),await this.addSubRequestInternal({url:o,credential:i},(async()=>{await new Yl(o,this.batchRequest.createPipeline(i)).setAccessTier(a,l)}))}catch(e){throw s.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{s.end()}}}class id{constructor(){this.operationCount=0,this.body="";const e=l();this.boundary=`batch_${e}`,this.subRequestPrefix=`--${this.boundary}\r\nContent-Type: application/http\r\nContent-Transfer-Encoding: binary`,this.multipartContentType=`multipart/mixed; boundary=${this.boundary}`,this.batchRequestEnding=`--${this.boundary}--`,this.subRequests=new Map}createPipeline(e){const t=e instanceof Ns,r=3+(t?0:1),n=new Array(r);return n[0]=ea(),n[1]=new ld,t||(n[2]=k(e)?Za(tc(e,Ea),e):e),n[r-1]=new sd(this),new qs(n,{})}appendSubRequestToBody(e){this.body+=[this.subRequestPrefix,`Content-ID: ${this.operationCount}`,"",`${e.method.toString()} ${Ua(e.url)} HTTP/1.1\r\n`].join("\r\n");for(const t of e.headers.headersArray())this.body+=`${t.name}: ${t.value}\r\n`;this.body+="\r\n"}preAddSubRequest(e){if(this.operationCount>=256)throw new RangeError("Cannot exceed 256 sub requests in a single batch");const t=La(e.url);if(!t||""===t)throw new RangeError(`Invalid url for sub request: '${e.url}'`)}postAddSubRequest(e){this.subRequests.set(this.operationCount,e),this.operationCount++}getHttpRequestBody(){return`${this.body}${this.batchRequestEnding}\r\n`}getMultipartContentType(){return this.multipartContentType}getSubRequests(){return this.subRequests}}class ad extends ji{constructor(e,t,r){super(t,r),this.dummyResponse={request:new sa,status:200,headers:new aa},this.batchRequest=e}async sendRequest(e){return await this.batchRequest.appendSubRequestToBody(e),this.dummyResponse}}class sd{constructor(e){this.batchRequest=e}create(e,t){return new ad(this.batchRequest,e,t)}}class cd extends ji{constructor(e,t){super(e,t)}async sendRequest(e){let t="";for(const r of e.headers.headersArray())Ga(r.name,"x-ms-version")&&(t=r.name);return""!==t&&e.headers.remove(t),this._nextPolicy.sendRequest(e)}}class ld{create(e,t){return new cd(e,t)}}class dd{constructor(e,t,r){let n;n=Ms(t)?t:zs(t||new Ns,r);const o=new yc(e,n.toServiceClientOptions()),i=La(e);this.serviceOrContainerContext=i&&"/"!==i?new Ni(o):new ui(o)}createBatch(){return new od}async deleteBlobs(e,t,r){const n=new od;for(const o of e)"string"==typeof o?await n.deleteBlob(o,t,r):await n.deleteBlob(o,t);return this.submitBatch(n)}async setBlobsAccessTier(e,t,r,n){const o=new od;for(const i of e)"string"==typeof i?await o.setBlobAccessTier(i,t,r,n):await o.setBlobAccessTier(i,t,r);return this.submitBatch(o)}async submitBatch(e,t={}){if(!e||0===e.getSubRequests().size)throw new RangeError("Batch request should contain one or more sub requests.");const{span:r,updatedOptions:n}=vc("BlobBatchClient-submitBatch",t);try{const i=e.getHttpRequestBody(),a=await this.serviceOrContainerContext.submitBatch((o=i,new Blob([o]).size),e.getMultiPartContentType(),i,Object.assign(Object.assign({},t),Sc(n))),s=new td(a,e.getSubRequests()),c=await s.parseBatchResponse();return{_response:a._response,contentType:a.contentType,errorCode:a.errorCode,requestId:a.requestId,clientRequestId:a.clientRequestId,version:a.version,subResponses:c.subResponses,subResponsesSucceededCount:c.subResponsesSucceededCount,subResponsesFailedCount:c.subResponsesFailedCount}}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}var o}}class ud extends bc{constructor(e,t,r){let n,o;if(r=r||{},Ms(t))o=e,n=t;else if(c&&t instanceof Bs||t instanceof Ns||k(t))o=e,n=zs(t,r);else if(t||"string"==typeof t){if(!t||"string"!=typeof t)throw new Error("Expecting non-empty strings for containerName parameter");{const i=t,a=za(e);if("AccountConnString"===a.kind){if(!c)throw new Error("Account connection string is only supported in Node.js environment");{const e=new Bs(a.accountName,a.accountKey);o=Ba(a.url,encodeURIComponent(i)),r.proxyOptions||(r.proxyOptions=void a.proxyUri),n=zs(e,r)}}else{if("SASConnString"!==a.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");o=Ba(a.url,encodeURIComponent(i))+"?"+a.accountSas,n=zs(new Ns,r)}}}else o=e,n=zs(new Ns,r);super(o,n),this._containerName=this.getContainerNameFromUrl(),this.containerContext=new Ni(this.storageClientContext)}get containerName(){return this._containerName}async create(e={}){const{span:t,updatedOptions:r}=vc("ContainerClient-create",e);try{return await this.containerContext.create(Object.assign(Object.assign({},e),Sc(r)))}catch(e){throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async createIfNotExists(e={}){var t,r;const{span:n,updatedOptions:o}=vc("ContainerClient-createIfNotExists",e);try{const e=await this.create(o);return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(e){if("ContainerAlreadyExists"===(null===(t=e.details)||void 0===t?void 0:t.errorCode))return n.setStatus({code:z.Qn.ERROR,message:"Expected exception when creating a container only if it does not already exist."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async exists(e={}){const{span:t,updatedOptions:r}=vc("ContainerClient-exists",e);try{return await this.getProperties({abortSignal:e.abortSignal,tracingOptions:r.tracingOptions}),!0}catch(e){if(404===e.statusCode)return t.setStatus({code:z.Qn.ERROR,message:"Expected exception when checking container existence"}),!1;throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}getBlobClient(e){return new Yl(Ba(this.url,encodeURIComponent(e)),this.pipeline)}getAppendBlobClient(e){return new Jl(Ba(this.url,encodeURIComponent(e)),this.pipeline)}getBlockBlobClient(e){return new Xl(Ba(this.url,encodeURIComponent(e)),this.pipeline)}getPageBlobClient(e){return new Zl(Ba(this.url,encodeURIComponent(e)),this.pipeline)}async getProperties(e={}){e.conditions||(e.conditions={});const{span:t,updatedOptions:r}=vc("ContainerClient-getProperties",e);try{return await this.containerContext.getProperties(Object.assign(Object.assign({abortSignal:e.abortSignal},e.conditions),Sc(r)))}catch(e){throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async delete(e={}){e.conditions||(e.conditions={});const{span:t,updatedOptions:r}=vc("ContainerClient-delete",e);try{return await this.containerContext.delete(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:e.conditions},Sc(r)))}catch(e){throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async deleteIfExists(e={}){var t,r;const{span:n,updatedOptions:o}=vc("ContainerClient-deleteIfExists",e);try{const e=await this.delete(o);return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(e){if("ContainerNotFound"===(null===(t=e.details)||void 0===t?void 0:t.errorCode))return n.setStatus({code:z.Qn.ERROR,message:"Expected exception when deleting a container only if it exists."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async setMetadata(e,t={}){if(t.conditions||(t.conditions={}),t.conditions.ifUnmodifiedSince)throw new RangeError("the IfUnmodifiedSince must have their default values because they are ignored by the blob service");const{span:r,updatedOptions:n}=vc("ContainerClient-setMetadata",t);try{return await this.containerContext.setMetadata(Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:e,modifiedAccessConditions:t.conditions},Sc(n)))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async getAccessPolicy(e={}){e.conditions||(e.conditions={});const{span:t,updatedOptions:r}=vc("ContainerClient-getAccessPolicy",e);try{const n=await this.containerContext.getAccessPolicy(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions},Sc(r))),o={_response:n._response,blobPublicAccess:n.blobPublicAccess,date:n.date,etag:n.etag,errorCode:n.errorCode,lastModified:n.lastModified,requestId:n.requestId,clientRequestId:n.clientRequestId,signedIdentifiers:[],version:n.version};for(const e of n){let t;e.accessPolicy&&(t={permissions:e.accessPolicy.permissions},e.accessPolicy.expiresOn&&(t.expiresOn=new Date(e.accessPolicy.expiresOn)),e.accessPolicy.startsOn&&(t.startsOn=new Date(e.accessPolicy.startsOn))),o.signedIdentifiers.push({accessPolicy:t,id:e.id})}return o}catch(e){throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async setAccessPolicy(e,t,r={}){r.conditions=r.conditions||{};const{span:n,updatedOptions:o}=vc("ContainerClient-setAccessPolicy",r);try{const i=[];for(const e of t||[])i.push({accessPolicy:{expiresOn:e.accessPolicy.expiresOn?Fa(e.accessPolicy.expiresOn):"",permissions:e.accessPolicy.permissions,startsOn:e.accessPolicy.startsOn?Fa(e.accessPolicy.startsOn):""},id:e.id});return await this.containerContext.setAccessPolicy(Object.assign({abortSignal:r.abortSignal,access:e,containerAcl:i,leaseAccessConditions:r.conditions,modifiedAccessConditions:r.conditions},Sc(o)))}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}getBlobLeaseClient(e){return new rl(this,e)}async uploadBlockBlob(e,t,r,n={}){const{span:o,updatedOptions:i}=vc("ContainerClient-uploadBlockBlob",n);try{const n=this.getBlockBlobClient(e),a=await n.upload(t,r,i);return{blockBlobClient:n,response:a}}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async deleteBlob(e,t={}){const{span:r,updatedOptions:n}=vc("ContainerClient-deleteBlob",t);try{let o=this.getBlobClient(e);return t.versionId&&(o=o.withVersion(t.versionId)),await o.delete(n)}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async listBlobFlatSegment(e,t={}){const{span:r,updatedOptions:n}=vc("ContainerClient-listBlobFlatSegment",t);try{const i=await this.containerContext.listBlobFlatSegment(Object.assign(Object.assign({marker:e},t),Sc(n)));return i.segment.blobItems=[],void 0!==i.segment.Blob&&(i.segment.blobItems=cs(i.segment.Blob)),Object.assign(Object.assign({},i),{_response:Object.assign(Object.assign({},i._response),{parsedBody:(o=i._response.parsedBody,Object.assign(Object.assign({},o),{segment:{blobItems:o.segment.blobItems.map((e=>Object.assign(Object.assign({},e),{name:ts(e.name)})))}}))}),segment:Object.assign(Object.assign({},i.segment),{blobItems:i.segment.blobItems.map((e=>Object.assign(Object.assign({},e),{name:ts(e.name),tags:Ya(e.blobTags),objectReplicationSourceProperties:Xa(e.objectReplicationMetadata)})))})})}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}var o}async listBlobHierarchySegment(e,t,r={}){var n;const{span:o,updatedOptions:i}=vc("ContainerClient-listBlobHierarchySegment",r);try{const a=await this.containerContext.listBlobHierarchySegment(e,Object.assign(Object.assign({marker:t},r),Sc(i)));return a.segment.blobItems=[],void 0!==a.segment.Blob&&(a.segment.blobItems=cs(a.segment.Blob)),a.segment.blobPrefixes=[],void 0!==a.segment.BlobPrefix&&(a.segment.blobPrefixes=function(e){const t=[];return e instanceof Array?e.forEach((e=>{t.push(as(e))})):t.push(as(e)),t}(a.segment.BlobPrefix)),Object.assign(Object.assign({},a),{_response:Object.assign(Object.assign({},a._response),{parsedBody:rs(a._response.parsedBody)}),segment:Object.assign(Object.assign({},a.segment),{blobItems:a.segment.blobItems.map((e=>Object.assign(Object.assign({},e),{name:ts(e.name),tags:Ya(e.blobTags),objectReplicationSourceProperties:Xa(e.objectReplicationMetadata)}))),blobPrefixes:null===(n=a.segment.blobPrefixes)||void 0===n?void 0:n.map((e=>({name:ts(e.name)})))})})}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}listSegments(e,t={}){return _(this,arguments,(function*(){let r;if(e||void 0===e)do{r=yield I(this.listBlobFlatSegment(e,t)),e=r.continuationToken,yield yield I(yield I(r))}while(e)}))}listItems(e={}){return _(this,arguments,(function*(){var t,r;try{for(var n,o=O(this.listSegments(void 0,e));!(n=yield I(o.next())).done;){const e=n.value;yield I(yield*A(O(e.segment.blobItems)))}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=o.return)&&(yield I(r.call(o)))}finally{if(t)throw t.error}}}))}listBlobsFlat(e={}){const t=[];e.includeCopy&&t.push("copy"),e.includeDeleted&&t.push("deleted"),e.includeMetadata&&t.push("metadata"),e.includeSnapshots&&t.push("snapshots"),e.includeVersions&&t.push("versions"),e.includeUncommitedBlobs&&t.push("uncommittedblobs"),e.includeTags&&t.push("tags"),e.includeDeletedWithVersions&&t.push("deletedwithversions"),e.includeImmutabilityPolicy&&t.push("immutabilitypolicy"),e.includeLegalHold&&t.push("legalhold"),""===e.prefix&&(e.prefix=void 0);const r=Object.assign(Object.assign({},e),t.length>0?{include:t}:{}),n=this.listItems(r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(e={})=>this.listSegments(e.continuationToken,Object.assign({maxPageSize:e.maxPageSize},r))}}listHierarchySegments(e,t,r={}){return _(this,arguments,(function*(){let n;if(t||void 0===t)do{n=yield I(this.listBlobHierarchySegment(e,t,r)),t=n.continuationToken,yield yield I(yield I(n))}while(t)}))}listItemsByHierarchy(e,t={}){return _(this,arguments,(function*(){var r,n;try{for(var o,i=O(this.listHierarchySegments(e,void 0,t));!(o=yield I(i.next())).done;){const e=o.value.segment;if(e.blobPrefixes)for(const t of e.blobPrefixes)yield yield I(Object.assign({kind:"prefix"},t));for(const t of e.blobItems)yield yield I(Object.assign({kind:"blob"},t))}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&(yield I(n.call(i)))}finally{if(r)throw r.error}}}))}listBlobsByHierarchy(e,t={}){if(""===e)throw new RangeError("delimiter should contain one or more characters");const r=[];t.includeCopy&&r.push("copy"),t.includeDeleted&&r.push("deleted"),t.includeMetadata&&r.push("metadata"),t.includeSnapshots&&r.push("snapshots"),t.includeVersions&&r.push("versions"),t.includeUncommitedBlobs&&r.push("uncommittedblobs"),t.includeTags&&r.push("tags"),t.includeDeletedWithVersions&&r.push("deletedwithversions"),t.includeImmutabilityPolicy&&r.push("immutabilitypolicy"),t.includeLegalHold&&r.push("legalhold"),""===t.prefix&&(t.prefix=void 0);const n=Object.assign(Object.assign({},t),r.length>0?{include:r}:{}),o=this.listItemsByHierarchy(e,n);return{next:async()=>o.next(),[Symbol.asyncIterator](){return this},byPage:(t={})=>this.listHierarchySegments(e,t.continuationToken,Object.assign({maxPageSize:t.maxPageSize},n))}}async findBlobsByTagsSegment(e,t,r={}){const{span:n,updatedOptions:o}=vc("ContainerClient-findBlobsByTagsSegment",r);try{const i=await this.containerContext.filterBlobs(Object.assign({abortSignal:r.abortSignal,where:e,marker:t,maxPageSize:r.maxPageSize},Sc(o)));return Object.assign(Object.assign({},i),{_response:i._response,blobs:i.blobs.map((e=>{var t;let r="";return 1===(null===(t=e.tags)||void 0===t?void 0:t.blobTagSet.length)&&(r=e.tags.blobTagSet[0].value),Object.assign(Object.assign({},e),{tags:Ya(e.tags),tagValue:r})}))})}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}findBlobsByTagsSegments(e,t,r={}){return _(this,arguments,(function*(){let n;if(t||void 0===t)do{n=yield I(this.findBlobsByTagsSegment(e,t,r)),n.blobs=n.blobs||[],t=n.continuationToken,yield yield I(n)}while(t)}))}findBlobsByTagsItems(e,t={}){return _(this,arguments,(function*(){var r,n;try{for(var o,i=O(this.findBlobsByTagsSegments(e,void 0,t));!(o=yield I(i.next())).done;){const e=o.value;yield I(yield*A(O(e.blobs)))}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&(yield I(n.call(i)))}finally{if(r)throw r.error}}}))}findBlobsByTags(e,t={}){const r=Object.assign({},t),n=this.findBlobsByTagsItems(e,r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(t={})=>this.findBlobsByTagsSegments(e,t.continuationToken,Object.assign({maxPageSize:t.maxPageSize},r))}}getContainerNameFromUrl(){let e;try{const t=p.parse(this.url);if(e="blob"===t.getHost().split(".")[1]?t.getPath().split("/")[1]:$a(t)?t.getPath().split("/")[2]:t.getPath().split("/")[1],e=decodeURIComponent(e),!e)throw new Error("Provided containerName is invalid.");return e}catch(e){throw new Error("Unable to extract containerName with provided information.")}}generateSasUrl(e){return new Promise((t=>{if(!(this.credential instanceof Bs))throw new RangeError("Can only generate the SAS when the client is initialized with a shared key credential");const r=Tc(Object.assign({containerName:this._containerName},e),this.credential).toString();t(ja(this.url,r))}))}getBlobBatchClient(){return new dd(this.url,this.pipeline)}}class md{constructor(){this.read=!1,this.write=!1,this.delete=!1,this.deleteVersion=!1,this.list=!1,this.add=!1,this.create=!1,this.update=!1,this.process=!1,this.tag=!1,this.filter=!1,this.setImmutabilityPolicy=!1,this.permanentDelete=!1}static parse(e){const t=new md;for(const r of e)switch(r){case"r":t.read=!0;break;case"w":t.write=!0;break;case"d":t.delete=!0;break;case"x":t.deleteVersion=!0;break;case"l":t.list=!0;break;case"a":t.add=!0;break;case"c":t.create=!0;break;case"u":t.update=!0;break;case"p":t.process=!0;break;case"t":t.tag=!0;break;case"f":t.filter=!0;break;case"i":t.setImmutabilityPolicy=!0;break;case"y":t.permanentDelete=!0;break;default:throw new RangeError(`Invalid permission character: ${r}`)}return t}static from(e){const t=new md;return e.read&&(t.read=!0),e.write&&(t.write=!0),e.delete&&(t.delete=!0),e.deleteVersion&&(t.deleteVersion=!0),e.filter&&(t.filter=!0),e.tag&&(t.tag=!0),e.list&&(t.list=!0),e.add&&(t.add=!0),e.create&&(t.create=!0),e.update&&(t.update=!0),e.process&&(t.process=!0),e.setImmutabilityPolicy&&(t.setImmutabilityPolicy=!0),e.permanentDelete&&(t.permanentDelete=!0),t}toString(){const e=[];return this.read&&e.push("r"),this.write&&e.push("w"),this.delete&&e.push("d"),this.deleteVersion&&e.push("x"),this.filter&&e.push("f"),this.tag&&e.push("t"),this.list&&e.push("l"),this.add&&e.push("a"),this.create&&e.push("c"),this.update&&e.push("u"),this.process&&e.push("p"),this.setImmutabilityPolicy&&e.push("i"),this.permanentDelete&&e.push("y"),e.join("")}}class pd{constructor(){this.service=!1,this.container=!1,this.object=!1}static parse(e){const t=new pd;for(const r of e)switch(r){case"s":t.service=!0;break;case"c":t.container=!0;break;case"o":t.object=!0;break;default:throw new RangeError(`Invalid resource type: ${r}`)}return t}toString(){const e=[];return this.service&&e.push("s"),this.container&&e.push("c"),this.object&&e.push("o"),e.join("")}}class hd{constructor(){this.blob=!1,this.file=!1,this.queue=!1,this.table=!1}static parse(e){const t=new hd;for(const r of e)switch(r){case"b":t.blob=!0;break;case"f":t.file=!0;break;case"q":t.queue=!0;break;case"t":t.table=!0;break;default:throw new RangeError(`Invalid service character: ${r}`)}return t}toString(){const e=[];return this.blob&&e.push("b"),this.table&&e.push("t"),this.queue&&e.push("q"),this.file&&e.push("f"),e.join("")}}class gd extends bc{constructor(e,t,r){let n;n=Ms(t)?t:c&&t instanceof Bs||t instanceof Ns||k(t)?zs(t,r):zs(new Ns,r),super(e,n),this.serviceContext=new ui(this.storageClientContext)}static fromConnectionString(e,t){t=t||{};const r=za(e);if("AccountConnString"===r.kind){if(c){const e=new Bs(r.accountName,r.accountKey);t.proxyOptions||(t.proxyOptions=void r.proxyUri);const n=zs(e,t);return new gd(r.url,n)}throw new Error("Account connection string is only supported in Node.js environment")}if("SASConnString"===r.kind){const e=zs(new Ns,t);return new gd(r.url+"?"+r.accountSas,e)}throw new Error("Connection string must be either an Account connection string or a SAS connection string")}getContainerClient(e){return new ud(Ba(this.url,encodeURIComponent(e)),this.pipeline)}async createContainer(e,t={}){const{span:r,updatedOptions:n}=vc("BlobServiceClient-createContainer",t);try{const t=this.getContainerClient(e),o=await t.create(n);return{containerClient:t,containerCreateResponse:o}}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async deleteContainer(e,t={}){const{span:r,updatedOptions:n}=vc("BlobServiceClient-deleteContainer",t);try{const t=this.getContainerClient(e);return await t.delete(n)}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async undeleteContainer(e,t,r={}){const{span:n,updatedOptions:o}=vc("BlobServiceClient-undeleteContainer",r);try{const i=this.getContainerClient(r.destinationContainerName||e),a=new Ni(i.storageClientContext);return{containerClient:i,containerUndeleteResponse:await a.restore(Object.assign({deletedContainerName:e,deletedContainerVersion:t},o))}}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}async renameContainer(e,t,r={}){var n;const{span:o,updatedOptions:i}=vc("BlobServiceClient-renameContainer",r);try{const a=this.getContainerClient(t),s=new Ni(a.storageClientContext);return{containerClient:a,containerRenameResponse:await s.rename(e,Object.assign(Object.assign({},i),{sourceLeaseId:null===(n=r.sourceCondition)||void 0===n?void 0:n.leaseId}))}}catch(e){throw o.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{o.end()}}async getProperties(e={}){const{span:t,updatedOptions:r}=vc("BlobServiceClient-getProperties",e);try{return await this.serviceContext.getProperties(Object.assign({abortSignal:e.abortSignal},Sc(r)))}catch(e){throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async setProperties(e,t={}){const{span:r,updatedOptions:n}=vc("BlobServiceClient-setProperties",t);try{return await this.serviceContext.setProperties(e,Object.assign({abortSignal:t.abortSignal},Sc(n)))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async getStatistics(e={}){const{span:t,updatedOptions:r}=vc("BlobServiceClient-getStatistics",e);try{return await this.serviceContext.getStatistics(Object.assign({abortSignal:e.abortSignal},Sc(r)))}catch(e){throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async getAccountInfo(e={}){const{span:t,updatedOptions:r}=vc("BlobServiceClient-getAccountInfo",e);try{return await this.serviceContext.getAccountInfo(Object.assign({abortSignal:e.abortSignal},Sc(r)))}catch(e){throw t.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{t.end()}}async listContainersSegment(e,t={}){const{span:r,updatedOptions:n}=vc("BlobServiceClient-listContainersSegment",t);try{return await this.serviceContext.listContainersSegment(Object.assign(Object.assign(Object.assign({abortSignal:t.abortSignal,marker:e},t),{include:"string"==typeof t.include?[t.include]:t.include}),Sc(n)))}catch(e){throw r.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{r.end()}}async findBlobsByTagsSegment(e,t,r={}){const{span:n,updatedOptions:o}=vc("BlobServiceClient-findBlobsByTagsSegment",r);try{const i=await this.serviceContext.filterBlobs(Object.assign({abortSignal:r.abortSignal,where:e,marker:t,maxPageSize:r.maxPageSize},Sc(o)));return Object.assign(Object.assign({},i),{_response:i._response,blobs:i.blobs.map((e=>{var t;let r="";return 1===(null===(t=e.tags)||void 0===t?void 0:t.blobTagSet.length)&&(r=e.tags.blobTagSet[0].value),Object.assign(Object.assign({},e),{tags:Ya(e.tags),tagValue:r})}))})}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}findBlobsByTagsSegments(e,t,r={}){return _(this,arguments,(function*(){let n;if(t||void 0===t)do{n=yield I(this.findBlobsByTagsSegment(e,t,r)),n.blobs=n.blobs||[],t=n.continuationToken,yield yield I(n)}while(t)}))}findBlobsByTagsItems(e,t={}){return _(this,arguments,(function*(){var r,n;try{for(var o,i=O(this.findBlobsByTagsSegments(e,void 0,t));!(o=yield I(i.next())).done;){const e=o.value;yield I(yield*A(O(e.blobs)))}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&(yield I(n.call(i)))}finally{if(r)throw r.error}}}))}findBlobsByTags(e,t={}){const r=Object.assign({},t),n=this.findBlobsByTagsItems(e,r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(t={})=>this.findBlobsByTagsSegments(e,t.continuationToken,Object.assign({maxPageSize:t.maxPageSize},r))}}listSegments(e,t={}){return _(this,arguments,(function*(){let r;if(e||void 0===e)do{r=yield I(this.listContainersSegment(e,t)),r.containerItems=r.containerItems||[],e=r.continuationToken,yield yield I(yield I(r))}while(e)}))}listItems(e={}){return _(this,arguments,(function*(){var t,r;try{for(var n,o=O(this.listSegments(void 0,e));!(n=yield I(o.next())).done;){const e=n.value;yield I(yield*A(O(e.containerItems)))}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=o.return)&&(yield I(r.call(o)))}finally{if(t)throw t.error}}}))}listContainers(e={}){""===e.prefix&&(e.prefix=void 0);const t=[];e.includeDeleted&&t.push("deleted"),e.includeMetadata&&t.push("metadata"),e.includeSystem&&t.push("system");const r=Object.assign(Object.assign({},e),t.length>0?{include:t}:{}),n=this.listItems(r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(e={})=>this.listSegments(e.continuationToken,Object.assign({maxPageSize:e.maxPageSize},r))}}async getUserDelegationKey(e,t,r={}){const{span:n,updatedOptions:o}=vc("BlobServiceClient-getUserDelegationKey",r);try{const i=await this.serviceContext.getUserDelegationKey({startsOn:Fa(e,!1),expiresOn:Fa(t,!1)},Object.assign({abortSignal:r.abortSignal},Sc(o))),a={signedObjectId:i.signedObjectId,signedTenantId:i.signedTenantId,signedStartsOn:new Date(i.signedStartsOn),signedExpiresOn:new Date(i.signedExpiresOn),signedService:i.signedService,signedVersion:i.signedVersion,value:i.value};return Object.assign({_response:i._response,requestId:i.requestId,clientRequestId:i.clientRequestId,version:i.version,date:i.date,errorCode:i.errorCode},a)}catch(e){throw n.setStatus({code:z.Qn.ERROR,message:e.message}),e}finally{n.end()}}getBlobBatchClient(){return new dd(this.url,this.pipeline)}generateAccountSasUrl(e,t=md.parse("r"),r="sco",n={}){if(!(this.credential instanceof Bs))throw RangeError("Can only generate the account SAS when the client is initialized with a shared key credential");if(void 0===e){const t=new Date;e=new Date(t.getTime()+36e5)}const o=function(e,t){const r=e.version?e.version:Ca;if(e.permissions&&e.permissions.setImmutabilityPolicy&&r<"2020-08-04")throw RangeError("'version' must be >= '2020-08-04' when provided 'i' permission.");if(e.permissions&&e.permissions.deleteVersion&&r<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when provided 'x' permission.");if(e.permissions&&e.permissions.permanentDelete&&r<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when provided 'y' permission.");if(e.permissions&&e.permissions.tag&&r<"2019-12-12")throw RangeError("'version' must be >= '2019-12-12' when provided 't' permission.");if(e.permissions&&e.permissions.filter&&r<"2019-12-12")throw RangeError("'version' must be >= '2019-12-12' when provided 'f' permission.");if(e.encryptionScope&&r<"2020-12-06")throw RangeError("'version' must be >= '2020-12-06' when provided 'encryptionScope' in SAS.");const n=md.parse(e.permissions.toString()),o=hd.parse(e.services).toString(),i=pd.parse(e.resourceTypes).toString();let a;a=r>="2020-12-06"?[t.accountName,n,o,i,e.startsOn?Fa(e.startsOn,!1):"",Fa(e.expiresOn,!1),e.ipRange?wc(e.ipRange):"",e.protocol?e.protocol:"",r,e.encryptionScope?e.encryptionScope:"",""].join("\n"):[t.accountName,n,o,i,e.startsOn?Fa(e.startsOn,!1):"",Fa(e.expiresOn,!1),e.ipRange?wc(e.ipRange):"",e.protocol?e.protocol:"",r,""].join("\n");const s=t.computeHMACSHA256(a);return new Rc(r,s,n.toString(),o,i,e.protocol,e.startsOn,e.expiresOn,e.ipRange,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,e.encryptionScope)}(Object.assign({permissions:t,expiresOn:e,resourceTypes:r,services:hd.parse("b").toString()},n),this.credential).toString();return ja(this.url,o)}}},909:(e,t,r)=>{"use strict";r.d(t,{Rr:()=>O,Do:()=>me,g4:()=>pe});var n="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},o="1.1.0",i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,a=function(e){var t=new Set([e]),r=new Set,n=e.match(i);if(!n)return function(){return!1};var o=+n[1],a=+n[2],s=+n[3];if(null!=n[4])return function(t){return t===e};function c(e){return r.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(i);if(!n)return c(e);var d=+n[1],u=+n[2],m=+n[3];return null!=n[4]||o!==d?c(e):0===o?a===u&&s<=m?l(e):c(e):a<=u?l(e):c(e)}}(o),s=o.split(".")[0],c=Symbol.for("opentelemetry.js.api."+s),l=n;function d(e,t,r,n){var i;void 0===n&&(n=!1);var a=l[c]=null!==(i=l[c])&&void 0!==i?i:{version:o};if(!n&&a[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(s.stack||s.message),!1}return a.version!==o?(s=new Error("@opentelemetry/api: All API registration versions must match"),r.error(s.stack||s.message),!1):(a[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v1.1.0."),!0)}function u(e){var t,r,n=null===(t=l[c])||void 0===t?void 0:t.version;if(n&&a(n))return null===(r=l[c])||void 0===r?void 0:r[e]}function m(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v1.1.0.");var r=l[c];r&&delete r[e]}var p,h=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return g("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return g("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return g("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return g("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return g("verbose",this._namespace,e)},e}();function g(e,t,r){var n=u("diag");if(n)return r.unshift(t),n[e].apply(n,r)}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(p||(p={}));var f=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=u("diag");if(n)return n[e].apply(n,t)}}var t=this;t.setLogger=function(e,r){var n,o;if(void 0===r&&(r=p.INFO),e===t){var i=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(n=i.stack)&&void 0!==n?n:i.message),!1}var a=u("diag"),s=function(e,t){function r(r,n){var o=t[r];return"function"==typeof o&&e>=n?o.bind(t):function(){}}return e<p.NONE?e=p.NONE:e>p.ALL&&(e=p.ALL),t=t||{},{error:r("error",p.ERROR),warn:r("warn",p.WARN),info:r("info",p.INFO),debug:r("debug",p.DEBUG),verbose:r("verbose",p.VERBOSE)}}(r,e);if(a){var c=null!==(o=(new Error).stack)&&void 0!==o?o:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+c),s.warn("Current logger will overwrite one already registered from "+c)}return d("diag",s,t,!0)},t.disable=function(){m("diag",t)},t.createComponentLogger=function(e){return new h(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),y=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),o=0,i=t;o<i.length;o++){var a=i[o];n._entries.delete(a)}return n},e.prototype.clear=function(){return new e},e}();function b(e){return void 0===e&&(e={}),new y(new Map(Object.entries(e)))}Symbol("BaggageEntryMetadata"),f.instance();var v={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},S={set:function(e,t,r){null!=e&&(e[t]=r)}};function N(e){return Symbol.for(e)}var C,x=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var o=new e(r._currentContext);return o._currentContext.set(t,n),o},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}},w=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},E=function(){function e(){}return e.prototype.active=function(){return x},e.prototype.with=function(e,t,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return t.call.apply(t,w([r],n))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),R=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},T="context",P=new E,I=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return d(T,e,f.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,R([e,t,r],o))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return u(T)||P},e.prototype.disable=function(){this._getContextManager().disable(),m(T,f.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(C||(C={}));var _="0000000000000000",A="00000000000000000000000000000000",O={traceId:A,spanId:_,traceFlags:C.NONE},k=function(){function e(e){void 0===e&&(e=O),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),M=N("OpenTelemetry Context Key SPAN");function q(e){return e.getValue(M)||void 0}function z(e,t){return e.setValue(M,t)}function B(e){return e.deleteValue(M)}function H(e,t){return z(e,new k(t))}function D(e){var t;return null===(t=q(e))||void 0===t?void 0:t.spanContext()}var L=/^([0-9a-f]{32})$/i,U=/^[0-9a-f]{16}$/i;function j(e){return r=e.traceId,L.test(r)&&r!==A&&(t=e.spanId,U.test(t)&&t!==_);var t,r}function F(e){return new k(e)}var K,G,V,$=I.getInstance(),Q=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(Boolean(null==t?void 0:t.root))return new k;var n,o=r&&D(r);return"object"==typeof(n=o)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&j(o)?new k(o):new k},e.prototype.startActiveSpan=function(e,t,r,n){var o,i,a;if(!(arguments.length<2)){2===arguments.length?a=t:3===arguments.length?(o=t,a=r):(o=t,i=r,a=n);var s=null!=i?i:$.active(),c=this.startSpan(e,o,s),l=z(s,c);return $.with(l,a,void 0,c)}},e}(),W=new Q,Y=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):W},e}(),J=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new Q},e}()),X=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var n;return null!==(n=this.getDelegateTracer(e,t,r))&&void 0!==n?n:new Y(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:J},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(K||(K={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(G||(G={})),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(V||(V={}));var Z=new RegExp("^(?:[a-z][_0-9a-z-*/]{0,255}|[a-z0-9][_0-9a-z-*/]{0,240}@[a-z][_0-9a-z-*/]{0,13})$"),ee=/^[ -~]{0,255}[!-~]$/,te=/,|=/;!function(){function e(e){this._internalState=new Map,e&&this._parse(e)}e.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,r){return t.push(r+"="+e.get(r)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var r=t.trim(),n=r.indexOf("=");if(-1!==n){var o=r.slice(0,n),i=r.slice(n+1,t.length);(function(e){return Z.test(e)})(o)&&function(e){return ee.test(e)&&!te.test(e)}(i)&&e.set(o,i)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t}}();var re="trace",ne=function(){function e(){this._proxyTracerProvider=new X,this.wrapSpanContext=F,this.isSpanContextValid=j,this.deleteSpan=B,this.getSpan=q,this.getSpanContext=D,this.setSpan=z,this.setSpanContext=H}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=d(re,this._proxyTracerProvider,f.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return u(re)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){m(re,f.instance()),this._proxyTracerProvider=new X},e}(),oe=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),ie=N("OpenTelemetry Baggage Key");function ae(e){return e.getValue(ie)||void 0}function se(e,t){return e.setValue(ie,t)}function ce(e){return e.deleteValue(ie)}var le="propagation",de=new oe,ue=function(){function e(){this.createBaggage=b,this.getBaggage=ae,this.setBaggage=se,this.deleteBaggage=ce}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return d(le,e,f.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=S),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=v),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){m(le,f.instance())},e.prototype._getGlobalPropagator=function(){return u(le)||de},e}(),me=I.getInstance(),pe=ne.getInstance();ue.getInstance(),f.instance()},742:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=c(e),a=i[0],s=i[1],l=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),d=0,u=s>0?a-4:a;for(r=0;r<u;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[d++]=t>>16&255,l[d++]=t>>8&255,l[d++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[d++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[d++]=t>>8&255,l[d++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,c=n-o;s<c;s+=a)i.push(l(e,s,s+a>c?c:s+a));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=i.length;a<s;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},764:(e,t,r)=>{"use strict";const n=r(742),o=r(645),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=s(r);const o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(W(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const o=function(e){if(c.isBuffer(e)){const t=0|h(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?s(0):m(e):"Buffer"===e.type&&Array.isArray(e.data)?m(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return d(e),s(e<0?0:0|h(e))}function m(e){const t=e.length<0?0:0|h(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function h(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(o)return n?-1:V(e).length;t=(""+t).toLowerCase(),o=!0}}function f(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return _(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,o){let i,a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){let n=-1;for(i=r;i<s;i++)if(l(e,i)===l(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*a}else-1!==n&&(i-=i-n),n=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(l(e,i+n)!==l(t,n)){r=!1;break}if(r)return i}return-1}function S(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let a;for(n>i/2&&(n=i/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(Y(n))return a;e[r+a]=n}return a}function N(e,t,r,n){return Q(V(t,e.length-r),e,r,n)}function C(e,t,r,n){return Q(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return Q($(t),e,r,n)}function w(e,t,r,n){return Q(function(e,t){let r,n,o;const i=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function E(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,a=t>239?4:t>223?3:t>191?2:1;if(o+a<=r){let r,n,s,c;switch(a){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(i=c));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=e[o+1],n=e[o+2],s=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=a}return function(e){const t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=T));return r}(n)}t.kMaxLength=a,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return d(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},c.allocUnsafe=function(e){return u(e)},c.allocUnsafeSlow=function(e){return u(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(W(t,Uint8Array))o+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):f.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,o){if(W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(i,a),l=this.slice(n,o),d=e.slice(t,r);for(let e=0;e<s;++e)if(l[e]!==d[e]){i=l[e],a=d[e];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return N(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function P(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function I(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function _(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=t;n<r;++n)o+=J[e[n]];return o}function A(e,t,r){const n=e.slice(t,r);let o="";for(let e=0;e<n.length-1;e+=2)o+=String.fromCharCode(n[e]+256*n[e+1]);return o}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,r,n,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n,o){j(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function q(e,t,r,n,o){j(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function z(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,i){return t=+t,r>>>=0,i||z(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function H(e,t,r,n,i){return t=+t,r>>>=0,i||z(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X((function(e){F(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=X((function(e){F(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X((function(e){F(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=X((function(e){F(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=X((function(e,t=0){return q(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);k(this,e,t,r,n-1,-n)}let o=0,i=1,a=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);k(this,e,t,r,n-1,-n)}let o=r-1,i=1,a=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=X((function(e,t=0){return q(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return H(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return H(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=c.isBuffer(e)?e:c.from(e,n),a=i.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%a]}return this};const D={};function L(e,t,r){D[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function j(e,t,r,n,o,i){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new D.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){F(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||K(t,e.length-(r+1))}(n,o,i)}function F(e,t){if("number"!=typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function K(e,t,r){if(Math.floor(e)!==e)throw F(e,r),new D.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}L("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),L("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),L("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=U(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=U(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function $(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Q(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function X(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}g(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var o,i,a,l;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=c(e))>0&&a.length>o&&!a.warned){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=a.length,l=d,console&&console.warn&&console.warn(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=d.bind(n);return o.listener=r,n.wrapFn=o,o}function m(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):h(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,d=h(c,l);for(r=0;r<l;++r)n(d[r],this,t)}return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,o,i,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return m(this,e,!0)},i.prototype.rawListeners=function(e){return m(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},645:(e,t)=>{t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,l=c>>1,d=-7,u=r?o-1:0,m=r?-1:1,p=e[t+u];for(u+=m,i=p&(1<<-d)-1,p>>=-d,d+=s;d>0;i=256*i+e[t+u],u+=m,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=n;d>0;a=256*a+e[t+u],u+=m,d-=8);if(0===i)i=1-l;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=l}return(p?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,c,l=8*i-o-1,d=(1<<l)-1,u=d>>1,m=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,h=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+u>=1?m/c:m*Math.pow(2,1-u))*c>=2&&(a++,c/=2),a+u>=d?(s=0,a=d):a+u>=1?(s=(t*c-1)*Math.pow(2,o),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,o),a=0));o>=8;e[r+p]=255&s,p+=h,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;e[r+p]=255&a,p+=h,a/=256,l-=8);e[r+p-h]|=128*g}},717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},567:(e,t,r)=>{e.exports=s;var n=r(717),o=r(473),i=r(885),a="undefined"!=typeof window&&window.MediaSource;function s(e,t){var r=this;if(!(r instanceof s))return new s(e,t);if(!a)throw new Error("web browser lacks MediaSource support");t||(t={}),r._debug=t.debug,r._bufferDuration=t.bufferDuration||60,r._elem=e,r._mediaSource=new a,r._streams=[],r.detailedError=null,r._errorHandler=function(){r._elem.removeEventListener("error",r._errorHandler),r._streams.slice().forEach((function(e){e.destroy(r._elem.error)}))},r._elem.addEventListener("error",r._errorHandler),r._elem.src=window.URL.createObjectURL(r._mediaSource)}function c(e,t){var r=this;if(o.Writable.call(r),r._wrapper=e,r._elem=e._elem,r._mediaSource=e._mediaSource,r._allStreams=e._streams,r._allStreams.push(r),r._bufferDuration=e._bufferDuration,r._sourceBuffer=null,r._debugBuffers=[],r._openHandler=function(){r._onSourceOpen()},r._flowHandler=function(){r._flow()},r._errorHandler=function(e){r.destroyed||r.emit("error",e)},"string"==typeof t)r._type=t,"open"===r._mediaSource.readyState?r._createSourceBuffer():r._mediaSource.addEventListener("sourceopen",r._openHandler);else if(null===t._sourceBuffer)t.destroy(),r._type=t._type,r._mediaSource.addEventListener("sourceopen",r._openHandler);else{if(!t._sourceBuffer)throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");t.destroy(),r._type=t._type,r._sourceBuffer=t._sourceBuffer,r._debugBuffers=t._debugBuffers,r._sourceBuffer.addEventListener("updateend",r._flowHandler),r._sourceBuffer.addEventListener("error",r._errorHandler)}r._elem.addEventListener("timeupdate",r._flowHandler),r.on("error",(function(e){r._wrapper.error(e)})),r.on("finish",(function(){if(!r.destroyed&&(r._finished=!0,r._allStreams.every((function(e){return e._finished})))){r._wrapper._dumpDebugData();try{r._mediaSource.endOfStream()}catch(e){}}}))}s.prototype.createWriteStream=function(e){return new c(this,e)},s.prototype.error=function(e){var t=this;t.detailedError||(t.detailedError=e),t._dumpDebugData();try{t._mediaSource.endOfStream("decode")}catch(e){}try{window.URL.revokeObjectURL(t._elem.src)}catch(e){}},s.prototype._dumpDebugData=function(){var e=this;e._debug&&(e._debug=!1,e._streams.forEach((function(e,t){var r,n,o;r=e._debugBuffers,n="mediasource-stream-"+t,(o=document.createElement("a")).href=window.URL.createObjectURL(new window.Blob(r)),o.download=n,o.click()})))},n(c,o.Writable),c.prototype._onSourceOpen=function(){var e=this;e.destroyed||(e._mediaSource.removeEventListener("sourceopen",e._openHandler),e._createSourceBuffer())},c.prototype.destroy=function(e){var t=this;t.destroyed||(t.destroyed=!0,t._allStreams.splice(t._allStreams.indexOf(t),1),t._mediaSource.removeEventListener("sourceopen",t._openHandler),t._elem.removeEventListener("timeupdate",t._flowHandler),t._sourceBuffer&&(t._sourceBuffer.removeEventListener("updateend",t._flowHandler),t._sourceBuffer.removeEventListener("error",t._errorHandler),"open"===t._mediaSource.readyState&&t._sourceBuffer.abort()),e&&t.emit("error",e),t.emit("close"))},c.prototype._createSourceBuffer=function(){var e=this;if(!e.destroyed)if(a.isTypeSupported(e._type)){if(e._sourceBuffer=e._mediaSource.addSourceBuffer(e._type),e._sourceBuffer.addEventListener("updateend",e._flowHandler),e._sourceBuffer.addEventListener("error",e._errorHandler),e._cb){var t=e._cb;e._cb=null,t()}}else e.destroy(new Error("The provided type is not supported"))},c.prototype._write=function(e,t,r){var n=this;if(!n.destroyed)if(n._sourceBuffer){if(n._sourceBuffer.updating)return r(new Error("Cannot append buffer while source buffer updating"));var o=i(e);n._wrapper._debug&&n._debugBuffers.push(o);try{n._sourceBuffer.appendBuffer(o)}catch(e){return void n.destroy(e)}n._cb=r}else n._cb=function(o){if(o)return r(o);n._write(e,t,r)}},c.prototype._flow=function(){var e=this;if(!e.destroyed&&e._sourceBuffer&&!e._sourceBuffer.updating&&!("open"===e._mediaSource.readyState&&e._getBufferDuration()>e._bufferDuration)&&e._cb){var t=e._cb;e._cb=null,t()}},c.prototype._getBufferDuration=function(){for(var e=this._sourceBuffer.buffered,t=this._elem.currentTime,r=-1,n=0;n<e.length;n++){var o=e.start(n),i=e.end(n)+0;if(o>t)break;(r>=0||t<=i)&&(r=i)}var a=r-t;return a<0&&(a=0),a}},281:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var o=function(e){var t,n;function o(t,n,o){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,o))||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o}(n);o.prototype.name=n.name,o.prototype.code=e,t[e]=o}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var o,i,a,s,c;if("string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(o," ").concat(n(t,"type"));else{var l=("number"!=typeof c&&(c=0),c+".".length>(s=e).length||-1===s.indexOf(".",c)?"argument":"property");a='The "'.concat(e,'" ').concat(l," ").concat(o," ").concat(n(t,"type"))}return a+". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},753:(e,t,r)=>{"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var o=r(481),i=r(229);r(717)(l,o);for(var a=n(i.prototype),s=0;s<a.length;s++){var c=a[s];l.prototype[c]||(l.prototype[c]=i.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||process.nextTick(u,this)}function u(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},725:(e,t,r)=>{"use strict";e.exports=o;var n=r(605);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}r(717)(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},481:(e,t,r)=>{"use strict";var n;e.exports=w,w.ReadableState=x,r(187).EventEmitter;var o,i=function(e,t){return e.listeners(t).length},a=r(503),s=r(764).Buffer,c=r.g.Uint8Array||function(){},l=r(616);o=l&&l.debuglog?l.debuglog("stream"):function(){};var d,u,m,p=r(327),h=r(195),g=r(457).getHighWaterMark,f=r(281).q,y=f.ERR_INVALID_ARG_TYPE,b=f.ERR_STREAM_PUSH_AFTER_EOF,v=f.ERR_METHOD_NOT_IMPLEMENTED,S=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(717)(w,a);var N=h.errorOrDestroy,C=["error","close","destroy","pause","resume"];function x(e,t,o){n=n||r(753),e=e||{},"boolean"!=typeof o&&(o=t instanceof n),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",o),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=r(553).s),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function w(e){if(n=n||r(753),!(this instanceof w))return new w(e);var t=this instanceof n;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function E(e,t,r,n,i){o("readableAddChunk",t);var a,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?I(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,_(e)))}}(e,l);else if(i||(a=function(e,t){var r,n;return n=t,s.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t)),r}(l,t)),a)N(e,a);else if(l.objectMode||t&&t.length>0)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)l.endEmitted?N(e,new S):R(e,l,t,!0);else if(l.ended)N(e,new b);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(t=l.decoder.write(t),l.objectMode||0!==t.length?R(e,l,t,!1):A(e,l)):R(e,l,t,!1)}else n||(l.reading=!1,A(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function R(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&I(e)),A(e,t)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=h.destroy,w.prototype._undestroy=h.undestroy,w.prototype._destroy=function(e,t){t(e)},w.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),E(this,e,t,!1,r)},w.prototype.unshift=function(e){return E(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){d||(d=r(553).s);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,o="";null!==n;)o+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};var T=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function I(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(_,e))}function _(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,z(e)}function A(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function k(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){o("readable nexttick read 0"),e.read(0)}function q(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),z(e),t.flowing&&!t.reading&&e.read(0)}function z(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function H(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(D,t,e))}function D(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?H(this):I(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&H(this),null;var n,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(r,t))),null===(n=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&H(this)),null!==n&&this.emit("data",n),n},w.prototype._read=function(e){N(this,new v("_read()"))},w.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,t);var a=t&&!1===t.end||e===process.stdout||e===process.stderr?h:s;function s(){o("onend"),e.end()}n.endEmitted?process.nextTick(a):r.once("end",a),e.on("unpipe",(function t(i,a){o("onunpipe"),i===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,o("cleanup"),e.removeListener("close",m),e.removeListener("finish",p),e.removeListener("drain",c),e.removeListener("error",u),e.removeListener("unpipe",t),r.removeListener("end",s),r.removeListener("end",h),r.removeListener("data",d),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,z(e))}}(r);e.on("drain",c);var l=!1;function d(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==L(n.pipes,e))&&!l&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function u(t){o("onerror",t),h(),e.removeListener("error",u),0===i(e,"error")&&N(e,t)}function m(){e.removeListener("finish",p),h()}function p(){o("onfinish"),e.removeListener("close",m),h()}function h(){o("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on(t,r)}(e,"error",u),e.once("close",m),e.once("finish",p),e.emit("pipe",r),n.flowing||(o("pipe resume"),r.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var a=L(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},w.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?I(this):n.reading||process.nextTick(M,this))),r},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(k,this),r},w.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(k,this),t},w.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(q,e,t))}(this,e)),e.paused=!1,this},w.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<C.length;a++)e.on(C[a],this.emit.bind(this,C[a]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=r(850)),u(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),w._fromList=B,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(e,t){return void 0===m&&(m=r(167)),m(w,e,t)})},605:(e,t,r)=>{"use strict";e.exports=d;var n=r(281).q,o=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(753);function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?m(this,null,null):this._flush((function(t,r){m(e,t,r)}))}function m(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(717)(d,c),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,r){r(new o("_transform()"))},d.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},229:(e,t,r)=>{"use strict";function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=w,w.WritableState=x;var i,a={deprecate:r(927)},s=r(503),c=r(764).Buffer,l=r.g.Uint8Array||function(){},d=r(195),u=r(457).getHighWaterMark,m=r(281).q,p=m.ERR_INVALID_ARG_TYPE,h=m.ERR_METHOD_NOT_IMPLEMENTED,g=m.ERR_MULTIPLE_CALLBACK,f=m.ERR_STREAM_CANNOT_PIPE,y=m.ERR_STREAM_DESTROYED,b=m.ERR_STREAM_NULL_VALUES,v=m.ERR_STREAM_WRITE_AFTER_END,S=m.ERR_UNKNOWN_ENCODING,N=d.errorOrDestroy;function C(){}function x(e,t,i){o=o||r(753),e=e||{},"boolean"!=typeof i&&(i=t instanceof o),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=u(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(process.nextTick(o,n),process.nextTick(_,e,t),e._writableState.errorEmitted=!0,N(e,n)):(o(n),e._writableState.errorEmitted=!0,N(e,n),_(e,t))}(e,r,n,t,o);else{var i=P(r)||e.destroyed;i||r.corked||r.bufferProcessing||!r.bufferedRequest||T(e,r),n?process.nextTick(R,e,r,i,o):R(e,r,i,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function w(e){var t=this instanceof(o=o||r(753));if(!t&&!i.call(w,this))return new w(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function E(e,t,r,n,o,i,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function R(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),_(e,t)}function T(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var o=t.bufferedRequestCount,i=new Array(o),a=t.corkedRequestsFree;a.entry=r;for(var s=0,c=!0;r;)i[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;i.allBuffers=c,E(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,d=r.encoding,u=r.callback;if(E(e,t,!1,t.objectMode?1:l.length,l,d,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final((function(r){t.pendingcb--,r&&N(e,r),t.prefinished=!0,e.emit("prefinish"),_(e,t)}))}function _(e,t){var r=P(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(I,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(717)(w,s),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===w&&e&&e._writableState instanceof x}})):i=function(e){return e instanceof this},w.prototype.pipe=function(){N(this,new f)},w.prototype.write=function(e,t,r){var n,o=this._writableState,i=!1,a=!o.objectMode&&(n=e,c.isBuffer(n)||n instanceof l);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=C),o.ending?function(e,t){var r=new v;N(e,r),process.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o;return null===r?o=new b:"string"==typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(N(e,o),process.nextTick(n,o),!1)}(this,o,e,r))&&(o.pendingcb++,i=function(e,t,r,n,o,i){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r)),t}(t,n,o);n!==a&&(r=!0,o="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,s,n,o,i);return l}(this,o,a,e,t,r)),i},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},w.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(e,t,r){r(new h("_write()"))},w.prototype._writev=null,w.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,_(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),w.prototype.destroy=d.destroy,w.prototype._undestroy=d.undestroy,w.prototype._destroy=function(e,t){t(e)}},850:(e,t,r)=>{"use strict";var n;function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(610),a=Symbol("lastResolve"),s=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),d=Symbol("lastPromise"),u=Symbol("handlePromise"),m=Symbol("stream");function p(e,t){return{value:e,done:t}}function h(e){var t=e[a];if(null!==t){var r=e[m].read();null!==r&&(e[d]=null,e[a]=null,e[s]=null,t(p(r,!1)))}}function g(e){process.nextTick(h,e)}var f=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(n={get stream(){return this[m]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[m].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[c]?r(e[c]):t(p(void 0,!0))}))}));var r,n=this[d];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(p(void 0,!0)):t[u](r,n)}),n)}}(n,this));else{var o=this[m].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[u])}return this[d]=r,r}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[m].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),f);e.exports=function(e){var t,r=Object.create(y,(o(t={},m,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,u,{value:function(e,t){var n=r[m].read();n?(r[d]=null,r[a]=null,r[s]=null,e(p(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[d]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[d]=null,r[a]=null,r[s]=null,t(e)),void(r[c]=e)}var n=r[a];null!==n&&(r[d]=null,r[a]=null,r[s]=null,n(p(void 0,!0))),r[l]=!0})),e.on("readable",g.bind(null,r)),r}},327:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(764).Buffer,s=r(361).inspect,c=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n,o=a.allocUnsafe(e>>>0),i=this.head,s=0;i;)t=i.data,r=o,n=s,a.prototype.copy.call(t,r,n),s+=i.data.length,i=i.next;return o}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,i=e>o.length?o.length:e;if(i===o.length?n+=o:n+=o.slice(0,e),0==(e-=i)){i===o.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,i),0==(e-=i)){i===o.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(i));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&i(t.prototype,r),e}()},195:e=>{"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var i=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,e)):process.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?i._writableState?i._writableState.errorEmitted?process.nextTick(r,i):(i._writableState.errorEmitted=!0,process.nextTick(t,i,e)):process.nextTick(t,i,e):o?(process.nextTick(r,i),o(e)):process.nextTick(r,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},610:(e,t,r)=>{"use strict";var n=r(281).q.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,r,i){if("function"==typeof r)return e(t,null,r);r||(r={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}(i||o);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||d()},l=t._writableState&&t._writableState.finished,d=function(){s=!1,l=!0,a||i.call(t)},u=t._readableState&&t._readableState.endEmitted,m=function(){a=!1,u=!0,s||i.call(t)},p=function(e){i.call(t,e)},h=function(){var e;return a&&!u?(t._readableState&&t._readableState.ended||(e=new n),i.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new n),i.call(t,e)):void 0},g=function(){t.req.on("finish",d)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",d),t.on("abort",h),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",m),t.on("finish",d),!1!==r.error&&t.on("error",p),t.on("close",h),function(){t.removeListener("complete",d),t.removeListener("abort",h),t.removeListener("request",g),t.req&&t.req.removeListener("finish",d),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",d),t.removeListener("end",m),t.removeListener("error",p),t.removeListener("close",h)}}},167:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},946:(e,t,r)=>{"use strict";var n,o=r(281).q,i=o.ERR_MISSING_ARGS,a=o.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function c(e,t,o,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=r(610)),n(e,{readable:t,writable:o},(function(e){if(e)return i(e);s=!0,i()}));var c=!1;return function(t){if(!s&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new a("pipe"))}}function l(e){e()}function d(e,t){return e.pipe(t)}function u(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=u(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var a=t.map((function(e,r){var i=r<t.length-1;return c(e,i,r>0,(function(e){n||(n=e),e&&a.forEach(l),i||(a.forEach(l),o(n))}))}));return t.reduce(d)}},457:(e,t,r)=>{"use strict";var n=r(281).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,o){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(o?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},503:(e,t,r)=>{e.exports=r(187).EventEmitter},473:(e,t,r)=>{(t=e.exports=r(481)).Stream=t,t.Readable=t,t.Writable=r(229),t.Duplex=r(753),t.Transform=r(605),t.PassThrough=r(725),t.finished=r(610),t.pipeline=r(946)},509:(e,t,r)=>{var n=r(764),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=a),a.prototype=Object.create(o.prototype),i(o,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},553:(e,t,r)=>{"use strict";var n=r(509).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=d,this.end=u,t=3;break;default:return this.write=m,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function m(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=a(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||-2===o?0:(o=a(t[n]))>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||-2===o?0:(o=a(t[n]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},885:(e,t,r)=>{var n=r(764).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,o=0;o<r;o++)t[o]=e[o];return t.buffer}throw new Error("Argument must be a Buffer")}},927:(e,t,r)=>{function n(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},586:(e,t,r)=>{"use strict";var n;r.d(t,{Z:()=>d});var o=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&a.test(e)};for(var c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));const d=function(e,t,r){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r}(n)}},598:()=>{},361:()=>{},616:()=>{}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const{BlobServiceClient:e,StorageSharedKeyCredential:t}=r(584),{DefaultAzureCredential:n}=r(572),o=e.fromConnectionString("DefaultEndpointsProtocol=https;AccountName=sccvideofeasibility2;AccountKey=I/cUcIn+KEseCcl0nveqOHBKOygj81+davq2Hf/rhXcouwSzBmYCSd4dnewM5q85Qcvv33wqB/gG+AStuGcbJA==;EndpointSuffix=core.windows.net");var i=r(567),a=function(e){var t=document.createElement("video");return t.controls=!0,t.autoplay=!0,t.play(),document.body.appendChild(t),t}();!async function(e,t,r){const n=await e.getBlobClient(t);(await n.download()).readableStreamBody.pipe(r),console.log(`download of ${t} succeeded`)}(o.getContainerClient("sccvideo"),"pexels-thirdman-8485240.mp4",new i(a,{extname:".webm"})),a.addEventListener("error",(function(e){}))})()})();